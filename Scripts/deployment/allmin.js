(function(b){var a=/["\\\x00-\x1f\x7f-\x9f]/g,c={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};b.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(a){if(a===null)return"null";var c=typeof a;if(c!=="undefined"){if(c==="number"||c==="boolean")return""+a;if(c==="string")return b.quoteString(a);if(c==="object"){if(typeof a.toJSON==="function")return b.toJSON(a.toJSON());if(a.constructor===Date){var f=a.getUTCMonth()+1,g=a.getUTCDate(),h=a.getUTCFullYear(),
c=a.getUTCHours(),j=a.getUTCMinutes(),k=a.getUTCSeconds(),a=a.getUTCMilliseconds();f<10&&(f="0"+f);g<10&&(g="0"+g);c<10&&(c="0"+c);j<10&&(j="0"+j);k<10&&(k="0"+k);a<100&&(a="0"+a);a<10&&(a="0"+a);return'"'+h+"-"+f+"-"+g+"T"+c+":"+j+":"+k+"."+a+'Z"'}if(a.constructor===Array){f=[];for(g=0;g<a.length;g++)f.push(b.toJSON(a[g])||"null");return"["+f.join(",")+"]"}g=[];for(h in a){c=typeof h;if(c==="number")f='"'+h+'"';else if(c==="string")f=b.quoteString(h);else continue;c=typeof a[h];c==="function"||c===
"undefined"||(c=b.toJSON(a[h]),g.push(f+":"+c))}return"{"+g.join(",")+"}"}}};b.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(a){return eval("("+a+")")};b.secureEvalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(a){if(/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return eval("("+a+")");else throw new SyntaxError("Error parsing JSON, source is not valid.");
};b.quoteString=function(b){return b.match(a)?'"'+b.replace(a,function(a){var b=c[a];if(typeof b==="string")return b;b=a.charCodeAt();return"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16)})+'"':'"'+b+'"'}})(jQuery);window.onerror=function(b,a,c){logError("onerror",b,a,c)};var Config={WS_URL_ROOT:"",FACEBOOK_APPID:"276786905679012",displayFriendsDetals:"0"};function T5Error(b){this.errordesc=b;this.origin="JS"}function logError(b,a,c,d){try{var e="";try{var f=JSON.parse(window.sessionStorage.getItem("facebookuser"));f&&(e="[User is "+f.name+"]")}catch(g){}var h=new T5Error("origin:"+b+"; msg:"+a+e+"; url:"+c+"; lineNo:"+d);$.ajax({url:Config.WS_URL_ROOT+"/Game/LogError",type:"POST",data:JSON.stringify(h),dataType:"json",contentType:"application/json: charset=utf-8",success:function(a){Errorlogged(a)}})}catch(j){}}function Errorlogged(){}
var jQueryBind=jQuery.fn.bind;jQuery.fn.bind=function(b,a,c){!c&&a&&typeof a=="function"&&(c=a,a=null);if(c)var d=c,c=function(){try{return d.apply(this,arguments)}catch(a){logError("BindOverRide",a)}};return jQueryBind.call(this,b,a,c)};var thisFixture=null,LSBound=0,ReTryBetAttempts=0,FriendScoresUpdating=0,LoginClick=0,loginFixtureID=0,listOfPreGameBetScrollers=[],listOfPreGameBetScrollerNames=[],pregamescroller=null,numPreGameplaced=0,lastInteractionTime=null,timeBetweenLightstreamConnections=20,DateHelper=new Date,CreditsWon=0,KeepAliveCount=0,schema=["Ball","EventID","timestamp","Adapter","Admin","FixtureID","HomeScore","AwayScore","EventDescription","EventLogID","EventOdds","UBD","UserID","BD","EventTime","KeepAlive"],LSEngine,
page,group,pushTable,tempArray=[];window.sessionStorage.setItem("listOfFriendsBets",tempArray);window.sessionStorage.setItem("listOfDisplayedEvents",tempArray);window.sessionStorage.setItem("leagueview",null);window.sessionStorage.setItem("listOfFriendsScores",tempArray);window.sessionStorage.setItem("pregamebets",tempArray);window.sessionStorage.setItem("listOfAlreadyReceivedPreGameBetOptionDetails",tempArray);window.sessionStorage.setItem("leaderboard",tempArray);
window.sessionStorage.setItem("Currentbet",null);window.sessionStorage.setItem("tempBet",null);window.sessionStorage.setItem("fbs",0);window.sessionStorage.setItem("LeaderboardLog",null);var FriendsAddedToLSSchema=0;window.sessionStorage.setItem("tempBet",null);function GetRequestParam(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");b=RegExp("[\\?&]"+b+"=([^&#]*)").exec(window.location.href);return b==null?"":b[1]};var uiUser,Currentbet,lastUpdateID,fixture=0,teamPlayingFromLeftToRight,teamPlayingFromRightToLeft;function CastToDecimal(b){try{return(""+b).indexOf(".")>0?b:b.toFixed(2)}catch(a){logError("CastToDecimal",a)}}
function Fixture(){this.fixturename=this.friendbets=this.currenthalf=this.firsthalfleftteam=this.awayteamcolour=this.hometeamcolour=this.justjoinedgame=this.eventodds=this.inplay=this.venue=this.secondhalfstarttime=this.starttime=this.fixture=this.fixtureid=this.hometeam=this.awayteam=this.awayscore=this.homescore=this.activebet=this.events=null;this.numthrowssecondhalf=this.numthrowsfirsthalf=this.numfreessecondhalf=this.numfreesfirsthalf=0}
function GameEvent(){this.eventtime=this.awayscore=this.homescore=this.description=this.eventupdateid=this.fixtureid=this.eventid=null}function Odds(){this.eventid=null;this.odds=0}
function GetGameDetails(b,a){try{if(b>0){var c=-1;fixture=b;if(uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser")))c=uiUser.id,$.ajax({url:Config.WS_URL_ROOT+"/Game/GetGameDetails",type:"POST",data:"fixtureID="+fixture+"&userid="+c,error:function(a,b,c){AjaxFail("GetGameDetails",a,b,c)},success:function(b){a instanceof Function&&a(b)}})}}catch(d){logError("GetGameDetails",d)}}
function HidePitch(){try{$(".headline").hide(),$(".pitch-icons").hide(),$(".pitch").hide(),$(".headline").hide()}catch(b){logError("HidePitch",b)}}function HideNonPitchDisplays(){try{$(".match-notstarted").hide(),$(".halftime").hide(),$(".fulltime").hide()}catch(b){logError("HideNonPitchDisplays",b)}}function ShowPitch(){try{$(".headline").show(),$(".pitch-icons").show(),$(".pitch").show(),$(".headline").show()}catch(b){logError("ShowPitch",b)}}
function GetLastEvent(b){try{$.ajax({url:Config.WS_URL_ROOT+"/Game/GetLastEventFixture",type:"POST",data:"fixtureID="+fixture,error:function(a,b,e){AjaxFail("GetLastEvent",a,b,e)},success:function(a){b instanceof Function&&b(a)}})}catch(a){logError("GetLastEvent",a)}}function DisplayLastEvent(b){try{b.eventid&&b.eventid>0&&UpdateGameEventFromLightStreamer(b.fixtureid,b.eventid,b.eventupdateid,b.homescore,b.awayscore,b.description,new Date(b.eventtime))}catch(a){logError("DisplayLastEvent",a)}}
function GameDetailsComplete(b){try{thisFixture=b;b.currenthalf==-101?(HideNonPitchDisplays(),$(".match-notstarted").show(),$(".match_desc").html("<span class='home_team_desc'>"+b.hometeam+"</span><span class='seperator'>V</span><span class='away_team_desc'>"+b.awayteam+"</span>"),$(".game-desc-image").attr({src:"/Images/game-intro-fix"+b.fixtureid+".png",alt:b.hometeam+" V "+b.awayteam}),$(".game-desc-image").error(function(){$(".game-desc-image").attr({src:"/Images/game-intro.png",alt:b.hometeam+
" V "+b.awayteam})}),HidePitch()):b.currenthalf==-102?(HideNonPitchDisplays(),$(".halftime").show(),$(".match_desc").html("<span class='home_team_desc'>"+b.hometeam+"</span><span class='score_desc'>"+b.homescore+" - "+b.awayscore+"</span><span class='away_team_desc'>"+b.awayteam+"</span>"),$(".game-desc-image").attr({src:"/Images/game-intro-fix"+b.fixtureid+".png",alt:b.hometeam+" V "+b.awayteam}),$(".game-desc-image").error(function(){$(".game-desc-image").attr({src:"/Images/game-intro.png",alt:b.hometeam+
" V "+b.awayteam})}),HidePitch()):b.currenthalf==-103?(HideNonPitchDisplays(),$(".fulltime").show(),$(".match_desc").html("<span class='home_team_desc'>"+b.hometeam+"</span><span class='score_desc'>"+b.homescore+" - "+b.awayscore+"</span><span class='away_team_desc'>"+b.awayteam+"</span>"),$(".game-desc-image").attr({src:"/Images/game-intro-fix"+b.fixtureid+".png",alt:b.hometeam+" V "+b.awayteam}),$(".game-desc-image").error(function(){$(".game-desc-image").attr({src:"/Images/game-intro.png",alt:b.hometeam+
" V "+b.awayteam})}),HidePitch()):populatePitch(b);b.activebet?(Currentbet=b.activebet,window.sessionStorage.setItem("Currentbet",$.toJSON(Currentbet))):(Currentbet=null,window.sessionStorage.setItem("Currentbet",Currentbet));if(b.eventodds)for(var a=0;a<b.eventodds.length;a++)if($("#bubble"+b.eventodds[a].eventid).html(b.eventodds[a].odds+"/1"),Currentbet&&Currentbet.eventid==b.eventodds[a].eventid&&Currentbet.odds!=b.eventodds[a].odds)Currentbet.newodds=b.eventodds[a].odds,window.sessionStorage.setItem("Currentbet",
Currentbet);Currentbet!=null&&Currentbet.status==0&&($("#bubble"+Currentbet.eventid).removeClass("bubble"),$("#bubble"+Currentbet.eventid).addClass("bubble_active"),$("#bubble"+Currentbet.eventid).html(""+Currentbet.amount+""));if(b.events){var c=[],d="";window.sessionStorage.setItem("listOfDisplayedEvents",c);for(var e="",a=0;a<b.events.length;a++)try{b.events[a].description.toLowerCase().indexOf("win")>0||b.events[a].description.toLowerCase().indexOf("won")>0?e=e+"<b class='wintext'>"+b.events[a].description+
"</b><br />":b.events[a].description.toLowerCase().indexOf("lose")>0||b.events[a].description.toLowerCase().indexOf("lost")>0||b.events[a].description.toLowerCase().indexOf("void")>0?e=e+"<b class='losetext'>"+b.events[a].description+"</b><br />":b.events[a].description.toLowerCase().indexOf("bet")>0?e=e+"<b class='bettext'>"+b.events[a].description+"</b><br />":b.events[a].description.toLowerCase().indexOf("invite")>0?b.events[a].description.toLowerCase().indexOf("accept_0")>0&&(d+=b.events[a].description):
e=e+b.events[a].description+"<br />",c.push(b.events[a].eventupdateid)}catch(f){}window.sessionStorage.setItem("listOfDisplayedEvents",$.toJSON(c));$(".GameFeedInfo").html(e);refreshScroller(GameFeedScroller,"GameFeedInfo");$("#MyleagueInvites").html(d);refreshScroller(leaderboardScroller,"MyleagueInvites")}b.justjoinedgame>0?(NotifyFriendsThatUserHasJoinedGame(friendsNotified),ViewLeagues(1)):GetPreGameBetDetails(!0);setTimeout("GetLastEvent(DisplayLastEvent)",3E3)}catch(g){logError("GameDetailsComplete",
g)}}
function populatePitch(b){try{var a="",c,d,e,f,g,h,j,k;b.currenthalf==1?b.firsthalfleftteam==b.hometeam?(teamPlayingFromLeftToRight=b.hometeam,teamPlayingFromRightToLeft=b.awayteam,j=b.hometeamcolour,k=b.awayteamcolour):(teamPlayingFromLeftToRight=b.awayteam,teamPlayingFromRightToLeft=b.hometeam,k=b.hometeamcolour,j=b.awayteamcolour):b.firsthalfleftteam==b.hometeam?(teamPlayingFromLeftToRight=b.awayteam,teamPlayingFromRightToLeft=b.hometeam,k=b.hometeamcolour,j=b.awayteamcolour):(teamPlayingFromLeftToRight=b.hometeam,
teamPlayingFromRightToLeft=b.awayteam,j=b.hometeamcolour,k=b.awayteamcolour);$("#home_team").html(teamPlayingFromLeftToRight);$("#away_team").html(teamPlayingFromRightToLeft);teamPlayingFromLeftToRight==b.hometeam?(c=1,d=4,e=5,f=3,g=6,h=7,RightSaveEventID=17,LeftSaveEventID=18,$("#home_score").html(b.homescore),$("#away_score").html(b.awayscore)):(c=3,d=6,e=7,f=1,g=4,h=5,LeftSaveEventID=17,RightSaveEventID=18,$("#home_score").html(b.awayscore),$("#away_score").html(b.homescore));a=a+'<div class="home-corner icon-corner-'+
k+'" onClick="betpupup(\'CORNER FOR '+teamPlayingFromRightToLeft+"', "+c+');"></div><div id="bubble'+c+'" class="bubble-home-corner bubble"></div>';a=a+'<div class="home-goal icon-goal-'+k+'" onClick="betpupup(\'GOAL FOR '+teamPlayingFromRightToLeft+"', "+d+');"></div><div id="bubble'+d+'" class="bubble-home-goal bubble"></div>';a=a+'<div class="home-wide icon-wide-'+k+'"  onClick="betpupup(\'WIDE BY '+teamPlayingFromRightToLeft+"', "+e+');"></div><div id="bubble'+e+'" class="bubble-home-wide bubble"></div>';
a=a+'<div class="away-save icon-save-'+j+'"  onClick="betpupup(\'SAVE BY '+teamPlayingFromLeftToRight+"', "+RightSaveEventID+');"></div><div id="bubble'+RightSaveEventID+'" class="bubble-away-save bubble"></div>';a+='<div class="gen-free icon-free-gen" onClick="betpupup(\'FREEKICK\', 19);"></div><div id="bubble19" class="bubble-free bubble"></div>';a+='<div class="gen-throw icon-throw-gen" onClick="betpupup(\'THROWIN\', 20);"></div><div id="bubble20" class="bubble-throw bubble"></div>';a=a+'<div class="home-save icon-save-'+
k+'"  onClick="betpupup(\'SAVE BY '+teamPlayingFromRightToLeft+"', "+LeftSaveEventID+');"></div><div id="bubble'+LeftSaveEventID+'" class="bubble-home-save bubble"></div>';a=a+'<div class="away-corner icon-corner-'+j+'" onClick="betpupup(\'CORNER FOR '+teamPlayingFromLeftToRight+"', "+f+');"></div><div id="bubble'+f+'" class="bubble-away-corner bubble"></div>';a=a+'<div class="away-goal icon-goal-'+j+'" onClick="betpupup(\'GOAL FOR '+teamPlayingFromLeftToRight+"', "+g+');"></div><div id="bubble'+
g+'" class="bubble-away-goal bubble"></div>';a=a+'<div class="away-wide icon-wide-'+j+'" onClick="betpupup(\'WIDE BY '+teamPlayingFromLeftToRight+"', "+h+');"></div><div id="bubble'+h+'" class="bubble-away-wide bubble"></div>';HideNonPitchDisplays();$(".pitch-icons").html(a);ShowPitch();$(".gameinfo").show()}catch(r){logError("populatePitch",r)}}
function MatchStartEvents(b){try{return b==11?(logError("LSBind","Starting Match!!!!!!!","",""),playsound("gamestart"),GetGameDetails(fixture,GameDetailsComplete),!1):b==12?(playsound("halftime"),$(".GameFeedInfo").prepend("<b>Half Time</b> <br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"),$(".halftime").show(),HidePitch(),!1):b==13?(playsound("secondhalf"),$(".GameFeedInfo").prepend("<b>And we're off again!!</b> <br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"),GetGameDetails(fixture,
GameDetailsComplete),!1):b==15?!1:b==16?!1:b==21?!1:!0}catch(a){logError("MatchStartEvents",a)}}
function playsound(b){try{var a;switch(b){case "gamestart":a="whistle.mp3";break;case "halftime":a="whistle.mp3";break;case "secondhalf":a="whistle.mp3";break;case "gameover":a="whistle.mp3";break;case "win":a="cheer_8k.mp3";break;case "lose":a="sadtrombone.mp3";break;case "void":a="pan.mp3"}var c;c=document.getElementById("audio");c.load();c.src="/Content/sounds/"+a;c.play()}catch(d){logError("playsound",d)}}
function MakeSurePitchIsDisplayed(){if($(".pitch").is(":visible")!=!0){var b=GetRequestParam("f");GetGameDetails(b,GameDetailsComplete);logError("MakeSurePitchIsDisplayed","MatchEventReceived while pitch not displayed!!!!!! ","","")}}
function UpdateGameEventFromLightStreamer(b,a,c,d,e,f,g){try{if(fixture==b&&b>0&&!HaveWeDisplayedThisEventBefore(c)&&c>0){if(MatchStartEvents(a)){f!=null&&($(".GameFeedInfo").prepend(f+"<br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"));$("#home_score").html(d);$("#away_score").html(e);checkBetStatusNew(a,g);updateFriendsBetStatus(a,g);if(a==14)$(".fulltime").show(),HidePitch();else if(a==19&&thisFixture)thisFixture.currenthalf==1?thisFixture.numfreesfirsthalf+=1:(thisFixture.currenthalf=
2,thisFixture.numfreessecondhalf+=1);a!=14&&MakeSurePitchIsDisplayed()}updatePreGamebets(a,d,e);AddMyScoreToOverAllLeaderBoard()}}catch(h){logError("UpdateGameEventFromLightStreamer",h)}}
function HaveWeDisplayedThisEventBefore(b){try{var a=window.sessionStorage.getItem("listOfDisplayedEvents"),c;if(typeof a!="undefined"&&a!=null&&a!="")if(c=typeof a!="object"?JSON.parse(a):a,typeof c!="undefined"&&c!=null)for(a=0;a<=c.length-1;a++){if(c[a]==b)return!0}else c=[];else c=[];c.push(b);window.sessionStorage.setItem("listOfDisplayedEvents",$.toJSON(c))}catch(d){logError("listOfDisplayedEvents",d)}logError("LSBind","WE HAVE NOT SHOWED THIS BEFORE!!!!!!!! eventUpateID is "+b,"","");return!1}
function betpupup(b,a){try{uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser"));if(uiUser==null)return alert("Sign in with Facebook to Play!"),!1;Currentbet=JSON.parse(window.sessionStorage.getItem("Currentbet"));if(Currentbet!=null&&Currentbet.status==0)return alert("You already have an active bet!! You must wait until this bet is complete untill you make another!!"),!1;if(JSON.parse(window.sessionStorage.getItem("tempBet"))!=null)return alert("You must wait until your previous bet has finished processing!!"),
!1;$("#popupplacebet").show();$("#popupplacebet h4").html("You have selected <span style='color:#FFFFCC;'>'"+b+"'</span>, How many credits do you want to bet?");$("#confirm").attr("onClick","prepareBet("+a+")")}catch(c){logError("betpupup",c)}}
function prepareBet(b){try{var a=10,a=parseInt($("#popupplacebet input:checked").val());uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser"));var c=new Bet(b,fixture,a,uiUser.id);c.user=uiUser;window.sessionStorage.setItem("tempBet",$.toJSON(c));$("#bubble"+b).removeClass("bubble");$("#bubble"+b).addClass("bubble_loading");$("#popupplacebet").hide();ReTryBetAttempts=0;placeBet(BetComplete,c)}catch(d){logError("prepareBet",d)}}
function placeBet(b,a){if(!a||typeof a=="undefined")a=JSON.parse(window.sessionStorage.getItem("tempBet"));try{$.ajax({url:Config.WS_URL_ROOT+"/Game/PlaceBet",type:"POST",timeout:7E3,data:JSON.stringify(a),dataType:"json",contentType:"application/json: charset=utf-8",success:function(a){b instanceof Function&&b(a)},error:function(b,c){c=="timeout"?ReTryBetAttempts<1?(ReTryBetAttempts+=1,setTimeout("placeBet(BetComplete);",1500)):BetNotPlaced(a):BetNotPlaced(a)}})}catch(c){logError("placeBet",c)}}
function BetComplete(b){try{if(ReTryBetAttempts=0,b.betid>0){Currentbet=b;uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser"));uiUser.credits=b.creditsremaining;window.sessionStorage.setItem("facebookuser",$.toJSON(uiUser));$(".credits").html(uiUser.credits);Currentbet.user=uiUser;Currentbet.odds=CastToDecimal(Currentbet.odds);window.sessionStorage.setItem("Currentbet",$.toJSON(Currentbet));window.sessionStorage.setItem("tempBet",null);NotifyFriendsOfBetPlaced(friendsNotified);$("#button"+
Currentbet.eventid).hide();$("#bubble"+Currentbet.eventid).removeClass("bubble_loading");$("#bubble"+Currentbet.eventid).addClass("bubble_active");$("#bubble"+Currentbet.eventid).html(""+Currentbet.amount+"");Currentbet.incorrectEventID&&($("#bubble"+Currentbet.incorrectEventID).removeClass("bubble_loading"),$("#bubble"+Currentbet.incorrectEventID).addClass("bubble"),$("#bubble"+Currentbet.incorrectEventID).html(Currentbet.incorrectOdds+"/1"));var a="<b class='bettext'>"+b.betdescription+"</b><br />";
$(".GameFeedInfo").prepend(a);refreshScroller(GameFeedScroller,"GameFeedInfo");AddBetToFriendScores(Currentbet);DisplayFriendsLeaderBoard(Currentbet.friendsleaderboardlist);UpdateLeaderboard(Currentbet.leagueleaderboardlist,Currentbet.leagueid)}else b.betid==-2?b.numattempts==0?(b.numattempts=1,placeBet(BetComplete,b)):($("#bubble"+b.eventid).removeClass("bubble_loading"),$("#bubble"+b.eventid).addClass("bubble"),$("#bubble"+b.eventid).html(""+b.odds+"/1"),window.sessionStorage.setItem("Currentbet",
null),window.sessionStorage.setItem("tempBet",null),a="<b class='bettext'>"+b.betdescription+"</b><br />",$(".GameFeedInfo").prepend(a),refreshScroller(GameFeedScroller,"GameFeedInfo"),logError("BetComplete - BetFailed","Failed To connect to place bet in DB twice : -2")):b.betid==-101?b.numattempts==0?(b.numattempts=1,placeBet(BetComplete,b)):($("#bubble"+b.eventid).removeClass("bubble_loading"),$("#bubble"+b.eventid).addClass("bubble_active"),$("#bubble"+b.eventid).html(""+b.odds+"/1"),window.sessionStorage.setItem("Currentbet",
null),window.sessionStorage.setItem("tempBet",null),a="<b class='bettext'>"+b.betdescription+"</b><br />",$(".GameFeedInfo").prepend(a),refreshScroller(GameFeedScroller,"GameFeedInfo"),logError("BetComplete - BetFailed","Failed To connect to place bet in DB twice : -101")):($(".GameFeedInfo").prepend("<b class='bettext'>"+b.betdescription+"</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"))}catch(c){logError("BetComplete",c)}}
function BetNotPlaced(b){ReTryBetAttempts=0;$("#bubble"+b.eventid).removeClass("bubble_loading");$("#bubble"+b.eventid).addClass("bubble");window.sessionStorage.setItem("Currentbet",null);window.sessionStorage.setItem("tempBet",null);$(".GameFeedInfo").prepend("Unable to place bet..try again <br />");refreshScroller(GameFeedScroller,"GameFeedInfo");logError("BetNotPlaced")}function AjaxFail(b,a){var c="status: "+a.status+"; response-text:"+a.responseText;b&&response&&logError("AjaxFail : "+b,c)}
function WaitForFriendScoresToFinishProcessing(){try{if(FriendScoresUpdating!=1&&FriendScoresUpdating!="1")FriendScoresUpdating=1;else for(var b=Math.round((new Date).getTime()/1E3)+10,a=1;a==1;)FriendScoresUpdating!=1&&FriendScoresUpdating!="1"&&(FriendScoresUpdating=1,a=0,logError("WaitForFriendScoresToFinishProcessing","Wait was successfull!!!")),Math.round((new Date).getTime()/1E3)>b&&(a=FriendScoresUpdating=0,logError("WaitForFriendScoresToFinishProcessing","Wait over 10 seconds - reset value!!!"));
return 1}catch(c){return logError("WaitForFriendScoresToFinishProcessing",c),1}}function FinishedProcessingFriendScores(){FriendScoresUpdating=0}
function AddBetToFriendScores(b){try{var a,c=0;try{a=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"))}catch(d){}if(a)for(var e=0;e<=a.length-1;e++){if(a[e].FBUserIDList==b.user.fbuserid){a[e].CurrentBet=b;c=1;break}}else a=[],c=1;c==1&&(window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(a)),ReOrderFriendsScoresBasedOnCurrentScore())}catch(f){logError("AddBetToFriendScores",f)}FinishedProcessingFriendScores()}
function AddFriendToFriendScores(b,a){try{var c=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"));c==null&&(c=[]);var d=new Leaderboard;d.FBUserIDList=b;d.Credits=0;d.Username=a;IsUserAlreadyInFriendsLeaderBoard(b)==0&&(c.push(d),window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(c)),ReOrderFriendsScoresBasedOnCurrentScore())}catch(e){logError("AddFriendToFriendScores",e)}FinishedProcessingFriendScores()}
function IsUserAlreadyInFriendsLeaderBoard(b){try{var a=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"));if(a!=null)for(var c=0;c<=a.length-1;c++)if(a[c].FBUserIDList==b)return 1;return 0}catch(d){logError("IsUserAlreadyInFriendsLeaderBoard",d)}}
function UpdateFriendScoresWithNewBalance(b,a){try{var c=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"));if(c)for(var d=0;d<=c.length-1;d++)if(c[d].FBUserIDList==b){if(c[d].Credits!=parseInt(a))c[d].Credits=parseInt(a),c[d].CurrentBet=null,window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(c)),ReOrderFriendsScoresBasedOnCurrentScore();break}}catch(e){logError("UpdateFriendScoresWithNewBalance",e)}UpdateLeaderboardWithNewBalance(b,a)}
function UpdateLeaderboardWithNewBalance(b,a){try{var c=JSON.parse(window.sessionStorage.getItem("leaderboard"));if(c)for(var d=0;d<=c.length-1;d++)if(c[d].FBUserIDList==b){c[d].Credits=parseInt(a);window.sessionStorage.setItem("leaderboard",$.toJSON(c));$("#LeagueLeaderboard").html(CreateLeagueScoresView2(c,"ff",!0));refreshScroller(leaderboardScroller,"LeagueLeaderboard");break}}catch(e){logError("UpdateLeaderboardWithNewBalance",e)}}
function UpdateFriendScoresWithNewCredit(b,a,c,d,e){try{var f=window.sessionStorage.getItem("listOfAlreadyReceivedPreGameBetOptionDetails"),g=1,a=b+"-"+a+"-"+d;if(typeof f!="undefined"&&f!=null&&f!="")for(var f=JSON.parse(window.sessionStorage.getItem("listOfAlreadyReceivedPreGameBetOptionDetails")),h=0;h<=f.length-1;h++){if(f[h]==a){g=0;break}}else f=[];if(g==1){f.push(a);var j=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"));if(j)for(h=0;h<=j.length-1;h++)if(j[h].FBUserIDList==d){var k=
JSON.parse(window.sessionStorage.getItem("facebookuser"));e==1?(j[h].Credits=parseInt(j[h].Credits)+parseInt(c),j[h].FBUserIDList==k.fbuserid&&NotifyFriendsOfNewBalanceForThisGame(b,k.fbuserid,j[h].Credits)):j[h].Credits=parseInt(j[h].Credits)-parseInt(c);window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(j));ReOrderFriendsScoresBasedOnCurrentScore();break}}window.sessionStorage.setItem("listOfAlreadyReceivedPreGameBetOptionDetails",$.toJSON(f))}catch(r){logError("UpdateFriendScoresWithNewCredit",
r)}}
function UpdateFriendScoresWithBetResult(b){try{var a=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"));if(a){for(var c=0;c<=a.length-1;c++)if(a[c].CurrentBet&&a[c].CurrentBet.betid==b.betid){var d=parseInt(a[c].CurrentBet.addamount);a[c].CurrentBet=b;if(b.status==1){var e;e=d==1?parseInt(b.creditsearned)+parseInt(b.amount):parseInt(b.creditsearned);a[c].Credits=parseInt(a[c].Credits)+e}else if(b.status==-1){if(d==0)a[c].Credits=parseInt(a[c].Credits)-parseInt(b.amount)}else if(b.status==-102&&
d==1)a[c].Credits=parseInt(a[c].Credits)+parseInt(b.amount);break}window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(a))}}catch(f){logError("UpdateFriendScoresWithBetResult",f)}FinishedProcessingFriendScores()}
function ReOrderFriendsScoresBasedOnCurrentScore(){try{var b=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores")),a=[],c=1;if(b){for(;b.length>0;){for(var d=-1,e=-1E8,f=0;f<=b.length-1;f++)if(b[f].Credits>e)e=b[f].Credits,d=f;b[d].Pos=c;c+=1;a.push(b[d]);b.splice(d,1)}window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(a));$("#FriendsLeaderboard").html(CreateLeagueScoresView2(a,"ff",!0));refreshScroller(friendsScoreScroller,"FriendsLeaderboard")}}catch(g){logError("ReOrderFriendsScoresBasedOnCurrentScore",
g)}}
function AddMyScoreToOverAllLeaderBoard(){try{var b=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores")),a=JSON.parse(window.sessionStorage.getItem("facebookuser")),c;if(b){for(var d=0;d<=b.length-1;d++)if(b[d].FBUserIDList==a.fbuserid){c=b[d];break}if(c){var e=JSON.parse(window.sessionStorage.getItem("leaderboard")),b=0;if(e){for(d=0;d<=e.length-1;d++)if(e[d].FBUserIDList==a.fbuserid){b=1;break}if(b==0)c.Pos="",e.push(c),window.sessionStorage.setItem("leaderboard",$.toJSON(e)),$("#LeagueLeaderboard").html(CreateLeagueScoresView2(e,"ff",
!0)),refreshScroller(leaderboardScroller,"LeagueLeaderboard")}}}}catch(f){logError("AddMyScoreToOverAllLeaderBoard",f)}}
function updateFriendsBetStatus(b,a){try{var c=window.sessionStorage.getItem("listOfFriendsBets"),d,e=0;if(typeof c!="undefined"&&c!=null&&c!="")if(d=typeof c!="object"?JSON.parse(c):c,c="",typeof d!="undefined"&&d!=null){for(var f=0;f<=d.length-1;f++)if(d[f].status==0){var g=new Date(d[f].eventtime),h=new Date;h.setTime(a.getTime()-5E3);g<=h?(d[f].eventid==b?(d[f].status=1,c=c+"<span class='wintext'>"+d[f].user.name+" wins "+d[f].creditsearned+" credits!!! </span><br />"):(d[f].status=-1,c=c+"<span class='losetext'>"+
d[f].user.name+" loses "+d[f].amount+" credits!!! </span><br />"),UpdateFriendScoresWithBetResult(d[f]),e=1):g<a?(d[f].status=-102,c=c+"<span class='losetext'>"+d[f].user.name+"'s bet was voided!! </span><br />",UpdateFriendScoresWithBetResult(d[f]),e=1):logError("VoidFlow","not clearing friends bet due to LS latency","","")}e==1&&(ReOrderFriendsScoresBasedOnCurrentScore(),FinishedProcessingFriendScores());Config.displayFriendsDetals=="1"&&$(".FriendFeedInfo").prepend(c)}else d=[];else d=[];window.sessionStorage.setItem("listOfFriendsBets",
$.toJSON(d))}catch(j){logError("updateFriendsBetStatus",j)}}
function checkBetStatusNew(b,a){try{if(Currentbet=JSON.parse(window.sessionStorage.getItem("Currentbet")),Currentbet==null)return!1;else if(Currentbet.status!=0)return!1;else{var c="",d=new Date(Currentbet.eventtime),e=new Date;e.setTime(a.getTime()-5E3);if(d<=e){if(Currentbet.eventid==b){var f=Math.round(Currentbet.amount*Currentbet.odds+Currentbet.amount),c="<span class='wintext'>BET WON!!!! You win "+f+" credits!</span><br />";Currentbet.status=1;Currentbet.creditsearned=Math.round(Currentbet.amount*
Currentbet.odds);uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser"));uiUser.credits+=f;window.sessionStorage.setItem("facebookuser",$.toJSON(uiUser));$(".credits").html(uiUser.credits);playsound("win");$(".popup-notify > h1").text("WIN!");$(".popup-notify").fadeIn(200).delay(5E3).fadeOut(200);UpdateFriendScoresWithBetResult(Currentbet)}else c="<span class='losetext'>BET LOST!!!!!!!</span><br />",Currentbet.status=-1,playsound("lose"),UpdateFriendScoresWithBetResult(Currentbet),$(".popup-notify > h1").text("LOSE!"),
$(".popup-notify").fadeIn(200).delay(5E3).fadeOut(200);ReOrderFriendsScoresBasedOnCurrentScore();FinishedProcessingFriendScores()}else if(d<a){c="<span class='losetext'>BET VOID - CREDITS RETURNED</span><br />";uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser"));uiUser.credits+=Currentbet.amount;window.sessionStorage.setItem("facebookuser",$.toJSON(uiUser));$(".credits").html(uiUser.credits);Currentbet.status=-102;playsound("void");UpdateFriendScoresWithBetResult(Currentbet);if(b==4||
b==6)$(".popup-notify > h1").text("GOAL!"),$(".popup-notify").fadeIn(200).delay(5E3).fadeOut(200);ReOrderFriendsScoresBasedOnCurrentScore();FinishedProcessingFriendScores()}else return logError("VoidFlow","not clearing users bet due to LS latency","",""),!1;$("#bubble"+Currentbet.eventid).removeClass("bubble_active");$("#bubble"+Currentbet.eventid).addClass("bubble");var g;g=Currentbet.newodds?Math.round(Currentbet.newodds):Math.round(Currentbet.odds);$("#bubble"+Currentbet.eventid).html(""+g+"/1");
var h=$(".GameFeedInfo").html();$(".GameFeedInfo").html(c+h);refreshScroller(GameFeedScroller,"GameFeedInfo");Currentbet.user=uiUser;Currentbet.odds=CastToDecimal(Currentbet.odds);window.sessionStorage.setItem("Currentbet",$.toJSON(Currentbet))}}catch(j){logError("checkBetStatusNew",j)}}
function NotifyFriendsThatUserHasJoinedGame(b){try{uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser")),uiUser.currentfixtureid=fixture,$.ajax({url:Config.WS_URL_ROOT+"/Game/NotifyFriendsThatUserHasJoinedGame",type:"POST",data:JSON.stringify(uiUser),dataType:"json",contentType:"application/json: charset=utf-8",error:function(a,b,e){AjaxFail("NotifyFriendsThatUserHasJoinedGame",a,b,e)},success:function(a){b instanceof Function&&b(a)}})}catch(a){logError("NotifyFriendsThatUserHasJoinedGame",
a)}}function NotifyFriendsOfBetResult(b){try{Currentbet=JSON.parse(window.sessionStorage.getItem("Currentbet")),$.ajax({url:Config.WS_URL_ROOT+"/Game/NotifyFriendsOfBetResult",type:"POST",data:JSON.stringify(Currentbet),dataType:"json",contentType:"application/json: charset=utf-8",error:function(a,b,e){AjaxFail("NotifyFriendsOfBetResult",a,b,e)},success:function(a){b instanceof Function&&b(a)}})}catch(a){logError("NotifyFriendsOfBetResult",a)}}
function NotifyFriendsOfBetPlaced(b){try{Currentbet=JSON.parse(window.sessionStorage.getItem("Currentbet")),$.ajax({url:Config.WS_URL_ROOT+"/Game/NotifyFriendsOfBetPlaced",type:"POST",data:JSON.stringify(Currentbet),dataType:"json",contentType:"application/json: charset=utf-8",error:function(a,b,e){AjaxFail("NotifyFriendsOfBetPlaced",a,b,e)},success:function(a){b instanceof Function&&b(a)}})}catch(a){logError("NotifyFriendsOfBetPlaced",a)}}function friendsNotified(){}
function updateOdds(b){try{var a=b.split(",");if(a&&a.length>0){Currentbet=JSON.parse(window.sessionStorage.getItem("Currentbet"));for(b=0;b<a.length;b++)try{var c=a[b].split(":"),d=c[0],e=Math.round(c[1]);$("#bubble"+d).hasClass("bubble_active")&&Currentbet?(Currentbet.newodds=e,window.sessionStorage.setItem("Currentbet",$.toJSON(Currentbet))):$("#bubble"+d).html(e+"/1")}catch(f){}}}catch(g){logError("updateOdds",g)}}
function HaveWeDisplayedFriendsBetBefore(b){try{var a=window.sessionStorage.getItem("listOfFriendsBets"),c;if(typeof a!="undefined"&&a!=null&&a!="")if(c=typeof a!="object"?JSON.parse(a):a,typeof c!="undefined"&&c!=null)for(a=0;a<=c.length-1;a++){if(c[a].betid==b.betid)return!0}else c=[];else c=[];c.push(b);window.sessionStorage.setItem("listOfFriendsBets",$.toJSON(c))}catch(d){logError("HaveWeDisplayedFriendsBetBefore",d)}FinishedProcessingFriendScores();return!1}
function DisplayInviteDetails(b){try{var a=b.split(";"),c=a[1];if(!HaveWeDisplayedThisEventBefore(a[2]*-1)){var d=c.replace(/s:/g,";");$("#MyleagueInvites").prepend(d);refreshScroller(leaderboardScroller,"MyleagueInvites")}}catch(e){logError("DisplayInviteDetails",e)}}
function AddBetToFriendsBetList(b){try{var a=b.split(";"),c=a[0],d=a[1],e;if(a)if(a.length==2){if(UserIsMyFriend(c)){e="<b class='friendtext'>"+d+"</b><br />";var f=d.split(" ");AddFriendToFriendScores(c,f[0]+" "+f[1])}}else if(a.length==3){if(UserIsMyFriend(c)){var g=parseInt(a[2]);UpdateFriendScoresWithNewBalance(c,g)}}else{var h=new Bet;h.betdescription=d;h.eventid=a[2];h.betid=a[3];h.eventdesc=a[4];var j=new FriendUser(c,a[5]);h.user=j;h.amount=a[6];h.creditsearned=parseInt(a[7]);h.eventtime=
a[8];UserIsMyFriend(c)&&!HaveWeDisplayedFriendsBetBefore(h)&&(AddBetToFriendScores(h),e=d.toLowerCase().indexOf("wins")>0||d.toLowerCase().indexOf("won")>0?"<b class='wintext'>"+d+"</b><br />":d.toLowerCase().indexOf("lose")>0||d.toLowerCase().indexOf("lost")>0?"<b class='losetext'>"+d+"</b><br />":"<b class='friendtext'>"+d+"</b><br />")}Config.displayFriendsDetals=="1"&&$(".FriendFeedInfo").prepend(e)}catch(k){logError("DisplayFriendsBetDetails",k)}}
function UserIsMyFriend(b){try{var a;try{a=JSON.parse(window.sessionStorage.getItem("facebookfriendlist"))}catch(c){logError("GetFriends",c)}if(typeof a!="undefined"&&a!=null)for(var d=0;d<=a.length-1;d++)if(a[d].id==b)return!0}catch(e){logError("UserIsMyFriend",e)}return!1}function closepanel(){try{$("#popupplacebet").hide()}catch(b){logError("closepanel",b)}};(function(){var b=Math,a=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",c=/android/gi.test(navigator.appVersion),d=/iphone|ipad/gi.test(navigator.appVersion),e=/playbook/gi.test(navigator.appVersion),f=/hp-tablet/gi.test(navigator.appVersion),g="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,h="ontouchstart"in window&&!f,j=a+"Transform"in document.documentElement.style,k=d||e,r=function(){return window.requestAnimationFrame||
window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,1)}}(),m=window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,n="onorientationchange"in window?"orientationchange":"resize",o=h?"touchstart":"mousedown",p=h?"touchmove":"mousemove",s=h?
"touchend":"mouseup",t=h?"touchcancel":"mouseup",u=a=="Moz"?"DOMMouseScroll":"mousewheel",l="translate"+(g?"3d(":"("),v=g?",0)":")",e=function(b,e){var f=this,w;f.wrapper=typeof b=="object"?b:document.getElementById(b);f.wrapper.style.overflow="hidden";f.scroller=f.wrapper.children[0];f.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:c,hideScrollbar:d,
fadeScrollbar:d&&g,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){for(var b=a.target;b.nodeType!=1;)b=b.parentNode;b.tagName!="SELECT"&&b.tagName!="INPUT"&&b.tagName!="TEXTAREA"&&a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};f.zoom&&c&&(l="translate(",
v=")");for(w in e)f.options[w]=e[w];f.x=f.options.x;f.y=f.options.y;f.options.useTransform=j?f.options.useTransform:!1;f.options.hScrollbar=f.options.hScroll&&f.options.hScrollbar;f.options.vScrollbar=f.options.vScroll&&f.options.vScrollbar;f.options.zoom=f.options.useTransform&&f.options.zoom;f.options.useTransition=k&&f.options.useTransition;f.scroller.style[a+"TransitionProperty"]=f.options.useTransform?"-"+a.toLowerCase()+"-transform":"top left";f.scroller.style[a+"TransitionDuration"]="0";f.scroller.style[a+
"TransformOrigin"]="0 0";f.options.useTransition&&(f.scroller.style[a+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)");f.options.useTransform?f.scroller.style[a+"Transform"]=l+f.x+"px,"+f.y+"px"+v:f.scroller.style.cssText+=";position:absolute;top:"+f.y+"px;left:"+f.x+"px";if(f.options.useTransition)f.options.fixedScrollbar=!0;f.refresh();f._bind(n,window);f._bind(o);h||(f._bind("mouseout",f.wrapper),f.options.wheelAction!="none"&&f._bind(u));if(f.options.checkDOMChanges)f.checkDOMTime=
setInterval(function(){f._checkDOMChanges()},500)};e.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){switch(a.type){case o:if(!h&&a.button!==0)break;this._start(a);break;case p:this._move(a);break;case s:case t:this._end(a);break;case n:this._resize();break;case u:this._wheel(a);break;case "mouseout":this._mouseout(a);break;case "webkitTransitionEnd":this._transitionEnd(a)}},_checkDOMChanges:function(){!this.moved&&
!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(c){var e=document,d;if(this[c+"Scrollbar"]){if(!this[c+"ScrollbarWrapper"]){d=e.createElement("div");this.options.scrollbarClass?d.className=this.options.scrollbarClass+c.toUpperCase():d.style.cssText="position:absolute;z-index:100;"+(c=="h"?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+
(this.hScrollbar?"7":"2")+"px;top:2px;right:1px");d.style.cssText+=";pointer-events:none;-"+a+"-transition-property:opacity;-"+a+"-transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1");this.wrapper.appendChild(d);this[c+"ScrollbarWrapper"]=d;d=e.createElement("div");if(!this.options.scrollbarClass)d.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+a+"-background-clip:padding-box;-"+
a+"-box-sizing:border-box;"+(c=="h"?"height:100%":"width:100%")+";-"+a+"-border-radius:3px;border-radius:3px";d.style.cssText+=";pointer-events:none;-"+a+"-transition-property:-"+a+"-transform;-"+a+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+a+"-transition-duration:0;-"+a+"-transform:"+l+"0,0"+v;this.options.useTransition&&(d.style.cssText+=";-"+a+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)");this[c+"ScrollbarWrapper"].appendChild(d);this[c+"ScrollbarIndicator"]=
d}c=="h"?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=b.max(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW>>0,8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=b.max(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH>>
0,8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY);this._scrollbarPos(c,!0)}else this[c+"ScrollbarWrapper"]&&(j&&(this[c+"ScrollbarIndicator"].style[a+"Transform"]=""),this[c+"ScrollbarWrapper"].parentNode.removeChild(this[c+"ScrollbarWrapper"]),this[c+"ScrollbarWrapper"]=null,this[c+"ScrollbarIndicator"]=null)},_resize:function(){var a=
this;setTimeout(function(){a.refresh()},c?200:0)},_pos:function(b,c){b=this.hScroll?b:0;c=this.vScroll?c:0;this.options.useTransform?this.scroller.style[a+"Transform"]=l+b+"px,"+c+"px"+v+" scale("+this.scale+")":(b>>=0,c>>=0,this.scroller.style.left=b+"px",this.scroller.style.top=c+"px");this.x=b;this.y=c;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(b,c){var d=b=="h"?this.x:this.y;if(this[b+"Scrollbar"])d*=this[b+"ScrollbarProp"],d<0?(this.options.fixedScrollbar||(d=this[b+
"ScrollbarIndicatorSize"]+(d*3>>0),d<8&&(d=8),this[b+"ScrollbarIndicator"].style[b=="h"?"width":"height"]=d+"px"),d=0):d>this[b+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?d=this[b+"ScrollbarMaxScroll"]:(d=this[b+"ScrollbarIndicatorSize"]-((d-this[b+"ScrollbarMaxScroll"])*3>>0),d<8&&(d=8),this[b+"ScrollbarIndicator"].style[b=="h"?"width":"height"]=d+"px",d=this[b+"ScrollbarMaxScroll"]+(this[b+"ScrollbarIndicatorSize"]-d))),this[b+"ScrollbarWrapper"].style[a+"TransitionDelay"]="0",this[b+"ScrollbarWrapper"].style.opacity=
c&&this.options.hideScrollbar?"0":"1",this[b+"ScrollbarIndicator"].style[a+"Transform"]=l+(b=="h"?d+"px,0":"0,"+d+"px")+v},_start:function(c){var d=h?c.touches[0]:c,e,f;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,c);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;if(this.options.zoom&&h&&c.touches.length>1)f=b.abs(c.touches[0].pageX-
c.touches[1].pageX),e=b.abs(c.touches[0].pageY-c.touches[1].pageY),this.touchesDistStart=b.sqrt(f*f+e*e),this.originX=b.abs(c.touches[0].pageX+c.touches[1].pageX-this.wrapperOffsetLeft*2)/2-this.x,this.originY=b.abs(c.touches[0].pageY+c.touches[1].pageY-this.wrapperOffsetTop*2)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,c);if(this.options.momentum&&(this.options.useTransform?(e=getComputedStyle(this.scroller,null)[a+"Transform"].replace(/[^0-9-.,]/g,"").split(","),f=e[4]*
1,e=e[5]*1):(f=getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,"")*1,e=getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")*1),f!=this.x||e!=this.y))this.options.useTransition?this._unbind("webkitTransitionEnd"):m(this.aniTime),this.steps=[],this._pos(f,e);this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=d.pageX;this.pointY=d.pageY;this.startTime=c.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,
c);this._bind(p);this._bind(s);this._bind(t)}},_move:function(c){var d=h?c.touches[0]:c,e=d.pageX-this.pointX,f=d.pageY-this.pointY,g=this.x+e,j=this.y+f,k=c.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,c);if(this.options.zoom&&h&&c.touches.length>1)g=b.abs(c.touches[0].pageX-c.touches[1].pageX),j=b.abs(c.touches[0].pageY-c.touches[1].pageY),this.touchesDist=b.sqrt(g*g+j*j),this.zoomed=!0,d=1/this.touchesDistStart*this.touchesDist*this.scale,d<this.options.zoomMin?
d=0.5*this.options.zoomMin*Math.pow(2,d/this.options.zoomMin):d>this.options.zoomMax&&(d=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/d)),this.lastScale=d/this.scale,g=this.originX-this.originX*this.lastScale+this.x,j=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[a+"Transform"]=l+g+"px,"+j+"px"+v+" scale("+d+")",this.options.onZoom&&this.options.onZoom.call(this,c);else{this.pointX=d.pageX;this.pointY=d.pageY;if(g>0||g<this.maxScrollX)g=this.options.bounce?this.x+
e/2:g>=0||this.maxScrollX>=0?0:this.maxScrollX;if(j>this.minScrollY||j<this.maxScrollY)j=this.options.bounce?this.y+f/2:j>=this.minScrollY||this.maxScrollY>=0?this.minScrollY:this.maxScrollY;if(this.absDistX<6&&this.absDistY<6)this.distX+=e,this.distY+=f,this.absDistX=b.abs(this.distX),this.absDistY=b.abs(this.distY);else{if(this.options.lockDirection)if(this.absDistX>this.absDistY+5)j=this.y,f=0;else if(this.absDistY>this.absDistX+5)g=this.x,e=0;this.moved=!0;this._pos(g,j);this.dirX=e>0?-1:e<0?
1:0;this.dirY=f>0?-1:f<0?1:0;if(k-this.startTime>300)this.startTime=k,this.startX=this.x,this.startY=this.y;this.options.onScrollMove&&this.options.onScrollMove.call(this,c)}}},_end:function(c){if(!(h&&c.touches.length!=0)){var d=this,e=h?c.changedTouches[0]:c,f,g,j={dist:0,time:0},k={dist:0,time:0},m=(c.timeStamp||Date.now())-d.startTime,q=d.x,y=d.y;d._unbind(p);d._unbind(s);d._unbind(t);d.options.onBeforeScrollEnd&&d.options.onBeforeScrollEnd.call(d,c);if(d.zoomed)q=d.scale*d.lastScale,q=Math.max(d.options.zoomMin,
q),q=Math.min(d.options.zoomMax,q),d.lastScale=q/d.scale,d.scale=q,d.x=d.originX-d.originX*d.lastScale+d.x,d.y=d.originY-d.originY*d.lastScale+d.y,d.scroller.style[a+"TransitionDuration"]="200ms",d.scroller.style[a+"Transform"]=l+d.x+"px,"+d.y+"px"+v+" scale("+d.scale+")",d.zoomed=!1,d.refresh(),d.options.onZoomEnd&&d.options.onZoomEnd.call(d,c);else{if(d.moved){if(m<300&&d.options.momentum){j=q?d._momentum(q-d.startX,m,-d.x,d.scrollerW-d.wrapperW+d.x,d.options.bounce?d.wrapperW:0):j;k=y?d._momentum(y-
d.startY,m,-d.y,d.maxScrollY<0?d.scrollerH-d.wrapperH+d.y-d.minScrollY:0,d.options.bounce?d.wrapperH:0):k;q=d.x+j.dist;y=d.y+k.dist;if(d.x>0&&q>0||d.x<d.maxScrollX&&q<d.maxScrollX)j={dist:0,time:0};if(d.y>d.minScrollY&&y>d.minScrollY||d.y<d.maxScrollY&&y<d.maxScrollY)k={dist:0,time:0}}if(j.dist||k.dist){j=b.max(b.max(j.time,k.time),10);if(d.options.snap)k=q-d.absStartX,m=y-d.absStartY,b.abs(k)<d.options.snapThreshold&&b.abs(m)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,200):(k=d._snap(q,
y),q=k.x,y=k.y,j=b.max(k.time,j));d.scrollTo(q>>0,y>>0,j)}else d.options.snap?(k=q-d.absStartX,m=y-d.absStartY,b.abs(k)<d.options.snapThreshold&&b.abs(m)<d.options.snapThreshold?d.scrollTo(d.absStartX,d.absStartY,200):(k=d._snap(d.x,d.y),(k.x!=d.x||k.y!=d.y)&&d.scrollTo(k.x,k.y,k.time))):d._resetPos(200)}else{if(h)d.doubleTapTimer&&d.options.zoom?(clearTimeout(d.doubleTapTimer),d.doubleTapTimer=null,d.options.onZoomStart&&d.options.onZoomStart.call(d,c),d.zoom(d.pointX,d.pointY,d.scale==1?d.options.doubleTapZoom:
1),d.options.onZoomEnd&&setTimeout(function(){d.options.onZoomEnd.call(d,c)},200)):d.doubleTapTimer=setTimeout(function(){d.doubleTapTimer=null;for(f=e.target;f.nodeType!=1;)f=f.parentNode;if(f.tagName!="SELECT"&&f.tagName!="INPUT"&&f.tagName!="TEXTAREA")g=document.createEvent("MouseEvents"),g.initMouseEvent("click",!0,!0,c.view,1,e.screenX,e.screenY,e.clientX,e.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null),g._fake=!0,f.dispatchEvent(g)},d.options.zoom?250:0);d._resetPos(200)}d.options.onTouchEnd&&
d.options.onTouchEnd.call(d,c)}}},_resetPos:function(b){var c=this.x>=0?0:this.x<this.maxScrollX?this.maxScrollX:this.x,d=this.y>=this.minScrollY||this.maxScrollY>0?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;if(c==this.x&&d==this.y){if(this.moved)this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this);if(this.hScrollbar&&this.options.hideScrollbar)a=="webkit"&&(this.hScrollbarWrapper.style[a+"TransitionDelay"]="300ms"),this.hScrollbarWrapper.style.opacity="0";
if(this.vScrollbar&&this.options.hideScrollbar)a=="webkit"&&(this.vScrollbarWrapper.style[a+"TransitionDelay"]="300ms"),this.vScrollbarWrapper.style.opacity="0"}else this.scrollTo(c,d,b||0)},_wheel:function(b){var a=this,c,d;"wheelDeltaX"in b?(c=b.wheelDeltaX/12,d=b.wheelDeltaY/12):c="detail"in b?d=-b.detail*3:d=-b.wheelDelta;if(a.options.wheelAction=="zoom"){d=a.scale*Math.pow(2,1/3*(d?d/Math.abs(d):0));if(d<a.options.zoomMin)d=a.options.zoomMin;if(d>a.options.zoomMax)d=a.options.zoomMax;d!=a.scale&&
(!a.wheelZoomCount&&a.options.onZoomStart&&a.options.onZoomStart.call(a,b),a.wheelZoomCount++,a.zoom(b.pageX,b.pageY,d,400),setTimeout(function(){a.wheelZoomCount--;!a.wheelZoomCount&&a.options.onZoomEnd&&a.options.onZoomEnd.call(a,b)},400))}else{c=a.x+c;d=a.y+d;if(c>0)c=0;else if(c<a.maxScrollX)c=a.maxScrollX;if(d>a.minScrollY)d=a.minScrollY;else if(d<a.maxScrollY)d=a.maxScrollY;a.scrollTo(c,d,0)}},_mouseout:function(a){var b=a.relatedTarget;if(b)for(;b=b.parentNode;)if(b==this.wrapper)return;this._end(a)},
_transitionEnd:function(a){a.target==this.scroller&&(this._unbind("webkitTransitionEnd"),this._startAni())},_startAni:function(){var a=this,c=a.x,d=a.y,e=Date.now(),f,g,h;if(!a.animating)if(a.steps.length){f=a.steps.shift();if(f.x==c&&f.y==d)f.time=0;a.animating=!0;a.moved=!0;a.options.useTransition?(a._transitionTime(f.time),a._pos(f.x,f.y),a.animating=!1,f.time?a._bind("webkitTransitionEnd"):a._resetPos(0)):(h=function(){var j=Date.now();if(j>=e+f.time)a._pos(f.x,f.y),a.animating=!1,a.options.onAnimationEnd&&
a.options.onAnimationEnd.call(a),a._startAni();else if(j=(j-e)/f.time-1,g=b.sqrt(1-j*j),j=(f.x-c)*g+c,a._pos(j,(f.y-d)*g+d),a.animating)a.aniTime=r(h)},h())}else a._resetPos(400)},_transitionTime:function(b){b+="ms";this.scroller.style[a+"TransitionDuration"]=b;this.hScrollbar&&(this.hScrollbarIndicator.style[a+"TransitionDuration"]=b);this.vScrollbar&&(this.vScrollbarIndicator.style[a+"TransitionDuration"]=b)},_momentum:function(a,c,d,f,e){var c=b.abs(a)/c,g=c*c/0.0012,h=0,h=0;a>0&&g>d?(d+=e/(6/
(g/c*6.0E-4)),c=c*d/g,g=d):a<0&&g>f&&(f+=e/(6/(g/c*6.0E-4)),c=c*f/g,g=f);g*=a<0?-1:1;return{dist:g,time:c/6.0E-4>>0}},_offset:function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;a!=this.wrapper&&(b*=this.scale,c*=this.scale);return{left:b,top:c}},_snap:function(a,c){var d,f,e;e=this.pagesX.length-1;d=0;for(f=this.pagesX.length;d<f;d++)if(a>=this.pagesX[d]){e=d;break}e==this.currPageX&&e>0&&this.dirX<0&&e--;a=this.pagesX[e];f=(f=b.abs(a-this.pagesX[this.currPageX]))?
b.abs(this.x-a)/f*500:0;this.currPageX=e;e=this.pagesY.length-1;for(d=0;d<e;d++)if(c>=this.pagesY[d]){e=d;break}e==this.currPageY&&e>0&&this.dirY<0&&e--;c=this.pagesY[e];d=(d=b.abs(c-this.pagesY[this.currPageY]))?b.abs(this.y-c)/d*500:0;this.currPageY=e;e=b.max(f,d)>>0;return{x:a,y:c,time:e||200}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){this.scroller.style[a+"Transform"]="";
this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(n,window);this._unbind(o);this._unbind(p);this._unbind(s);this._unbind(t);this.options.hasTouch&&(this._unbind("mouseout",this.wrapper),this._unbind(u));this.options.useTransition&&this._unbind("webkitTransitionEnd");this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var b,c,d,e=0;c=0;if(this.scale<this.options.zoomMin)this.scale=
this.options.zoomMin;this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=this.scroller.offsetWidth*this.scale>>0;this.scrollerH=(this.scroller.offsetHeight+this.minScrollY)*this.scale>>0;this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&this.maxScrollX<
0;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;b=this._offset(this.wrapper);this.wrapperOffsetLeft=-b.left;this.wrapperOffsetTop=-b.top;if(typeof this.options.snap=="string"){this.pagesX=[];this.pagesY=[];d=this.scroller.querySelectorAll(this.options.snap);b=0;for(c=d.length;b<c;b++)e=this._offset(d[b]),
e.left+=this.wrapperOffsetLeft,e.top+=this.wrapperOffsetTop,this.pagesX[b]=e.left<this.maxScrollX?this.maxScrollX:e.left*this.scale,this.pagesY[b]=e.top<this.maxScrollY?this.maxScrollY:e.top*this.scale}else if(this.options.snap){for(this.pagesX=[];e>=this.maxScrollX;)this.pagesX[c]=e,e-=this.wrapperW,c++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);c=e=0;for(this.pagesY=[];e>=this.maxScrollY;)this.pagesY[c]=
e,e-=this.wrapperH,c++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[a+"TransitionDuration"]="0",this._resetPos(200))},scrollTo:function(a,b,c,d){var e=a;this.stop();e.length||(e=[{x:a,y:b,time:c,relative:d}]);a=0;for(b=e.length;a<b;a++){if(e[a].relative)e[a].x=this.x-e[a].x,e[a].y=this.y-e[a].y;this.steps.push({x:e[a].x,
y:e[a].y,time:e[a].time||0})}this._startAni()},scrollToElement:function(a,c){var d;if(a=a.nodeType?a:this.scroller.querySelector(a))d=this._offset(a),d.left+=this.wrapperOffsetLeft,d.top+=this.wrapperOffsetTop,d.left=d.left>0?0:d.left<this.maxScrollX?this.maxScrollX:d.left,d.top=d.top>this.minScrollY?this.minScrollY:d.top<this.maxScrollY?this.maxScrollY:d.top,c=c===void 0?b.max(b.abs(d.left)*2,b.abs(d.top)*2):c,this.scrollTo(d.left,d.top,c)},scrollToPage:function(a,b,c){this.options.onScrollStart&&
this.options.onScrollStart.call(this);if(this.options.snap)a=a=="next"?this.currPageX+1:a=="prev"?this.currPageX-1:a,b=b=="next"?this.currPageY+1:b=="prev"?this.currPageY-1:b,a=a<0?0:a>this.pagesX.length-1?this.pagesX.length-1:a,b=b<0?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=a,this.currPageY=b,a=this.pagesX[a],b=this.pagesY[b];else{a*=-this.wrapperW;b*=-this.wrapperH;if(a<this.maxScrollX)a=this.maxScrollX;if(b<this.maxScrollY)b=this.maxScrollY}this.scrollTo(a,b,c||400)},disable:function(){this.stop();
this._resetPos(0);this.enabled=!1;this._unbind(p);this._unbind(s);this._unbind(t)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind("webkitTransitionEnd"):m(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(b,c,d,e){var f=d/this.scale;if(this.options.useTransform)this.zoomed=!0,e=e===void 0?200:e,b=b-this.wrapperOffsetLeft-this.x,c=c-this.wrapperOffsetTop-this.y,this.x=b-b*f+this.x,this.y=c-c*f+this.y,this.scale=d,this.refresh(),this.x=
this.x>0?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[a+"TransitionDuration"]=e+"ms",this.scroller.style[a+"Transform"]=l+this.x+"px,"+this.y+"px"+v+" scale("+d+")",this.zoomed=!1},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};typeof exports!=="undefined"?exports.iScroll=e:window.iScroll=e})();var GameFeedScroller,friendsScoreScroller,leaderboardScroller,popupScroller;
function refreshScroller(b,a){a=="GameFeedInfo"?GameFeedScroller||(b=GameFeedScroller=new iScroll("wrapper",{hScrollbar:!1,vScrollbar:!1})):a=="MyleagueInvites"||a=="LeagueLeaderboard2"?leaderboardScroller||(b=leaderboardScroller=new iScroll("wrapper3",{hScrollbar:!1,vScrollbar:!1})):a=="FriendsLeaderboard"?friendsScoreScroller||(friendsScoreScroller=new iScroll("wrapper2",{hScrollbar:!1,vScrollbar:!1}),b=leaderboardScroller):a=="popup"&&!popupScroller&&(b=popupScroller=new iScroll("wrapperpopup",
{hScrollbar:!1,scrollbarClass:"myScrollbar"}));b&&typeof b!="undefined"&&setTimeout(function(){b.refresh()},0)}function ShowTips(){$("#tooltips").slideToggle("fast",function(){$("#helpclickbtn").html($("#helpclickbtn").html()=="<span>?</span>&nbsp;Help!"?"<span>X</span>&nbsp;Hide":"<span>?</span>&nbsp;Help!")})}function ToggleUserInfo(){$("#userinfo").slideToggle("fast",function(){})}
function slider(b){b==0?($(".slidepanel").slideUp(),$(".game-control-close").hide(),$(".button-1").removeClass("active")):($(".slidepanel").not("#slide"+b).slideUp(),$(".button-1").removeClass("active"),$("#slide"+b).slideToggle("fast",function(){$("#slide"+b).is(":visible")?($(".game-control-close").show(),$("#slidebtn"+b).addClass("active")):($(".game-control-close").hide(),$(".button-1").removeClass("active"))}))}
$(window).load(function(){$("#featured").orbit({animation:"horizontal-push",directionalNav:!1,animationSpeed:800,timer:!1})});function tempLeague(b,a,c,d){this.leagueID=b;this.name=a;this.desc=c;this.createrID=d}function Leaderboard(){this.Username=this.Pos=null;this.Credits=0;this.TimeStamp=this.CurrentBet=this.UserID=this.FBUserIDList=this.CurrentUser=null}
function PopulateLeaderFacebook(){var b=window.sessionStorage.getItem("facebookfriendlist"),a=window.sessionStorage.getItem("facebookuser");$.ajax({url:Config.WS_URL_ROOT+"/LeaderBoard/GetFacebookFriendsLeaderbroad",type:"POST",data:"FacebookFriends="+b+"&user="+a,dataType:"html",error:function(a,b,e){AjaxFail("PopulateLeaderFacebook",a,b,e)},success:function(a){a&&$("#Resultsff").append(CreateLeagueScoresView2(a,"ff",!0))}})}
function PopulateOverallLeader(){var b=window.sessionStorage.getItem("facebookuser");$.ajax({url:Config.WS_URL_ROOT+"/LeaderBoard/GetOverallLeaderBoard",type:"POST",data:b,dataType:"json",contentType:"application/json: charset=utf-8",error:function(a,b,d){AjaxFail("PopulateOverallLeader",a,b,d)},success:function(a){$("#ResultsOverall").append(CreateLeagueScoresView2(a,"o",!0))}})}function GetLeagueTable(){}
function GetLeagueTable_WithLeagueHeader(b,a,c,d){var e=window.sessionStorage.getItem("facebookuser");$.ajax({url:Config.WS_URL_ROOT+"/LeaderBoard/GetleagueLeaderboard",type:"POST",data:"LeagueID="+b+"&User="+e,dataType:"html",error:function(a,b,c){AjaxFail("GetLeagueTable_WithLeagueHeader",a,b,c)},success:function(e){DisplayLeagueTable(e,b,a,c,d)}})}
function DisplayLeagueTable(b,a,c,d,e){IsthisLeaderBoardDataUptoDate(b,a)==1&&($("#LeagueLeaderboard").show(),$("#LeagueLeaderboard").html(CreateLeagueScoresView2(b,"ff",!0)),refreshScroller(leaderboardScroller,"LeagueLeaderboard"),b=typeof b!="object"?JSON.parse(b):b,window.sessionStorage.setItem("leaderboard",$.toJSON(b)),JSON.parse(window.sessionStorage.getItem("facebookuser")),a=new tempLeague(a,c,d,e),window.sessionStorage.setItem("leagueview",$.toJSON(a)))}
function UpdateLeaderboard(b,a){try{if(b&&a>0){var c=JSON.parse(window.sessionStorage.getItem("leagueview")),d=1;c&&a!=c.leagueID&&(d=0);if(d==1&&IsthisLeaderBoardDataUptoDate(b,a)==1){$("#LeagueLeaderboard").show();$("#LeagueLeaderboard").html(CreateLeagueScoresView2(b,"ff",!0));refreshScroller(leaderboardScroller,"LeagueLeaderboard");var e=typeof b!="object"?JSON.parse(b):b;window.sessionStorage.setItem("leaderboard",$.toJSON(e))}}}catch(f){logError("UpdateLeaderboard",f)}}
function updateLeaderboardLog(b,a){var c=[];c.push(b);c.push(a);window.sessionStorage.setItem("LeaderboardLog",$.toJSON(c))}
function IsthisLeaderBoardDataUptoDate(b,a){var c=1,d=typeof b!="object"?JSON.parse(b):b,e;try{if(e=d[0].TimeStamp){var f=new Date(e),g=JSON.parse(window.sessionStorage.getItem("LeaderboardLog"));if(g&&g!="null"&&g!=""){var h=g[0];g[1]==a&&h&&(new Date(h)>f?c=0:updateLeaderboardLog(e,a))}else updateLeaderboardLog(e,a)}}catch(j){logError("IsthisLeaderBoardDataUptoDate",j)}return c}
function CreateLeagueScoresView2(b,a,c){a===void 0&&(a="mediumTable");c=!1;c===void 0&&(c=!0);var d=JSON.parse(window.sessionStorage.getItem("facebookuser")),b=typeof b!="object"?JSON.parse(b):b,a='<table class="'+a+'">';if(c){a+="<thead><tr>";for(var e in b[0])a+='<th scope="col" class="'+e.toString()+'">'+e+"</th>";a+="</tr></thead>"}a+="<tbody>";for(c=0;c<b.length;c++){var f=b[c].CurrentUser,g=b[c].FBUserIDList,h=b[c].CurrentBet,j="";h&&h.status==0&&h.betid>0&&(j=" beton");a+=f==!0||d.fbuserid==
g?'<tr class="alt_me'+j+'">':'<tr class="alt'+j+'">';for(e in b[c])a+='<td class="'+e.toString()+'">'+b[c][e]+"</td>";a+="</tr>"}a+="</tbody>";a+="</table>";return a};function createleaguemanager(b){var a=b.Name.value,b=b.Description.value,c=JSON.parse(window.sessionStorage.getItem("facebookuser")),d=getFacebookStatus();c!=void 0?d==1?(c=window.sessionStorage.getItem("facebookuser"),$.ajax({url:Config.WS_URL_ROOT+"/League/LeagueCreateHandler",type:"POST",data:"name="+a+"&description="+b+"&user="+c,dataType:"html",error:function(a,b,c){AjaxFail("createleaguemanager",a,b,c)},success:function(a){var b="";b+='<div class="display-label">Name</div><div class="display-field">'+
JSON.parse(a).Name+"</div>";b+='<div class="display-label">Description</div><div class="display-field">'+JSON.parse(a).Description+"</div>";b+='<div class="display-label">Join Code</div><div class="display-field" ID="joinCode">'+JSON.parse(a).JoinCode+"</div>";$("#CreatedLeague").append(b);$("#leagueform").hide();$("#friendsInvite").show()}})):(window.sessionStorage.removeItem("facebookuser"),a="",a+='<div class="display-label">Error</div><div class="display-field">You Must Log In to create a league</div>',
$("#CreatedLeague").append(a)):d==1&&(a="",a+='<div class="display-label">Error</div><div class="display-field">You Must Log In to create a league</div>',$("#CreatedLeague").append(a))}
function SendInvite(b){var a=window.sessionStorage.getItem("facebookuser"),c=b.invite.value,b=b.league.value,d=document.getElementById("joinCode").firstChild.nodeValue;$.ajax({url:Config.WS_URL_ROOT+"/League/sendInvites",type:"POST",data:"user="+a+"&inviteList="+c+"&league="+b+"&joinCode="+d,dataType:"html",error:function(a,b,c){AjaxFail("SendInvite",a,b,c)},success:function(a){var b="";b+='<div class="display-field">'+a+"</div>";$("#invitedetails").append(b)}})}
function ViewLeagues(b){var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));if(a){if(thisFixture){if(a.currentfixtureid!=thisFixture.fixtureid)a.currentfixtureid=thisFixture.fixtureid,window.sessionStorage.setItem("facebookuser",$.toJSON(a))}else{var c=GetRequestParam("f");if(a.currentfixtureid!=c)a.currentfixtureid=c,window.sessionStorage.setItem("facebookuser",$.toJSON(a))}$.ajax({url:Config.WS_URL_ROOT+"/League/GetYourLeague",type:"POST",data:a,error:function(a,b,c){AjaxFail("ViewLeagues",
a,b,c)},success:function(a){a&&b==1&&DisplayOneTimeOnlyLeagueDetailsForthisFixture(a)}})}}
function DisplayOneTimeOnlyLeagueDetailsForthisFixture(b){var a=0,c=0,b=typeof b!="object"?JSON.parse(b):b,d=JSON.parse(window.sessionStorage.getItem("facebookuser"));if(d.currentfixtureid&&d.currentfixtureid>0)for(var e=0;e<b.length;e++)b[e].fixtureid==d.currentfixtureid&&(a==0&&(GetLeagueTable_WithLeagueHeader(b[e].ID,b[e].Name,b[e].Description,b[e].CreaterFBID),a=1),schema.push("LT"+b[e].ID),b[e].CreaterFBID>0&&(c=1));a==1&&LSBind("FixtureID"+d.currentfixtureid);c==1&&$("#FriendInviteButton").hide();
return a}
function CreateLeaguesView(b,a,c){a===void 0&&(a="mediumTable");c=!1;c===void 0&&(c=!0);b=typeof b!="object"?JSON.parse(b):b;a='<table class="'+a+'">';if(c){a+="<thead><tr>";for(var d in b[0])a+='<th scope="col" class='+d.toString()+">"+d+"</th>";a+="</tr></thead>"}a+="<tbody>";for(c=0;c<b.length;c++){var e=b[c].Name,f=b[c].Description;a+=c%2==0?'<tr class="alt" onclick="GetLeagueTable_WithLeagueHeader('+b[c].ID+",'"+e.replace("'","`")+"','"+f.replace("'","`")+"','"+b[c].CreaterFBID+"');return false;\" >":'<tr class="alt" onclick="GetLeagueTable_WithLeagueHeader(\''+
b[c].ID+"','"+e.replace("'","`")+"','"+f.replace("'","`")+"','"+b[c].CreaterFBID+"');return false;\">";for(d in b[c])a+='<td class="'+d.toString()+'">'+b[c][d]+"</td>";a+="</tr>"}a+="</tbody>";a+="</table>";return a}
function joinleague(b){var b=b.JoinCode.value,a=window.sessionStorage.getItem("facebookuser");$.ajax({url:Config.WS_URL_ROOT+"/League/JoinleagueHandler",type:"POST",data:"user="+a+"&joinCode="+b,dataType:"html",error:function(a,b,e){AjaxFail("joinleague",a,b,e)},success:function(a){var b="";b+='<div class="display-field">'+a+"</div>";$("#joinMessage").append(b)}})};var cock=1;cock+=2;
function LSBind(b){if(LSBound==0)page=new PushPage,page.context.setDebugAlertsOnClientError(!1),page.context.setDomain("botsn.com"),page.onEngineCreation=function(a){LSEngine=a;LogThisInteractionTime();logError("LSBind","page.onEngineCreation - LightStreamer Engine is created!","","");LSEngine.context.setDebugAlertsOnClientError(!1);LSEngine.connection.setLSHost("ls.botsn.com");LSEngine.connection.setLSPort(8055);LSEngine.connection.setAdapterName("FBALLSRV");LSEngine.changeStatus("STREAMING");LSEngine.onStatusChange=
function(a){logError("LSBind","LightStream Status Changed. newStatus is "+a+".","","")}},page.onEngineLost=function(){var a=GetRequestParam("f");a>0&&(LogThisInteractionTime(),ClearLightstreamObjects(),LSBind("FixtureID"+a),GetGameDetails(fixture,GameDetailsComplete),GetFriendsDetails(),ViewLeagues(1));logError("LSBind","LightStream connection lost. Reconnecting.","","")},page.bind(),page.createEngine("SoccerBallApp","LS","SHARE_SESSION"),group=Array(b),pushTable=new NonVisualTable(group,schema,"MERGE"),
pushTable.setSnapshotRequired(!0),pushTable.onItemUpdate=function(a,b){LogThisInteractionTime();try{var d,e,f,g,h,j,k;if(typeof schema=="undefined"||schema==null)alert("schema is null!!!"),schema=["Ball","EventID","timestamp","Adapter","Admin","FixtureID","HomeScore","AwayScore","EventDescription","EventLogID","EventOdds","UBD","UserID","BD","EventTime"],FriendsAddedToLSSchema=0,AddMyFriendsToLightStreamerSchema();for(var r=0;r<schema.length;r++)if(b.isValueChanged(schema[r])){var m=b.getNewValue(schema[r]),
n=schema[r];if(m!=null)switch(n!="timestamp"&&(m=m.substring(13)),n){case "Ball":var o=m.indexOf(",");if(o>-1){var p=parseInt(m.substr(0,o+1)),s=parseInt(m.substr(o+1));SendFBall.to(p,s)}break;case "EventID":d=m;break;case "FixtureID":e=m;break;case "HomeScore":g=m;break;case "AwayScore":h=m;break;case "EventDescription":f=m;break;case "EventLogID":j=m;break;case "UBD":break;case "timestamp":break;case "UserID":break;case "EventOdds":k=m;break;case "EventTime":eventUpdateTime=new Date(m);break;case "KeepAlive":KeepAliveCount+=
1;break;default:if(n.substring(0,3)=="UBD")AddBetToFriendsBetList(m);else if(n.substring(0,3)=="UID")DisplayInviteDetails(m);else if(n.substring(0,2)=="LT"){var t=n.substring(2);UpdateLeaderboard(m,t)}}}j>0&&(logError("LSBind","EventReceived is "+d,"",""),UpdateGameEventFromLightStreamer(e,d,j,g,h,f,eventUpdateTime));k&&updateOdds(k)}catch(u){logError("LSBind",u)}},page.addTable(pushTable,"livegames")}function ClearLightstreamObjects(){pushTable=group=page=LSEngine=null}
function AddMyFriendsToLightStreamerSchema(){try{if(uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser")),schema.push("UID"+uiUser.fbuserid),FriendsAddedToLSSchema==0){var b=JSON.parse(window.sessionStorage.getItem("facebookfriendlist"));if(typeof b!="undefined"&&b!=null){for(var a=0;a<=b.length-1;a++)schema.push("UBD"+b[a].id);FriendsAddedToLSSchema=1}}}catch(c){logError("AddMyFriendsToLightStreamerSchema",c)}}
function AddLeagueToLightStreamer(b){GetRequestParam("f")>0&&(schema.push("LT"+b),LSBind("FixtureID"+fixtureCheck))}function LogThisInteractionTime(){lastInteractionTime=(new Date).getTime()}
function CheckConnection(){try{if(lastInteractionTime==null){var b=GetRequestParam("f");b>0&&(LogThisInteractionTime(),LSBind("FixtureID"+b))}else{var a=(new Date).getTime();if(parseInt((a-lastInteractionTime)/1E3)>timeBetweenLightstreamConnections&&(b=GetRequestParam("f"),b>0))$(".GameFeedInfo").prepend("Connection lost. Reconnecting...<br />"),logError("LSBind","Connection lost. Reloading page!!!!!!!","",""),refreshScroller(GameFeedScroller,"GameFeedInfo"),window.location="http://www.botsn.com/Game/?f="+
b}}catch(c){logError("CheckConnection",c)}setTimeout("CheckConnection();",timeBetweenLightstreamConnections*1E3)};function Bet(b,a,c,d){this.betid=0;this.eventid=b;this.eventdesc=null;this.fixtureid=a;this.amount=c;this.odds=0;this.newodds=null;this.userid=d;this.creditsremaining=this.betresult=this.betdescription=this.user=null;this.status=0;this.betcomplete=!1;this.creditsearned=0;this.newcredits=!1;this.eventtime=null;this.addamount=this.numattempts=0;this.leagueleaderboardlist=this.friendsleaderboardlist=this.incorrectOdds=this.incorrectEventID=null;this.leagueid=0}
function FixtureBet(){this.fbid=0;this.options=this.description=null;this.betmade=0;this.betstatus=-101;this.userid=this.fixtureid=this.placebet=this.open=this.pregame=0;this.fbuserid=null;this.userscreditsforthisgame=-999999}function FixtureBetOptions(){this.selectedoptionid=this.optionid=0;this.description=null;this.status=this.winnings=this.amount=this.userodds=this.odds=0}
function placePreGameBets(){try{var b=JSON.parse(window.sessionStorage.getItem("pregamebets"));GetRequestParam("f");var a=0,c=0;if(b){for(var d=0;d<b.length;d++){var e=b[d];if(e.betmade==0){var f=parseInt($("#betoptionselect"+e.fbid).val()),g=parseInt($("#betselect"+e.fbid).val());if(f>0&&g>0)for(var h=0;h<e.options.length;h++){var j=e.options[h];if(j.optionid==f){j.selectedoptionid=f;j.amount=g;j.odds=CastToDecimal(j.odds);c=1;e.placebet=1;break}}}else a+=1}c==1&&($(".pregameclick").hide(),window.sessionStorage.setItem("pregamebets",
$.toJSON(b)),$.ajax({url:Config.WS_URL_ROOT+"/Game/PlacePreGameBets",data:JSON.stringify(b),dataType:"json",contentType:"application/json: charset=utf-8",type:"POST",error:function(a,b,c){AjaxFail("placePreGameBets",a,b,c)},success:function(b){b&&PreGameBetsPlaced(b,a)}}))}}catch(k){logError("placePreGameBets",k)}$(".pregame-betpanel").hide()}
function PreGameBetsPlaced(b,a){try{var c=0,d=0;if(b&&b.length>0){window.sessionStorage.setItem("pregamebets",$.toJSON(b));try{c=b[0].totalcreditsjustbet;if(c>0){var e=JSON.parse(window.sessionStorage.getItem("facebookuser"));e.credits-=c;window.sessionStorage.setItem("facebookuser",$.toJSON(e));$(".credits").html(e.credits);var f=b[0].userscreditsforthisgame;f!=-999999&&NotifyFriendsOfNewBalanceForThisGame(thisFixture.fixtureid,e.fbuserid,f)}DisplayFriendsLeaderBoard(b[0].friendsleaderboardlist);
UpdateLeaderboard(b[0].leagueleaderboardlist,b[0].leagueid)}catch(g){}for(c=0;c<b.length;c++)b[c].betmade==!0&&(d+=1);var h=parseInt(d)-parseInt(a);h>0&&(h==1?$(".GameFeedInfo").prepend("<b class='bettext'>"+h+" Pre-Game Bet was placed!!</b><br />"):$(".GameFeedInfo").prepend("<b class='bettext'>"+h+" Pre-Game Bets were placed!!</b><br />"),$("#numPregame").html(d),refreshScroller(GameFeedScroller,"GameFeedInfo"))}$(".pregameclick").show()}catch(j){logError("PreGameBetsPlaced",j)}}
function ShowPreGameBets(b){try{for(var a="<div id='featured'>",c=0;c<b.length;c++){var d=b[c];a+="<div class='content'>";a=a+"<div class='pregamescroll' id='pregamescroll"+c+"'>";a+="<div class='pregame-bets'>";a=a+"<div class='bet-title'>"+d.description+"</div>";if(d.betmade==0)if(d.open==!0){for(var a=a+"<div class='option3'>Bet Credits <select id='betselect"+d.fbid+"' onBlur='RefreshBetScrollers();'><option>0</option><option>10</option><option>25</option><option>50</option><option>75</option><option>100</option></select></div>",
a=a+"<div class='option3'>Selection<select id='betoptionselect"+d.fbid+"'>",e=0;e<d.options.length;e++)var f=d.options[e],a=a+"<option value='"+f.optionid+"'>"+f.description+" ("+f.odds+"/1)</option>";a+="</select></div>";a+="<br clear='all' /><div class='spacer' ></div><br clear='all' />"}else a+="<div class='pregame-betmade'>This Bet is no longer open!</div>";else for(e=0;e<d.options.length;e++)if(f=d.options[e],f.selectedoptionid>0){var g=parseInt(f.amount)*parseInt(f.odds)+f.amount,a=a+"<div class='pregame-betmade'>You bet "+
f.amount+" credits at odds of "+f.odds+"/1 that the result would be <br /> <span class='pregame-betmade-desc'>"+f.description+"</span>";f.status==0?a=a+"<br /> You stand to win "+g+" credits!":f.status==1?a=a+"<br /> You won "+f.winnings+" credits!!!!":f.status==-1&&(a=a+"<br /> You lost "+f.amount+" credits!");a+="</div>";break}a+="</div>";a+="</div>";a+="</div>";listOfPreGameBetScrollerNames.push("pregamescroll"+c)}a+="</div>";$("#BetHTML").html(a);$("#featured").orbit({animation:"horizontal-push",
directionalNav:!0,animationSpeed:800,bullets:!0,bulletThumbs:!0,timer:!1,afterSlideChange:function(){RefreshBetScrollers()}});$(".pregame-betpanel").show();RefreshBetScrollers()}catch(h){logError("ShowPreGameBets",h)}}
function NotifyFriendsOfNewBalanceForThisGame(b,a,c){try{$.ajax({url:Config.WS_URL_ROOT+"/Game/NotifyFriendsOfNewBalance",type:"POST",data:"fixtureID="+b+"&fbuserid="+a+"&newBalance="+c,error:function(a,b,c){AjaxFail("NotifyFriendsOfNewBalance",a,b,c)},success:function(){}})}catch(d){logError("NotifyFriendsOfNewBalanceForThisGame",d)}}
function updatePreGamebets(b,a,c){try{CreditsWon=0,checkAndUpdateFirstTeamToScoreBet(b,a,c),DoHalfTimebets(b,a,c),DoFullTimebets(b,a,c),CreditsWon>0&&GetUsersNewBalanceAndNotifyFriends(CreditsWon)}catch(d){logError("updatePreGamebets",d)}}
function GetUsersNewBalanceAndNotifyFriends(b){var a=JSON.parse(window.sessionStorage.getItem("facebookuser")),c=GetRequestParam("f"),d=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"));if(d)for(var e=0;e<=d.length-1;e++)if(d[e].FBUserIDList==a.fbuserid){d[e].Credits=parseInt(d[e].Credits)+parseInt(b);window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(d));ReOrderFriendsScoresBasedOnCurrentScore();NotifyFriendsOfNewBalanceForThisGame(c,a.fbuserid,d[e].Credits);break}}
function DoFullTimebets(b,a,c){b==14&&(checkAndUpdateFulltimeScore(b,a,c),checkAndUpdateSecondHalfFreeKicks())}
function checkAndUpdateSecondHalfFreeKicks(){try{for(var b=JSON.parse(window.sessionStorage.getItem("pregamebets")),a=0;a<b.length;a++){var c=b[a];if(c.betmade==!0&&c.betstatus==0&&c.fbid==6)for(var d=0;d<c.options.length;d++){var e=c.options[d];if(e.selectedoptionid>0){var f=e.description.indexOf("-"),g=parseInt(e.description.substring(0,f)),h=parseInt(e.description.substring(f+1));if(thisFixture.numfreessecondhalf<0)thisFixture.numfreessecondhalf=0;if(thisFixture.numfreessecondhalf==g||thisFixture.numfreessecondhalf==
h||thisFixture.numfreessecondhalf<h&&thisFixture.numfreessecondhalf>g){c.betstatus=1;e.status=1;e.winnings=parseInt(e.amount)*parseInt(e.odds)+parseInt(e.amount);$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Bet : "+thisFixture.numfreessecondhalf+" free kicks in the second half. You win "+e.winnings+" credits!!</b><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");var j=JSON.parse(window.sessionStorage.getItem("facebookuser"));j.credits+=e.winnings;window.sessionStorage.setItem("facebookuser",
$.toJSON(j));$(".credits").html(j.credits);CreditsWon+=e.winnings}else c.betstatus=-1,e.status=-1,e.winnings=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Bet : "+thisFixture.numfreessecondhalf+" free kicks in the second half. You lose!!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo");window.sessionStorage.setItem("pregamebets",$.toJSON(b));break}}}}catch(k){logError("checkAndUpdateHalfTimeFreeKicks",k)}}
function checkAndUpdateFulltimeScore(b,a,c){try{var d;d=thisFixture.firsthalfleftteam==thisFixture.hometeam?c+"-"+a:a+"-"+c;for(var e=JSON.parse(window.sessionStorage.getItem("pregamebets")),b=0;b<e.length;b++){var f=e[b];if(f.betmade==!0&&f.betstatus==0&&f.fbid==4)for(a=0;a<f.options.length;a++){var g=f.options[a];if(g.selectedoptionid>0){if(g.description==d){f.betstatus=1;g.status=1;g.winnings=parseInt(g.amount)*parseInt(g.odds)+parseInt(g.amount);$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Bet : Full Time Score is "+
d+". You win "+g.winnings+" credits!!</b><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");var h=JSON.parse(window.sessionStorage.getItem("facebookuser"));h.credits+=g.winnings;window.sessionStorage.setItem("facebookuser",$.toJSON(h));$(".credits").html(h.credits);CreditsWon+=g.winnings}else f.betstatus=-1,g.status=-1,g.winnings=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Bet : Full Time Score is "+d+". You lose!!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo");
window.sessionStorage.setItem("pregamebets",$.toJSON(e));break}}}}catch(j){logError("checkAndUpdateFulltimeScore",j)}}function DoHalfTimebets(b,a,c){b==12&&(checkAndUpdateHalftimeScore(b,a,c),checkAndUpdateHalfTimeFreeKicks())}
function checkAndUpdateHalfTimeFreeKicks(){try{for(var b=JSON.parse(window.sessionStorage.getItem("pregamebets")),a=0;a<b.length;a++){var c=b[a];if(c.betmade==!0&&c.betstatus==0&&c.fbid==5)for(var d=0;d<c.options.length;d++){var e=c.options[d];if(e.selectedoptionid>0){var f=e.description.indexOf("-"),g=parseInt(e.description.substring(0,f)),h=parseInt(e.description.substring(f+1));if(thisFixture.numfreesfirsthalf<0)thisFixture.numfreesfirsthalf=0;if(thisFixture.numfreesfirsthalf==g||thisFixture.numfreesfirsthalf==
h||thisFixture.numfreesfirsthalf<h&&thisFixture.numfreesfirsthalf>g){c.betstatus=1;e.status=1;e.winnings=parseInt(e.amount)*parseInt(e.odds)+parseInt(e.amount);$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Bet : "+thisFixture.numfreesfirsthalf+" free kicks in the first half. You win "+e.winnings+" credits!!</b><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");var j=JSON.parse(window.sessionStorage.getItem("facebookuser"));j.credits+=e.winnings;window.sessionStorage.setItem("facebookuser",
$.toJSON(j));$(".credits").html(j.credits);CreditsWon+=e.winnings}else c.betstatus=-1,e.status=-1,e.winnings=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Bet : "+thisFixture.numfreesfirsthalf+" free kicks in the first half. You lose!!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo");window.sessionStorage.setItem("pregamebets",$.toJSON(b));break}}}}catch(k){logError("checkAndUpdateHalfTimeFreeKicks",k)}}
function checkAndUpdateHalfTimeThrows(){try{for(var b=JSON.parse(window.sessionStorage.getItem("pregamebets")),a=0;a<b.length;a++){var c=b[a];if(c.betmade==!0&&c.betstatus==0&&c.fbid==7)for(var d=0;d<c.options.length;d++){var e=c.options[d];if(e.selectedoptionid>0){var f=e.description.indexOf("-"),g=parseInt(e.description.substring(0,f)),h=parseInt(e.description.substring(f+1));if(thisFixture.numfreesfirsthalf==g||thisFixture.numfreesfirsthalf==h||thisFixture.numfreesfirsthalf<h&&thisFixture.numfreesfirsthalf>
g){c.betstatus=1;e.status=1;e.winnings=parseInt(e.amount)*parseInt(e.odds)+parseInt(e.amount);$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Bet : "+thisFixture.numfreesfirsthalf+" free kicks in the first half. You win "+e.winnings+" credits!!</b><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");var j=JSON.parse(window.sessionStorage.getItem("facebookuser"));j.credits+=e.winnings;window.sessionStorage.setItem("facebookuser",$.toJSON(j));$(".credits").html(j.credits);CreditsWon+=e.winnings}else c.betstatus=
-1,e.status=-1,e.winnings=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Bet : "+thisFixture.numfreesfirsthalf+" free kicks in the first half. You lose!!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo");window.sessionStorage.setItem("pregamebets",$.toJSON(b));break}}}}catch(k){logError("checkAndUpdateHalfTimeFreeKicks",k)}}
function checkAndUpdateHalftimeScore(b,a,c){try{var d;d=thisFixture.firsthalfleftteam==thisFixture.hometeam?a+"-"+c:c+"-"+a;for(var e=JSON.parse(window.sessionStorage.getItem("pregamebets")),b=0;b<e.length;b++){var f=e[b];if(f.betmade==!0&&f.betstatus==0&&f.fbid==3)for(a=0;a<f.options.length;a++){var g=f.options[a];if(g.selectedoptionid>0){if(g.description==d){f.betstatus=1;g.status=1;g.winnings=parseInt(g.amount)*parseInt(g.odds)+parseInt(g.amount);$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Bet : Half Time Score is "+
d+". You win "+g.winnings+" credits!!!</b><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");var h=JSON.parse(window.sessionStorage.getItem("facebookuser"));h.credits+=g.winnings;window.sessionStorage.setItem("facebookuser",$.toJSON(h));$(".credits").html(h.credits);CreditsWon+=g.winnings}else f.betstatus=-1,g.status=-1,g.winnings=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Bet : Half Time Score is "+d+". You lose!!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo");
window.sessionStorage.setItem("pregamebets",$.toJSON(e));break}}}}catch(j){logError("checkAndUpdateHalftimeScore",j)}}
function checkAndUpdateFirstTeamToScoreBet(b,a,c){try{if((b==6||b==4)&&(a==1&&c==0||a==0&&c==1))for(var d=JSON.parse(window.sessionStorage.getItem("pregamebets")),a=0;a<d.length;a++){var e=d[a];if(e.betmade==!0&&e.betstatus==0&&e.fbid==1){for(c=0;c<e.options.length;c++){var f=e.options[c];if(f.selectedoptionid==1){if(b==6){e.betstatus=1;f.status=1;f.winnings=parseInt(f.amount)*parseInt(f.odds)+parseInt(f.amount);$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Bet : "+f.description+" score first. You win "+
f.winnings+" credits!!!</b><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");var g=JSON.parse(window.sessionStorage.getItem("facebookuser"));g.credits+=f.winnings;window.sessionStorage.setItem("facebookuser",$.toJSON(g));$(".credits").html(g.credits);CreditsWon+=f.winnings}else e.betstatus=-1,f.status=-1,f.winnings=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Bet : "+f.description+" don't score first. You lose!!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo");break}else if(f.selectedoptionid==
2){b==4?(e.betstatus=1,f.status=1,f.winnings=parseInt(f.amount)*parseInt(f.odds)+parseInt(f.amount),$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Bet : "+f.description+" score first. You win "+f.winnings+" credits!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"),g=JSON.parse(window.sessionStorage.getItem("facebookuser")),g.credits+=f.winnings,window.sessionStorage.setItem("facebookuser",$.toJSON(g)),$(".credits").html(g.credits),CreditsWon+=f.winnings):(e.betstatus=-1,f.status=
-1,f.winnings=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Bet : "+f.description+" don't score first. You lose!!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"));break}}window.sessionStorage.setItem("pregamebets",$.toJSON(d))}}}catch(h){logError("UpdateFirstTeamToScore",h)}}function closePreGamepanel(){$(".pregame-betpanel").hide()}
function RefreshBetScrollers(){try{if(listOfPreGameBetScrollers&&listOfPreGameBetScrollers.length>0)for(var b=0;b<listOfPreGameBetScrollers.length;b++)listOfPreGameBetScrollers[b].refresh();else for(b=0;b<listOfPreGameBetScrollerNames.length;b++){var a=new iScroll(listOfPreGameBetScrollerNames[b],{hScrollbar:!1,vScrollbar:!1});listOfPreGameBetScrollers.push(a);a.refresh()}}catch(c){logError("placePreGameBets",c)}}
function GetPreGameBetDetails(b){listOfPreGameBetScrollers=[];listOfPreGameBetScrollerNames=[];try{var a=GetRequestParam("f");if(a>0){var c=JSON.parse(window.sessionStorage.getItem("facebookuser"));c&&$.ajax({url:Config.WS_URL_ROOT+"/Game/GetFixtureBetDetails",type:"POST",data:"fixtureID="+a+"&userid="+c.id,error:function(a,b,c){AjaxFail("GetGameBetDetails",a,b,c)},success:function(a){if(a&&a.length>0){window.sessionStorage.setItem("pregamebets",$.toJSON(a));b||ShowPreGameBets(a);for(var c=0,d=0;d<
a.length;d++)a[d].betmade==!0&&(c+=1);$("#numPregame").html(c);try{DisplayFriendsLeaderBoard(a[0].friendsleaderboardlist),UpdateLeaderboard(a[0].leagueleaderboardlist,a[0].leagueid)}catch(h){}}}})}}catch(d){logError("GetGameBetDetails",d)}};window.Modernizr=function(b,a,c){function d(){h.input=function(a){for(var b=0,c=a.length;b<c;b++)z[a[b]]=!!(a[b]in n);return z}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));h.inputtypes=function(b){for(var d=0,e,f,g,h=b.length;d<h;d++)n.setAttribute("type",f=b[d]),(e=n.type!=="text")&&(n.value=o,n.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&n.style.WebkitAppearance!==c?(j.appendChild(n),g=a.defaultView,e=g.getComputedStyle&&
g.getComputedStyle(n,null).WebkitAppearance!=="textfield"&&n.offsetHeight!==0,j.removeChild(n)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=n.checkValidity&&n.checkValidity()===!1:/^color$/.test(f)?(j.appendChild(n),e=n.value!=o,j.removeChild(n)):e=n.value!=o)),v[b[d]]=!!e;return v}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function e(a,b){var c=a.charAt(0).toUpperCase()+a.substr(1),c=(a+" "+t.join(c+" ")+c).split(" ");return!!f(c,
b)}function f(a,b){for(var d in a)if(m[a[d]]!==c&&(!b||b(a[d],r)))return!0}function g(a,b){return typeof a===b}var h={},j=a.documentElement,k=a.head||a.getElementsByTagName("head")[0],r=a.createElement("modernizr"),m=r.style,n=a.createElement("input"),o=":)",p=Object.prototype.toString,s=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),t="Webkit Moz O ms Khtml".split(" "),u={svg:"http://www.w3.org/2000/svg"},l={},v={},z={},C=[],A,w=function(b){var c=a.createElement("style"),d=a.createElement("div");
c.textContent=b+"{#modernizr{height:3px}}";k.appendChild(c);d.id="modernizr";j.appendChild(d);b=d.offsetHeight===3;c.parentNode.removeChild(c);d.parentNode.removeChild(d);return!!b},x=function(){var b={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(d,e){var e=e||a.createElement(b[d]||"div"),f=(d="on"+d)in e;f||(e.setAttribute||(e=a.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=g(e[d],"function"),g(e[d],
c)||(e[d]=c),e.removeAttribute(d)));return f}}(),B={}.hasOwnProperty,D;g(B,c)||g(B.call,c)?D=function(a,b){return b in a&&g(a.constructor.prototype[b],c)}:D=function(a,b){return B.call(a,b)};l.flexbox=function(){var b=a.createElement("div"),c=a.createElement("div");(function(a,b,c,d){b+=":";a.style.cssText=(b+s.join(c+";"+b)).slice(0,-b.length)+(d||"")})(b,"display","box","width:42px;padding:0;");c.style.cssText=s.join("box-flex:1;")+"width:10px;";b.appendChild(c);j.appendChild(b);var d=c.offsetWidth===
42;b.removeChild(c);j.removeChild(b);return d};l.canvas=function(){var b=a.createElement("canvas");return b.getContext&&b.getContext("2d")};l.canvastext=function(){return h.canvas&&g(a.createElement("canvas").getContext("2d").fillText,"function")};l.webgl=function(){return!!b.WebGLRenderingContext};l.touch=function(){return"ontouchstart"in b||w("@media ("+s.join("touch-enabled),(")+"modernizr)")};l.geolocation=function(){return!!navigator.geolocation};l.postmessage=function(){return!!b.postMessage};
l.websqldatabase=function(){return!!b.openDatabase};l.indexedDB=function(){for(var a=-1,c=t.length;++a<c;){var d=t[a].toLowerCase();if(b[d+"_indexedDB"]||b[d+"IndexedDB"])return!0}return!1};l.hashchange=function(){return x("hashchange",b)&&(a.documentMode===c||a.documentMode>7)};l.history=function(){return!(!b.history||!history.pushState)};l.draganddrop=function(){return x("dragstart")&&x("drop")};l.websockets=function(){return"WebSocket"in b};l.rgba=function(){m.cssText="background-color:rgba(150,255,150,.5)";
return(""+m.backgroundColor).indexOf("rgba")!==-1};l.hsla=function(){m.cssText="background-color:hsla(120,40%,100%,.5)";return(""+m.backgroundColor).indexOf("rgba")!==-1||(""+m.backgroundColor).indexOf("hsla")!==-1};l.multiplebgs=function(){m.cssText="background:url(//:),url(//:),red url(//:)";return/(url\s*\(.*?){3}/.test(m.background)};l.backgroundsize=function(){return e("backgroundSize")};l.borderimage=function(){return e("borderImage")};l.borderradius=function(){return e("borderRadius","",function(a){return(""+
a).indexOf("orderRadius")!==-1})};l.boxshadow=function(){return e("boxShadow")};l.textshadow=function(){return a.createElement("div").style.textShadow===""};l.opacity=function(){var a=s.join("opacity:.55;")+"";m.cssText=a;return/^0.55$/.test(m.opacity)};l.cssanimations=function(){return e("animationName")};l.csscolumns=function(){return e("columnCount")};l.cssgradients=function(){var a=("background-image:"+s.join("gradient(linear,left top,right bottom,from(#9f9),to(white));background-image:")+s.join("linear-gradient(left top,#9f9, white);background-image:")).slice(0,
-17);m.cssText=a;return(""+m.backgroundImage).indexOf("gradient")!==-1};l.cssreflections=function(){return e("boxReflect")};l.csstransforms=function(){return!!f(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])};l.csstransforms3d=function(){var a=!!f(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);a&&"webkitPerspective"in j.style&&(a=w("@media ("+s.join("transform-3d),(")+"modernizr)"));return a};l.csstransitions=function(){return e("transitionProperty")};
l.fontface=function(){var b,c,d=k||j,e=a.createElement("style");c=a.implementation||{hasFeature:function(){return!1}};e.type="text/css";d.insertBefore(e,d.firstChild);b=e.sheet||e.styleSheet;c=(c.hasFeature("CSS2","")?function(a){if(!b||!a)return!1;var c=!1;try{b.insertRule(a,0),c=/src/i.test(b.cssRules[0].cssText),b.deleteRule(b.cssRules.length-1)}catch(d){}return c}:function(a){if(!b||!a)return!1;b.cssText=a;return b.cssText.length!==0&&/src/i.test(b.cssText)&&b.cssText.replace(/\r+|\n+/g,"").indexOf(a.split(" ")[0])===
0})('@font-face { font-family: "font"; src: url(data:,); }');d.removeChild(e);return c};l.video=function(){var b=a.createElement("video"),c=!!b.canPlayType;if(c)c=new Boolean(c),c.ogg=b.canPlayType('video/ogg; codecs="theora"'),c.h264=b.canPlayType('video/mp4; codecs="avc1.42E01E"')||b.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'),c.webm=b.canPlayType('video/webm; codecs="vp8, vorbis"');return c};l.audio=function(){var b=a.createElement("audio"),c=!!b.canPlayType;c&&(c=new Boolean(c),
c.ogg=b.canPlayType('audio/ogg; codecs="vorbis"'),c.mp3=b.canPlayType("audio/mpeg;"),c.wav=b.canPlayType('audio/wav; codecs="1"'),c.m4a=b.canPlayType("audio/x-m4a;")||b.canPlayType("audio/aac;"));return c};l.localstorage=function(){try{return!!localStorage.getItem}catch(a){return!1}};l.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(a){return!1}};l.webWorkers=function(){return!!b.Worker};l.applicationcache=function(){return!!b.applicationCache};l.svg=function(){return!!a.createElementNS&&
!!a.createElementNS(u.svg,"svg").createSVGRect};l.inlinesvg=function(){var b=a.createElement("div");b.innerHTML="<svg/>";return(b.firstChild&&b.firstChild.namespaceURI)==u.svg};l.smil=function(){return!!a.createElementNS&&/SVG/.test(p.call(a.createElementNS(u.svg,"animate")))};l.svgclippaths=function(){return!!a.createElementNS&&/SVG/.test(p.call(a.createElementNS(u.svg,"clipPath")))};for(var E in l)D(l,E)&&(A=E.toLowerCase(),h[A]=l[E](),C.push((h[A]?"":"no-")+A));h.input||d();h.crosswindowmessaging=
h.postmessage;h.historymanagement=h.history;h.addTest=function(a,b){a=a.toLowerCase();if(!h[a])return b=!!b(),j.className+=" "+(b?"":"no-")+a,h[a]=b,h};m.cssText="";r=n=null;b.attachEvent&&function(){var b=a.createElement("div");b.innerHTML="<elem></elem>";return b.childNodes.length!==1}()&&function(a,b){function c(a,b){for(var d=-1,e=a.length,f,g=[];++d<e;)f=a[d],(b=f.media||b)!="screen"&&g.push(c(f.imports,b),f.cssText);return g.join("")}function d(a){for(var b=-1;++b<f;)a.createElement(e[b])}var e=
"abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video".split("|"),f=e.length,g=RegExp("(^|\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)","gi"),h=RegExp("<(/*)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)","gi"),j=RegExp("(^|[^\\n]*?\\s)(abbr|article|aside|audio|canvas|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)([^\\n]*)({[\\n\\w\\W]*?})",
"gi"),k=b.createDocumentFragment(),l=b.documentElement,m=l.firstChild,n=b.createElement("body"),p=b.createElement("style"),o;d(b);d(k);m.insertBefore(p,m.firstChild);p.media="print";a.attachEvent("onbeforeprint",function(){var a=-1,d=c(b.styleSheets,"all"),m=[],q;for(o=o||b.body;(q=j.exec(d))!=null;)m.push((q[1]+q[2]+q[3]).replace(g,"$1.iepp_$2")+q[4]);for(p.styleSheet.cssText=m.join("\n");++a<f;){d=b.getElementsByTagName(e[a]);m=d.length;for(q=-1;++q<m;)d[q].className.indexOf("iepp_")<0&&(d[q].className+=
" iepp_"+e[a])}k.appendChild(o);l.appendChild(n);n.className=o.className;n.innerHTML=o.innerHTML.replace(h,"<$1font")});a.attachEvent("onafterprint",function(){n.innerHTML="";l.removeChild(n);l.appendChild(o);p.styleSheet.cssText=""})}(b,a);h._enableHTML5=!0;h._version="1.7";j.className=j.className.replace(/\bno-js\b/,"")+" js "+C.join(" ");return h}(this,this.document);function User(b){this.userid=0;this.fbuserid=b.id;this.name=b.name;this.first_name=b.first_name;this.last_name=b.last_name;this.link=b.link;this.username=b.username;this.locale=b.locale;this.gender=b.gender;this.loggedIn=!1;this.credits=0;this.birthday=b.birthday;this.email=b.email;this.timezone=b.timezone;this.updated_time=b.updated_time;this.verified=b.verified;this.profilepic="https://graph.facebook.com/"+b.id+"/picture";this.currentfixtureid=0;this.extradata=null}
function FriendUser(b,a){this.userid=0;this.fbuserid=b;this.name=a;this.gender=this.locale=this.username=this.link=this.last_name=this.first_name=null;this.loggedIn=!1;this.credits=0;this.profilepic=this.verified=this.updated_time=this.timezone=this.email=this.birthday=null};var alreadyDoneLogInFlow=0,accessToken=null,userisLoggedIn=-1,LoginDetailsLoaded=0;function loginV2(b,a){b.authResponse?alreadyDoneLogInFlow==0&&(alreadyDoneLogInFlow=1,DoFlowForLoggedInUser(b,a)):($("#signUp").show(),$("#fbLogin").hide(),logout(1),SetUpButtonForLoggedOutUser(),CheckForFacebookRequests(0))}
function DoFlowForLoggedInUser(b,a){accessToken=b.authResponse.accessToken;var c;try{c=JSON.parse(window.sessionStorage.getItem("facebookuser"))}catch(d){c=null,logError("UpdateLiveGamesToFacebookUser",d)}SetUpButtonForLoggedInUser(a);c==void 0||c==null?typeof loginFixtureID!="undefined"&&loginFixtureID!=null&&loginFixtureID>0&&LoginClick==1?window.location="http://www.botsn.com/Game/?f="+loginFixtureID:UpdateLiveGamesToFacebookUser(b,a):($("#PlayLink").show(),$(".flipwarning").show(),$(".credits").html(c.credits),
$(".credits").show(),c=GetRequestParam("f"),SetUpMainMenuLink(),c>0&&(GetGameDetails(c,GameDetailsComplete),ViewLeagues(1),GetFriends()),CheckForFacebookRequests(1))}function UpdateLiveGamesToFacebookUser(b,a){try{thisUser=new User(a),LogUserDetailsV1(a,thisUser)}catch(c){logError("UpdateLiveGamesToFacebookUser",c)}}
function LogUserDetailsV1(b,a){try{$.ajax({headers:{"Content-Type":"application/json",Accept:"application/json"},url:Config.WS_URL_ROOT+"/Login/Login",type:"GET",data:{fbuserid:a.fbuserid,name:a.name,first_name:a.first_name,last_name:a.last_name,link:a.link,locale:a.locale,gender:a.gender,birthday:a.birthday,email:a.email,timezone:a.timezone,verified:a.verified,profilepic:a.profilepic},dataType:"json",error:function(a,b,c){AjaxFail("LogUserDetailsV1",a,b,c)},success:function(b){try{if(window.sessionStorage.setItem("facebookuser",
$.toJSON(b)),$("#PlayLink").show(),a.userid=b.id,a.credits=b.credits,$(".credits").html(b.credits),$(".credits").show(),SetUpMainMenuLink(),a.userid>0){var c=window.location.href,f=GetRequestParam("f");c.indexOf("signup/")>0?window.location="http://www.botsn.com":typeof loginFixtureID!="undefined"&&loginFixtureID!=null&&loginFixtureID>0&&LoginClick==1?window.location="http://www.botsn.com/Game/?f="+loginFixtureID:typeof f!="undefined"&&f!=null&&f>0?(GetGameDetails(f,GameDetailsComplete),ViewLeagues(1),
GetFriends()):CheckForFacebookRequests(1)}}catch(g){logError("LogUserDetailsV1_return",g)}}})}catch(c){logError("LogUserDetailsV1",c)}}function FaceBookElementsLoaded(){LoginDetailsLoaded=1;SetUpLoginButtons()}function newLoginFlow(b){b.authResponse?FB.api("/me",function(a){loginV2(b,a)}):($("#signUp").show(),$("#fbLogin").hide(),$("#PlayLink").show(),logout(1),SetUpButtonForLoggedOutUser(),CheckForFacebookRequests(0))}
window.fbAsyncInit=function(){FB.init({appId:Config.FACEBOOK_APPID,status:!0,cookie:!0,oauth:!0,xfbml:!0,channelUrl:"//www.botsn.com/channel.html"});FB.getLoginStatus(newLoginFlow);FB.Event.subscribe("auth.login",function(b){newLoginFlow(b)});FB.Event.subscribe("auth.logout",function(){logout(0)})};(function(){var b=document.createElement("script");b.async=!0;b.src=document.location.protocol+"//connect.facebook.net/en_US/all.js";document.getElementById("fb-root").appendChild(b)})();
function CheckForFacebookRequests(b){var a=GetRequestParam("request_ids");if(a){window.sessionStorage.setItem("fbs",1);var c=JSON.parse(window.sessionStorage.getItem("facebookuser")),d=decodeURIComponent(a).split(",");if(d&&d.length>0)for(var e=0;e<d.length;e++){var f;c&&c.id?(f=d[e]+"_"+c.fbuserid,deleteRequest(f)):getUserIDAndDeleteRequest(d[e])}b==1&&GetFixtureIdFromFbRequest(a)}}function getMultipleRequests(b){FB.api("",{ids:b},function(a){console.log(a)})}
function getUserIDAndDeleteRequest(b){FB.api(b,function(a){try{a&&a.to&&a.to.id&&deleteRequest(b+"_"+a.to.id)}catch(c){logError("getUserIDAndDeleteRequest",c)}})}function deleteRequest(b){FB.api(b,"delete",function(){})}
function GetFixtureIdFromFbRequest(b){try{var a=window.sessionStorage.getItem("facebookuser");$.ajax({url:Config.WS_URL_ROOT+"/Game/GetFixtureIdFromFbRequest",type:"POST",data:"fbRequest="+b+"&user="+a,dataType:"html",error:function(a,b,c){AjaxFail("GetFixtureIdFromFbRequest",a,b,c)},success:function(a){DropUserOnFixture(a)}})}catch(c){logError("GetFixtureIdFromFbRequest",c)}}
function DropUserOnFixture(b){try{if(typeof b!="undefined"&&b!=null&&b>0)window.location="http://www.botsn.com/Game/?fb_source=1&f="+b}catch(a){logError("DropUserOnFixture",a)}}
function GetFriends(){try{var b;try{b=JSON.parse(window.sessionStorage.getItem("facebookfriendlist"))}catch(a){logError("GetFriends",a)}var c=-1;if(thisFixture)c=thisFixture.fixtureid;else{var d=GetRequestParam("f");d>0&&(c=d)}typeof b=="undefined"||b==null||b==""?$.ajax({headers:{"Content-Type":"application/json",Accept:"application/json"},url:Config.WS_URL_ROOT+"/FacebookLogin/Handshake",type:"GET",data:{authCode:accessToken},dataType:"json",error:function(a,b,c){AjaxFail("GetFriends",a,b,c)},success:function(a){try{window.sessionStorage.setItem("facebookfriendlist",
$.toJSON(a.data)),c>0&&(GetFriendsDetails(),AddMyFriendsToLightStreamerSchema(),LSBind("FixtureID"+c))}catch(b){logError("GetFriends_success",b)}}}):c>0&&(GetFriendsDetails(),AddMyFriendsToLightStreamerSchema(),LSBind("FixtureID"+c))}catch(e){logError("GetFriends",e)}}function GetFriendsDetails(){try{GetFriendsGameHistory(),GetFriendsLeaderBoard()}catch(b){logError("GetFriendsGameHistory",b)}}
function GetFriendsGameHistory(){try{var b=window.sessionStorage.getItem("facebookfriendlist"),a=window.sessionStorage.getItem("facebookuser");$.ajax({url:Config.WS_URL_ROOT+"/Game/GetFriendsDetails",type:"POST",data:"FriendList="+b+"&user="+a+"&fixtureID="+fixture,dataType:"html",error:function(a,b,c){AjaxFail("GetFriendsGameHistory",a,b,c)},success:function(a){ProcessFriendsDetails(a)}})}catch(c){logError("GetFriendsGameHistory",c)}}
function GetFriendsLeaderBoard(){try{var b=window.sessionStorage.getItem("facebookfriendlist"),a=window.sessionStorage.getItem("facebookuser");$.ajax({url:Config.WS_URL_ROOT+"/Leaderboard/GetFriendsLeaderboard",type:"POST",data:"FriendList="+b+"&user="+a+"&fixtureID="+fixture,dataType:"html",error:function(a,b,c){AjaxFail("GetFriendsLeaderBoard",a,b,c)},success:function(a){DisplayFriendsLeaderBoard(a)}})}catch(c){logError("GetFriendsLeaderBoard",c)}}
function DisplayFriendsLeaderBoard(b){try{if(b){var a=typeof b!="object"?JSON.parse(b):b;window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(a));FinishedProcessingFriendScores();$("#FriendsLeaderboard").html(CreateLeagueScoresView2(b,"ff",!0));refreshScroller(friendsScoreScroller,"FriendsLeaderboard")}}catch(c){logError("DisplayFriendsLeaderBoard",c+"response is "+b)}}
function ProcessFriendsDetails(b){try{var a=typeof b!="object"?JSON.parse(b):b,c=[],d="";if(typeof a!="undefined"&&a!=null){for(var e=0;e<a.length;e++){var f=a[e];d+=f.eventdesc;f.betid>0&&c.push(f)}Config.displayFriendsDetals=="1"&&$(".FriendFeedInfo").html(d)}window.sessionStorage.setItem("listOfFriendsBets",$.toJSON(c))}catch(g){logError("ProcessFriendsDetails",g+"response is "+b)}}function getFacebookStatus(){return FB.getSession()!=null?1:2}
function facebookLogout(){FB.Event.subscribe("auth.logout",function(){logout(0);return!0})}function SetUpLoginButtons(){userisLoggedIn==1?SetUpButtonForLoggedInUser():userisLoggedIn==0&&SetUpButtonForLoggedOutUser()}function SetUpMainMenuLink(){var b=0;try{b=window.sessionStorage.getItem("fbs"),window.location.href.indexOf("fb_source")<=0&&b!=1?($("#nonfblink").show(),$("#fblink").hide()):(window.sessionStorage.setItem("fbs",1),$("#nonfblink").hide(),$("#fblink").show())}catch(a){}}
function SetUpButtonForLoggedInUser(b){if(LoginDetailsLoaded==1){var a=document.getElementById("fb-auth");a.innerHTML="Logout";$("#fb-auth").show();a.onclick=function(){FB.logout(function(){SetUpButtonForLoggedOutUser();logout(1)})};if(b=b?b:JSON.parse(window.sessionStorage.getItem("facebookuser")))if($(".username").html(b.name),document.getElementById("fbLogin")){if(a=document.getElementById("image"))a.src="https://graph.facebook.com/"+b.id+"/picture";$("#fbLogin").show();$("#signUp").hide()}}userisLoggedIn=
1}function SetUpButtonForLoggedOutUser(){if(LoginDetailsLoaded==1){$(".username").html("");var b=document.getElementById("fb-auth");b.innerHTML="Login";$("#fb-auth").show();b.onclick=function(){DoFaceBookLogin()}}userisLoggedIn=0}function CheckIfLoggedIn(b){var a;try{a=JSON.parse(window.sessionStorage.getItem("facebookuser"))}catch(c){a=null,logError("CheckIfLoggedIn",c)}return typeof a!="undefined"&&a!=null&&a.id>0?!0:(loginFixtureID=b,DoFaceBookLogin(),!1)}
function DoFaceBookLogin(){LoginClick=1;alreadyDoneLogInFlow=0;FB.login(function(b){b.authResponse&&FB.api("/me",function(a){loginV2(b,a)})},{scope:"email,status_update,publish_stream"})}
function logout(b){alreadyDoneLogInFlow=0;window.sessionStorage.removeItem("facebookuser");window.sessionStorage.removeItem("facebookfriendlist");if(b==1){b=-1;if(thisFixture)b=thisFixture.fixtureid;else{var a=GetRequestParam("f");a>0&&(b=a)}if(b>0)$(".flipwarning").hide(),window.location="http://www.botsn.com"}}
function InviteFriendsToPlayAGame(){var b=JSON.parse(window.sessionStorage.getItem("facebookuser"));FB.ui({method:"apprequests",message:thisFixture?"You've been invited to play "+thisFixture.fixturename+" against "+b.name+" and others!":"You've been invited to play a LiveGames game against "+b.name+" and others!"},InviteFriendsToPlayAGame_response)}
function InviteFriendsToPlayAGame_response(b){try{if(b){var a=b.request,c="";if(b.to){$(".FriendFeedInfo").prepend("<b class='friendtext'>Your Friends have been invited and will join the league once they accept the invitation!</b><br />");$("#FriendInviteButton").hide();for(var d=0;d<b.to.length;d++)c=d==0?b.to[d]:c+","+b.to[d]}var e=window.sessionStorage.getItem("facebookuser");$.ajax({url:Config.WS_URL_ROOT+"/Game/SetUpOneTimeFriendGame",type:"POST",data:"fbRequestId="+a+"&friends="+c+"&user="+
e+"&fixtureID="+fixture,dataType:"html",error:function(a,b,c){AjaxFail("InviteFriendsToPlayAGame_response",a,b,c)},success:function(a){OneTimeGameSetUpComplete(a)}})}}catch(f){logError("InviteFriendsToPlayAGame_response",f)}}
function OneTimeGameSetUpComplete(b){try{var a=typeof b!="object"?JSON.parse(b):b;if(a){var c=a[0].currentfixtureid,d=a[0].last_name;if(c>0){var e=JSON.parse(window.sessionStorage.getItem("facebookuser"));GetLeagueTable_WithLeagueHeader(c,d+" <i>(Waiting For Friends to Accept)</i>",null,e.id);AddLeagueToLightStreamer(c)}for(b=0;b<a.length;b++)try{FB.api("/"+a[b].id+"/feed","post",{name:a[b].last_name,message:a[b].extradata},function(){})}catch(f){logError("OneTimeGameSetUpComplete_FB.API",f)}}}catch(g){logError("OneTimeGameSetUpComplete",
g)}}function inviteUpdate(b,a,c,d,e){$.ajax({url:Config.WS_URL_ROOT+"/League/inviteUpdate",type:"POST",data:"lmid="+a+"&accept="+c,dataType:"html",error:function(a,b,c){AjaxFail("inviteUpdate",a,b,c)},success:function(f){inviteUpdateReturn(f,b,c,d,e,a)}})}function inviteUpdateReturn(b,a,c,d,e,f){b==1&&($("#inviteUpdateSpan_"+f).hide(),$("#FriendInviteButton").hide(),c==1&&(AddLeagueToLightStreamer(a),GetLeagueTable_WithLeagueHeader(a,d,e,-111)))};(function(b){b.fn.orbit=function(a){a=b.extend({animation:"horizontal-push",animationSpeed:600,timer:!0,advanceSpeed:4E3,pauseOnHover:!1,startClockOnMouseOut:!1,startClockOnMouseOutAfter:1E3,directionalNav:!0,captions:!0,captionAnimation:"fade",captionAnimationSpeed:600,bullets:!1,bulletThumbs:!1,bulletThumbLocation:"",afterSlideChange:function(){}},a);return this.each(function(){function c(){if(!a.timer||a.timer=="false")return!1;else s.is(":hidden")?C=setInterval(function(){g("next")},a.advanceSpeed):
(t=!0,v.removeClass("active"),C=setInterval(function(){var a="rotate("+z+"deg)";z+=2;u.css({"-webkit-transform":a,"-moz-transform":a,"-o-transform":a});z>180&&(u.addClass("move"),l.addClass("move"));z>360&&(u.removeClass("move"),l.removeClass("move"),z=0,g("next"))},a.advanceSpeed/180))}function d(){if(!a.timer||a.timer=="false")return!1;else t=!1,clearInterval(C),v.addClass("active")}function e(){if(!a.captions||a.captions=="false")return!1;else{var c=p.eq(h).data("caption");(_captionHTML=b(c).html())?
(w.attr("id",c).html(_captionHTML),a.captionAnimation=="none"&&w.show(),a.captionAnimation=="fade"&&w.fadeIn(a.captionAnimationSpeed),a.captionAnimation=="slideOpen"&&w.slideDown(a.captionAnimationSpeed)):(a.captionAnimation=="none"&&w.hide(),a.captionAnimation=="fade"&&w.fadeOut(a.captionAnimationSpeed),a.captionAnimation=="slideOpen"&&w.slideUp(a.captionAnimationSpeed))}}function f(){if(a.bullets)D.children("li").removeClass("active").eq(h).addClass("active");else return!1}function g(b){function c(){p.eq(d).css({"z-index":1});
m=!1;a.afterSlideChange.call(this)}var d=h,g=b;if(d==g)return!1;if(p.length=="1")return!1;m||(m=!0,b=="next"?(h++,h==j&&(h=0)):b=="prev"?(h--,h<0&&(h=j-1)):(h=b,d<h?g="next":d>h&&(g="prev")),f(),p.eq(d).css({"z-index":2}),a.animation=="fade"&&p.eq(h).css({opacity:0,"z-index":3}).animate({opacity:1},a.animationSpeed,c),a.animation=="horizontal-slide"&&(g=="next"&&p.eq(h).css({left:k,"z-index":3}).animate({left:0},a.animationSpeed,c),g=="prev"&&p.eq(h).css({left:-k,"z-index":3}).animate({left:0},a.animationSpeed,
c)),a.animation=="vertical-slide"&&(g=="prev"&&p.eq(h).css({top:r,"z-index":3}).animate({top:0},a.animationSpeed,c),g=="next"&&p.eq(h).css({top:-r,"z-index":3}).animate({top:0},a.animationSpeed,c)),a.animation=="horizontal-push"&&(g=="next"&&(p.eq(h).css({left:k,"z-index":3}).animate({left:0},a.animationSpeed,c),p.eq(d).animate({left:-k},a.animationSpeed)),g=="prev"&&(p.eq(h).css({left:-k,"z-index":3}).animate({left:0},a.animationSpeed,c),p.eq(d).animate({left:k},a.animationSpeed))),e())}var h=0,
j=0,k,r,m,n=b(this).addClass("orbit"),o=n.wrap('<div class="orbit-wrapper" />').parent();n.add(k).width("1px").height("1px");var p=n.children("img, a, div");p.each(function(){var a=b(this),c=a.width(),a=a.height();c>n.width()&&(n.add(o).width(c),k=n.width());a>n.height()&&(n.add(o).height(a),r=n.height());j++});if(p.length==1)a.directionalNav=!1,a.timer=!1,a.bullets=!1;p.eq(h).css({"z-index":3}).fadeIn(function(){p.css({display:"block"})});if(a.timer){o.append('<div class="timer"><span class="mask"><span class="rotator"></span></span><span class="pause"></span></div>');
var s=o.children("div.timer"),t;if(s.length!=0){var u=b("div.timer span.rotator"),l=b("div.timer span.mask"),v=b("div.timer span.pause"),z=0,C;c();s.click(function(){t?d():c()});if(a.startClockOnMouseOut){var A;o.mouseleave(function(){A=setTimeout(function(){t||c()},a.startClockOnMouseOutAfter)});o.mouseenter(function(){clearTimeout(A)})}}}a.pauseOnHover&&o.mouseenter(function(){d()});if(a.captions){o.append('<div class="orbit-caption"></div>');var w=o.children(".orbit-caption");e()}if(a.directionalNav){if(a.directionalNav==
"false")return!1;o.append('<div class="slider-nav"><span class="right">Right</span><span class="left">Left</span></div>');var x=o.children("div.slider-nav").children("span.left"),B=o.children("div.slider-nav").children("span.right");x.click(function(){d();g("prev")});B.click(function(){d();g("next")})}if(a.bullets){o.append('<ul class="orbit-bullets"></ul>');var D=o.children("ul.orbit-bullets");for(i=0;i<j;i++){x=b("<li>"+(i+1)+"</li>");if(a.bulletThumbs&&(B=p.eq(i).data("thumb")))x=b('<li class="has-thumb">'+
i+"</li>"),x.css({background:"url("+a.bulletThumbLocation+B+") no-repeat"});o.children("ul.orbit-bullets").append(x);x.data("index",i);x.click(function(){d();g(b(this).data("index"))})}f()}})}})(jQuery);
