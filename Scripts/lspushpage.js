var fbid = "276786905679012"; var appURL = "t5livegames.com"; var LightStreamURL = "devls.t5livegames.com"; var timeBetweenLightstreamConnections = 20; (function (define) { define([], function () { if (!document.getElementById) { throw ("Browser not compatible"); } if (window.Lightstreamer) { throw ("Warning: Lightstreamer singleton already on the page; lscommons.js should be the first Lightstreamer file included"); } var Lightstreamer = function () { }; Lightstreamer = { Hg: false, Vu: " 29355 $", Vm: false, Ir: function () { }, OH: function (kY) { var MM = ""; for (var oi in kY) { if (!this[oi]) { this[oi] = kY[oi]; } else { } } }, RT: function (PS, Jq, UV) { var OV = {}; for (var oi in Jq.prototype) { if (PS.prototype[oi]) { if (!UV) { var QO = "super_" + oi; while (Jq.prototype["_" + QO]) { QO = "super_" + QO; } PS.prototype["_" + QO] = Jq.prototype[oi]; } else if (UV === "O") { PS.prototype[oi] = Jq.prototype[oi]; } } else { if (oi.indexOf("_super_") != 0 || !UV) { PS.prototype[oi] = Jq.prototype[oi]; } } } if (!UV) { var Ma = "_super"; while (PS.prototype[Ma]) { Ma += "_super"; } PS.prototype[Ma] = Jq; } if (!PS.prototype.Xb) { PS.prototype.Xb = this.Ro; } if (!PS.prototype.hS) { PS.prototype.hS = this.oW; } }, Ro: function (mM, JY) { if (mM.prototype["_super_" + JY]) { while (mM.prototype["_super_" + JY]) { JY = "super_" + JY; } JY = "_" + JY; } else { return; } if (this[JY].apply) { return this[JY].apply(this, Lightstreamer.Av(arguments, 2)); } }, oW: function (mM) { var JY = "_super"; if (mM.prototype[JY]) { while (mM.prototype[JY + "_super"]) { JY += "_super"; } if (this[JY].apply) { this[JY].apply(this, Lightstreamer.Av(arguments, 1)); } } }, Av: function (JW, EO) { var rc = []; for (var FT = EO, Ad = JW.length; FT < Ad; FT++) { rc[FT - EO] = JW[FT]; } return rc; }, Nh: [], getLogger: function () { return Lightstreamer.gE; }, gs: function () { return new Date().getTime(); } }; (function (ls) { var bm = "gi_buf"; ls.OH({ xu: "CONNECTING", Ip: "STREAMING", XA: "STALLED", Xr: "POLLING", ZW: "DISCONNECTED", OJ: { length: -1 }, Sk: new RegExp("^[a-zA-Z0-9]*$"), Hb: new RegExp("^[a-zA-Z0-9_]*$"), Um: new RegExp("^[a-zA-Z0-9_\.^]*$"), aJ: "LS4_", nY: function (tK) { var CE = [].concat(tK); if (typeof (CE[0]) == "undefined") { return CE; } return [null].concat(CE); }, Zk: function (sc) { if (window.encodeURIComponent) { return encodeURIComponent(sc); } else { sc = escape(sc); return sc.replace(ls.RK, "%2B"); } }, dq: function (XO) { if (window.decodeURIComponent) { return decodeURIComponent(XO); } else { return unescape(XO); } }, ms: function (oQ, oG, uF) { ls.GE(oQ, function (Oe) { if (ls.Vm) { return; } oG(Oe); }, uF); }, GE: function (oQ, oG, uF) { if (typeof window.addEventListener != "undefined") { window.addEventListener(oQ, oG, false); return true; } else if (typeof document.addEventListener != "undefined" && !uF) { document.addEventListener(oQ, oG, false); return true; } else if (typeof window.attachEvent != "undefined") { return window.attachEvent("on" + oQ, oG); } else { return false; } }, Le: function (ED, aS, Aj, cY, min, max) { var Fx = new Number(ED); var Gu = this.Al ? this.Al : ls.Dt; if (isNaN(Fx)) { Gu.pE("This is a not valid value for " + aS + ": " + '"' + ED + '"' + ". Please use a number", aS); return Aj; } else if (cY == true && Fx != Math.round(Fx)) { Gu.pE("This is a not valid value for " + aS + ": " + ED + ". Please use an integer", aS); return Aj; } else if (!isNaN(min) && Fx < min) { Gu.pE("This is a not valid value for " + aS + ": " + ED + ". The minimum value allowed is " + min, aS); return Aj; } else if (!isNaN(max) && Fx > max) { Gu.pE("This is a not valid value for " + aS + ": " + ED + ". The maximum value allowed is " + max, aS); return Aj; } else { Gu.log(aS, Fx); return Fx; } }, KJ: function (ED, aS, Aj) { var Gu = this.Al ? this.Al : ls.Dt; if (ED === true || ED === false) { Gu.log(aS, ED); return ED; } else { Gu.pE("This is a not valid value for " + aS + ": " + '"' + ED + '"' + ". Please use true or false", aS); return Aj; } }, lp: function (dn) { if (this.IK != null && this.IK != "") { var Gl = "" + dn; var Ou = "" + this.IK; if (Gl.toLowerCase().indexOf(Ou.toLowerCase()) == -1) { return false; } } return true; }, HO: function (ED) { if (typeof ED != "undefined") { if (ED === true || ED === false) { return ED === true; } else if (ED == null) { return null; } else if (!isNaN(ED) && ED != "") { return parseFloat(ED, 10); } else if ((ED || ED == "") && ED.toString) { return ED.toString(); } else if (isNaN(ED)) { return NaN; } else { ls.Dt.sX(false, 'HO'); return ED; } } return null; }, MD: new RegExp("^\\s*([\\s\\S]*?)\\s*$"), Eh: function (lG) { return lG.replace(ls.MD, "$1"); }, lY: function (Hu, rF) { return !Hu || (rF.toLowerCase() == "http:" && Hu == 80) || (rF.toLowerCase() == "https:" && Hu == 443); }, VN: function (rA, ce) { var mv = []; for (var Hp = 0, Ad = rA.length; oi < Ad; oi++) { if (rA[Hp] == null) { mv[Hp] = null; } else if (ce) { mv[Hp] = new Number(rA[Hp]); } else { mv[Hp] = new String(rA[Hp]); } } return Gf; }, gJ: function (rA, ce) { var Gf = {}; for (var Hp in rA) { if (rA[Hp] == null) { Gf[Hp] = null; } else if (ce) { Gf[Hp] = new Number(rA[Hp]); } else { Gf[Hp] = new String(rA[Hp]); } } return Gf; }, Ns: function (max) { max = max ? max : 1000; return Math.round(Math.random() * max); }, getClosureFor: function (Cs, XV) { return function () { var JW = arguments; return function () { Cs.apply(XV, JW); }; }; }, getClosureForNoParams: function (Cs, XV) { return function () { Cs.apply(XV, arguments); }; }, QA: function () { return navigator.onLine === false; }, Fm: bm.substring(1, 2), rX: bm.substring(0, 1), Wa: bm.substring(0, 2), RK: new RegExp("\\+", ls.Wa) }); })(Lightstreamer); Lightstreamer.avoidLSGlobals = false; Lightstreamer.OH({ lV: function () { this.CS(["ChartLine", "ChartTable", "DynaMetapushTable", "DynaScrollTable", "FieldNameDescriptor", "FieldPositionDescriptor", "GroupIdDescriptor", "GroupListDescriptor", "ItemNameDescriptor", "ItemPositionDescriptor", "LabelFormatter", "MetapushTable", "MultiDynaMetapushTable", "NonVisualTable", "OverwriteTable", "PushPage", "SchemaIdDescriptor", "SchemaListDescriptor", "ScreenTableHelper", "ScrollTable", "FlashBridge", "MessageListener"], true, true); }, CS: function (xr, mF, vN) { for (var oi = 0; oi < xr.length; oi++) { this.Db(xr[oi]); } if (mF) { window.LS_cell = Lightstreamer.cellOverwrite; window.LS_cs = Lightstreamer.cellScroll; window.LS_cM = Lightstreamer.cellMetapush; } if (vN) { window.LS_fadeCell = Lightstreamer.vT; } }, Db: function (aS) { if (Lightstreamer[aS]) { window[aS] = Lightstreamer[aS]; } }, DS: function () { var cL = document.getElementsByTagName("script"); for (var oi = 0; oi < cL.length; oi++) { var kD = null; if ((kD = /lspushpage\.js\?(.*)$/.exec(cL[oi].src)) != null) { Lightstreamer.avoidLSGlobals = (kD[1] == "avoidLSGlobals=true"); } } } }); Lightstreamer.OH({ sV: null, ut: null, Kg: function () { if (this.sV != null) { return this.sV; } if ((document.childNodes) && (!document.all) && (!navigator.taintEnabled) && (!navigator.accentColorName)) { this.sV = true; return true; } this.sV = false; return false; }, SK: function () { if (this.ut != null) { return this.ut; } if (this.Kg()) { Gp = navigator.userAgent; if (Gp) { if (Gp.indexOf(" Version/") > -1) { if (Gp.indexOf(" Version/3.0") <= -1) { this.ut = false; return false; } } else if (Gp.indexOf("Chrome/") > -1) { this.ut = false; return false; } } this.ut = true; return true; } this.ut = false; return false; }, aD: new RegExp("[^0-9.]+", Lightstreamer.rX), Tt: null, iR: function (MS, Pd) { if (window.opera) { if (!MS) { return true; } if (this.Tt === null) { if (!window.opera.version) { this.Tt = 7; } else { var tA = window.opera.version(); tA = tA.replace(this.aD, ""); this.Tt = parseFloat(tA); } } if (Pd === true) { return this.Tt <= MS; } else if (Pd === false) { return this.Tt >= MS; } else { return this.Tt == MS; } } return false; }, BK: new RegExp("msie([0-9]+)[.;]", Lightstreamer.rX), qm: null, Kh: function (MS, Pd) { if (window.ActiveXObject) { if (this.qm === null && MS) { var xq = navigator.userAgent.toLowerCase(); var kD = this.BK.exec(xq); if (kD && kD.length >= 2) { this.qm = kD[1]; } } if (this.qm !== null && MS) { if (Pd === true) { return this.qm <= MS; } else if (Pd === false) { return this.qm >= MS; } else { return this.qm == MS; } } return true; } return false; }, JA: null, nh: function () { if (this.JA !== null) { return this.JA; } var xq = navigator.userAgent.toLowerCase(); if (window.ScriptEngine && (ScriptEngine().indexOf("InScript") > -1)) { if (xq.indexOf("icab") > -1) { Lightstreamer.TE.log('nh', "iCab"); this.JA = true; return true; } } if (document.all) { tX = xq.indexOf("msie"); if (tX > -1) { uG = xq.substring(tX + 5, tX + 8); if (uG.indexOf(5) > -1) { Lightstreamer.TE.log('nh', "IE5"); this.JA = true; return true; } } } Lightstreamer.TE.log('nh', false); this.JA = false; return false; }, SE: {}, ib: new RegExp("Firefox\\/(\\d+\\.?\\d*)"), gK: function (MS, Pd) { if (this.SE === null) { return false; } if (!MS) { MS = -1; Pd = false; } else { Pd = Pd === true || Pd === false ? Pd : ""; } if (this.SE[MS + "" + Pd] || this.SE[MS + "" + Pd] === false) { return this.SE[MS + "" + Pd]; } var Nc = navigator.userAgent; if (Nc.indexOf("Firefox") <= -1) { this.SE = null; return false; } var Ck = 0; if (Nc.indexOf("Firefox/") > -1) { var Cw = this.ib.exec(Nc); if (Cw) { Ck = Number(Cw[1]); } } var kD; if (Pd === true) { kD = Ck <= MS; } else if (Pd === false) { kD = Ck >= MS; } else { kD = Ck == MS; } this.SE[MS + "" + Pd] = kD; return kD; }, Xk: null, DK: function () { if (this.Xk !== null) { return this.Xk; } var Nc = navigator.userAgent; Nc = Nc.toLowerCase(); this.Xk = Nc.indexOf("android") > -1 && Nc.indexOf("webkit") > -1; return this.Xk; }, CP: null, Sl: function () { if (this.CP !== null) { return this.CP; } var Nc = navigator.userAgent; this.CP = Nc.indexOf("Chrome/") > -1; return this.CP; } }); (function (ls) { ls.OH({ iw: function (qP, ux) { ls.DD.log('iw', qP, ux); this.Pt(qP, ux, ""); }, Pt: function (qP, ux, AQ) { var mT = ""; if (ls.IK != null && ls.IK != "") { mT = "domain=." + ls.IK + "; "; } var bk = ls.Zk(qP) + "=" + ux + "; "; var Hw = bk + mT + AQ + "path=/;"; document.cookie = Hw; ls.DD.log('Pt', Hw); }, gm: function (qP) { qP = ls.Zk(qP) + "="; var BU = document.cookie.toString(); BU = BU.split(";"); var Gu = ls.DD; for (var oi = 0; oi < BU.length; oi++) { BU[oi] = ls.Eh(BU[oi]); Gu.log('gm', qP, "?", BU[oi]); if (BU[oi].indexOf(qP) == 0) { var pW = BU[oi].substring(qP.length, BU[oi].length); Gu.log('gm', qP, pW); return pW; } } Gu.log('gm', qP, null); return null; }, Hh: function (qP) { ls.DD.log('Hh', qP); var qf = new Date(); qf.setTime(qf.getTime() - 86400000); var AQ = "expires=" + qf.toGMTString() + "; "; this.Pt(qP, "deleting", AQ); }, bg: false, mw: function () { var Gu = ls.DD; Gu.log('mw', 0); var wX = ls.Ns(); var Bt = "LS__cookie_test" + wX; this.iw(Bt, "testing"); var vj = this.gm(Bt); if (vj == "testing") { Gu.log('mw', 1); this.Hh(Bt); vj = this.gm(Bt); if (vj == null) { Gu.log('mw', 2); this.bg = true; } } }, Dm: 1000, vu: 200 }); })(Lightstreamer); Lightstreamer.OH({ FD: "|", Zo: function (qP) { var it = this.gm(qP); if (!it) { return null; } var CH = it.split(this.FD); if (CH[0] == "") { CH.shift(); } if (CH[CH.length - 1] == "") { CH.pop(); } return CH.length > 0 ? CH : null; }, eG: function (qP, id) { var ux = this.gm(qP); if (!ux) { ux = this.FD; } else if (ux.indexOf(this.FD + id + this.FD) > -1) { return false; } ux += id + this.FD; this.iw(qP, ux); return true; }, Ri: function (qP, id) { var ux = this.gm(qP); if (!ux) { return; } var Wj = this.FD + id + this.FD; if (ux.indexOf(Wj) > -1) { ux = ux.replace(Wj, this.FD); if (ux == this.FD) { this.Hh(qP); } else { this.iw(qP, ux); } } }, KC: function (qP, EY) { var ux = EY.join(this.FD); this.iw(qP, ux); } }); (function (ls) { ls.am = function (eb) { this.fg = null; if (typeof eb != "undefined") { this.fg = eb; } else { this.fg = {}; } }; ls.am.Eb = function (rA, ce) { var Hq = {}; var fg = rA.JO(); for (var Rc in fg) { Hq[Rc] = {}; for (var nU in fg[Rc]) { if (fg[Rc][nU] == null) { Hq[Rc][nU] = null; } else if (ce) { Hq[Rc][nU] = new Number(fg[Rc][nU]); } else { Hq[Rc][nU] = new String(fg[Rc][nU]); } } } return new this(Hq); }; ls.am.prototype = { YQ: function (ur, Rc, nU) { if (!this.fg[Rc]) { this.fg[Rc] = {}; } this.fg[Rc][nU] = ur; }, ww: function (Rc, nU) { if (!this.fg[Rc]) { return null; } if (typeof this.fg[Rc][nU] == "undefined") { return null; } return this.fg[Rc][nU]; }, jK: function (Rc, nU) { if (!this.fg[Rc]) { return; } if (this.fg[Rc][nU]) { delete (this.fg[Rc][nU]); } for (var oi in this.fg[Rc]) { return; } delete (this.fg[Rc]); }, insertRow: function (Go, Rc) { this.fg[Rc] = Go; }, vn: function (Rc) { if (!this.fg[Rc]) { return null; } return this.fg[Rc]; }, vt: function (Rc) { var Ms = this.vn(Rc); this.AP(Rc); return Ms; }, AP: function (Rc) { if (!this.fg[Rc]) { return; } delete (this.fg[Rc]); }, JO: function () { return this.fg; } }; })(Lightstreamer); Lightstreamer.qc = function (od) { this.pc = od ? od : "GE"; }; Lightstreamer.qc.prototype = { RZ: function (Ab) { var kD = false; if (Ab) { kD = Lightstreamer.gE.RZ(Ab); } return kD || Lightstreamer.gE.RZ(this.pc); }, xA: function (HT) { if (Lightstreamer.XU) { this.log(HT, arguments, Lightstreamer.XU); } else { this.log(HT, arguments); } }, log: function (HT) { if (!this.RZ()) { return; } if (Lightstreamer.obfMap) { HT = Lightstreamer.obfMap.Aqc(HT); } var hP = this.XS(arguments); Lightstreamer.gE.GN(this.pc, hP); }, ZH: function (Hr, HT, pc, Hk, JW) { if (!this.RZ(pc)) { return; } if (Lightstreamer.obfMap) { JW[Hk] = Lightstreamer.obfMap.Aqc(JW[Hk]); } var hP = Hr + " " + this.XS(JW, Hk); if (this.pc != pc) { Lightstreamer.gE.GN(this.pc, hP, Hr); } Lightstreamer.gE.GN(pc, hP, Hr); }, DU: function (XF, HT) { this.ZH(this.nx(XF), HT, "EX", 1, arguments); }, xM: function (HT, Ji) { this.ZH(Ji, HT, "EX", 1, arguments); }, error: function (fD, HT) { this.ZH(fD, HT, "ER", 1, arguments); }, pE: function (fD, HT) { this.error(fD, HT); throw (fD); }, db: function (fD, HT) { if (!this.RZ("ER")) { return; } Lightstreamer.aL.Au(this.error, 0, this, [fD, HT]); }, ET: function (XF, Ji, HT) { this.ZH(this.nx(XF, Ji), HT, "ER", 2, arguments); }, sX: function (gn, HT) { if (!gn) { this.ZH("", HT, "AS", 1, arguments); } }, XS: function (JW, HS) { HS = HS ? HS : 0; var hP = " "; for (var oi = HS; oi < JW.length; oi++) { try { var Tk = JW[oi]; if (Tk == null) { hP += "NULL"; } else if (Tk.prototype) { hP += Tk.apply(); } else if (Tk.length < 0) { hP += "*"; } else if (Tk.charAt != null) { hP += Tk; } else if (Tk[0] == Tk) { hP += Tk; } else if (Tk.length != null && Tk.top == null) { hP += "("; hP += this.XS(Tk); hP += ")"; } else { hP += Tk; } hP += " "; } catch (XF) { hP += "missing-parameter "; } } return hP; }, nx: function (XF, PX) { var Nx = XF.message; if (typeof Nx == "undefined") { if (XF.getMessage) { Nx = XF.getMessage(); } if (typeof Nx == "undefined") { Nx = XF; } } var kD = "exception\n" + Nx + " \n\n"; if (PX) { kD += "thrown by your callback\n\n" + PX; } if (XF.stack) { kD += XF.stack; kD += "\n"; } return kD; } }; (function (ls) { ls.LogSystem = function () { this.Ig = ""; this.fm = {}; this.fm.length = 0; this.Nk = 0; this.ow = new ls.BufferConsumer(); this.addConsumer(this.ow, true); this.ow.QO++; this.ow.gH[0] = "START OF LOG"; this.ow.gH[0 + "_C"] = "GE"; this.Hv = {}; this.Al = this.getLogger("LS"); }; ls.LogSystem.prototype = { getLogger: function (od) { if (!this.Hv[od]) { this.Hv[od] = new ls.qc(od); } return this.Hv[od]; }, getInternalLog: function () { return this.ow; }, addConsumer: function (Vb, vl) { this.fm[this.fm.length] = Vb; this.fm.length++; Vb.uj = this; if (vl != true) { this.ow.sendLogToConsumer(Vb); } var NW = Vb.mh.split(" "); this.Sp(NW); }, removeConsumer: function (Vb) { ZG = false; var oi = 0; while ((oi < this.fm.length) && (!ZG)) { if (this.fm[oi] == Vb) { this.Gt(oi); ZG = true; } oi++; } return ZG; }, Gt: function (oi) { NC = this.fm.length - 1; if (oi != NC) { this.fm[oi] = this.fm[NC]; } delete (this.fm[NC]); this.fm.length--; this.UD(); }, dc: function (pc) { if (!pc) { return; } if (this.Ig.indexOf(pc) > -1) { return; } if (this.Ig == "") { this.Ig += pc; } else { this.Ig += " " + pc; } this.ow.addLogCategory(pc); }, Sp: function (mh) { for (var pc in mh) { this.dc(mh[pc]); } }, UD: function () { this.Ig = ""; for (var oi = 0; oi < this.fm.length; oi++) { var NW = this.fm[oi].mh.split(" "); this.Sp(NW); } }, GN: function (od, hP, fR) { if (!this.RZ(od)) { return; } var VE = ++this.Nk; hP = this.or(VE) + od + " " + hP; this.bQ(od, hP, fR); return hP; }, RZ: function (od) { if (this.Ig.length == 0 || this.Ig.indexOf(od) == -1) { return false; } return true; }, or: function (VE) { var is = new Date(); var hP = window.name; hP += " "; hP += VE; hP += ": "; hP += is.getHours(); hP += ":"; hP += is.getMinutes(); hP += ":"; hP += is.getSeconds(); hP += ","; hP += is.getMilliseconds(); hP += " "; return hP; }, bQ: function (od, hP, fR) { var oi; for (oi = 0; oi < this.fm.length; oi++) { var Vb = this.fm[oi]; try { if (Vb.mh.indexOf(od) > -1) { if (Vb.Kp == true) { Vb.gF(fR, od); } else { Vb.gF(hP, od); } } } catch (XF) { } } }, gw: function (Vb, qR) { this.Al.error("Sorry, the " + Vb + " is not compatible with this Browser", qR); }, gg: function (pc) { return (pc == "ER" || pc == "AS" || pc == "EX"); }, GG: function () { for (var oi = 0; oi < this.fm.length; oi++) { if (this.fm[oi].xQ) { this.fm[oi].xQ(); } } }, Yd: function (XV, Ji, Hr) { var Mq = true; if ((typeof HH != "undefined") && (HH)) { Mq = !gQ.MaR("onClientAlert", 'WHf', { Ji: Ji, Hr: Hr }); } if (Mq && XV.onClientAlert) { try { XV.onClientAlert(Ji, Hr); } catch (XF) { this.Al.ET(XF, XV.onClientAlert, "onClientAlert"); } } }, iq: function () { var gH = new ls.BufferConsumer(); gH.setHistoryDim(10); gH.addLogCategory("ER"); gH.Kp = true; ls.HF = gH; this.addConsumer(gH); }, Wg: function (JU, Cx) { with (Lightstreamer) { if (QM == null && HF != null) { QM = new FunctionConsumer(JU, Cx); QM.addLogCategory("ER"); QM.Kp = true; this.removeConsumer(HF); HF.sendLogToConsumer(QM); this.addConsumer(QM, true); HF = null; } } } }; ls.Nh.push(function () { ls.gE = new ls.LogSystem(); ls.gE.ow.setHistoryDim(5); }); })(Lightstreamer); Lightstreamer.OH({ Sh: null, Qk: null, QM: null, HF: null }); (function (ls) { ls.LogConsumer = function () { this.uj; this.mh = ""; this.Kp = false; }; ls.LogConsumer.prototype = { gF: function (hP, pc) { }, isCompatible: function () { return false; }, addLogCategory: function (pc) { if (!pc) { return; } if (this.mh.indexOf(pc) > -1) { return; } if (this.mh == "") { this.mh += pc; } else { this.mh += " " + pc; } if (this.uj) { this.uj.dc(pc); } }, getLogCategories: function () { return this.mh; } }; })(Lightstreamer); (function (ls) { ls.BufferConsumer = function () { this.hS(ls.BufferConsumer); this.cR = 0; this.KX = 0; this.QO = -1; this.gH = {}; }; ls.BufferConsumer.prototype = { isCompatible: function () { return true; }, extractLog: function (Ce, Xv, cS, Rg) { var oi; var Gr = 1; if (Ce == null) { oi = this.KX; } else { oi = this.QO - Ce + 1; if (oi < this.KX) { oi = this.KX; } } if (Xv == null) { Xv = "\n"; } var OB = ""; Rg = Rg === true; while (oi <= this.QO) { if (typeof cS != "undefined" && cS) { OB += cS; if (Rg) { OB += Gr + "="; } } if (Rg) { OB += ls.Zk(this.gH[oi].replace(/[\n\r\f]/g, "||")); } else { OB += this.gH[oi]; } OB += Xv; oi++; Gr++; } return OB; }, sendLogToConsumer: function (Vb) { var oi = this.KX; while (oi <= this.QO) { if (Vb.mh.indexOf(this.gH[oi + "_C"]) > -1) { Vb.gF(this.gH[oi], this.gH[oi + "_C"]); } oi++; } }, setHistoryDim: function (Qf) { this.cR = Qf; }, gF: function (hP, pc) { var VE = ++this.QO; var HS = VE - this.cR + 1; while (this.KX < HS) { delete (this.gH[this.KX]); delete (this.gH[this.KX + "_C"]); this.KX++; } this.gH[VE] = hP; this.gH[VE + "_C"] = pc; } }; ls.RT(ls.BufferConsumer, ls.LogConsumer); })(Lightstreamer); (function (ls) { ls.RemoteConsumer = function (bn, VC, ja) { this.hS(ls.RemoteConsumer); this.bn = bn; this.VC = VC ? VC : 0; this.ja = ja ? ja : 0; this.IX = 0; this.NV = 0; this.WL = 100; this.gH = new ls.BufferConsumer(); this.gH.setHistoryDim(this.bn); }; ls.RemoteConsumer.prototype = { HY: function () { var rO = false; if ((typeof HH != "undefined") && (HH)) { rO = true; } else if (!ls.dA || !ls.dA.Ib) { if (this.NV < this.WL) { this.gH.setHistoryDim(this.NV + 1); } return; } var Ux = this.gH.extractLog(this.NV, "&", "LS_log", true); if (Ux != "") { if (rO) { HH.KPl(Ux); } else { ls.dA.Yh('KPl', Ux); } } this.NV = 0; this.gH = new ls.BufferConsumer(); this.gH.setHistoryDim(this.bn); }, xQ: function () { ls.aL.Au(this.HY, 0, this); }, gF: function (hP, pc) { if (this.ja > 0 && this.IX >= this.ja) { if (this.NV > 0) { this.xQ(); } return; } if (this.VC > 0 && hP.length > this.VC) { hP = hP.substr(0, this.VC); } this.NV++; this.gH.gF(hP, pc); this.IX++; if (this.NV >= this.bn) { this.xQ(); } }, wI: function (Cf) { if (!Cf) { this.VC = 0; } else { this.VC = Cf; } }, Ti: function (max) { if (!max) { this.ja = 0; } else { this.ja = max; } }, isCompatible: function () { return true; } }; ls.RT(ls.RemoteConsumer, ls.LogConsumer); })(Lightstreamer); (function (ls) { ls.FunctionConsumer = function (Dg, xh, IH) { this.hS(ls.FunctionConsumer); this.Dg = Dg; this.IH = IH ? IH : Dg; this.xh = xh; }; ls.FunctionConsumer.prototype = { isCompatible: function () { if (!this.Dg) { return false; } return (this.Dg.apply) ? true : false; }, gF: function (hP, pc) { var MN = new Array(hP); var JY = this.Dg; if (ls.gE.gg(pc)) { JY = this.IH; } if (JY.apply) { try { JY.apply(this.xh, MN); } catch (XF) { } } } }; ls.RT(ls.FunctionConsumer, ls.LogConsumer); })(Lightstreamer); (function (ls) { ls.AlertConsumer = function (bn) { this.hS(ls.AlertConsumer); this.Bn = bn; this.NV = 0; this.gH = new ls.BufferConsumer(); this.gH.setHistoryDim(this.Bn); }; ls.AlertConsumer.prototype = { isCompatible: function () { return window.alert; }, gF: function (hP, pc) { this.NV++; this.gH.gF(hP, pc); if (this.NV >= this.Bn) { this.NV = 0; ls.aL.Au(this.CW, 0, this, [this.gH.extractLog(this.Bn, "\n")]); this.gH = new ls.BufferConsumer(); this.gH.setHistoryDim(this.Bn); } }, CW: function (text) { alert(text); } }; ls.RT(ls.AlertConsumer, ls.LogConsumer); })(Lightstreamer); (function (ls) { var NH = "popup warning"; ls.Dc = function (tR) { this.de = tR; this.Al = ls.gE.getLogger("FM"); this.PK = ls.gE.getLogger("CE"); this.ui = ls.gE.getLogger("M1"); }; ls.Dc.prototype = { gW: function (rO, Zj) { var kD = this.OT(rO, Zj); this.PK.xA('gW', rO, Zj, kD.nJ, kD.log, kD.UO); return kD; }, OT: function (rO, Zj) { var PD = {}; var PP = 1; try { if (this.de == null) { PP = 2; PD.log = "null"; PD.EN = 1; PD.UO = true; return PD; } else if (this.de.closed) { PP = 3; this.de = null; PD.log = "closed"; PD.EN = 2; PD.UO = true; return PD; } else if (!this.de.Lightstreamer || (rO && !this.de.Lightstreamer.Hg)) { PP = 4; PD.log = (!this.de.Lightstreamer) ? "not global" : "not active"; PD.EN = (!this.de.Lightstreamer) ? 3 : 4; this.de = null; PD.UO = false; return PD; } else if (rO) { if (this.de.gQ) { PP = 5; if (!this.de.HH) { PP = 11; this.de = null; PD.log = "too young"; PD.EN = 5; PD.UO = false; return PD; } else if (Zj && !this.de.HH.oP) { PP = 6; this.de = null; PD.log = "wait conf"; PD.EN = 7; PD.UO = false; return PD; } } else if (this.de.Lightstreamer.Cp) { if (this.de.Lightstreamer.Cp.ef) { PP = 7; var Ek = this.de.Lightstreamer.Cp.ef; if (ls.Cp) { ls.Cp.ef = Ek; } this.de = Ek; var Fl = this.gW(true); Fl.log = "linked: " + Fl.log; PD.EN = 8; return Fl; } else { PP = 8; this.de = null; PD.log = "linked w/o reference"; PD.EN = 9; PD.UO = false; return PD; } } else { PP = 9; this.Al.sX(false, 'gW', this.de); this.de = null; PD.log = "not engine"; PD.EN = 10; PD.UO = true; return PD; } } PP = 10; PD.log = "OK"; PD.EN = 11; PD.nJ = true; return PD; } catch (XF) { this.de = null; PD.log = "exception " + PP + " " + XF; PD.EN = 12; PD.UO = true; return PD; } }, LS: function (eQ, qh) { var iG = eQ + "__TRASH"; var JF = this.hX(eQ, iG); var cZ = "eval(" + '"' + JF + "; " + '"' + ")"; this.Al.log('LS', 1); var Dh = ls.bU("javascript:" + cZ, eQ); this.Al.log('LS', 2, Dh); if (Dh === false) { return false; } else if (!Dh) { var Dh = ls.bU(ls.fN, eQ); this.Al.log('LS', 4, Dh); if (Dh === false) { return false; } else if (Dh == null) { this.ui.log(NH, 1); return true; } } try { this.Al.log('LS', 5); if (Dh.closed) { return true; } if (qh) { this.Al.log('LS', 5.1); if (Dh == Dh.top && !Dh.Lightstreamer) { this.Al.log('LS', 5.2); this.ui.log(NH, 2); try { this.XY(Dh, eQ, iG); } catch (XF) { this.Al.DU(XF, 'LS', 22); } return true; } Dh = Dh.parent; this.Al.log('LS', 5.3); if (Dh == null) { return true; } } this.Al.log('LS', 6); if (!Dh.Lightstreamer) { return true; } this.Al.log('LS', 7); if (!Dh.Lightstreamer.gE) { return true; } this.Al.log('LS', 8); this.de = Dh; } catch (XF) { this.Al.DU(XF, 'LS', 11); } return true; }, TW: function (QN, PY) { if (this.LS("LS__" + QN, true) === false) { return false; } var MM = this.gW(true, !PY); return MM; }, hX: function (aS, xJ) { var AE = function (aS, xJ) { if (window.name == aS) { if (window == top && !(window.Lightstreamer && window.Lightstreamer.gE)) { window.name = xJ; window.close(); } } }; var ct = "callFun"; return "var " + ct + " = " + AE.toString() + "; " + ct + "('" + aS + "', '" + xJ + "');"; }, XY: function (Dh, eQ, iG) { if (Dh.name != eQ && Dh.name != iG) { return; } Dh.close(); } }; })(Lightstreamer); Lightstreamer.OH({ Qu: 0, SI: 0, eI: false, Nd: "You have Norton Internet Security or Norton\nPersonal Firewall installed on this computer.\nIf no real-time data show up, then you need\nto disable Ad Blocking in Norton Internet\nSecurity and then refresh this page", bU: function (Qp, eQ, rI) { var PD = null; Lightstreamer.TE.log('bU', document.cookie); try { PD = this.Eo(Qp, eQ, rI); } catch (XF) { Lightstreamer.TE.DU(XF); return false; } if (PD) { try { this.SI++; } catch (uR) { this.Vm = true; } } return PD; }, Eo: function (Qp, eQ, rI) { if (window.SymError) { var qG = true; if ((this.SI - this.Qu) < -5) { qG = false; } if (window.SymRealWinOpen && qG) { this.Qu++; Lightstreamer.TE.log('Eo', 1); return window.SymRealWinOpen(Qp, eQ, "height=100,width=100", true); } else if (!this.eI) { this.eI = true; Lightstreamer.TE.db(this.Nd, "window.open"); var dv = null; if (window.HH) { dv = HH; } else if (Lightstreamer.Cp) { dv = Lightstreamer.Cp; } if (dv != null) { Lightstreamer.gE.Yd(dv, 100, this.Nd); } } qG = true; this.Qu = 0; return null; } else { if (!rI && Lightstreamer.gs() - Lightstreamer.Zv > Lightstreamer.KS) { return false; } return window.open(Qp, eQ, "height=100,width=100", true); } } }); Lightstreamer.OH({ Kt: function (fP) { var tD = 0; var lk = fP.length; for (var oi = 0; oi < lk; oi++) { tD += fP.charCodeAt(oi); } return parseInt(tD); }, LG: function (fo, qP, HS, Ga, ZL) { var AN = 3; var nC; var hh = HS; var vP = HS - Ga; var kD = ""; var tD = this.Kt(qP.toString()); if (tD > 0) { var lX = fo.length; if (lX > 0) { var oi; for (oi = 0; hh + AN - oi <= lX; oi += 3) { var pF = oi; if (vP > 0) { for (pF = tD * 3; pF >= vP; pF -= vP); } var cK = fo.substring(oi, AN - 1); var mC = fo.substring(pF, pF + 2); var PN = fo.substring(hh, hh + AN - oi); nC = parseInt(cK) - parseInt(mC) + ZL - parseInt(PN); var xZ = unescape("%" + nC.toString(16)); kD = xZ + kD; AN += 3; hh += 3; tD += nC; } } } return kD; } }); (function (ls) { Lightstreamer.MessageListener = function () { }; Lightstreamer.MessageListener.prototype = { onAbort: function () { return; }, onError: function () { return; }, onDiscarded: function () { return; }, onDeny: function (code, message) { return; }, onProcessed: function () { return; } }; })(Lightstreamer); (function (ls) { ls.Kr = function (nK) { this.name = null; this.parent = null; this.Al = ls.gE.getLogger("OP"); if (nK) { this.jo(nK); } }; ls.Kr.prototype = { Qn: ls.Le, fW: ls.KJ, jD: function (FU, ED) { this[FU] = ls.HO(ED); if (this.parent == window.HH) { this.oZ(FU); } }, oZ: function (bu, Ex, kb) { var Oe = 'KFu'; var br = { Cx: this.name, FU: bu }; br.ED = ls.HO(this[bu]); this.Al.log('oZ', bu, (bu != 'Xw' ? this[bu] : "[...]")); if (this.parent == window.HH) { var Iu = gQ.iIZ(); for (var oi in Iu) { Iu[oi].Yh(Oe, br); } } else { if (!ls.dA.DMB(Oe, br)) { this.Al.error("The LightstreamerEngine instance is not available", Ex); this[bu] = kb; return false; } } return true; }, jo: function (xx) { var jY = this.tl; for (var oi = 0; oi < jY.length; oi++) { this[jY[oi]] = ls.HO(xx[jY[oi]]); } } }; })(Lightstreamer); Lightstreamer.IK = null; Lightstreamer.fN = "lsblank.html?"; (function (ls) { var tl = ['ca', 'ZF', 'vZ', 'VC', 'ja']; Lightstreamer.Context = function () { this.ca = null; this.ZF = null; this.vZ = null; this.VC = 0; this.ja = 0; this.gE = null; this.tl = tl; this.hS(ls.Context, arguments[0]); this.name = "context"; }; Lightstreamer.Context.prototype = { getLogger: function () { return this.gE; }, jo: function (xx) { this.Xb(ls.Context, 'jo', xx); if (!this.gE && xx.gE) { this.gE = xx.gE; } }, bind: function () { if (this.parent && this.parent != window.HH) { return; } if (ls.IK != null && ls.IK != "") { document.domain = ls.IK; var We = "domain=" + ls.IK + "&"; ls.fN += We; if (ls.sh) { ls.sh.hx = We; } } ls.BE = this; ls.mw(); return true; }, setDebugAlertsOnClientError: function (tj) { var kb = this.ZF; this.ZF = tj === true; if (this.parent == null) { this.Gn(); } else { this.oZ('ZF', "setDebugAlertsOnClientError", kb); } }, Gn: function () { if (this.ZF) { if (!ls.Sh) { var Sh = new ls.AlertConsumer(1); Sh.addLogCategory("ER"); ls.gE.addConsumer(Sh, true); ls.Sh = Sh; this.Al.log('Gn', 1); } else { this.Al.log('Gn', 2); } } else if (ls.Sh) { ls.gE.removeConsumer(ls.Sh); ls.Sh = null; this.Al.log('Gn', 3); } else { this.Al.log('Gn', 4); } }, setRemoteAlertsOnClientError: function (tj, VC, ja) { var Ei = this.vZ; var GJ = this.ja; var qW = this.VC; this.vZ = tj === true; if (ja) { this.ja = this.Qn(ja, "setRemoteAlertsOnClientError", this.ja, true, 0); } if (VC) { this.VC = this.Qn(VC, "setRemoteAlertsOnClientError", this.VC, true, 0); } if (this.parent == null) { this.ZC(); } else { var kD = this.oZ('ja', "setRemoteAlertsOnClientError"); kD &= this.oZ('VC', "setRemoteAlertsOnClientError"); kD &= this.oZ('vZ', "setRemoteAlertsOnClientError"); if (!kD) { this.vZ = Ei; this.ja = GJ; this.VC = qW; } } }, ZC: function () { if (this.vZ) { if (ls.Qk) { ls.Qk.wI(this.VC); ls.Qk.Ti(this.ja); this.Al.log('ZC', 2); } else { var Qk = new ls.RemoteConsumer(1, this.VC, this.ja); Qk.addLogCategory("ER"); ls.gE.addConsumer(Qk, true); ls.Qk = Qk; this.Al.log('ZC', 1); } } else if (ls.Qk) { ls.gE.removeConsumer(ls.Qk); ls.Qk = null; this.Al.log('ZC', 3); } else { this.Al.log('ZC', 4); } }, setDomain: function (domain) { if (this.parent == window.HH || this.parent == null) { if (domain != null && domain != "" && ls.BE != this) { ls.IK = domain; this.ca = ls.IK; this.Al.log("setDomain", ls.IK); } if (!ls.lp(location.hostname)) { this.Al.error("The domain set is inconsistent with the hostname used", "setDomain"); } } } }; ls.RT(ls.Context, ls.Kr); ls.Nh.push(function () { ls.WG = new ls.Context(); ls.WG.setDebugAlertsOnClientError(true); ls.WG.gE = ls.gE; }); })(Lightstreamer); (function (ls) { var tl = ['wA', 'QY', 'jL', 'Pa', 'kP', 'bJ', 'nw', 'pO', 'Ia', 'OP', 'bR', 'uM', 'cU', 'Jc', 'PM']; Lightstreamer.Policy = function () { this.wA = 0; this.QY = NaN; this.jL = NaN; this.Pa = 2000; this.kP = 3000; this.bJ = NaN; this.nw = 0; this.pO = 30000; this.Ia = true; this.OP = true; this.bR = 4000; this.uM = 1000; this.cU = 300; this.Jc = 2000; this.PM = 4000; this.tl = tl; this.hS(ls.Policy, arguments[0]); this.name = "policy"; }; Lightstreamer.Policy.prototype = { setForceBindTimeout: function (Dk) { var kb = this.Jc; this.Jc = this.Qn(Dk, "setForceBindTimeout", this.setForceBindTimeout, true, 0); this.oZ('Jc', "setForceBindTimeout", kb); }, getForceBindTimeout: function () { return this.Jc; }, setSwitchCheckTimeout: function (Dk) { var kb = this.PM; this.PM = this.Qn(Dk, "setSwitchCheckTimeout", this.setSwitchCheckTimeout, true, 0); this.oZ('PM', "setSwitchCheckTimeout", kb); }, getSwitchCheckTimeout: function () { return this.PM; }, setRequestSerializationTimeout: function (Dk) { var kb = this.cU; this.cU = this.Qn(Dk, "setRequestSerializationTimeout", this.cU, true, 0); this.oZ('cU', "setRequestSerializationTimeout", kb); }, getRequestSerializationTimeout: function () { return this.cU; }, setMaxBandwidth: function (wA) { var kb = this.wA; var fn = new String(wA); if (fn.toLowerCase() == "unlimited") { this.wA = 0; } else { this.wA = this.Qn(wA, "setMaxBandwidth", this.wA, false, 0); } this.oZ('wA', "setMaxBandwidth", kb); }, getMaxBandwidth: function () { return this.wA; }, setKeepaliveInterval: function (QY) { var kb = this.QY; this.QY = this.Qn(QY, "setKeepaliveInterval", this.QY, true, 1); this.oZ('QY', "setKeepaliveInterval", kb); }, getKeepaliveInterval: function () { if (!isNaN(this.jL)) { return this.jL; } return this.QY; }, setTimeoutForStalled: function (Pa) { var kb = this.Pa; this.Pa = this.Qn(Pa, "setTimeoutForStalled", this.Pa, true, 1); this.oZ('Pa', "setTimeoutForStalled", kb); }, getTimeoutForStalled: function () { return this.Pa; }, setTimeoutForReconnect: function (kP) { var kb = this.kP; this.kP = this.Qn(kP, "setTimeoutForReconnect", this.kP, true, 1); this.oZ('kP', "setTimeoutForReconnect", kb); }, getTimeoutForReconnect: function () { return this.kP; }, setPollingInterval: function (nw) { var kb = this.nw; this.nw = this.Qn(nw, "setPollingInterval", this.nw, true, 0); this.oZ('nw', "setPollingInterval", kb); }, getPollingInterval: function () { if (!isNaN(this.bJ)) { return this.bJ; } return this.nw; }, setIdleTimeout: function (pO) { var kb = this.pO; this.pO = this.Qn(pO, "setIdleTimeout", this.pO, true, 0); this.oZ('pO', "setIdleTimeout", kb); }, getIdleTimeout: function () { return this.pO; }, setSlowingEnabled: function (Ia) { var kb = this.Ia; this.Ia = this.fW(Ia, "setSlowingEnabled", this.Ia); this.oZ('Ia', "setSlowingEnabled", kb); }, isSlowingEnabled: function () { return this.Ia; }, setCanUseGetForStreaming: function (OP) { var kb = this.OP; this.OP = this.fW(OP, "setCanUseGetForStreaming", this.OP); this.oZ('OP', "setCanUseGetForStreaming", kb); }, canUseGetForStreaming: function () { return this.OP; }, setBufferedStreamingHandled: function () { }, setConnectTimeout: function (Lb) { var kb = this.bR; this.bR = this.Qn(Lb, "setConnectTimeout", this.bR, true, 1); this.oZ('bR', "setConnectTimeout", kb); }, getConnectTimeout: function () { return this.bR; }, setFirstPollInterval: function (aZ) { var kb = this.uM; this.uM = this.Qn(aZ, "setFirstPollInterval", this.uM, true, 0); this.oZ('uM', "setFirstPollInterval", kb); }, getFirstPollInterval: function () { return this.uM; } }; ls.RT(ls.Policy, ls.Kr); })(Lightstreamer); (function (ls) { var bE = "/lightstreamer"; var tl = ['cl', 'HR', 'uh', 'gb', 'Cg', 'wr', 'Xw', 'cu']; Lightstreamer.Connection = function () { this.cl = bE; this.HR = false; this.uh = location.hostname; this.gb = location.port; this.Cg = null; this.cu = "STREAMING_IN_PROGRESS"; this.wr = null; this.Xw = null; this.tl = tl; this.hS(ls.Connection, arguments[0]); this.name = "connection"; }; Lightstreamer.Connection.prototype = { setServerUrlPath: function (eF) { var kb = this.cl; if (eF) { if (eF.indexOf("/") != 0) { eF = "/" + eF; } while (eF.length > 0 && eF.lastIndexOf("/") == eF.length - 1) { eF = eF.substring(0, eF.length - 1); } this.cl = eF; } else { this.cl = bE; } this.oZ('cl', "setServerUrlPath", kb); }, getServerUrlPath: function () { return this.cl; }, setLSHost: function (kC) { var ho = this.uh; if (kC) { if (kC.indexOf("://") > 0) { kC = kC.substring(kC.indexOf("://") + 3); } if (!ls.lp(kC) && arguments[1] !== true) { this.Al.error("Lightstreamer Server hostname inconsistent with the domain set", "setLSHost"); } this.uh = kC; NX = kC; } else { this.uh = location.hostname; NX = location.hostname; } this.oZ('uh', "setLSHost", ho); }, getLSHost: function () { return this.uh; }, setLSPort: function (port) { var kb = this.gb; if (port) { this.gb = this.Qn(port, "setLSPort", this.gb, true, 0); } else { this.gb = location.port; } this.oZ('gb', "setLSPort", kb); }, getLSPort: function () { return this.gb; }, setAdapterName: function (Cg) { var kb = this.Cg; this.Cg = Cg; this.oZ('Cg', "setAdapterName", kb); }, getAdapterName: function () { return this.Cg; }, setStatusBarUrlPortion: function (qg) { var kb = this.cu; this.cu = ls.Zk("_" + qg); this.oZ('cu', "setStatusBarUrlPortion", kb); }, getStatusBarUrlPortion: function () { return this.cu; }, setUserName: function (wr) { var kb = this.wr; this.wr = wr; this.oZ('wr', "setUserName", kb); }, setPassword: function (nk) { var kb = this.Xw; this.Xw = nk; this.oZ('Xw', "setPassword", kb); } }; ls.RT(ls.Connection, ls.Kr); })(Lightstreamer); (function (ls) { var tl = ['Pm', 'Ud', 'Cm', 'vL']; ls.XZ = function (nK) { this.Pm = false; this.Ud = null; this.Cm = null; this.vL = ls.ZW; this.tl = tl; this.hS(ls.XZ, nK); this.name = 'Qg'; }; ls.RT(ls.XZ, ls.Kr); })(Lightstreamer); (function (ls) { ls.Za = function (jT, ci, aL, Mh, bG) { this.cp = Mh === true; this.jT = jT; this.iZ = ci; this.qu = (this.cp) ? [] : { readId: 0, writeId: 0, firstId: 0 }; this.bG = bG || false; this.aL = aL; this.Al = ls.gE.getLogger("XS"); if (!this.cp) { this.ld = ls.Za.sA++; ls.Za.ed[this.ld] = this; if (!ls.Za.uI) { ls.Za.uI = true; this.aL.Td(ls.Za.TK, 50, ls.Za); } } this.Al.log('Za'); }; ls.Za.uI = false; ls.Za.ed = {}; ls.Za.sA = 0; ls.Za.TK = function () { for (var oi in this.ed) { this.ed[oi].TK(); } }; ls.Za.remove = function (IM) { delete (this.ed[IM.ld]); }; ls.Za.prototype = { eR: function (ub, YG, As, oD) { if (this.cp) { this.aL.Au(this.CU, 0, this, [ub, YG, As, oD]); } else { this.CU(ub, YG, As, oD); } if (this.bG) { ls.ML.jd(); } }, CU: function (ub, YG, As, oD) { if (this.cp) { this.qu.push(new ls.Za.Ql(ub, YG, As, oD)); this.TK(); } else { this.ZI(); var Ru = this.qu.writeId; this.qu[Ru] = new ls.Za.Ql(ub, YG, As, oD); this.qu.writeId++; this.UW(); } }, UW: function () { var SC = this.qu.readId; for (; this.qu.firstId < SC; this.qu.firstId++) { delete (this.qu[this.qu.firstId]); } }, ZI: function () { if (this.qu.firstId == this.qu.readId && this.qu.firstId == this.qu.writeId) { this.qu.writeId = 0; this.qu.readId = 0; this.qu.firstId = 0; this.qu = { readId: 0, writeId: 0, firstId: 0 }; this.Al.log('ZI'); } }, TK: function () { if (this.cp) { while (this.qu.length > 0) { var ub = this.qu.shift(); this.cG(ub); } } else { var Ru = this.qu.readId; while (Ru < this.qu.writeId) { var ub = this.qu[Ru]; this.cG(ub); Ru++; } this.qu.readId = Ru; } }, cG: function (ub) { try { if (!this.jT.lVw(ub.YG, ub.oD)) { return; } if (this.iZ[ub.ub]) { this.iZ[ub.ub](ub.As); } else { this.Al.xM('cG', 3, ub); } } catch (XF) { this.Al.DU(XF, 'cG', ub); } } }; ls.Za.Ql = function (ub, gB, RN, OS) { this.ub = ub; this.YG = gB; this.As = RN; this.oD = OS; }; ls.Za.Ql.prototype.toString = function () { return ["[", 'Za.Event', this.ub, this.YG, this.As, this.oD, "]"].join("|"); } })(Lightstreamer); (function (ls) { ls.ML = function () { this.Al = ls.gE.getLogger("XX"); this.Kd = 50; this.uw = []; this.is = ls.gs(); this.Gw(); }; ls.ML.iC = function (XH, lH) { return XH.kt - lH.kt; }; ls.ML.cT = 0; ls.ML.jd = function () { if (ls.ML.cT == 0) { ls.ML.cT++; if (window.postMessage) { window.postMessage("Lightstreamer.run", "*"); } } }; ls.ML.prototype = { toString: function () { return ["[", 'ML', this.Kd, this.uw.length, "]"].join("|"); }, Gw: function () { this.Al.log('Gw', 1); if (this.mx) { clearInterval(this.mx); this.Al.log('Gw', 2); } this.start(); }, start: function () { var jb = this; this.mx = setInterval(function () { jb.Tu(); }, this.Kd); if (window.postMessage) { ls.ms("message", function (event) { if (event.data == "Lightstreamer.run") { ls.ML.cT--; jb.Tu(); } }, true); } }, YI: function (HT, context, As) { var ap = { HT: HT }; if (context) { ap.context = context; } if (As) { ap.As = As; } return ap; }, kB: function (ap, kt, bB) { this.Al.log('kB', 1, kt, bB); ap.Kd = bB ? kt : null; ap.kt = this.is + parseInt(kt); this.uw.push(ap); }, Td: function (HT, uI, context, As) { return this.Au(HT, uI, context, As, true); }, ul: function (ap) { if (!ap) { return; } ap.HT = null; ap.Kd = null; }, Au: function (HT, kt, context, As, bB) { this.Al.log('Au', 1); var ap = this.YI(HT, context, As); this.kB(ap, kt, bB); return ap; }, Tu: function () { if (ls.Vm) { clearInterval(this.mx); return; } var QO = this.is; this.is = ls.gs(); var gP = []; if (this.uw.length > 0) { this.uw.sort(ls.ML.iC); while (this.uw.length > 0 && this.uw[0].kt <= this.is && !ls.Vm) { var fi = this.uw.shift(); if (fi.HT) { this.tk(fi); if (fi.Kd) { gP.push(fi); } } } } for (var oi = 0; oi < gP.length; oi++) { gP[oi].kt = this.is + gP[oi].Kd; this.uw.push(gP[oi]); } }, tk: function (ap) { try { if (ap.context) { if (ap.As) { ap.HT.apply(ap.context, ap.As); } else { ap.HT.apply(ap.context); } } else if (ap.As) { ap.HT.apply(null, ap.As); } else { ap.HT(); } } catch (XF) { var VZ = null; try { VZ = ap.HT.name || ap.HT.toString(); } catch (jR) { } this.Al.DU(XF, 'tk', VZ); } } }; ls.Nh.push(function () { ls.aL = new ls.ML(); }); })(Lightstreamer); (function (ls) { for (var oi = 0; oi < ls.Nh.length; oi++) { ls.Nh[oi](); } ls.Nh = []; ls.Dt = ls.gE.getLogger("OP"); ls.TE = ls.gE.getLogger("FM"); ls.DD = ls.gE.getLogger("CH"); ls.pC = ls.gE.getLogger("PC"); ls.qe = ls.gE.getLogger("PF"); ls.eu = ls.gE.getLogger("LC"); ls.version = "5.0.1446.3"; ls.toString = function () { return "[Lightstreamer web client version " + this.version + "]"; }; if (window.OpenAjax) { if (OpenAjax.hub) { OpenAjax.hub.registerLibrary("Lightstreamer", "http://www.lightstreamer.com/", "5.0"); } else { OpenAjax.registerLibrary("Lightstreamer", "http://www.lightstreamer.com/", "5.0"); OpenAjax.registerGlobals("Lightstreamer", ["Lightstreamer"]); } } })(Lightstreamer); return Lightstreamer; }); })(window.define || function (tm, qN) { window.Lightstreamer = qN() }); //lscommons
(function (define) { define(["./lscommons"], function (Lightstreamer) { if (!Lightstreamer) { throw ("Warning: lscommons.js not included before lspushpage.js"); } Lightstreamer.dQ = " 28858 $"; Lightstreamer.eu.log("pushpage", window.name); (function (ls) { Lightstreamer.GroupDescriptor = function () { this.Al = ls.gE.getLogger("TL"); }; ls.GroupDescriptor.prototype = { FZ: function (Wf) { if (Wf == null) { return null; } else if (Wf.St) { return Wf.St; } else if (Wf.iv) { if (this.gv) { return this.gv[Wf.iv]; } else { return null; } } else { var wT = Number(Wf); if (!isNaN(wT)) { return wT; } else { if (this.gv) { Wf = Wf.toString(); return this.gv[Wf]; } else { return null; } } } } }; ls.GroupDescriptor.ih = function (ji) { if (ji == null) { return null; } else if (ji.ds) { return ji; } else if (ji.WM) { return ji; } else if (ji.join && typeof (ji.join) == "function") { return new ls.GroupListDescriptor(ji); } else { return new ls.GroupIdDescriptor(ji); } }; })(Lightstreamer); (function (ls) { Lightstreamer.GroupIdDescriptor = function (ds) { this.hS(ls.GroupIdDescriptor); this.ds = String(ds); }; Lightstreamer.GroupIdDescriptor.prototype = { EC: function (St) { return null; }, hw: function () { return this.ds; }, getId: function () { return this.ds; } }; ls.RT(ls.GroupIdDescriptor, ls.GroupDescriptor); })(Lightstreamer); (function (ls) { var Ht = "item_name_error"; var Zs = "GroupListDescriptor"; Lightstreamer.GroupListDescriptor = function (Wx) { this.hS(ls.GroupListDescriptor); this.WM = ls.nY(Wx); this.gv = {}; for (var oi = 1; oi < this.WM.length; oi++) { if (!this.tO(this.WM[oi])) { this.WM[oi] = Ht; } this.gv[this.WM[oi]] = oi; } }; Lightstreamer.GroupListDescriptor.prototype = { tO: function (iv) { if (!iv) { this.Al.error("Item names cannot be empty", Zs); return false; } if (!isNaN(iv)) { this.Al.error("Item names cannot be numbers", Zs); return false; } if (!ls.Um.test(iv)) { this.Al.error("Item names should be alphanumeric(underscore, caret and dot also allowed)", Zs); return false; } return true; }, EC: function (St) { return this.WM[St]; }, hw: function () { this.WM.shift(); var name = this.WM.join(" "); this.WM = [null].concat(this.WM); return name; }, getList: function () { return this.WM; } }; ls.RT(ls.GroupListDescriptor, ls.GroupDescriptor); })(Lightstreamer); (function (ls) { Lightstreamer.SchemaDescriptor = function () { this.Al = ls.gE.getLogger("TL"); this.Oc; this.length = 0; }; ls.SchemaDescriptor.prototype = { PE: function (vx, Yk) { if (!vx) { return null; } else if (vx.Ot) { return vx.Ot; } else if (vx.Nt) { return this.Yp(vx.Nt, Yk); } else { var wT = Number(vx); if (!isNaN(wT)) { return wT; } else { return this.Yp(vx, Yk); } } }, ak: function (Ot, Yk) { if (typeof (Ot) == "string") { return true; } else if (!Yk && this.Oc) { return Ot > this.length + this.Oc.length; } else { return Ot > this.length; } }, sm: function () { this.Oc = null; }, Id: function (Oc) { if (!this.Oc) { this.Oc = ls.SchemaDescriptor.Kx(Oc); } } }; ls.SchemaDescriptor.Kx = function (aw) { if (!aw) { return null; } else if (aw.AX) { return aw; } else if (aw.uA) { return aw; } else if (aw.join && typeof (aw.join) == "function") { return new ls.SchemaListDescriptor(aw); } else { return new ls.SchemaIdDescriptor(aw); } }; })(Lightstreamer); (function (ls) { Lightstreamer.SchemaIdDescriptor = function (AX) { this.hS(ls.SchemaIdDescriptor); this.AX = AX; }; Lightstreamer.SchemaIdDescriptor.prototype = { getId: function () { return this.AX; }, En: function (Ot, Yk) { if (typeof (Ot) == "string") { return Ot; } else if (Ot > this.length && this.Oc && !Yk) { return this.Oc.En(Ot); } return null; }, Yp: function (Nt, Yk) { if (this.Oc && !Yk) { var nX = this.Oc.Yp(Nt); if (isNaN(nX)) { return nX; } return this.length + nX; } return Nt; }, YA: function (size) { if (!this.length) { this.length = size; } }, reset: function () { this.length = 0; }, Pf: function () { return this.AX; } }; ls.RT(ls.SchemaIdDescriptor, ls.SchemaDescriptor); })(Lightstreamer); (function (ls) { var Zs = "SchemaListDescriptor"; var cD = "Field names cannot be "; var Vp = this.cD + "empty"; var Rx = this.cD + "numbers"; var Ws = "Field names should be alphanumeric(underscore, caret and dot also allowed)"; var Ht = "field_name_error"; Lightstreamer.SchemaListDescriptor = function (aP) { this.hS(ls.SchemaListDescriptor); this.uA = ls.nY(aP); this.gv = {}; for (var oi = 1; oi < this.uA.length; oi++) { if (!this.nv(this.uA[oi])) { this.uA[oi] = Ht; } this.gv[this.uA[oi]] = oi; } this.length = this.uA.length - 1; }; Lightstreamer.SchemaListDescriptor.prototype = { getList: function () { return this.uA; }, En: function (Ot, Yk) { if (typeof (Ot) == "string") { return Ot; } else if (Ot <= this.length) { return this.uA[Ot]; } else if (this.Oc && !Yk) { var cj = this.Oc.En(Ot - this.length); if (this.gv[cj]) { return "$" + cj; } return cj; } return null; }, Yp: function (Nt, Yk) { if (this.gv[Nt]) { return this.gv[Nt]; } else if (!this.Oc || Yk) { return Nt; } if (Nt.indexOf("$") == 0) { Nt = Nt.substring(1); } var nX = this.Oc.Yp(Nt); if (isNaN(nX)) { return nX; } return this.length + nX; }, nv: function (Nt) { if (!Nt) { this.Al.error(Vp, Zs); return false; } if (!isNaN(Nt)) { this.Al.error(Rx, Zs); return false; } if (!ls.Um.test(Nt)) { this.Al.error(Ws, Zs); return false; } return true; }, YA: function (size) { }, reset: ls.Ir, Pf: function () { this.uA.shift(); var name = this.uA.join(" "); this.uA = [null].concat(this.uA); return name; } }; ls.RT(ls.SchemaListDescriptor, ls.SchemaDescriptor); })(Lightstreamer); Lightstreamer.ItemDescriptor = function () { }; Lightstreamer.ItemDescriptor.prototype = {}; (function (ls) { Lightstreamer.ItemNameDescriptor = function (iv) { this.hS(ls.ItemNameDescriptor); this.iv = String(iv); }; Lightstreamer.ItemNameDescriptor.prototype = { toString: function () { return this.iv; }, getName: function () { return this.iv; } }; ls.RT(ls.ItemNameDescriptor, ls.ItemDescriptor); })(Lightstreamer); (function (ls) { Lightstreamer.ItemPositionDescriptor = function (St) { this.hS(ls.ItemPositionDescriptor); this.St = Number(St); }; Lightstreamer.ItemPositionDescriptor.prototype = { toString: function () { return String(this.St); }, getPosition: function () { return this.St; } }; ls.RT(ls.ItemPositionDescriptor, ls.ItemDescriptor); })(Lightstreamer); Lightstreamer.FieldDescriptor = function () { }; Lightstreamer.FieldDescriptor.prototype = {}; (function (ls) { Lightstreamer.FieldNameDescriptor = function (Nt) { this.hS(Lightstreamer.FieldNameDescriptor); this.Nt = String(Nt); }; Lightstreamer.FieldNameDescriptor.prototype = { toString: function () { return this.Nt; }, getName: function () { return this.Nt; } }; ls.RT(ls.FieldNameDescriptor, ls.FieldDescriptor); })(Lightstreamer); (function (ls) { Lightstreamer.FieldPositionDescriptor = function (Ot) { this.hS(ls.FieldPositionDescriptor); this.Ot = Number(Ot); }; Lightstreamer.FieldPositionDescriptor.prototype = { toString: function () { return String(this.Ot); }, getPosition: function () { return this.Ot; } }; ls.RT(ls.FieldPositionDescriptor, ls.FieldDescriptor); })(Lightstreamer); (function (ls) { var valueType = { input: true, textarea: true }; ls.pu = function (ZS, KF) { this.Qs = ZS; if (!KF) { KF = ZS.getAttribute("upd" + "ate"); } if (KF) { if (KF.toLowerCase().indexOf("style.") == 0) { var UQ = KF.slice(6); this.Ur = Ev(UQ); this.er = QF(UQ); } else { this.Ur = ER(KF); this.er = es(KF); } } else { var Qv = ZS.nodeName.toLowerCase(); if (Qv in valueType) { this.Ur = ER("value"); this.er = es("value"); } else { this.Ur = Nf; this.er = VY; } } this.ek = Ru++; this.UN = null; this.RL = null; this.vA = 0; this.AW = 0; }; function Ev(KF) { return function (ux) { this.Qs.style[KF] = ux === ls.Es ? null : ux; }; } function QF(Vv) { return function () { return this.Qs.style[Vv] || ""; }; } function ER(KF) { return function (ux) { if (!ux || ux === ls.Es) { this.Qs.removeAttribute(KF); } else { this.Qs.setAttribute(KF, ux); } }; } function es(Vv) { return function () { this.Qs.getAttribute(Vv); }; } function Nf(ux, MH) { if (MH) { this.Qs.innerHTML = ux; } else { if (this.Qs.childNodes.length != 1 || this.Qs.firstChild.nodeType != 3) { if (this.Qs.firstChild != null) { this.Qs.innerHTML = ""; } this.Qs.appendChild(document.createTextNode(ux)); } else { this.Qs.firstChild.nodeValue = ux; } } } function VY(Fa) { if (Fa) { return this.Qs.innerHTML; } else if (this.Qs.firstChild) { return this.Qs.firstChild.nodeValue; } return ""; } var Ru = 0; function xW(Uj) { var lG = Uj.getAttribute(ls.YX); return lG && lG.toUpperCase() == ls.px; } ls.pu.nl = function (oL, AF) { var gr = []; if (!AF) { AF = ["*"]; } for (var oi = 0; oi < AF.length; oi++) { var CZ = oL.getElementsByTagName(AF[oi]); for (var lm = 0; lm < CZ.length; lm++) { if (xW(CZ[lm])) { gr.push(new ls.pu(CZ[lm])); } } } return gr; }; ls.pu.Wi = function (fq) { var hg = null; var Uc = fq; while (Uc != null && Uc != document) { hg = Uc; Uc = Uc.parentNode; } if (Uc == null) { if (hg != null && hg.nodeName == "HTML") { return true; } else { return false; } } else { return true; } }; ls.pu.prototype = { HD: function (Bg) { if (Bg != null && this.Qs.className != Bg) { this.Qs.className = Bg; } }, Zl: function (fb) { for (var Ob in fb) { this.Qs.style[Ob] = fb[Ob]; } }, Wi: function () { return ls.pu.Wi(this.Qs); }, IO: function () { if (!this.Qs.id) { return this.Wi(this.Qs); } var ZG = document.getElementById(this.Qs.id); return (ZG === this.Qs); }, UW: function () { if (this.Qs) { delete (this.Qs); } } }; })(Lightstreamer); (function (ls) { ls.OH({ cellOverwrite: function (bA, hf, nU, ht, ie, SL, WQ, np) { ls.oN(ls.sw, bA, hf, nU, ht, ie, SL, WQ, np, "cellOverwrite"); }, cellScroll: function (bA, row, nU, ht, ie, SL, WQ, np) { ls.oN(ls.ON, bA, row, nU, ht, ie, SL, WQ, np, "cellScroll"); }, cellMetapush: function (bA, row, nU, ht, ie, SL, WQ, np) { ls.oN(ls.GB, bA, row, nU, ht, ie, SL, WQ, np, "cellMetapush"); }, oN: function (XB, bA, YR, nU, ht, ie, SL, WQ, np, hT) { ls.pC.log('oN', arguments); var aq = nU.toString(); var To = YR; if (XB == ls.sw) { To = To.toString(); } var Ni = ls.kx.HA(bA); Ni.jC.YQ(ie, To, aq); Ni.Lv.YQ(ht, To, aq); var cI = ls.kx.Jg(ht, ie, WQ, np); Ni.Ys(cI, To, aq, XB); } }); })(Lightstreamer); (function (ls) { ls.OH({ Lr: new RegExp("^https?:\\/\\/", ls.Fm), ku: function (rh) { var cJ; if (this.Lr.test(rh)) { return rh; } else { cJ = location.protocol + "//" + location.hostname; if (location.port && !ls.lY(location.port, location.protocol)) { cJ += ":" + location.port; } if (rh.indexOf("/") != 0) { cJ += location.pathname; var xK = cJ.lastIndexOf("/"); if (xK != cJ.length - 1) { cJ = cJ.substring(0, xK + 1); } } cJ += rh; return cJ; } }, Du: new RegExp(","), RO: new RegExp("\\."), tw: function (ux, fY) { if (ux) { if (!ux.replace) { return ux; } if (fY) { ux = ux.replace(this.RO, ""); ux = ux.replace(this.Du, "."); } else { ux = ux.replace(this.Du, ""); } return new Number(ux); } return 0; }, XU: function () { return ls.dA.toString(); } }); })(Lightstreamer); Lightstreamer.OH({ Od: "&nbsp;", Es: "\u00A0", sw: "H", ON: "V", Qd: "AV", GB: "X", Di: "Z", aR: "K", QR: "AX", PU: "AXZ", rU: "M", hD: "O", Yo: "OX", tx: "OXZ", Yx: "A", Sx: "A", BT: "B", LO: "D", TN: "C", Bq: 1, El: 2, Pi: 3, VQ: 4, dL: 5 }); (function (ls) { ls.JM = function () { this.gX = {}; this.lZ = {}; this.GQ = 0; this.sa = false; this.Ij = -1; this.pr = {}; this.dN = 0; this.Al = ls.gE.getLogger("LC"); this.Al.log('JM', "new PageContext"); }; ls.JM.prototype = { HA: function (ld, ea) { if (!this.gX[ld]) { if (ea == ls.rU) { this.gX[ld] = new ls.PO(ld); } else { this.gX[ld] = new ls.oI(ld); } } return this.gX[ld]; }, NK: function (JW, xX) { this.Al.xA('NK', arguments); ls.gE.getLogger("UP").xA('NK', arguments); var So = JW[0]; var Pu = ls.mR.Zu(So); if (!Pu) { return true; } Pu.HN(JW, xX, false); return true; }, Mw: function (OQ) { this.Ij++; this.pr[this.Ij] = OQ; this.dN++; var IM = {}; IM.uV = ls.dA.gp; IM.Gd = this.Ij; return IM; }, BN: function (Pk, Ji, fo) { if (this.pr[Pk]) { var OQ = this.pr[Pk]; if (Ji == 1) { Oe = "onProcessed"; } else if (Ji == 38) { Oe = "onDiscarded"; } else if (Ji == 30) { Oe = "onAbort"; } else if (Ji <= 0) { Oe = "onDeny"; } else { Oe = "onError"; } try { if (Ji <= 0) { OQ.onDeny(Ji, fo); } else { OQ[Oe](); } } catch (XF) { this.Al.DU(XF, Oe); } delete this.pr[Pk]; this.dN--; } }, QL: function () { var gO = {}; var Gd = 0; for (var oi = this.Ij; oi >= 0; oi--) { if (Gd == this.dN) { break; } if (this.pr[oi]) { gO[Gd] = oi; Gd++; } } for (var oi = Gd - 1; oi >= 0; oi--) { this.BN(gO[oi], 30, null); } this.Al.sX(this.dN == 0, 'QL'); this.Ij = -1; this.pr = {}; this.dN = 0; }, UW: function () { for (var oi in this.gX) { this.gX[oi].UW(); } } }; })(Lightstreamer); (function (ls) { ls.Dx = function (wg) { this.Ko = false; this.fK = false; this.hU = this.qX(wg); this.Ju = 1000; this.Dv = false; this.Al = ls.gE.getLogger("LC"); this.ip(); }; ls.Dx.prototype = { qX: function (wg) { var jb = this; return function () { if (jb.Ko) { return; } jb.fK = true; if (wg && wg.length) { for (var oi = 0; oi < wg.length; oi++) { try { wg[oi](); } catch (XF) { this.Al.DU(XF, 'hU', wg[oi]); } } } jb.fK = false; jb.Ko = true; }; }, jE: function () { return !(this.Ko || this.fK); }, ip: function () { if (document && typeof document.readyState != "undefined") { var gc = document.readyState; if (gc.toUpperCase() == "COMPLETE") { this.Al.log('ip', 1); this.wF(); return; } else { this.Al.log('ip', 2); ls.aL.Au(this.UZ, this.Ju, this); } } else if (this.GR()) { this.Al.log('ip', 3); this.wF(); return; } if (typeof window.OpenAjax != "undefined") { if (typeof OpenAjax.addOnLoad != "undefined") { this.Al.log('ip', 4); OpenAjax.addOnLoad(this.hU, null, "library"); return; } } var Ix = ls.ms("load", this.hU); if (!Ix) { this.Al.log('ip', 5); this.wF(); } else if (ls.iR()) { var sS = true; if (!ls.ms("DOMContentLoaded", this.di())) { this.Al.log('ip', 6); sS = false; } else { this.Al.log('ip', 7, window.opera.version); if (ls.iR(7, true)) { return; } else if (ls.iR(8, true)) { sS = false; } } ls.aL.Au(this.PQ, this.Ju, this, [sS]); } }, wF: function () { ls.aL.Au(this.hU, 0); }, UZ: function () { if (!this.Ko) { var gc = document.readyState; if (gc.toUpperCase() == "COMPLETE") { this.hU(); } else { ls.aL.Au(this.UZ, this.Ju, this); } } }, PQ: function (sS) { if (!this.Ko) { if (this.Ne || !sS && this.GR()) { if (ls.Cp && ls.Cp.Yb) { this.Dv = true; return; } this.hU(); } else { ls.aL.Au(this.PQ, this.Ju, this, [sS]); } } }, di: function () { var jb = this; return function () { jb.Ne = true; }; }, GR: function () { return (typeof document.getElementsByTagName != "undefined" && typeof document.getElementById != "undefined" && (document.getElementsByTagName("body")[0] != null || document.body != null)); } }; })(Lightstreamer); (function (ls) { ls.rk = function () { this.IW = false; this.sM = null; this.bV = 0; this.Al = ls.gE.getLogger("EL"); }; ls.rk.prototype = { co: function (cB) { this.Al.log('co', ls.Cp.Vx.Qg, ls.Cp.Cm); if ((ls.Cp.Vx.Qg.Cm || ls.Cp.Cm)) { if (ls.Cp.Vx.Qg.Ud == "S") { this.IW = true; var is = ls.gs(); if (this.sM === null || is - this.sM >= 2000) { this.sM = is; var vB = ls.Ns(); this.Al.log('co', 2, vB); this.bV++; ls.aL.Au(this.OK, vB, this); ls.Cp.ij(ls.Cp.Im, null); } } else if (cB) { this.Al.log('co', 3); } } }, OK: function () { this.bV--; this.Al.log('OK', 1); YO = ls.Cp.Cm ? ls.Cp.Cm : ls.Cp.Vx.Qg.Cm; ls.Cp.Hn(ls.Cp.Im, YO, ls.Cp.Vx.Qg.Ud, ls.Cp.Vx.Qg.Pm, true); }, jp: function () { this.IW = false; } }; })(Lightstreamer); (function (ls) { ls.fF = function () { }; ls.fF.prototype = { Up: function (JP, So) { this.Al.xA('Up', arguments); if (JP == 6) { var RU = ls.mR.Zu(So); if (RU) { RU.wN(); } } else if (JP == 7) { } else if (JP == 8) { } else if (JP == 9) { var pq = ls.mR.Zu(So); if (pq && pq.PZ) { if (ls.Cp && ls.Cp.Vx && ls.Cp.Vx.getStatus() == ls.xu) { pq.Xc *= 2; pq.Xc += 500; } ls.aL.kB(pq.PZ, pq.Xc); delete (pq.PZ); delete (pq.Xc); } } }, TV: function (JP, fo, So) { this.Al.xA('TV', arguments); this.sa = true; var Pu = ls.mR.Zu(So); if (!Pu) { return; } var Zx; var eV; var Gs; if (Pu.ea == ls.aR) { eV = Pu.vQ; Gs = Pu.ug.ds; Pu = Pu.uW; Zx = Pu.ug.EC(eV); } if (ls.Cp.onServerDeny) { try { ls.Cp.onServerDeny(JP, fo, Pu, eV, Zx, Gs); } catch (XF) { this.Al.ET(XF, ls.Cp.onServerDeny, "onServerDeny"); } } }, onLostUpdates: function (JW) { this.Al.xA("onLostUpdates", arguments); var So = JW[0]; var hf = JW[1]; var JI = JW[2]; var Pu = ls.mR.Zu(So); if (!Pu) { return false; } var Gs; if (Pu.ea == ls.aR) { Gs = Pu.ug.ds; hf = Pu.vQ; Pu = Pu.uW; } if (Pu.onLostUpdates) { var aS = Pu.ug.EC(hf); try { Pu.onLostUpdates(hf, JI, aS, Gs); } catch (bs) { this.Al.ET(XF, Pu.onLostUpdates, "onLostUpdates"); } } return true; }, onEndOfSnapshot: function (JW) { this.Al.xA("onEndOfSnapshot", arguments); var So = JW[0]; var hf = JW[1]; var Pu = ls.mR.Zu(So); if (!Pu) { return false; } if (Pu.ea.indexOf(ls.QR) > -1) { Pu.xg = true; } if (Pu.onEndOfSnapshot) { var aS = Pu.ug.EC(hf); try { Pu.onEndOfSnapshot(hf, aS); } catch (XF) { this.Al.ET(XF, Pu.onEndOfSnapshot, "onEndOfSnapshot"); } } return true; } }; ls.RT(ls.JM, ls.fF); })(Lightstreamer); (function (ls) { var Rk = 'JC'; ls.mL = function () { this.VM = new ls.Dc(null); this.tG = {}; this.BO = {}; this.fJ = 0; this.lC = false; this.CV = 5000; this.ZU = false; this.Qi = 0; this.DP = 0; this.Wu = false; this.Qe = true; this.IB = false; this.hq = -1; ls.aL.Td(this.Ph, 60000, this); this.Al = ls.gE.getLogger("EP"); this.PK = ls.gE.getLogger("CE"); }; ls.mL.prototype = { gI: function () { if (!ls.Cp) { return null; } if (this.VM.de != null) { var PD = this.VM.gW(true); this.PK.log('gI', 1, PD.log); if (this.VM.de !== null) { return this.VM.de; } else { return null; } } else { return null; } }, wk: function () { var gS = null; var Qh = ls.Cp; if (ls.Kh() && Qh.AT) { this.VM.de = Qh.ef; this.Al.log('wk', 1); } else if ((this.Wu || Qh.ef == null) && this.Qe && !Qh.Yb) { gS = this.Mp(); this.Al.log('wk', 2, gS); this.Wu = false; } else if (Qh.ef != null) { this.VM.de = Qh.ef; this.Al.log('wk', 3); this.Wu = true; } else { if (this.fJ == 10) { if (!this.lC) { this.Al.db("No way to find the Engine. Please check your configuration", "seekEngine"); } } if (this.fJ <= 10) { this.fJ++; } this.Al.log('wk', 4, this.fJ); return null; } var PD = this.VM.gW(true, !Qh.Yb); this.Al.log('wk', 5, PD.log); if (this.VM.de != null) { this.DP = 0; try { this.tG[this.VM.de.HH.getEngineFrameName()] = "OK"; return this.VM.de; } catch (XF) { this.Al.log('wk', 10); } } if (ls.iR() && Qh.Ci() && gS && gS.log == "null") { this.Al.log('wk', 6); Qh.Dr(); return null; } this.DP++; if (this.DP >= (Qh.Yb ? 20 : 10)) { this.DP = 0; if (ls.pZ.IW) { this.Al.log('wk', 7); ls.pZ.co(); } else if (Qh.Ci() && this.mr() && !Qh.Yb) { this.Al.log('wk', 8); Qh.Dr(); } else { this.Al.log('wk', 9); this.ZU = true; } } return null; }, mr: function () { if (ls.gK(2) && this.sD) { this.Al.log('mr', 1); return true; } else if (ls.iR()) { this.Al.log('mr', 2); return true; } else if (ls.Sl()) { this.Al.log('mr', 3); return true; } }, Mp: function () { var lK = this.JC(); if (!lK) { this.Al.log('Mp', 1); return false; } var RW = lK[2]; var kD = this.VM.TW(RW, ls.Cp.Yb); if (kD === false || (!kD.nJ && kD.UO == false)) { this.tG[RW] = false; } else { this.tG[RW] = kD.log ? kD.log : "unknown"; } this.Al.log('Mp', 3, RW, kD.log); if (lK[3] && lK[3] != location.host) { this.sD = true; } return kD; }, JC: function () { if (!ls.bg) { this.Al.log(Rk, 1); return null; } var GK = ls.Dm + (ls.Cp.sG ? ls.vu : 0); var HJ = ls.Zo(ls.aJ + ls.Cp.Im); if (!HJ) { this.Al.log(Rk, 2); return null; } for (var oi = 0; oi < HJ.length; oi++) { var ng = HJ[oi] + "_" + ls.Cp.Im; var EY = ls.Zo(ls.aJ + ng); if (!EY || EY.length <= 2) { this.Al.log(Rk, 3, HJ[oi]); continue; } if (EY[1] != "S" && !this.IB) { this.Al.log(Rk, 4, HJ[oi], EY[1]); continue; } if (this.tG[EY[2]]) { this.Al.log(Rk, 5, HJ[oi], EY[2]); continue; } var WW = ls.gs(); var YB = WW - parseInt(EY[0]); var sF = 1000 - YB; if (YB > GK) { if (this.BO[ng]) { if (YB > ls.Dm * 2) { this.BO[ng] = null; this.Al.log(Rk, 6.1, HJ[oi], YB); } else { this.BO[ng] = EY[0]; ls.Cp.Zd(sF); this.Al.log(Rk, 6.2, HJ[oi], YB); } } else { this.Al.log(Rk, 6, HJ[oi], YB); } continue; } if (ls.Cp.sG) { if (!this.BO[ng]) { this.Al.log(Rk, 7, EY[0], YB); this.BO[ng] = EY[0]; ls.Cp.Zd(sF); continue; } else { if (this.BO[ng] == EY[0]) { this.Al.log(Rk, 8, EY[0], YB); ls.Cp.Zd(sF); continue; } } } ls.Zv = WW; ls.KS = ls.Dm - YB; if (YB > 100) { this.Al.log(Rk, 9, YB); } this.Al.log(Rk, 10, HJ[oi], EY); return EY; } return null; }, rs: function () { if (this.NY) { return; } this.Al.log('rs'); this.NY = ls.aL.Td(this.FE, this.CV, this); }, sq: function () { this.Al.log('sq'); ls.aL.ul(this.NY); delete (this.NY); }, FE: function () { this.PK.xA('FE'); if (ls.dA.Ib) { var HH = this.gI(); if (HH === null) { this.Al.log('FE', 1); ls.dA.Kb(); return false; } this.PK.log('FE', 2); return ls.dA.NQp(); } return false; }, EK: function (YY) { if (ls.Ki.lC) { return; } if (this.ZU && YY == this.Qi) { if (!ls.dA.Ib) { var Xp; if (ls.Cp.Yb) { Xp = "Unable to create the Engine."; } else { Xp = "Unable to find the Engine. "; } if (ls.Cp.Ci()) { Xp += "Creating a new Engine."; } else { Xp += "Retrying. If the problem persists, please check your configuration."; } this.Al.db(Xp, "bind"); ls.Cp.Dr(); } } }, oC: function () { this.ZU = false; ls.aL.Au(this.EK, 20000, this, [new Number(++this.Qi)]); }, Ph: function () { var NN = document.cookie.toString(); this.rw(NN); this.dh(NN); }, rw: function (NN) { var UH = this.tG; this.tG = {}; for (var NP in UH) { if (UH[NP] && NN.indexOf(NP) > -1) { this.tG[NP] = UH[NP]; } } }, dh: function (NN) { var AK = this.BO; this.BO = {}; for (var NP in AK) { if (AK[NP] && NN.indexOf(NP) > -1) { this.BO[NP] = AK[NP]; } } }, lI: function (Qc) { var HH = this.gI(); if (HH != null) { try { HH.document.bgColor = Qc; var Oh = HH.document.bgColor; return Oh; } catch (dJ) { } } return null; } }; })(Lightstreamer); (function (ls) { Lightstreamer.UpdateItemInfo = function () { this.Al = ls.gE.getLogger("IC"); }; Lightstreamer.UpdateItemInfo.prototype = { iE: function (mX, qP, JW, xX) { this.NU = JW; this.mX = mX; this.qP = qP; this.xX = xX; }, isValueChanged: function (field) { this.Al.log("isValueChanged", arguments); var VV = this.mX.QI.PE(field); return this.Un(VV, this.mX.QI.ak(VV)); }, Un: function (VV, Og) { if (!Og) { if (this.NU[VV + 1] == null) { return true; } else { return (this.NU[VV + 1].length > -1); } } else if (this.mX.WV.vn(this.qP)) { var wH = ""; if (this.mX.WV.ww(this.qP, VV)) { wH = VV; } else if (this.mX.WV.ww(this.qP, VV + "|rem")) { wH = VV + "|rem"; } if (wH != "") { if (this.mX.WV.ww(this.qP, wH) != this.mX.eE.ww(this.qP, VV)) { return true; } else { return false; } } } if (this.mX.eE.ww(this.qP, VV)) { return true; } else { return false; } }, isSnapshot: function () { this.Al.log("isSnapshot", arguments); return this.xX; }, getNewValue: function (field) { this.Al.log("getNewValue", arguments); var VV = this.mX.QI.PE(field); var Og = this.mX.QI.ak(VV); if (this.Un(VV, Og)) { if (!Og) { return this.NU[VV + 1]; } else { if (!this.mX.WV.vn(this.qP)) { return null; } var Ll = this.mX.WV.ww(this.qP, VV); var Ms = (Ll) ? Ll : this.mX.WV.ww(this.qP, VV + "|rem"); if (!Ms) { return null; } else { return Ms; } } } else { return this.jS(VV); } }, getOldValue: function (field) { this.Al.log("getOldValue", arguments); var VV = this.mX.QI.PE(field); return this.jS(VV); }, jS: function (VV) { return this.mX.eE.ww(this.qP, VV); }, getNumFields: function () { if (this.mX.Vw) { if (this.mX.Vw.length == 0) { return null; } else { this.mX.QI.length + this.mX.Vw.length; } } return this.mX.QI.length; }, addField: function (field, value, GY) { this.Al.log("addField", arguments); if (typeof GY == "undefined") { GY = true; } var VV = this.mX.QI.PE(field); if (!this.mX.QI.ak(VV)) { var GF = this.getNumFields(); if (GF == null) { GF = this.mX.QI.length; } this.Al.pE("addField() method can only add fields that are not part of the subscription schema. Please use a value greater than " + GF, "addField"); } if (GY) { this.mX.WV.YQ(value, this.qP, VV + "|rem"); } else { this.mX.WV.YQ(value, this.qP, VV); this.mX.WV.jK(this.qP, VV + "|rem"); } }, forEachChangedField: function (kq) { var ch = this.NU.bZ; for (var oi = 0; oi < ch.length; oi++) { var name = this.mX.QI.En(ch[oi]); var fa = this.jS(ch[oi]); var xa = this.NU[ch[oi] + 1]; try { kq(ch[oi], name, fa, xa, this); } catch (XF) { this.Al.ET(XF, kq, "forEachChangedField"); } } } }; })(Lightstreamer); (function (ls) { Lightstreamer.VisualUpdateInfo = function () { this.Rc = null; this.Lt = 1200; this.kN = 0; this.QW = 0; this.Al = ls.gE.getLogger("IC"); }; Lightstreamer.VisualUpdateInfo.prototype = { Qn: ls.Le, iE: function (mX, qP, JW, oR) { this.NU = JW; this.oR = oR; this.mX = mX; this.qP = qP; this.Gd = qP; this.Lt = 1200; this.kN = 0; this.QW = 0; }, getFormattedValue: function (field) { var VV = this.mX.QI.PE(field); var UG = this.mX.WX.ww(this.qP, VV); return UG; }, setFormattedValue: function (field, value) { var VV = this.mX.QI.PE(field); this.mX.WX.YQ(value, this.qP, VV); }, getServerValue: function (field) { var VV = this.mX.QI.PE(field); if (this.oR) { if (typeof (VV) == "number") { return this.NU[VV + 1]; } else { return this.NU[VV]; } } else if (!this.mX.QI.ak(VV)) { if (this.NU[VV + 1] == null || this.NU[VV + 1].length > -1) { return this.NU[VV + 1]; } } return this.mX.eE.ww(this.qP, VV); }, setHotTime: function (ux) { this.Lt = this.Qn(ux, "setHotTime", 1200, true, 0); }, setColdToHotTime: function (ux) { if (this.mX.ea != ls.ON && this.mX.ea != ls.GB) { this.kN = this.Qn(ux, "setColdToHotTime", 0, true, 0); } else { this.kN = 0; } }, setHotToColdTime: function (ux) { if (this.mX.ea != ls.ON && this.mX.ea != ls.GB) { this.QW = this.Qn(ux, "setHotToColdTime", 0, true, 0); } else { this.QW = 0; } }, eY: function (VV, Lf, BP, XB) { this.Al.log('eY', arguments); var aq = this.mX.dZ[VV]; if (aq == null) { return; } var CY = this.mX.aE.Wc(this.Rc, aq); if (CY == null) { return; } Lf = (Lf) ? Lf : ""; BP = (BP) ? BP : ""; if (CY.UN == null) { CY.UN = {}; CY.RL = {}; } CY.UN[XB] = Lf; CY.RL[XB] = BP; }, setRowAttribute: function (Lf, BP, Ob) { this.CG(Lf, BP, Ob); }, setRowStyle: function (aG, Xn) { this.CG(aG, Xn, "CLASS"); }, setAttribute: function (field, Lf, BP, Ob) { var VV = this.mX.QI.PE(field); this.eY(VV, Lf, BP, Ob); if (this.mX.ea == ls.ON || this.mX.ea == ls.GB) { var Ni = this.mX.aE; var aq = this.mX.dZ[VV]; if (aq == null) { return; } var gT = Ni.dj.ww(this.Rc, aq); if (!gT) { gT = {}; Ni.dj.YQ(gT, this.Rc, aq); } gT[Ob] = 1; } }, setStyle: function (field, aG, Xn) { var VV = this.mX.QI.PE(field); this.eY(VV, aG, Xn, "CLASS"); }, CG: function (Lf, BP, XB) { var tP = this.Rc; Lf = (Lf) ? Lf : ""; BP = (BP) ? BP : ""; var jv = this.mX.aE; jv.Kv.YQ(Lf, tP, XB); jv.UP.YQ(BP, tP, XB); if (this.mX.ea == ls.ON || this.mX.ea == ls.GB) { if (XB != "CLASS") { if (!jv.wm.ww(tP, XB)) { jv.wm.YQ(1, tP, XB); } } } }, forEachChangedField: function (kq) { var ch = this.mX.IA; for (var oi = 0; oi < ch.length; oi++) { var name = this.mX.QI.En(ch[oi]); var QU = this.mX.WX.ww(this.qP, ch[oi]); var xH = typeof (ch[oi]) == "number" ? this.NU[ch[oi] + 1] : this.NU[ch[oi]]; if (typeof (xH) == "undefined") { xH = this.mX.eE.ww(this.qP, ch[oi]); } if (xH && xH.length <= -1 && (this.mX.ea == ls.Qd || this.mX.ea == ls.ON)) { xH = this.mX.eE.ww(this.qP, ch[oi]); } try { kq(ch[oi], name, xH, QU, this); } catch (XF) { this.Al.ET(XF, kq, "forEachChangedField"); } } } }; })(Lightstreamer); Lightstreamer.RowInfo = function () { }; Lightstreamer.RowInfo.prototype = { iE: function (Pu, qP, Oj) { this.mX = Pu; this.qP = qP; if (Oj) { this.Oj = Oj; } else { this.Oj = this.mX.aE.an[qP]; } }, getServerValue: function (field) { var nU = field; var Ni = this.mX.aE; var VV = this.mX.QI.PE(nU); var aq = this.mX.dZ[VV]; if (aq == null) { return null; } var qE = Ni.fp.ww(this.Oj, aq); if (!qE) { return null; } return qE; }, getCellValue: function (field) { var nU = field; var Ni = this.mX.aE; var VV = this.mX.QI.PE(nU); var aq = this.mX.dZ[VV]; if (aq == null) { return null; } var JG = Ni.qi.ww(this.Oj, aq); if (JG === null) { return Ni.Lv.ww(this.Oj, aq); } return JG; } }; (function (ls) { ls.Ub = function () { }; ls.Ub.prototype = { Jg: function (ux, Nb, WQ, np) { var TA = "Lightstreamer|temp|id"; var Lh = 0; while (document.getElementById(TA) && Lh < 100) { TA += ls.Ns(); Lh++; } WQ = WQ || "div"; var ZY = "<" + WQ + " id='" + TA + "'"; if (Nb) { ZY += " class='" + Nb + "'"; } ZY += ">" + ux + "</" + WQ + ">"; document.write(ZY); var PY = document.getElementById(TA); PY.removeAttribute("id"); return new ls.pu(PY, np); }, Fq: function (ld) { var ab = this.HA(ld).bc(); for (var Rc in ab) { var UT = ab[Rc]; var ZG = false; for (var nU in UT) { var hg; var Uc = UT[nU]; var hH = Uc.IO(); if (hH) { ZG = true; } else { delete UT[nU]; } } if (!ZG) { delete ab[Rc]; } } }, wn: function (CK, cP) { if (CK["CLASS"]) { return CK; } else { for (var XB in cP) { if (!CK[XB]) { CK[XB] = cP[XB]; } } return CK; } }, MI: function (UJ, qP, KU, Gd, nU, ff, BG) { var Pu = ls.mR.KT(UJ); if (!Pu || BG != Pu.BG) { return; } var Ho = Pu.aE; if ((Ho.ea == ls.ON || Ho.ea == ls.GB) && Ho.an) { KU = Ho.an[Gd]; } var ux = null; var Rc = KU; var aq = Pu.dZ[nU]; if (aq == null) { return; } if (Pu.ea == ls.Qd) { var CY = Ho.Wc(Rc, aq); if (CY) { ux = CY.Md; CY.Md = null; } } var Mg = false; if (ux == null) { var fZ = Pu.WX.ww(qP, nU); if (fZ == null) { if (!ff) { return false; } else { ux = Ho.Lv.ww(KU, aq); Mg = true; } } else { ux = fZ; } } Pu.Qo.jK(qP, nU); var tY = ux; if (tY == "") { tY = ls.Es; } var Fr = Ho.ag.vn(KU); this.eX(UJ, Rc, aq, tY, ls.Sx, Fr, Mg); return true; }, eX: function (UJ, KU, aq, ux, XK, mU, ou) { var Ho = this.HA(UJ); var MH = ou ? true : Ho.MH; var CY = Ho.Wc(KU, aq); if (CY == null) { return true; } var fb = null; var Bg = null; if (XK == ls.Sx) { fb = CY.hN; CY.hN = null; } else if (XK == ls.BT || XK == ls.LO) { fb = CY.nR; CY.nR = null; CY.hN = null; } if (XK == ls.LO) { var PH = Ho.jC.ww(KU, aq); if (fb == null && PH) { fb = {}; fb["CLASS"] = PH; } else if (PH) { fb["CLASS"] = PH; } } if (fb != null) { fb = this.wn(fb, mU); } else if (mU) { fb = mU; } if (fb != null) { if (typeof fb["CLASS"] != "undefined") { Bg = fb["CLASS"]; } } CY.Ur(ux, MH); CY.HD(Bg); CY.Zl(fb); return true; }, PL: function (UJ, KU, Gd, aq, Su, vA) { var YV = this.HA(UJ); if ((YV.ea == ls.ON || YV.ea == ls.GB) && YV.an) { KU = YV.an[Gd]; } var CY = YV.Wc(KU, aq); if (CY == null) { return; } if (CY.vA != vA) { return; } var mU = null; if (Su) { mU = YV.ag.vn(KU); } else { mU = YV.xL.vn(KU); } var fb = null; var Bg = null; if (Su) { fb = CY.hN; CY.hN = null; } else { fb = CY.nR; CY.nR = null; } if (fb != null) { fb = this.wn(fb, mU); } else if (mU) { fb = mU; } if (fb != null) { if (typeof fb["CLASS"] != "undefined") { Bg = fb["CLASS"]; } } else { return true; } CY.HD(Bg); CY.Zl(fb); return true; } }; ls.RT(ls.JM, ls.Ub); })(Lightstreamer); (function (ls) { ls.IG = function (CY, qk, gk, SB, hk, YY, Bp) { this.iE(CY, qk, gk, SB, hk, YY, Bp); }; ls.IG.prototype = { iE: function (CY, qk, gk, SB, hk, YY, Bp) { this.Bp = (Bp) ? Bp : null; this.qk = qk; this.CY = CY; this.gk = (gk) ? ls.ft.Bu(gk) : null; this.SB = (SB) ? ls.ft.Bu(SB) : null; this.hk = hk; this.YY = YY; this.oh = 0; } }; })(Lightstreamer); (function (ls) { ls.JN = function () { this.length = 0; this.Va = {}; }; ls.JN.prototype = { fw: function (ld) { this.Va[this.length] = ld; this.length++; }, ww: function () { if (this.length <= 0) { return null; } this.length--; return this.Va[this.length]; } }; })(Lightstreamer); (function (ls) { ls.lb = function (uI) { this.md = uI; this.oT = new ls.JN(); this.IS = 0; this.hO = {}; this.ra = false; this.WJ = {}; }; ls.lb.prototype = { Ct: function (CY, qk, gk, SB, ep, Bp) { var hk = this.Pc(ep); var oM = ++CY.AW; var Wt = this.oT.ww(); if (Wt == null) { this.hO[this.IS] = new ls.IG(CY, qk, gk, SB, hk, oM, Bp); return this.IS++; } else { this.hO[Wt].iE(CY, qk, gk, SB, hk, oM, Bp); return Wt; } }, Pc: function (kt) { var hk = kt / this.md; return (hk > 1) ? hk : 1; }, sQ: function (ld) { var HL = this.hO[ld]; if (HL.YY < HL.CY.AW) { return; } var hB = this.WJ[HL.CY.ek]; var NQ = this.hO[hB]; if (NQ) { if (!NQ.qk) { if (HL.qk) { if (NQ.Bp) { ls.aL.tk(NQ.Bp); } } else { HL.oh = NQ.oh; if (HL.hk < NQ.hk) { HL.hk = NQ.hk; } } } this.oT.fw(hB); } this.WJ[HL.CY.ek] = ld; if (HL.gk) { HL.EE = ls.ft.LM(HL.CY.Qs, "backgroundColor"); } if (HL.SB) { HL.bo = ls.ft.LM(HL.CY.Qs, "color"); } if (!this.ra) { this.Yi(this.md); } }, tc: function (CY) { var hB = this.WJ[CY.ek]; if (hB) { delete (this.WJ[CY.ek]); this.oT.fw(hB); } }, JE: function (mZ) { var ns = ls.gs(); var bw = 0; if (mZ) { bw = ns - (mZ + this.md); } var wK = false; for (var FT in this.WJ) { var bK = this.WJ[FT]; var HL = this.hO[bK]; if (HL.oh > HL.hk) { this.oT.fw(bK); delete (this.WJ[FT]); if (HL.Bp) { ls.aL.kB(HL.Bp, 0); } } else { if (HL.gk) { HL.CY.Qs.style.backgroundColor = "rgb(" + this.iF(HL.EE[0], HL.gk[0], HL.hk, HL.oh) + "," + this.iF(HL.EE[1], HL.gk[1], HL.hk, HL.oh) + "," + this.iF(HL.EE[2], HL.gk[2], HL.hk, HL.oh) + ")"; } if (HL.SB) { HL.CY.Qs.style.color = "rgb(" + this.iF(HL.bo[0], HL.SB[0], HL.hk, HL.oh) + "," + this.iF(HL.bo[1], HL.SB[1], HL.hk, HL.oh) + "," + this.iF(HL.bo[2], HL.SB[2], HL.hk, HL.oh) + ")"; } wK = true; } HL.oh++; } if (!wK) { this.ra = false; } else { var em = ls.gs(); var KA = (em - ns); var VA = KA + bw; if (VA > this.md) { var hW = VA / this.md; var BV = Math.floor(hW); var PC = hW - BV; this.Mf(BV); VA = this.md * PC; } this.Of(this.md - VA, em); } }, Of: function (LV, mZ) { ls.aL.Au(this.JE, LV, this, [mZ]); }, Mf: function (BV) { for (var FT in this.WJ) { var bK = this.WJ[FT]; var HL = this.hO[bK]; if (HL.oh > HL.hk) { } else if (HL.oh + BV < HL.hk) { HL.oh += BV; } else { HL.oh = HL.hk; } } }, Yi: function (Dk) { if (this.ra == true) { return; } this.ra = true; this.Of(Dk); }, iF: function (MT, GW, pA, HW) { MT = new Number(MT); GW = new Number(GW); var xe = GW - MT; var CQ = MT + (((1 / pA) * HW) * xe); return Math.ceil(CQ); } }; })(Lightstreamer); (function (ls) { ls.vT = function (NO, fQ, Js, Ai, Bp) { var KD; if (typeof Bp == "string") { KD = function () { eval(Bp); }; } else { KD = Bp; } var vU = ls.aL.YI(KD); var cI = new ls.pu(NO); var Ts = ls.sO.Ct(cI, false, fQ, Js, Ai, vU); ls.sO.sQ(Ts); }; })(Lightstreamer); (function (ls) { ls.bD = function () { this.eM = {}; this.af = "An RGB color value must be in the form 'rgb(x, y, z)' or 'rgba(x, y, z, a)'. "; this.XI = " is not a valid color"; this.cW = " is not a valid value"; this.Al = ls.gE.getLogger("CC"); }; ls.bD.prototype = { QG: function (lG) { if ((lG >= 0) && (lG <= 9)) { return new Number(lG); } lG = lG.toUpperCase(); if (lG == "A") { return 10; } else if (lG == "B") { return 11; } else if (lG == "C") { return 12; } else if (lG == "D") { return 13; } else if (lG == "E") { return 14; } else if (lG == "F") { return 15; } else { this.Al.error("A hexadecimal number must contain numbers between 0 and 9 and letters between A and F. " + lG + this.cW, "setStyle"); return null; } }, Bu: function (ux) { if (ux.indexOf("rgb") == 0) { return this.Mu(ux); } else if (ux.indexOf("#") == 0) { return this.YP(ux); } else { return this.Fi(ux); } }, Hm: function (sB) { var kD = 0; var bq = 0; var oi; for (oi = sB.length; oi >= 1; oi--) { var Fx = this.QG(sB.substring(oi - 1, oi)); if (Fx == null) { return null; } var x; for (x = 1; x <= bq; x++) { Fx *= 16; } bq++; kD += Fx; } return kD; }, YP: function (lS) { if (lS.indexOf("#") == 0) { lS = lS.substring(1, lS.length); } if (lS.length == 3) { lS = lS.charAt(0) + lS.charAt(0) + lS.charAt(1) + lS.charAt(1) + lS.charAt(2) + lS.charAt(2); } else if (lS.length != 6) { this.Al.error("A hexadecimal color value must be 6 character long. " + lS + this.XI, "setStyle"); return null; } var pe = lS.substring(0, 2); var Jb = lS.substring(2, 4); var Am = lS.substring(4, 6); Ya = this.Hm(pe); hA = this.Hm(Jb); Eu = this.Hm(Am); if (Ya == null || hA == null || Eu == null) { return null; } return [Ya, hA, Eu]; }, At: function (Qc) { var CR = document.createElement("DIV"); CR.style.backgroundColor = Qc; var ux = this.LM(CR, "backgroundColor", Qc); if (ux[0] == 255 && ux[1] == 255 && ux[2] == 255) { if (Qc.toUpperCase() != "WHITE") { var vY = document.getElementsByTagName("BODY")[0]; if (vY) { vY.appendChild(CR); ux = this.LM(CR, "backgroundColor", Qc); vY.removeChild(CR); } } } this.eM[Qc] = ux; return this.eM[Qc]; }, Fi: function (Qc) { var kD = ""; if (this.eM[Qc]) { return this.eM[Qc]; } if (!ls.Kh()) { return this.At(Qc); } else { kD = ls.Ki.lI(Qc); } if (!kD || kD == "" || kD == Qc) { var io = document.bgColor; document.bgColor = Qc; kD = document.bgColor; document.bgColor = io; } if (!kD || kD == "" || kD == Qc) { return this.At(Qc); } this.eM[Qc] = this.YP(kD); return this.eM[Qc]; }, Mu: function (TG) { var Ja; var Ok; if (TG.indexOf("rgb(") == 0) { Ja = 4; Ok = ")"; } else if (TG.indexOf("rgba(") == 0) { Ja = 5; Ok = ","; } else { this.Al.error(this.af + TG + this.XI, "setStyle"); return null; } TG = TG.substring(Ja, TG.length); var FJ = TG.indexOf(","); var Ya = this.Ov(TG.substring(0, FJ)); var tE = TG.indexOf(",", FJ + 1); var hA = this.Ov(TG.substring(FJ + 1, tE)); var lD = TG.indexOf(Ok, tE + 1); var Eu = this.Ov(TG.substring(tE + 1, lD)); if (Ya == null || hA == null || Eu == null) { return null; } return [Ya, hA, Eu]; }, Ov: function (VB) { if (VB.indexOf("%") == VB.length - 1) { VB = parseFloat(VB.substring(0, VB.length - 1)); if (VB > 100 | VB < 0) { this.Al.error("An rgb element must be a number >=0 and <=255 or a percentile >=0 and <=100. " + VB + this.cW, "setStyle"); return null; } VB = 2.55 * VB; } return VB; }, LM: function (CR, Mn, Ym) { if (CR == null) { return [255, 255, 255]; } var ux = ""; try { if (window.getComputedStyle || (document.defaultView && document.defaultView.getComputedStyle)) { var xI = document.defaultView.getComputedStyle(CR, null); if (xI) { var gh = Mn == "backgroundColor" ? "background-color" : Mn; ux = xI.getPropertyValue(gh); } } } catch (XF) { } try { if (!this.hZ(ux, Ym) && CR.currentStyle) { var hV = Mn == "background-color" ? "backgroundColor" : Mn; ux = CR.currentStyle[hV]; } } catch (XF) { } try { if (!this.hZ(ux, Ym)) { var Qa = Mn == "background-color" ? "backgroundColor" : Mn; if (CR.style[Qa] != "") { ux = CR.style[Qa]; } else { return [255, 255, 255]; } } } catch (XF) { } if (ux == "transparent" && CR.parentNode) { return this.LM(CR.parentNode, Mn); } else if (ux == "transparent") { return [255, 255, 255]; } if (!this.hZ(ux, Ym)) { return [255, 255, 255]; } return this.Bu(ux); }, hZ: function (LQ, Ym) { if (!LQ || LQ == "") { return false; } else if (!Ym) { return true; } else if (LQ != Ym) { return true; } else { return false; } } }; })(Lightstreamer); (function (ls) { ls.uv = function () { }; ls.uv.prototype = { iE: function () { this.length = 0; this.pk = {}; if (!this.Rp) { this.JT = {}; } } }; })(Lightstreamer); (function (ls) { ls.dm = function (Fb, Em, Hk) { this.hS(ls.dm); this.vk = Fb; this.aH = Em; this.GX = Hk; this.Rp = true; this.iE(); }; ls.dm.prototype = { removeChild: function (Fb) { if (this.length <= 0) { return; } this.length--; delete (this.pk[Fb.ld]); this.vk.removeChild(Fb.Tk()); Fb.parentNode = null; }, insertBefore: function (nq, Fb) { if (Fb == nq) { return; } if (!nq) { return; } if (!Fb) { this.appendChild(nq); return; } if (this.pk[Fb.ld] == null) { this.appendChild(nq); return; } this.JV(nq); this.vk.insertBefore(nq.Tk(), Fb.Tk()); }, appendChild: function (Fb) { if (!Fb) { return; } this.JV(Fb); if (!this.aH) { this.vk.appendChild(Fb.Tk()); } else { this.vk.insertBefore(Fb.Tk(), this.aH); } }, JV: function (Fb) { if (Fb.parentNode == this) { return; } this.length++; this.pk[Fb.ld] = Fb; if (Fb.parentNode) { Fb.parentNode.removeChild(Fb); } Fb.parentNode = this; }, tF: function (tP) { if (this.length <= tP) { return null; } tP += this.GX; var Ie = this.vk.childNodes[tP].getAttribute("id"); return this.getElementById(Ie); }, getElementById: function (ld) { return this.pk[ld]; }, UW: function () { if (this.vk) { delete (this.vk); } if (this.aH) { delete (this.aH); } for (var oi in this.pk) { this.pk[oi].UW(); } } }; ls.RT(ls.dm, ls.uv); })(Lightstreamer); (function (ls) { ls.CL = function () { this.hS(ls.CL); this.Rp = false; this.iE(); }; ls.CL.prototype = { removeChild: function (Fb) { if (this.length <= 0) { return; } this.length--; var tP = this.pk[Fb.ld]; var th; for (th = tP; th < this.length; th++) { this.JT[th] = this.JT[th + 1]; this.pk[this.JT[th].ld] = th; } this.pk[Fb.ld] = null; this.JT[this.length] = null; Fb.parentNode = null; }, insertBefore: function (nq, Fb) { if (Fb == nq) { return; } if (!nq) { return; } if (!Fb) { this.appendChild(nq); return; } if (this.pk[Fb.ld] == null) { this.appendChild(nq); return; } if (nq.parentNode) { nq.parentNode.removeChild(nq); } var tn = this.pk[Fb.ld]; for (th = this.length; th >= tn + 1; th--) { this.JT[th] = this.JT[th - 1]; this.pk[this.JT[th].ld] = th; } this.JV(nq, tn); }, appendChild: function (Fb) { if (!Fb) { return; } if (Fb.parentNode) { Fb.parentNode.removeChild(Fb); } var tP = this.length; this.JV(Fb, tP); }, JV: function (Fb, tP) { this.length++; this.pk[Fb.ld] = tP; this.JT[tP] = Fb; Fb.parentNode = this; Fb.LL(); }, tF: function (tP) { return this.JT[tP]; }, getElementById: function (ld) { return this.JT[this.pk[ld]]; }, UW: function () { for (var oi = 0; oi < this.length; oi++) { this.JT[oi].UW(); } } }; ls.RT(ls.CL, ls.uv); })(Lightstreamer); (function (ls) { ls.JR = function (Uh, ig, Rf, keyCode) { this.ld = "a|" + Uh + "|" + Rf; this.UJ = Uh; this.qP = Rf; this.keyCode = keyCode; this.hf = ig; this.parentNode = null; this.Fb = null; }; ls.JR.prototype = { LL: function () { if (this.Fb == null) { return; } }, Tk: function () { if (this.Fb != null) { return this.Fb; } var Ni = ls.kx.HA(this.UJ); this.Fb = Ni.IZ.cloneNode(true); this.Fb.setAttribute("id", this.ld); var gr = ls.pu.nl(this.Fb); for (var th = 0; th < gr.length; th++) { var Uc = gr[th]; var ov = Uc.Qs.getAttribute("FIELD"); if (!ov) { continue; } Ni.Ys(Uc, this.qP, ov, Ni.ea); } return this.Fb; }, UW: function () { if (this.Fb) { delete (this.Fb); } } }; })(Lightstreamer); (function (ls) { ls.qF = function (FH, connection, context, policy, Qg) { this.nK = FH; this.NZ = "The LightstreamerEngine instance is not available"; this.SO = null; this.An = null; this.HI = null; this.onStatusChange; this.onServerError; this.onClientError; this.onClientAlert; this.context = new ls.Context(context); this.context.parent = this; this.policy = new ls.Policy(policy); this.policy.parent = this; this.connection = new ls.Connection(connection); this.connection.parent = this; this.Qg = new ls.XZ(Qg); this.Qg.parent = this; this.Al = ls.gE.getLogger("EH"); }; ls.qF.prototype = { BS: function (pX) { if (ls.dA.Ib) { return true; } else { this.Al.pE(this.NZ, pX); return false; } }, Pb: function (pX) { if (this.BS(pX)) { try { return this.nK[pX](); } catch (XF) { this.Al.DU(XF, pX); this.Al.error(this.NZ, pX); ls.aL.Au(ls.dA.NQp, 0, ls.dA); } } return null; }, XN: function (QB) { this.HI = QB; }, jl: function (SO, An) { this.SO = SO; this.An = An; }, changeStatus: function (LZ) { if (!(LZ == ls.Ip || LZ == ls.ZW || LZ == ls.Xr)) { this.Al.pE("Please use one of: POLLING, STREAMING, DISCONNECTED", "changeStatus"); return; } if (this.BS("changeStatus")) { this.Al.log("changeStatus", LZ); ls.dA.DMB('wXd', LZ); } }, rJ: function () { this.changeStatus(ls.Ip); }, xP: function () { this.changeStatus(ls.ZW); }, Ch: function () { this.changeStatus(ls.Xr); }, getStatus: function () { if (this.BS("getStatus")) { return this.HI; } else { return null; } }, getApplicationName: function () { if (this.BS("getApplicationName")) { return ls.Cp.Im; } else { return null; } }, getSessionServerName: function () { if (this.BS("getSessionServerName")) { return this.SO; } else { return null; } }, getSessionServerAddress: function () { if (this.BS("getSessionServerAddress")) { return this.An; } else { return null; } }, getPushPages: function () { var Ej = this.Pb("getPushPages"); if (Ej == null) { return []; } }, sendMessage: function (fo, QE, OQ, Dk) { if (this.BS("sendMessage")) { if (OQ) { OQ = ls.kx.Mw(OQ); } if (!ls.dA.uS) { return false; } if (!QE && QE != 0) { QE = ""; } else if (!ls.Hb.test(QE)) { this.Al.pE("The given sequence name(" + QE + ") is not valid: use only alphanumeric characters plus underscore, or null", "sendMessage"); return false; } if ((Dk && isNaN(Dk)) || Dk === "") { this.Al.pE("The given timeout(" + Dk + ") is not valid: use a number or null", "sendMessage"); return false; } ls.dA.sHJ('aFN', { fo: fo, QE: QE, OQ: OQ, Dk: Dk }); return true; } return false; }, fr: function () { if (this.BS('fr')) { ls.dA.Yh('fr'); } } }; })(Lightstreamer); (function (ls) { ls.nt = function (HP, kH) { this.kH = kH; this.HP = HP; ls.ms("unload", ls.getClosureForNoParams(this.Ae, this)); }; ls.nt.prototype = { Ae: function () { try { this.HP.removeChild(this.kH); delete (this.kH); delete (this.HP); } catch (XF) { } } }; })(Lightstreamer); (function (ls) { ls.mb = function () { this.ZD = null; this.ee = null; this.Ha = 0; this.fV = 0; this.Al = ls.gE.getLogger("EW"); }; ls.mb.prototype = { Mk: function (Bv, Jh, YY) { if (this.fV != YY) { this.Al.log('Mk', 0); return; } var fs = false; var OM = null; if (ls.dA.Ib) { this.Al.log('Mk', 1); return; } if (!Bv) { this.Al.log('Mk', 5); return; } this.Ha++; fs = !this.lj(Bv); if (!fs) { if (Bv.Lightstreamer.Ki) { OM = Bv.Lightstreamer.Ki; } else { if (Bv.qI) { OM = Bv.qI; } else { this.Al.log('Mk', 6); fs = true; } } } if (!fs) { if (!OM) { this.Al.log('Mk', 8); fs = true; } if (!OM.gI) { this.Al.log('Mk', 7); } else { if (OM.lC == true) { ls.Ki.Qe = false; ls.Ki.lC = true; if (ls.Ki.gI() == null) { this.Al.db("This Push-page can't receive real-time data because the corresponding engine could not start"); } else { this.Al.sX(false, 'Mk'); } this.Al.log('Mk', 4); return; } var Do = OM.gI(); if (Do == null) { this.Al.log('Mk', 2); fs = true; } else { this.Al.log('Mk', 3); Jh.ef = Do; ls.Ki.Wu = false; } } } if (fs) { ls.aL.Au(this.Mk, this.Ha <= 30 ? 1000 : 10000, this, [Bv, Jh, YY]); } }, bS: function (Bv, Jh) { this.fV++; this.Ha = 0; this.Mk(Bv, Jh, this.fV); }, lj: function (Bv) { try { if (Bv.Lightstreamer) { } this.Al.log('lj', 0); return true; } catch (XF) { this.Al.DU(XF, 'lj', document.domain); return false; } }, NA: function () { if (!document.getElementsByTagName) { return false; } if (this.ee) { this.Al.log('NA', 7); return false; } var Pq = ls.iR(9, false) ? ls.Cp.Cm + ls.fN : "about:blank"; this.Al.log('NA', 6, Pq); var ME = "LS__" + ls.Ns(); this.ZD = ME; this.Al.log('NA', ME); var le = document.getElementsByTagName("BODY")[0]; if (!le) { this.Al.error("The createEngine() method should be called in the BODY part of the page, not in the HEAD", "createEngine"); return false; } var kH; try { kH = document.createElement("iframe"); kH.style.visibility = "hidden"; kH.style.height = "0px"; kH.style.width = "0px"; kH.name = ME; if (ls.Kh()) { kH.src = ls.Cp.hC; le.appendChild(kH); } else { le.appendChild(kH); kH.src = ls.Cp.hC; } this.ee = new ls.nt(le, kH); } catch (XF) { this.Al.DU(XF, 'NA', 5); return null; } try { if (kH.contentWindow) { this.Al.log('NA', 1); try { kH.contentWindow.name = ME; } catch (wZ) { } return kH.contentWindow; } else if (document.frames && document.frames[ME]) { this.Al.log('NA', 2); return document.frames[this.ZD]; } else { this.Al.log('NA', 3); return self; } } catch (XF) { this.Al.DU(XF, 'NA', 4); return self; } } }; })(Lightstreamer); (function (ls) { Lightstreamer.PushPage = function () { this.context = ls.WG; this.Vx = null; this.JK = window; this.TL = 2000; this.Cm = null; this.Ud = null; this.Pm = false; this.Cv = 0; this.qI = ls.Ki; this.hd = 0; this.sC = ls.AO; this.xC = true; this.Rj = 0; this.Yb = false; this.ri = 0; this.AT = false; this.Wl = null; this.dG = 0; this.bY = "The application name is missing"; this.Vd = "createEngine() has already been called"; this.YM = true; this.hC = null; this.Im = null; this.ef = null; this.kx = ls.kx; this.QZ = ls.mR; this.dg = null; this.dR = null; this.sG = true; this.Uv = null; this.Al = ls.gE.getLogger("PP"); }; Lightstreamer.PushPage.prototype = { Qn: ls.Le, setControlRequestTimeout: function (Dk) { this.QZ.uU = this.Qn(Dk, "setControlRequestTimeout", this.QZ.uU, true, 10); }, useFragmentToConfEngine: function (om) { this.YM = om !== false; }, cs: function (tr) { this.Al.log('cs', tr); if (!this.kx.lZ[tr]) { this.Al.error("No such ScreenTableHelper to be deleted: " + tr, 'cs'); return; } delete (this.kx.lZ[tr]); }, Hn: function (applicationName, rh, FA, Pm, KL) { this.qI.Qe = FA == "S"; this.Im = applicationName; if (rh.charAt(rh.length - 1) != "/") { rh += "/"; } this.Cm = rh; this.Ud = FA; this.Pm = (Pm === true); rh += "../../Scripts/lsengine.html"; this.Al.log('Hn', ls.bg, FA); if (ls.bg && FA != "N") { var kD; if ((kD = this.Bj(FA, applicationName)) != false) { this.Al.log('Hn', 1, applicationName, FA); this.Cv++; ls.aL.Au(this.kw, kD.Ah, this, [applicationName, rh, FA, kD, KL, this.Pm]); this.ij(this.Im, null); return false; } } this.Al.log('Hn', 0, applicationName, FA); this.iJ(rh, applicationName, KL, this.Pm, FA); return true; }, Bj: function (kv, applicationName, BZ) { var ml = {}; ml.Ah = 0; var rT = false; var AU = ls.gs(); var HJ = ls.Zo(ls.aJ + applicationName); if (!HJ) { this.Al.log('Bj', 1); return false; } for (var oi = 0; oi < HJ.length; oi++) { var EY = ls.Zo(ls.aJ + HJ[oi] + "_" + applicationName); this.Al.log('Bj', 2, HJ[oi], EY); if (!EY || EY.length < 2) { this.FG(HJ[oi], applicationName); continue; } else if (kv == "S" && EY[1] != "S") { continue; } if (BZ && BZ[HJ[oi]]) { if (EY[0] != BZ[HJ[oi]]) { this.Al.log('Bj', 3, EY[0], BZ[HJ[oi]]); return true; } this.Al.log('Bj', 4); continue; } var FP = Number(EY[0]) + ls.Dm + 2000; var Te = FP - AU; this.Al.log('Bj', 5, HJ[oi], Te); if (Te <= -60000) { this.FG(HJ[oi], applicationName); continue; } if (Te < this.TL) { Te = this.TL; } ml[HJ[oi]] = EY[0]; rT = true; ml.Ah = ml.Ah > Te ? ml.Ah : Te; } if (rT) { this.Al.log('Bj', 6, ml); return ml; } else { this.Al.log('Bj', 7); return false; } }, FG: function (id, tM) { ls.Hh(ls.aJ + id + "_" + tM); ls.Ri(ls.aJ + tM, id); }, Zm: function () { if (this.Yb) { this.FG(this.dg, this.Im); } }, NM: function (il) { var FO = ls.eG(ls.aJ + this.Im, this.dg); if (il && !FO) { return false; } var BB = ls.Zo(ls.aJ + this.dg + "_" + this.Im); if (il && BB) { return false; } else if (BB && BB.length > 2) { this.Al.log('NM', 1, BB); this.OL(); } else { ls.KC(ls.aJ + this.dg + "_" + this.Im, [ls.gs(), this.Ud]); } return true; }, fO: function () { this.dR = ls.aL.Td(this.NM, ls.Dm, this); }, OL: function () { if (this.dR) { ls.aL.ul(this.dR); delete (this.dR); } }, iJ: function (cN, Im, KL, Pm, FA) { var BW = ls.dA; if (BW.Ib) { return; } else if (BW.Uq) { this.Al.log('iJ', 2); ls.aL.Au(this.iJ, BW.KR, this, [cN, Im, KL, Pm, FA]); return; } this.AS(); this.dg = ls.Ns(); this.qI.lC = false; if (ls.bg) { while (!this.NM(true)) { this.dg = ls.Ns(); } this.fO(); } var nO = this.YM ? "#" : "?"; nO += "build=1446.3&"; nO += "id=" + this.dg + "&"; if (ls.IK != null && ls.IK != "") { nO += ("domain=" + ls.IK + "&"); } if (Im) { nO += ("engineName=" + Im + "&"); } if (Pm) { nO += "suppressDefaultStatusChangeHandler=true&"; } if (KL && this.Vx) { if (!this.Vx.context.ZF) { nO += ("debugAlerts=false&"); } if (!this.Vx.context.vZ) { nO += ("remoteDebug=false&"); } } else { if (!this.context.ZF) { nO += ("debugAlerts=false&"); } if (!this.context.vZ) { nO += ("remoteDebug=false&"); } } if (ls.ObjectTree) { nO += ("d=true&"); } this.hC = cN + nO; this.ef = self; this.Yb = true; this.ri = 0; this.Rj++; BW.iE(true); this.Al.log('iJ', 1, this.Rj); this.Et(this.Rj); }, Zd: function (sg) { if (sg > 2500) { sg = 2500; } else if (sg < 50) { sg = 50; } this.Uv = this.Uv && this.Uv < sg ? this.Uv : sg; return this.Uv; }, enableFasterSeekEngine: function (enabled) { this.sG = !enabled; }, LJ: function (Dk) { var inc = 100; var is = ls.gs(); if (Dk && this.Wl) { inc += is - this.Wl - Dk; } this.Wl = is; Dk = this.Zd(Dk ? Dk + inc : 100); this.Uv = null; this.Al.log('LJ', 1, inc, Dk); var tN = this.Rj; this.dG++; ls.aL.Au(this.Et, Dk, this, [tN, Dk]); }, Et: function (tN, Dk) { if (Dk) { this.dG--; } if (tN != this.Rj || ls.dA.Ib) { this.Al.xA('Et', 5); return; } this.FI(); if (this.ef == self) { this.Al.log('Et', 1); this.LJ(Dk); return; } var EF = this.qI.wk(); if (!EF) { this.Al.log('Et', 3); this.LJ(Dk); return; } this.Al.log('Et', 4); this.Rj++; ls.dA.egZ(EF, this.Yb); }, FI: function () { if (this.xC) { this.xC = false; this.qI.oC(); this.Al.log('FI', 11); } if (this.ef != self || this.qI.lC) { this.Al.sX((this.ef != self || this.qI.lC != true), 'FI'); this.Al.log('FI', 1); return; } if (!this.sC.ee) { if (!ls.NG.jE() || !ls.Kh()) { var wf = this.sC.NA(); if (!wf) { this.Al.log('FI', 3); return; } else if (wf != self) { this.ef = wf; this.AT = true; this.Al.log('FI', 4); return; } } } if (this.ef == self && this.sC.ee) { if (ls.SK()) { try { if (window.frames[this.sC.ZD]) { this.ef = window.frames[this.sC.ZD]; var EX = "" + this.ef.location; this.Al.log('FI', 8, EX, this.hC); if (EX.indexOf("../../Scripts/lsengine.html") < 0) { this.ef.location = this.hC; } } else { this.Al.log('FI', 9); } return; } catch (XF) { this.Al.DU(XF, 'FI', 10); this.ef = self; } } else if (!ls.Kh()) { this.ef = ls.bU(this.hC, this.sC.ZD, true); this.Al.log('FI', 5); if (this.ef === false) { this.ef = self; } else if (this.ef == null && this.ri <= 10) { this.ri++; this.ef = self; this.Al.log('FI', 6); return; } } } this.Al.log('FI', 7); }, ij: function (applicationName, Bv) { var BW = ls.dA; if (BW.Ib) { return; } else if (BW.Uq) { this.Al.log("seekEngine", 1); ls.aL.Au(this.ij, BW.KR, this, [applicationName, Bv]); return; } this.AS(); this.Rj++; this.Al.log("seekEngine", applicationName, this.Rj); this.qI.lC = false; this.qI.Qe = true; this.qI.IB = false; this.Im = applicationName; BW.iE(true); this.sC.bS(Bv, this); this.Et(this.Rj); }, kw: function (applicationName, rh, FA, AH, KL, Pm) { this.Cv--; if (this.Ud == "N") { this.Al.log('kw', 1); return; } if (this.Bj(FA, applicationName, AH)) { if (FA == "S") { this.ij(applicationName, null); } else { this.Al.error("An application with this engine name(" + applicationName + ") already exists within this browser.\nThis Push-page can't receive real-time data because the corresponding engine could not start", "createEngine"); if (this.onEngineCreation) { try { this.onEngineCreation(null); } catch (XF) { this.Al.ET(XF, this.onEngineCreation, "onEngineCreation"); } } this.qI.lC = true; } } else if (this.Yb && !KL) { this.Al.error(this.Vd, "createEngine"); } else { this.iJ(rh, applicationName, KL, Pm, FA); } }, LD: function (Ep) { if (Ep) { this.TL = 10000; } else { this.TL = 2000; } this.Vx.context.gE = null; this.AS(); }, AS: function () { this.AT = false; this.Yb = false; this.ef = null; var mJ = this.sC.ee; if (mJ) { this.sC.ee = null; ls.aL.Au(mJ.Ae, 60000, mJ); } this.OL(); }, Ci: function () { return this.Cm && !this.Yb && this.Ud == "S"; }, Dr: function () { if (this.Ci()) { this.Hn(this.Im, this.Cm, "N", this.Pm, false); } }, nm: function (hP) { if (this.onClientError) { try { this.onClientError(hP); } catch (XF) { this.Al.DU(XF, 'nm'); } } } }; Lightstreamer.PushPage.prototype.isMasterPushPage = function () { return ls.dA.Gq; }; Lightstreamer.PushPage.prototype.onEngineLost = function () { return; }; Lightstreamer.PushPage.prototype.setCheckEngineTimeout = function (CV) { this.qI.CV = this.Qn(CV, "setCheckEngineTimeout", CV, true, 10); }; Lightstreamer.PushPage.prototype.getTable = function (id) { var UJ = this.QZ.KT(id); if (UJ && UJ.ea !== ls.aR) { return UJ; } return null; }; Lightstreamer.PushPage.prototype.getTables = function () { var JT = {}; for (var ld in this.QZ.Nu) { var PR = this.QZ.KT(ld); if (PR && PR.ea !== ls.aR) { JT[ld] = PR; } } return JT; }; Lightstreamer.PushPage.prototype.onServerDeny = function (code, message, pq, Lp, CB, Xe) { alert("Subscription Error.\n" + message + "(code " + code + ")."); }; Lightstreamer.PushPage.prototype.onClientError = function (Wd) { return; }; Lightstreamer.PushPage.prototype.onClientAlert = function (code, Wd) { ls.aL.Au(alert, 0, null, ["Warning " + code + "\n" + Wd]); }; Lightstreamer.PushPage.prototype.createEngine = function (applicationName, rh, FA, Pm) { if (this.GV) { this.Al.pE(this.Vd, "createEngine"); return; } if (!applicationName) { this.Al.pE(this.bY, "createEngine"); } else if (!ls.Sk.test(applicationName)) { this.Al.pE("The given engine name(" + applicationName + ") is not valid: use only alphanumeric characters", "createEngine"); } else if (!rh) { this.Al.pE("Cannot load the Engine without a path", "createEngine"); } else if (ls.Cp == null) { this.Al.pE("Can't create the Engine if PushPage is not bound. Please call the bind() method of PushPage before", "createEngine"); } else if (ls.Cp != this) { this.Al.pE("There should be only one instance of PushPage per each HTML page. Can't create the Engine if a different PushPage is bound. Please call the createEngine() of that PushPage", "createEngine"); } else if (FA != "SHARE_SESSION" && FA != "FAIL" && FA != "NEW_SESSION") { if (typeof FA != "undefined") { this.Al.pE("onSimilarEngineFound must be one of: SHARE_SESSION, FAIL, NEW_SESSION.", "createEngine"); } FA = "NEW_SESSION"; } FA = FA.substr(0, 1); this.GV = true; this.Hn(applicationName, rh, FA, Pm, false); }; Lightstreamer.PushPage.prototype.seekEngine = function (applicationName, Bv) { if (this.GV) { this.Al.pE(this.Vd, "seekEngine"); return; } if (!applicationName) { this.Al.pE(this.bY, "seekEngine"); } else if (!ls.Sk.test(applicationName)) { this.Al.pE("The given engine name(" + applicationName + ") is not valid: use only alphanumeric characters", "createEngine"); } this.GV = true; this.ij(applicationName, Bv); }; Lightstreamer.PushPage.prototype.bind = function () { this.Al.xA("bind"); ls.OH({ qKn: "28442324223623531823424", Tqf: "52312352492633183053182", extraN1: "58412404420380382389392" }); ls.YX = ls.LG("" + ls.qKn + ls.Tqf + ls.extraN1, "document", 51, 6, 500); ls.OH({ extraV1: "93449415449423434431426", extraV2: "40141541541141541443278" }); ls.px = ls.LG("" + ls.qKn + ls.Tqf + ls.extraN1 + ls.extraV1 + ls.extraV2, "document", 74, 5, 500); if (ls.Cp == this) { this.Al.error("This object is already bound", "bind"); return false; } if (this.context.bind()) { ls.Cp = this; ls.gE.Wg(this.nm, this); if (window.console && window.console.firebug) { ls.gE.Yd(this, 130, "Firebug is known to cause performance and memory issues with Lightstreamer."); } if (ls.FlashBridge) { for (var oi in ls.FlashBridge.bridges) { ls.FlashBridge.bridges[oi].iL(); } } return true; } else { return false; } }; Lightstreamer.PushPage.prototype.getWindowReference = function () { return this.JK; }; Lightstreamer.PushPage.prototype.cellOverwrite = function (bA, item, field, ht, ie, SL, WQ, FL) { ls.cellOverwrite(bA, item, field, ht, ie, SL, WQ, FL); }; Lightstreamer.PushPage.prototype.cellScroll = function (bA, row, field, ht, ie, SL, WQ, FL) { ls.cellScroll(bA, row, field, ht, ie, SL, WQ, FL); }; Lightstreamer.PushPage.prototype.cellMetapush = function (bA, row, field, ht, ie, SL, WQ, FL) { ls.cellMetapush(bA, row, field, ht, ie, SL, WQ, FL); }; Lightstreamer.PushPage.prototype.addTable = function (RY, id) { if (!RY || (!id && id !== 0)) { this.Al.pE("Table Object And/Or Table id is null", "addTable"); } if (RY.JX != "COMMAND" && RY.JX != "MERGE" && RY.JX != "DISTINCT" && RY.JX != "RAW") { this.Al.pE(RY.JX + " is not a valid subscription mode. Admitted values are MERGE, DISTINCT, RAW, COMMAND", "addTable"); } if (ls.Cp == null) { this.Al.pE("Can't add a table if PushPage is not bound. Please call the bind() method of PushPage before adding tables", "addTable"); } return this.QZ.RR(RY, id); }; Lightstreamer.PushPage.prototype.addScreenTableHelper = function (wG) { this.Al.log("addScreenTableHelper", wG); if (this.kx.lZ[wG.bA]) { this.Al.error("ScreenTableHelper already set for " + wG.bA + ", add new cells to the previously provided ScreenTableHelper", "addScreenTableHelper"); return; } this.kx.lZ[wG.bA] = wG; }; Lightstreamer.PushPage.prototype.removeTable = function (id) { this.Al.log("removeTable", 1, id); var Pu = this.QZ.KT(id); if (!Pu) { this.Al.error("No table to delete with id " + id, "removeTable"); return null; } return this.QZ.UY(id); }; Lightstreamer.PushPage.prototype.onEngineCreation = function (engine) { return; }; Lightstreamer.PushPage.prototype.onEngineReady = function (engine) { return; }; })(Lightstreamer); (function (ls) { ls.qM = function (dA) { this.Nu = {}; this.rf = {}; this.hd = 1; this.BW = dA; this.uU = 2000; this.Al = ls.gE.getLogger("TL"); }; ls.qM.prototype = { Zu: function (CF) { return this.KT(this.rf[CF]); }, KT: function (ld) { if (ld && this.Nu[ld]) { return this.Nu[ld]; } return null; }, RR: function (CI, ld) { if (CI.Tp != ls.vd) { this.Al.error("Can't add a table that is already in 'running' state. Please add the table instance only once [" + ld + "]", "addTable"); return null; } this.Al.log('RR', 0, CI, ld); var vs = this.Nu[ld]; if (vs) { vs = this.UY(ld); } if (!CI.Iq(ld, ++this.hd)) { this.Al.log('RR', 1); CI.NB(); return vs; } this.Nu[ld] = CI; CI.Tw(); if (this.BW.uS) { this.ue(CI); } this.Al.log('RR', 2); return vs; }, UY: function (ld) { var Ow = this.Nu[ld]; if (!Ow) { this.Al.xM('UY', ld, 1); return null; } if (Ow.Tp == ls.vd) { this.Al.xM('UY', ld, 2); return null; } else if (Ow.Tp == ls.RI || Ow.Tp == ls.ql) { this.Al.sX(this.BW.Ib, 'UY', 4, ld); this.Al.log('UY', 2, ld, Ow); if (Ow.uE) { this.BW.ZjS('EV', { CF: Ow.uE }); } else { this.BW.ZjS('EV', { bA: ld, uV: this.BW.gp }); } } if (Ow.uE) { delete (this.rf[Ow.uE]); } Ow.NB(); delete (this.Nu[ld]); return Ow; }, ue: function (CI, Dj, nA) { if (Dj) { if (CI.Tp != ls.NJ) { this.Al.log('ue', 1); return; } if (Dj != this.BW.FK) { this.Al.log('ue', 2); return; } if (nA != CI.TM) { this.Al.log('ue', 3); return; } } else { if (CI.Tp != ls.aT) { this.Al.sX(false, 'ue'); } CI.Sn(); } this.Al.log('ue', 4); ls.aL.Au(this.ue, this.uU, this, [CI, this.BW.FK, CI.TM]); this.BW.ZjS('LvW', { BG: CI.BG, bA: CI.ld, TM: CI.TM, uV: this.BW.gp, uu: CI.uu, vY: CI.js }); }, TB: function (bA, CF, BG, TM) { var pm = this.Nu[bA]; if (!pm || pm.Tp != ls.NJ || pm.BG != BG || pm.TM != TM) { this.Al.log('TB', 1, BG, TM, pm); return; } pm.TB(CF); this.rf[CF] = bA; this.Mt(pm); }, Mt: function (CI, Dj, DX, BG, TM, ir) { if (CI.Tp != ls.RI) { this.Al.log('Mt', 1); return; } if (Dj) { if (Dj != this.BW.FK || CI.BG != BG || CI.TM != TM) { this.Al.log('Mt', 1, Dj, this.BW); return false; } ir++; } else { ir = 1; } var OO = DX ? DX * 2 : this.uU; this.Al.log('Mt', 3, OO, CI); CI.PZ = ls.aL.YI(this.Mt, this, [CI, this.BW.FK, OO, CI.BG, CI.TM, ir]); CI.Xc = OO; var br = this.BW.ZjS('jWj', { uV: this.BW.gp, CF: CI.uE, hQ: ir }); }, se: function () { this.Al.log('se'); for (var ld in this.Nu) { this.ue(this.Nu[ld]); } }, AC: function (UJ) { if (UJ.Tp == ls.vd || UJ.ea === ls.aR) { this.Al.log('AC', 1, UJ); this.Al.sX(UJ.Tp != ls.vd, 'AC'); return; } this.Al.log('AC', 2, UJ); delete (this.rf[UJ.uE]); UJ.cA(); }, Xx: function () { this.Al.log('Xx', 1); for (var ld in this.Nu) { this.AC(this.Nu[ld]); } this.rf = {}; } }; })(Lightstreamer); (function (ls) { Lightstreamer.ScreenTableHelper = function (id, Uw) { this.bA = id; this.Al = ls.gE.getLogger("TL"); this.qC = false; this.Uw = []; if (Uw) { for (var oi = 0; oi < Uw.length; oi++) { this.addCell(Uw[oi]); } } this.fL = dC; this.vE = document; }; Lightstreamer.ScreenTableHelper.prototype = { addCell: function (Lc) { var UJ = Lc.getAttribute("table"); if (!UJ || UJ != this.bA) { this.Al.pE("The cell does not belong to the '" + this.bA + "' screen table", "addCell"); return; } this.qC = true; this.Uw[this.Uw.length] = new ls.pu(Lc); }, setNodeTypes: function (AF) { if (AF && AF.length > 0) { this.fL = AF; } else { this.Al.pE("The given array is not valid or empty", "setNodeTypes"); } }, setRootNode: function (pl) { if (pl && pl.getElementsByTagName) { this.vE = pl; } else { this.Al.pE("The given root element is not valid", "setRootNode"); } } }; var dC = ["div", "span", "input"]; ls.ScreenTableHelper.dC = dC; })(Lightstreamer); (function (ls) { ls.oI = function (ld) { this.ld = ld; this.ea = null; this.aE = null; this.IJ = 0; this.ab = new ls.am(); this.Kv = new ls.am(); this.UP = new ls.am(); this.ag = new ls.am(); this.xL = new ls.am(); this.Lv = new ls.am(); this.jC = new ls.am(); this.vc = 0; this.dj = new ls.am(); this.wm = new ls.am(); this.qi = new ls.am(); this.fp = new ls.am(); this.an = {}; this.Nr = {}; this.Hc = 1; this.wY = []; this.XC = {}; this.Xf = {}; this.gV; this.wO; this.GX; this.lh; this.IZ; this.RB; this.tU; this.kM; this.sP = 0; this.Al = ls.gE.getLogger("ST"); }; ls.oI.prototype = { BL: function (ZO) { if (this.ea != null) { if (this.ea != ZO.ea) { this.Al.error("A Data Table cannot be associated with a Screen Table that was previously associated with a Data Table of a different type", "addTable"); return false; } } this.aE = ZO; this.MH = ZO.MH; if (this.ea == null) { this.ea = ZO.ea; } return true; }, Ys: function (cI, Rc, nU, XB) { if ((XB.indexOf(ls.ON) > -1) || (XB.indexOf(ls.GB) > -1)) { if (this.vc < Rc) { this.vc = Rc; } } this.IJ++; this.insertCell(cI, Rc, nU); }, insertCell: function (cI, Rc, nU) { this.ab.YQ(cI, Rc, nU); }, Wc: function (Rc, nU) { return this.ab.ww(Rc, nU); }, deleteCell: function (Rc, nU) { this.ab.jK(Rc, nU); }, Xs: function (Rc, Gh) { tY = this.Lv.ww(Rc, Gh); if (!tY) { tY = ls.Es; } ls.kx.eX(this.ld, Rc, Gh, tY, ls.LO, this.xL.vn(Rc), true); }, mi: function (Rc) { return this.ab.vn(Rc); }, bc: function () { return this.ab.JO(); }, PB: function (Rc, MC) { if (MC) { this.ab.AP(Rc); } this.qi.AP(Rc); this.fp.AP(Rc); this.dj.AP(Rc); this.Kv.AP(Rc); this.UP.AP(Rc); this.xL.AP(Rc); this.ag.AP(Rc); this.wm.AP(Rc); delete (this.XC[Rc]); delete (this.Xf[Rc]); var qP = this.Nr[Rc]; if (qP) { delete this.an[qP]; delete this.Nr[Rc]; } }, iu: function (Lh) { if (Lh == 0) { return; } var Mb = this.sP - this.Hc + 1; if (Mb <= Lh) { return; } var Rt = Mb - Lh; for (var oi = 1; oi <= Rt; oi++) { this.GL(); } }, GL: function () { this.Al.sX(this.aE, 'GL'); var Mb = this.sP - this.Hc + 1; if (Mb <= 0) { return 0; } var tV = this.wY.shift(); if (this.aE && this.aE.onChangingValues) { try { this.aE.onChangingValues(tV, null); } catch (XF) { this.Al.ET(XF, this.aE.onChangingValues, "onChangingValues"); } } if (tV && ls.pu.Wi(tV)) { tV.parentNode.removeChild(tV); } this.PB(this.Hc, true); this.Hc++; return Mb - 1; }, vr: function (qP, jZ, ff) { var UJ = this.aE; var SM = UJ.WX.vn(qP); for (var Gh in SM) { var MX = UJ.dZ[Gh]; if (MX == null) { continue; } this.fp.YQ(UJ.eE.ww(qP, Gh), jZ, MX); if (SM[Gh] !== null) { this.qi.YQ(SM[Gh], jZ, MX); } else if (!ff) { } else { this.qi.YQ(null, jZ, MX); } } }, HM: function (HS, eJ, IV, fX) { if (HS == eJ) { return; } var YS; if (fX) { YS = this.Ax(HS, null); } var oi = HS; do { var Oo = oi; oi += IV; var Ka = oi; this.Ax(Ka, Oo); } while (oi != eJ); if (fX) { this.Al.sX(this.ea == ls.GB, 'HM', 1); this.Ax(null, eJ, YS); } }, Ax: function (Ka, Oo, Sw) { var bN = {}; bN.ks = {}; var Ao; if (Ka) { Ao = this.qi.vn(Ka); } else { Ao = Sw.qi; } for (var aq in Ao) { if (Sw && Sw.ks[aq]) { bN.ks[aq] = this.ZZ(Ka, Oo, aq, Sw.ks[aq]); } else { bN.ks[aq] = this.ZZ(Ka, Oo, aq); } } var RC; var LN; var DH; var lA; var AI; var Hs; var Ww; var gT; if (Ka) { RC = this.ag.vt(Ka); LN = this.xL.vt(Ka); lA = this.Kv.vt(Ka); DH = this.UP.vt(Ka); Hs = this.qi.vt(Ka); Ww = this.fp.vt(Ka); gT = this.dj.vt(Ka); pj = this.wm.vt(Ka); if (this.aE.XR) { AI = this.aE.XR[Ka]; } } else { RC = Sw.ag; LN = Sw.xL; lA = Sw.Kv; DH = Sw.UP; Hs = Sw.qi; Ww = Sw.fp; gT = Sw.dj; pj = Sw.wm; if (this.aE.XR) { AI = Sw.XR; } } if (Oo) { this.ag.insertRow(RC, Oo); this.xL.insertRow(LN, Oo); this.Kv.insertRow(lA, Oo); this.UP.insertRow(DH, Oo); this.qi.insertRow(Hs, Oo); this.fp.insertRow(Ww, Oo); this.dj.insertRow(gT, Oo); this.wm.insertRow(pj, Oo); if (this.aE.XR) { this.aE.XR[Oo] = AI; } } else { bN.ag = RC; bN.xL = LN; bN.Kv = lA; bN.UP = DH; bN.qi = Hs; bN.fp = Ww; bN.dj = gT; bN.wm = pj; if (this.aE.XR) { bN.XR = AI; } } if (Ka && Oo && this.aE) { var Bf = ls.Zp; Bf.iE(this.aE, this.Nr[Oo], Oo); if (this.aE.onRowUpdate) { try { this.aE.onRowUpdate(Oo, Bf); } catch (XF) { this.Al.ET(XF, this.aE.onRowUpdate, "onRowUpdate"); } } } return bN; }, ZZ: function (Ka, Oo, aq, wq) { var NR; if (Ka) { NR = this.Wc(Ka, aq); } else { NR = wq; } var Jm; if (Oo) { Jm = this.Wc(Oo, aq); } if (!Jm) { var VU = document.createElement("div"); Jm = new ls.pu(VU); } if (Oo) { this.insertCell(Jm, Oo, aq); } var cE; var Da; var ou = false; if (Ka) { cE = this.dj.ww(Ka, aq); var XD = this.wm.vn(Ka); if (!cE) { cE = XD; } else for (var bu in XD) { if (!cE[bu]) { cE[bu] = 1; } } Da = this.qi.ww(Ka, aq); if (Da === null) { if (Oo) { Da = this.Lv.ww(Oo, aq); } else { } ou = true; } } else { cE = NR.rR; if (NR.LY) { Da = null; } else { Da = NR.er(); } } Jm.hN = NR.hN; Jm.nR = NR.nR; Jm.UN = NR.UN; Jm.RL = NR.RL; Jm.vA = NR.vA; Jm.Qs.className = NR.Qs.className; for (var bu in cE) { Jm.Qs.style[bu] = NR.Qs.style[bu]; } if (Oo) { var kK = this.dj.ww(Oo, aq); for (var bu in kK) { if (!cE[bu]) { Jm.Qs.style[bu] = ""; } } if (Da === null) { Da = this.Lv.ww(Oo, aq); } ls.kx.eX(this.ld, Oo, aq, Da, ls.TN, null, ou); } else { var LY = null; Jm.LY = (Da == null); if (!Jm.LY) { Jm.Ur(Da); } Jm.rR = cE; } return Jm; }, UW: function () { if (this.aE && this.aE.fd && this.aE.fd.appendChild) { delete (this.aE.fd); } var fg = this.bc(); for (var oi in fg) { for (var pF in fg[oi]) { fg[oi][pF].UW(); } } if (this.lh) { delete (this.lh); } if (this.RB) { delete (this.RB); } if (this.IZ) { delete (this.IZ); } if (this.TD) { delete (this.TD); } if (this.kM) { delete (this.kM); } if (this.tU) { if (this.tU.UW) { this.tU.UW(); } else { delete (this.tU); } } if (this.wO) { this.wO.UW(); } if (this.gV) { this.gV.UW(); } for (var oi in this.XC) { if (this.XC[oi] && this.XC[oi].UW) { this.XC[oi].UW(); } } } }; })(Lightstreamer); (function (ls) { ls.PO = function (ld) { this.hS(ls.PO, ld); this.ea = ls.rU; }; ls.PO.prototype = { BL: function (ZO) { if (ZO.ea != ls.rU) { this.Al.error("A Data Table cannot be associated with a Screen Table that was previously associated with a Data Table of a different type", "addTable"); return false; } this.aE = ZO; return true; } }; ls.RT(ls.PO, ls.oI); })(Lightstreamer); Lightstreamer.OH({ vd: 1, NJ: 2, RI: 3, ql: 4, aT: 5 }); (function (ls) { Lightstreamer.Table = function (bP, Dl, iU) { this.ug = bP ? ls.GroupDescriptor.ih(bP) : null; this.QI = Dl ? ls.SchemaDescriptor.Kx(Dl) : null; this.JX = new String(iU).toUpperCase(); this.Uk = false; this.tI = null; this.ti = null; this.HS = null; this.eJ = null; this.KV = null; this.Lx = null; this.uE = null; this.eE = new ls.am(); this.WV = new ls.am(); this.WX = new ls.am(); this.IA = null; this.Qo = new ls.am(); this.Tp = ls.vd; this.ld = null; this.js = ""; this.TM = 0; this.BG = null; this.vA = 0; this.EJ = 3000; this.uu = 0; this.PZ; this.Xc; this.ea = null; var WK = " See the documentation for further details"; this.Vq = "This method must be called at runtime." + WK; this.oB = "This method cannot be called at runtime." + WK; this.Al = ls.gE.getLogger("TL"); this.QT = 0; }; Lightstreamer.Table.prototype = { Qn: ls.Le, fW: ls.KJ, Iq: function (ld, BG) { this.Al.log('Iq', ld, BG); this.Tp = ls.aT; this.BG = BG; this.ld = ld; this.TM++; this.QT++; this.Al.sX(this.QT == 1, 'Iq', 1, this.QT, this); return true; }, Sn: function () { this.uE = null; this.TM++; this.PZ = null; this.Xc = null; this.Tp = ls.NJ; this.Al.log('Sn', this); }, TB: function (CF) { this.Al.log('TB', CF); this.uE = CF; this.Tp = ls.RI; }, cA: function () { this.Tp = ls.aT; this.EM(); this.Al.log('cA', this); }, NB: function () { this.Tp = ls.vd; this.BG = null; this.EM(); delete (this.js); this.QT--; this.Al.sX(this.QT == 0, 'NB', 1, this.QT, this); this.Al.log('NB', this); }, EM: function () { this.uE = null; if (this.QI) { this.QI.reset(); } this.PZ = null; this.Xc = null; this.Al.log('EM', this); }, wN: function () { this.Tp = ls.ql; if (this.onStart) { try { this.onStart(); } catch (XF) { this.Al.ET(XF, this.onStart, "onStart"); } } }, Tq: function () { return this.Tp != ls.vd; }, PV: function () { return this.Tp == ls.ql; }, oc: function () { if (!this.ug) { this.Al.pE("Cannot initiate a " + this.getClassName() + " without a group", this.getClassName()); } }, fG: function () { if (!this.QI) { this.Al.pE("Cannot initiate a " + this.getClassName() + " without a schema", this.getClassName()); } }, Tw: function () { this.js = "LS_mode=" + this.JX + "&" + "LS_id=" + ls.Zk(this.ug.hw()) + "&" + "LS_schema=" + ls.Zk(this.QI.Pf()) + "&"; if (this.Lx != null) { this.js += ("LS_data_adapter=" + ls.Zk(this.Lx) + "&"); } if (this.KV != null) { this.js += ("LS_selector=" + ls.Zk(this.KV) + "&"); } if (this.HS != null) { this.js += ("LS_start=" + this.HS + "&"); } if (this.eJ != null) { this.js += ("LS_end=" + this.eJ + "&"); } if (this.Uk != null && this.Uk != false) { this.js += ("LS_snapshot=" + this.Uk + "&"); } if (this.tI != null) { var hK = this.tI; if (hK == "unfiltered") { this.js += ("LS_requested_max_frequency=" + hK + "&"); } else if (hK != "unlimited" && hK > 0) { this.js += ("LS_requested_max_frequency=" + hK + "&"); } } if (this.ea.indexOf(ls.Di) > -1) { this.tf = this.tI; } if (this.ti != null) { var ln = this.ti; if (ln != "unlimited" && ln > 0) { this.js += ("LS_requested_buffer_size=" + ln + "&"); } } this.Al.log('Tw', this.js); return; }, getSchema: function () { return this.QI; }, getGroup: function () { return this.ug; }, setDataAdapter: function (Lx) { this.Al.log("setDataAdapter", arguments); this.Lx = Lx; }, getId: function () { return this.ld; }, setSelector: function (selector) { this.Al.log("setSelector", arguments); this.KV = selector; }, hI: function () { return this.KV; }, setItemsRange: function (start, eJ) { this.HS = this.Qn(start, "setItemsRange", this.HS, true, 1); this.eJ = this.Qn(eJ, "setItemsRange", this.eJ, true, this.HS); }, Tn: function () { return [this.HS, this.eJ]; }, setRequestedMaxFrequency: function (Xh) { Xh = new String(Xh); Xh = Xh.toLowerCase(); if (Xh == "unfiltered" || Xh == "unlimited") { this.tI = Xh; } else { this.tI = this.Qn(Xh, "setRequestedMaxFrequency", this.tI, false, 0); } }, WR: function () { return this.tI; }, setRequestedBufferSize: function (size) { size = new String(size); size = size.toLowerCase(); if (size == "unlimited") { this.ti = size; } else { this.ti = this.Qn(size, "setRequestedBufferSize", this.ti, true, 0); } }, as: function () { return this.ti; }, setSnapshotRequired: function (DM) { if (DM === true || DM === false) { this.Uk = DM; } else { if (this.JX == "DISTINCT") { this.Uk = this.Qn(DM, "setSnapshotRequired", this.Uk, true, 0); } else { this.Al.pE("Numeric values are only allowed when the subscription mode is DISTINCT", "setSnapshotRequired"); return; } } }, jB: function () { return this.Uk; }, onItemUpdate: function (St, ZM, iv) { return; }, onLostUpdates: function (St, JI, iv, Xe) { return; }, onEndOfSnapshot: function (St, iv) { return; }, onStart: function () { return; }, getClassName: function () { return null; }, HN: function (JW, xX, Kq) { if (this.ea == ls.aR) { this.uW.Vw.YA(JW.length - 2); JW = this.sPd(JW); if (JW == null) { return true; } return this.uW.HN(JW, xX, true); } if (!Kq) { this.QI.YA(JW.length - 2); } this.vA++; if (this.vA >= this.EJ) { this.vA = 0; if (this.dK) { this.dK(); } } var hf = JW[1]; var qP = new String(hf); if (this.ea.indexOf(ls.GB) > -1) { qP = this.Ppf(JW, hf, Kq); if (qP == null) { return qP; } } if (this.ea.indexOf(ls.Di) > -1 && !Kq) { this.DF(JW); } this.JH(qP); if (this.onItemUpdate) { ls.ZM.iE(this, qP, JW, xX); var aS = this.ug.EC(hf); try { this.onItemUpdate(hf, ls.ZM, aS); } catch (XF) { this.Al.ET(XF, this.onItemUpdate, "onItemUpdate"); } } if (!this.Tq()) { return qP; } this.ga(qP, JW); return qP; }, JH: function (qP) { var YS = this.WV.vn(qP); for (var wV in YS) { var Wo = wV; var sF = false; var qo = wV.indexOf("|rem"); if ((qo > -1) && (qo == wV.length - 4)) { Wo = wV.substring(0, wV.length - 4); if (this.ea.indexOf(ls.ON) > -1) { this.WX.YQ(this.WV.ww(qP, wV), qP, Wo); } else { this.WX.YQ(null, qP, Wo); } } else { this.WV.jK(qP, wV); this.ps(null, qP, wV); } } }, hu: function (ux) { if (ux == null) { return ""; } else if (ux.length === -1) { return null; } else { return ux; } }, ps: function (sg, qP, nU) { var ko = this.hu(sg); if (ko != null) { this.IA.push(nU); } this.WX.YQ(ko, qP, nU); }, ga: function (qP, JW) { this.IA = []; var Cf = JW.length - 2; var nU = 1; var BQ = 2; for (; nU <= Cf; nU++, BQ++) { if (JW[BQ] == null) { this.eE.YQ(null, qP, nU); } else if (JW[BQ] !== ls.OJ) { this.eE.YQ(JW[BQ], qP, nU); } this.ps(JW[BQ], qP, nU); } var gZ = {}; var YS = this.WV.vn(qP); for (var nU in YS) { var nU = nU; var qo = nU.indexOf("|rem"); if ((qo > -1) && (qo == nU.length - 4)) { nU = nU.substring(0, nU.length - 4); } gZ[nU] = true; this.Mi(qP, nU, YS); } var aX = this.WX.vn(qP); for (var nU in aX) { if (nU <= Cf) { continue; } if (gZ[nU] == true) { continue; } this.Mi(qP, nU, YS); } }, Mi: function (qP, nU, YS) { var XG; if (!YS) { XG = null; } else { XG = YS[nU]; if (typeof XG == "undefined") { XG = YS[nU + "|rem"]; if (typeof XG == "undefined") { XG = null; } } } if (this.eE.ww(qP, nU) == XG) { this.ps(ls.OJ, qP, nU); } else { this.eE.YQ(XG, qP, nU); this.ps(XG, qP, nU); } } }; })(Lightstreamer); (function (ls) { Lightstreamer.VisualTable = function (bP, Dl, iU) { this.hS(ls.VisualTable, bP, Dl, iU); this.po = this.QI ? false : true; this.aE = null; this.MH = false; this.oo = true; this.Bb = false; this.MQ = false; this.II = null; this.dZ = null; this.ea = null; this.at = true; this.Ks = false; this.Al.log("VisualTable", arguments); }; Lightstreamer.VisualTable.prototype = { Iq: function (ld, BG) { if (!this.Xb(ls.VisualTable, 'Iq', ld, BG)) { return false; } if (!this.VBF()) { return false; } if (!this.je()) { return false; } this.Jd(); this.Ks = false; if (this.oo) { this.jN(); } return true; }, Jd: function () { }, je: function () { }, NB: function () { this.Xb(ls.VisualTable, 'NB'); if (this.Bb) { this.jN(); } if (this.po) { this.QI = null; } else { this.QI.sm(); } this.aE = null; }, cA: function () { this.Xb(ls.VisualTable, 'cA'); this.Ks = true; if (this.MQ) { this.jN(); } }, jN: function () { if (this.at) { } this.at = true; this.eE = new ls.am(); this.WV = new ls.am(); this.WX = new ls.am(); this.Qo = new ls.am(); return true; }, wN: function () { this.Xb(ls.VisualTable, 'wN'); if (this.Ks && this.oo) { this.jN(); } this.at = false; }, setClearOnRemove: function (clear) { if (clear) { this.Bb = true; } else { this.Bb = false; } }, of: function () { return this.Bb; }, setClearOnDisconnected: function (clear) { if (clear) { this.MQ = true; } else { this.MQ = false; } }, uQ: function () { return this.MQ; }, setClearOnAdd: function (clear) { if (clear) { this.oo = true; } else { this.oo = false; } }, gt: function () { return this.oo; }, setPushedHtmlEnabled: function (tj) { if (this.Tq()) { this.Al.pE(this.oB, "setPushedHtmlEnabled"); } this.MH = this.fW(tj, "setPushedHtmlEnabled", this.MH); }, isPushedHtmlEnabled: function () { return this.MH; }, showValues: function (item, jM) { if (!this.Tq()) { this.Al.pE(this.Vq, "showValues"); } this.IA = []; this.at = false; var Fg = this.ug.FZ(item); var qP = Fg; var Kc = []; var kG = {}; for (var hR in jM) { var Ji = this.QI.PE(hR); kG[Ji] = this.reP(jM[hR]); this.IA.push(Ji); if (typeof (Ji) == "number") { Ji += 1; } Kc[Ji] = jM[hR]; } var ad = "For Metapush and DynaMetapush tables, only UPDATE commands are admitted in showValues"; if (this.ea.indexOf(ls.GB) > -1) { if (typeof Kc[this.keyCode + 1] == "undefined") { this.Al.pE("Key position is not set correctly", "showValues"); } else if (typeof Kc[this.hv + 1] == "undefined") { this.Al.pE("Command position is not set correctly", "showValues"); } else if (Kc[this.hv + 1] == "DELETE") { this.Al.pE(ad, "showValues"); } qP = Fg + "|" + Kc[this.keyCode + 1]; if (this.ea.indexOf(ls.QR) > -1) { var IL = this.aE.XC[qP]; if (!IL) { this.Al.pE(ad, "showValues"); } } else { var Px = this.aE.an[qP]; if (!Px) { this.Al.pE(ad, "showValues"); } } } this.WX.insertRow(kG, qP); this.Qo.AP(qP); this.oU(qP, Kc, true); }, reP: function (ux) { if (typeof ux == "undefined") { return null; } if (ux == null) { return ""; } else { return ux; } }, VBF: function () { var wG = ls.kx.HA(this.ld, this.ea); this.aE = wG; if (!wG.BL(this)) { return false; } this.Al.log('VBF', 2, this.MH); return true; }, dK: function () { var It = new String(this.js); delete (this.js); this.js = It; var Jo = null; Jo = ls.am.Eb(this.eE, false); delete (this.eE); this.eE = Jo; var Na = null; Na = ls.am.Eb(this.WV, false); delete (this.WV); this.WV = Na; var nj = null; nj = ls.am.Eb(this.WX, false); delete (this.WX); this.WX = nj; var fH = null; fH = ls.am.Eb(this.Qo, false); delete (this.Qo); this.Qo = fH; if (this.II) { var NT = null; NT = ls.gJ(this.II, false); delete (this.II); this.II = NT; } if (this.dZ) { var sK = null; sK = ls.gJ(this.dZ, false); delete (this.dZ); this.dZ = sK; } if (this.XR) { var Tx = null; Tx = ls.VN(this.XR, false); delete (this.XR); this.XR = Tx; } }, HN: function (JW, xX, Kq) { var qP = this.Xb(ls.VisualTable, 'HN', JW, xX, Kq); this.oU(qP, JW, false); return qP; }, Vh: function (Qm) { var IR = []; if (this.JX == "COMMAND") { if (!Qm["command"]) { IR.push("command"); } if (!Qm["key"]) { IR.push("key"); } } for (var aq in Qm) { if (aq.indexOf("#") == 0) { } else if (aq.indexOf("$") == 0 && this.ea.indexOf(ls.Di) > -1) { } else { IR.push(aq); } } this.QI = new ls.SchemaListDescriptor(IR); }, mQ: function (Qm) { var ud = []; for (var aq in Qm) { if (aq.indexOf("$") == 0) { ud.push(aq.substr(1)); } } this.Vw = new ls.SchemaListDescriptor(ud); }, lT: function () { var Qm = this.GIe(); if (this.po) { this.Vh(Qm); } if (this.sr) { this.mQ(Qm); } if (this.Vw) { this.QI.Id(this.Vw); } this.dZ = {}; for (var aq in Qm) { var Ot = this.QI.PE(aq); this.dZ[Ot] = aq; } }, AJ: function (qP, KU, Gd, ff, iH) { var UJ = this.ld; var vV = iH.kN; var Wh = vV + iH.Lt; var pg = Wh + iH.QW; var mY = []; var GC = ls.kx; var tZ = ls.aL; var PF = ls.sO; var Ge = this.aE; var oF = Ge.Kv.vn(KU); var qJ = Ge.UP.vn(KU); if (oF != null) { Ge.ag.insertRow(oF, KU); Ge.Kv.AP(KU); Ge.xL.insertRow(qJ, KU); Ge.UP.AP(KU); } else { oF = Ge.ag.vn(KU); qJ = Ge.xL.vn(KU); } var vG = false; var aY; var qa; var Np; var xE; if (oF != null) { if (oF["backgroundColor"]) { vG = true; aY = oF["backgroundColor"]; qa = qJ["backgroundColor"]; } if (oF["color"]) { vG = true; Np = oF["color"]; xE = qJ["color"]; } } var SM = this.WX.vn(qP); for (var Gh in SM) { var pG = SM[Gh]; var Vt = this.Qo.ww(qP, Gh); if (pG == null && Vt) { this.WX.YQ(Vt, qP, Gh); } else { this.WX.YQ(pG, qP, Gh); this.Qo.YQ(pG, qP, Gh); } if (this.WX.ww(qP, Gh) == null) { if (!ff) { continue; } } var MX = this.dZ[Gh]; if (MX == null) { continue; } var CY = Ge.Wc(KU, MX); if (CY == null) { var Vf = document.createElement("div"); CY = new ls.pu(Vf); Ge.insertCell(CY, KU, MX); } if (this.ea == ls.Qd) { CY.Md = pG; } CY.hN = CY.UN; CY.nR = CY.RL; CY.UN = null; CY.RL = null; CY.vA++; if (CY.hN || (Ge.ag.vn(KU) != null)) { var FF = false; var Kl = false; var NL = false; var nV = aY; var ol = qa; var FC = Np; var CO = xE; if (CY.hN) { if (CY.hN["backgroundColor"]) { FF = true; nV = CY.hN["backgroundColor"]; ol = CY.nR["backgroundColor"]; } if (CY.hN["color"]) { FF = true; FC = CY.hN["color"]; CO = CY.nR["color"]; } } if (FF || vG) { if (iH.kN > 0) { var BJ = tZ.YI(GC.MI, GC, [UJ, qP, KU, Gd, Gh, ff, this.BG]); var Ts = PF.Ct(CY, false, nV, FC, iH.kN, BJ); PF.sQ(Ts); Kl = true; } else { PF.tc(CY); } if (iH.QW > 0) { var MX = this.dZ[Gh]; var xf = tZ.YI(GC.PL, GC, [UJ, KU, Gd, MX, false, CY.vA]); var Ts = PF.Ct(CY, true, ol, CO, iH.QW, xf); tZ.Au(PF.sQ, Wh, PF, [Ts]); NL = true; } } if (!Kl) { var vm = [UJ, qP, KU, Gd, Gh, ff, this.BG]; if (vV > 0) { tZ.Au(GC.MI, vV, GC, vm); } else { var Os = tZ.YI(GC.MI, GC, vm); mY.push(Os); } } if (!NL) { tZ.Au(GC.PL, pg, GC, [UJ, KU, Gd, MX, false, CY.vA]); } } else { var vm = [UJ, qP, KU, Gd, Gh, ff, this.BG]; if (vV > 0) { tZ.Au(GC.MI, vV, GC, vm); } else { var Os = tZ.YI(GC.MI, GC, vm); mY.push(Os); } } } for (var xZ = 0; xZ < mY.length; xZ++) { tZ.tk(mY[xZ]); } } }; ls.RT(ls.VisualTable, ls.Table); })(Lightstreamer); (function (ls) { ls.Fs = function () { }; ls.Fs.iC = function (XH, lH) { return XH - lH; }; ls.Fs.prototype = { RH: function () { if (this.ea.indexOf(ls.GB) > -1) { if (this.po) { this.hv = null; this.keyCode = null; } if (this.hv == null) { this.hv = this.QI.Yp("command"); } if (this.keyCode == null) { this.keyCode = this.QI.Yp("key"); } if (this.keyCode == null) { this.Al.error("Key position is not set correctly for a COMMAND mode subscription. Please specify a field that represents the Key", "addTable"); } else if (this.hv == null) { this.Al.error("Command position is not set correctly for a COMMAND mode subscription. Please specify a field that represents the Command", "addTable"); } } }, pT: function (Nl, uN) { this.Al.log('pT', arguments); if (this.Tq()) { this.Al.pE(this.oB, "setMetapushFields"); } this.hv = this.Qn(Nl, "setMetapushFields", this.hv, true, 1); this.keyCode = this.Qn(uN, "setMetapushFields", this.keyCode, true, 1); }, Ppf: function (JW, hf, Kq) { var qP; if ((typeof JW[this.keyCode + 1] == "undefined") || (typeof JW[this.hv + 1] == "undefined")) { this.Al.db("Command or Key position is not set correctly", "Server Update"); return null; } if (JW[this.keyCode + 1].length == -1) { qP = hf + "|" + this.eE.ww(hf, this.keyCode); } else { qP = hf + "|" + JW[this.keyCode + 1]; } if (!Kq) { JW.bZ = []; for (var oi = 2; oi < JW.length; oi++) { if (JW[oi] && JW[oi].length == -1) { JW[oi] = this.eE.ww(hf, (oi - 1)); } else { this.eE.YQ(JW[oi], hf, (oi - 1)); } if (JW[oi] == this.eE.ww(qP, (oi - 1))) { JW[oi] = ls.OJ; } else { JW.bZ.push(oi - 1); } } if (this.ea.indexOf(ls.Di) > -1) { var gj = this.QI.length + this.QI.Oc.length + 2; if (gj > JW.length) { for (var oi = JW.length; oi < gj; oi++) { JW[oi] = ls.OJ; } } } } else { JW[this.keyCode + 1] = ls.OJ; if (JW[this.hv + 1] == this.eE.ww(qP, this.hv)) { JW[this.hv + 1] = ls.OJ; } else { JW.bZ.push(this.hv); JW.bZ.sort(ls.Fs.iC); } } return qP; } }; })(Lightstreamer); (function (ls) { ls.Fv = function () { }; ls.Fv.prototype = { Jd: function () { this.Al.log('Jd'); this.lT(); this.RH(); }, SD: function (gC, gl, JL, fY) { this.Al.log('SD', arguments); if (!gC) { this.rZ = null; return; } this.rZ = this.QI.PE(gC); if (gl) { this.gl = true; } else { this.gl = false; } if (JL) { this.JL = true; } else { this.JL = false; } if (fY) { this.fY = true; } else { this.fY = false; } if (this.Tq() && this.ea.indexOf(ls.QR) > -1) { this.Uo(); } }, jvU: function () { if (!this.rZ || typeof (this.rZ) == "string") { return null; } else { return this.rZ; } }, jEk: function () { if (this.rZ == null) { return null; } else { return this.QI.En(this.rZ); } }, qEp: function () { if (this.rZ == null) { return null; } else { return this.gl; } }, ABP: function () { if (this.rZ == null) { return null; } else { return this.JL; } }, CvC: function () { if (this.rZ == null || !this.JL) { return null; } else { return this.fY; } }, gjK: function () { return this.hv; }, gsY: function () { return this.keyCode; }, hLr: function (ux) { if (this.JL) { return ls.tw(ux, this.fY); } else { return ux; } }, tun: function (rV, wE) { if (rV == null || wE == null) { if (rV != wE) { if (rV == null) { return !this.gl; } else { return this.gl; } } } if (this.gl) { return rV > wE; } else { return rV < wE; } } }; ls.RT(ls.Fv, ls.Fs, "O"); })(Lightstreamer); (function (ls) { ls.vM = function () { }; ls.vM.prototype = { RA: function (Ve) { var WU = this.ea.indexOf(ls.hD) > -1; if (Ve != null) { this.Vw = ls.SchemaDescriptor.Kx(Ve); } else if (!WU) { this.sr = true; } else { this.Al.pE("You must specify the under schema for NonVisualTable objects", "NonVisualTable"); } var FN = WU ? "NonVisualTable" : "MultiDynaMetapushTable"; if (!(((this.po || this.QI.getList) && (this.sr || (this.Vw && this.Vw.getList))) || (this.QI.getId && (this.Vw && this.Vw.getId)))) { this.Al.pE("Schema and UnderSchema should be of the same type", "MultiDynaMetapushTable"); } }, aF: function () { for (var oi in this.UL) { for (var pF in this.UL[oi]) { this.hc(oi, pF); } } }, DF: function (JW) { var hf = JW[1]; var OX = (JW[this.keyCode + 1].length == -1) ? this.eE.ww(hf, this.keyCode) : JW[this.keyCode + 1]; var FX = JW[this.hv + 1]; if (this.UL[hf] && this.UL[hf][OX] && FX == "DELETE") { this.hc(hf, OX); } else if ((!this.UL[hf] || !this.UL[hf][OX]) && FX != "DELETE") { var Ni = new ls.NonVisualTable(OX, this.Vw, "MERGE"); Ni.setDataAdapter(this.IF); Ni.setSnapshotRequired(true); Ni.tI = this.tf; Ni.vQ = hf; Ni.ea = ls.aR; Ni.uW = this; if (!this.UL[hf]) { this.UL[hf] = {}; } this.UL[hf][OX] = Ni; ls.mR.RR(Ni, this.getId() + "$" + hf + "|" + OX); } }, hc: function (hf, qP) { if (this.Tp == ls.aT) { this.UL[hf][qP].cA(); } ls.mR.UY(this.UL[hf][qP].getId()); delete (this.UL[hf][qP]); } }; })(Lightstreamer); (function (ls) { ls.vC = function () { }; ls.vC.prototype = { je: function () { this.Al.log('je', 1, this); var ld = this.ld; ls.kx.Fq(ld); var gr; var bC = ls.kx.lZ[ld]; if (bC) { if (bC.qC) { gr = bC.Uw; bC.Uw = []; } else { gr = ls.pu.nl(bC.vE, bC.fL); } } else { gr = ls.pu.nl(document, ls.ScreenTableHelper.dC); } var Ni = ls.kx.HA(ld); var pF = 0; for (pF = 0; pF < gr.length; pF++) { var UJ = gr[pF].Qs.getAttribute("table"); if (!UJ || UJ != ld) { continue; } var lv; if (this.ea == ls.sw) { var wL = gr[pF].Qs.getAttribute("lsitem"); if ((wL == null) || (wL == "")) { wL = gr[pF].Qs.getAttribute("item"); if ((wL == null) || (wL == "")) { continue; } } lv = wL; } else { var Pj = gr[pF].Qs.getAttribute("row"); if ((Pj == null) || (Pj == "")) { Pj = gr[pF].Qs.getAttribute("position"); } if ((Pj == null) || (Pj == "")) { continue; } lv = Number(Pj); if (isNaN(lv)) { continue; } } var aq = gr[pF].Qs.getAttribute("field"); if ((aq == null) || (aq == "")) { continue; } var LU = Ni.Wc(lv, aq); if (LU && LU.Qs == gr[pF].Qs) { continue; } var ht = gr[pF].er(); var Ng = gr[pF].Qs.className; Ni.jC.YQ(Ng, lv, aq); Ni.Lv.YQ(ht, lv, aq); Ni.Ys(gr[pF], lv, aq, this.ea); } if (Ni.IJ <= 0) { this.Al.error("No cells defined for table " + ld, "addTable"); return false; } return true; }, GIe: function () { var ab = this.aE.bc(); var Qm = {}; for (var wL in ab) { for (var aq in ab[wL]) { Qm[aq] = 1; } } return Qm; } }; })(Lightstreamer); (function (ls) { ls.CA = function () { }; ls.CA.prototype = { Rd: function () { var ab = this.aE.bc(); for (var Rc in ab) { if (this.onRowUpdate) { try { this.onRowUpdate(Rc, null); } catch (XF) { this.Al.ET(XF, this.onRowUpdate, "onRowUpdate"); } } for (var nU in ab[Rc]) { this.aE.Xs(Rc, nU); } this.aE.PB(Rc, false); } }, GT: function (cX, Fp, xS, fX) { if (cX == Fp) { return; } var HS; var eJ; var IV; if (!xS) { HS = Fp; eJ = cX; IV = -1; } else { HS = cX; eJ = Fp; IV = 1; } for (var qP in this.aE.an) { if (this.aE.an[qP] < cX || this.aE.an[qP] > Fp) { continue; } var gU = -1; if (fX && this.aE.an[qP] == HS) { gU = eJ; } else { gU = this.aE.an[qP] - IV; } if (gU < cX || gU > Fp) { continue; } this.aE.Nr[gU] = qP; this.aE.an[qP] = gU; if (this.ea == ls.ON) { if (gU > this.vc || gU <= 0) { delete this.aE.Nr[gU]; delete this.aE.an[qP]; } } } this.aE.HM(HS, eJ, IV, fX); } }; })(Lightstreamer); (function (ls) { ls.No = function () { }; ls.No.prototype = { Jd: function () { this.Al.log('Jd'); this.lT(); }, nI: function (qD) { this.Al.log('nI', arguments); if (this.Tq()) { this.Al.pE(this.oB, "setUpwardScroll"); } if (qD) { this.WC = true; } else { this.WC = false; } }, ps: function (sg, qP, nU) { this.IA.push(nU); if (sg === ls.OJ) { sg = this.eE.ww(qP, nU); } this.WX.YQ(sg, qP, nU); } }; })(Lightstreamer); (function (ls) { ls.Oq = function () { }; ls.Oq.prototype = { je: function () { this.Al.log('je', 1, this); var ld = this.ld; this.EA(); var jv = ls.kx.HA(ld); var QC; var Vn = jv.lh; if (Vn) { if (ls.pu.Wi(Vn)) { return true; } else { jv.lh = null; jv.IZ = null; jv.TD = null; jv.kM = null; jv.tU = null; jv.wO = null; jv.gV = null; } } Vn = document.getElementById(ld); if (!this.vmd(Vn)) { return false; } var CC = Vn.cloneNode(true); CC.removeAttribute("id"); QC = Vn.parentNode; jv.lh = Vn; jv.RB = QC; jv.IZ = CC; Vn.style.display = "none"; var IY = QC.childNodes; var oi = 0; var GX = 0; for (oi = 0; oi < IY.length; oi++) { if (IY[oi] == Vn) { if (IY[oi + 1]) { jv.TD = IY[oi + 1]; jv.kM = IY[oi + 1]; } else { jv.TD = null; jv.kM = null; } GX = oi + 1; break; } } if (this.ea == ls.Qd) { jv.tU = QC; } else { jv.tU = new ls.dm(jv.RB, jv.kM, GX); jv.wO = new ls.CL(); jv.gV = new ls.CL(); } return true; }, vmd: function (IZ) { if (!IZ) { this.Al.error("No template defined for table " + this.ld, "addTable"); return false; } var lG = IZ.getAttribute(ls.YX); if (!lG || lG.toUpperCase() != ls.px) { this.Al.error("The template defined for table " + this.ld + " does not define the 'source' attribute.", "addTable"); return false; } var gu = []; var MW = false; var gr = ls.pu.nl(IZ); for (var th = 0; th < gr.length; th++) { if (!gr[th].Qs.getAttribute("FIELD")) { if (!MW) { this.Al.error("Warning, there are elements in the template for table " + this.ld + " that do not define the 'field' attribute", "addTable"); MW = true; } } else { gu.push(gr[th]); } } if (gu.length <= 0) { this.Al.error("No valid cells defined for table " + this.ld, "addTable"); return false; } return true; }, GIe: function () { var IZ = this.aE.IZ; var gr = ls.pu.nl(IZ); var Qm = {}; var pF = 0; for (pF = 0; pF < gr.length; pF++) { var aq = gr[pF].Qs.getAttribute("FIELD"); if (aq) { Qm[aq] = 1; } } return Qm; }, Yn: function (XB, cn) { this.Al.log('Yn', arguments); if (!XB) { this.Al.pE("No type selected, please select one: OFF, ELEMENT, PAGE", "setAutoScroll"); return; } XB = new String(XB); XB = XB.toUpperCase(); if (XB == "ELEMENT") { if (!cn) { this.Al.pE("Please specify an element id in order to use ELEMENT autoscroll", "setAutoScroll"); return; } else { this.fd = cn; } } else if (XB != "PAGE" && XB != "OFF") { this.Al.pE(XB + " is not a valid scroll type. Admitted values are OFF, ELEMENT, PAGE", "setAutoScroll"); return; } this.De = XB; if (this.Tq()) { this.EA(); } }, EA: function () { if (this.De == "ELEMENT") { if (this.fd && this.fd.appendChild) { } else { var iV = document.getElementById(this.fd); if (!iV) { this.Al.error("Cannot find the element with " + this.fd + " as id.", "setAutoScroll"); this.De = "OFF"; } else { this.fd = iV; } } } }, Bd: function (mI) { this.Al.log('Bd', arguments); mI = new String(mI); mI = mI.toLowerCase(); if (mI == "unlimited") { this.mI = 0; } else { this.mI = this.Qn(mI, 'Bd', this.mI, true, 1); } }, bfE: function () { if (this.mI == 0) { return "unlimited"; } return this.mI; }, JQ: function (Qs) { if (this.De == "OFF") { return; } var SC = null; if (this.De == "ELEMENT") { SC = this.fd; } var Oi = Qs.offsetTop; Qs = Qs.offsetParent; while ((Qs != SC) && (Qs != null)) { Oi += Qs.offsetTop; Qs = Qs.offsetParent; } this.Al.log('JQ', this.De, Oi); if (this.De == "PAGE") { window.scrollTo(0, Oi); } else { this.fd.scrollTop = Oi; } } }; })(Lightstreamer); (function (ls) { ls.Aq = function () { }; ls.Aq.prototype = { lO: function (lG) { if (lG == null) { return null; } else { return lG.toString(); } }, oes: function (As) { ls.dA.oes(parseInt(As.win), parseInt(As.FK), this.lO(As.status), As.connection, As.context, As.policy, As.Qg, parseInt(As.Eg), As.uS === true, this.lO(As.SO), this.lO(As.An)); }, KFu: function (As) { ls.Cp.Vx[As.Cx].jD(this.lO(As.FU), As.ED); }, dpC: function (As) { ls.dA.dpC(this.lO(As.status)); }, nFN: function (As) { ls.dA.SfU(ls.HO(As.YY), this.lO(As.SO), this.lO(As.An)); }, NTY: function (As) { ls.dA.tCX(ls.HO(As.YY)); }, mrI: function (As) { ls.dA.Kb(As.OI === true); }, Vj: function () { if (ls.Ki.FE()) { ls.aL.Au(ls.Ki.FE, 1000, ls.Ki); } }, ELQ: function (As) { ls.mR.TB(this.lO(As.bA), parseInt(As.CF), parseInt(As.BG), parseInt(As.TM)); }, wcm: function (As) { var JW = As.JW; var iY = []; iY.bZ = []; iY[0] = parseInt(JW[0]); iY[1] = parseInt(JW[1]); for (var oi = 2, Ad = JW.length; oi < Ad; oi++) { if (!JW[oi]) { if (JW[oi] === "") { iY[oi] = ""; } else { iY[oi] = null; } iY.bZ.push(oi - 1); } else if (JW[oi].length == -1) { iY[oi] = ls.OJ; } else { iY[oi] = JW[oi].toString(); iY.bZ.push(oi - 1); } } ls.kx.NK(iY, As.xX ? true : false); }, qwA: function (As) { var iY = []; iY[0] = parseInt(As[0]); iY[1] = parseInt(As[1]); iY[2] = parseInt(As[2]); ls.kx.onLostUpdates(iY); }, TJm: function (As) { var iY = []; iY[0] = parseInt(As[0]); iY[1] = parseInt(As[1]); ls.kx.onEndOfSnapshot(iY); }, Nlg: function (As) { ls.kx.TV(parseInt(As.JP), this.lO(As.fo), parseInt(As.CF)); }, sa: function (As) { ls.dA.ZQ("onServerError", parseInt(As.JP), this.lO(As.fo)); }, aSa: function (As) { ls.kx.Up(parseInt(As.JP), parseInt(As.CF)); }, WHf: function (As) { ls.dA.ZQ("onClientAlert", parseInt(As.Ji), this.lO(As.Hr)); }, isS: function (As) { ls.dA.ZQ("onClientError", As); }, KPM: function (As) { ls.kx.Up(9, this.lO(As)); }, rYT: function (As) { ls.kx.BN(parseInt(As.Gd), parseInt(As.Ji), this.lO(As.fo)); } }; })(Lightstreamer); (function (ls) { ls.Sg = function () { this.Al = ls.gE.getLogger("EH"); this.KR = 2000; this.iE(); }; ls.Sg.prototype = { iE: function (Jr) { this.Ib = false; this.Eg = null; this.Uq = false; this.Gq = false; this.jp = false; this.uS = false; this.gp = null; this.FK = null; this.Xq = Jr ? this.Xq + 1 : ls.Ns() + 1; this.hE = null; this.ej = false; this.sW = false; this.Al.log('iE', this); }, toString: function () { return ["[", 'Sg', this.gp, this.Uq, this.Ib, this.Eg, this.Gq, this.jp, this.uS, this.sW, this.FK, this.Xq, this.ej, "]"].join("|"); }, lVw: function (YG, oD) { if (oD) { return YG == this.Xq && oD == this.FK; } else { return YG == this.Xq; } }, NQp: function () { var lf = false; try { lf = this.hE.gQ.lVw(this.gp); } catch (XF) { this.Al.DU(XF, 'NQp'); lf = false; } if (!lf) { this.Kb(); } return lf; }, Yh: function (ub, As) { return this.LB(ub, As, false, false); }, sHJ: function (ub, As) { return this.LB(ub, As, true, false); }, DMB: function (ub, As) { return this.LB(ub, As, false, true); }, ZjS: function (ub, As) { return this.LB(ub, As, true, true); }, LB: function (ub, As, RP, we) { if (!this.Ib) { return false; } this.Al.log('LB', ub, RP); try { if (we) { var vO = this.hE.gQ.xqb(this.gp); vO.Ss.eR(ub, this.gp, As, RP ? this.FK : null); } else { this.hE.Fk.eR(ub, this.gp, As, RP ? this.FK : null); } } catch (XF) { this.Ug(XF); return false; } return true; }, egZ: function (EF, Rm) { if (this.Ib || this.Uq) { this.Al.sX(false, 'egZ', 1); } this.Uq = true; this.Xq++; this.Gq = Rm === true; try { this.hE = EF; var LF = null; if (this.Gq) { var Cm = ls.ku(ls.Cp.Cm); if (ls.pZ.IW) { var AB = ls.Cp.Vx; AB.Qg.Cm = Cm; LF = { Qg: new ls.XZ(AB.Qg), policy: new ls.Policy(AB.policy), connection: new ls.Connection(AB.connection), context: new ls.Context(AB.context) }; this.Al.log('egZ', 1); } else { LF = { Cm: Cm }; this.Al.log('egZ', 2); } } else { this.Al.log('egZ', 3); } var tB = null; EF.Fk.eR('WtQ', -1, { win: window, tN: this.Xq, tB: LF }); } catch (XF) { this.iE(true); ls.Cp.LJ(); return; } var tN = ls.Cp.Rj; ls.aL.Au(this.FZs, this.KR, this, [tN]); this.KR += 500; }, FZs: function (tN) { var Qh = ls.Cp; if (tN == Qh.Rj) { this.iE(true); this.Al.log('FZs'); Qh.Et(tN); } }, oes: function (VB, dt, QB, connection, context, policy, Qg, Eg, xk, SO, An) { this.Ib = true; this.gp = VB; this.FK = dt; this.Eg = Eg; if (ls.pZ.IW) { this.jp = true; } this.KR = 2000; ls.Cp.Rj++; this.uS = xk; this.Al.log('oes', this); var Cp = ls.Cp; ls.pZ.jp(); ls.Ki.rs(); var Vx = new ls.qF(this.hE.HH, connection, context, policy, Qg); Cp.Vx = Vx; Cp.Vx.XN(QB); if (this.uS) { Cp.Vx.jl(SO, An); } if (this.Gq && !this.jp) { try { Cp.onEngineCreation(Vx); } catch (XF) { this.Al.ET(XF, Cp.onEngineCreation, "onEngineCreation"); } } try { Cp.onEngineReady(Vx); } catch (XF) { this.Al.ET(XF, Cp.onEngineReady, "onEngineReady"); } ls.gE.GG(); this.qO(QB); if (this.uS) { this.mj(); } }, mj: function () { this.Al.log('mj'); ls.mR.se(); }, Sd: function () { this.Al.log('Sd'); ls.mR.Xx(); ls.kx.QL(); }, SfU: function (YY, SO, An) { this.Al.sX(!this.uS, 'SfU'); this.FK = YY; this.uS = true; ls.Cp.Vx.jl(SO, An); this.mj(); }, tCX: function (YY) { this.FK = YY; if (this.uS) { this.uS = false; this.Sd(); } }, dpC: function (QB) { ls.Cp.Vx.XN(QB); this.ZQ("onStatusChange", QB); this.qO(QB); }, qO: function (QB) { if (ls.FlashBridge) { for (var oi in ls.FlashBridge.bridges) { var qn = ls.FlashBridge.bridges[oi]; if (qn && qn.ki) { qn.ki(QB); } } } }, ZQ: function (Hf, vR, Eq) { var Vx = ls.Cp.Vx; if (Vx[Hf]) { try { Vx[Hf](vR, Eq); } catch (XF) { this.Al.ET(XF, Vx[Hf], Hf); } } }, Kb: function (OI) { this.Al.log('Kb', OI, this); if (!this.Ib) { return; } var uR = this.Gq && !OI; ls.Ki.sq(); ls.Ki.de = null; this.iE(true); this.sW = uR; ls.Cp.LD(OI); this.Sd(); var Cp = ls.Cp; try { Cp.onEngineLost(); } catch (XF) { this.Al.ET(XF, Cp.onEngineLost, "onEngineLost"); } this.qO("WAITING"); ls.pZ.co(uR); }, Ug: function (XF) { if (!this.ej) { this.Al.DU(XF, 'Ug'); } this.ej = true; ls.aL.Au(ls.Ki.FE, 0, ls.Ki); }, VBa: function () { if (this.Ib && this.gp) { this.Yh('mXD', this.gp); } } }; })(Lightstreamer); (function (ls) { Lightstreamer.NonVisualTable = function (bP, Dl, iU) { this.hS(ls.NonVisualTable, bP, Dl, iU); this.fG(); this.oc(); this.ea = ls.hD; this.hv = null; this.keyCode = null; this.IF = null; this.UL = {}; this.Vw = null; this.Al.log(this.getClassName(), arguments); }; Lightstreamer.NonVisualTable.prototype = { toString: function () { return ["[", this.getClassName(), this.Tp, this.ld, this.BG, this.uE, this.TM, "]"].join("|"); }, getClassName: function () { return "NonVisualTable"; }, Iq: function (ld, BG) { if (!this.Xb(ls.NonVisualTable, 'Iq', ld, BG)) { return false; } if (this.ea == ls.Yo || this.ea == ls.tx) { this.RH(); if (this.Vw) { this.QI.Id(this.Vw); } } return true; }, NB: function () { this.Xb(ls.NonVisualTable, 'NB'); this.QI.sm(); }, Sn: function () { this.Xb(ls.NonVisualTable, 'Sn'); this.eE = new ls.am(); this.WV = new ls.am(); this.WX = new ls.am(); this.Qo = new ls.am(); }, EM: function () { this.Xb(ls.NonVisualTable, 'EM'); if (this.ea == ls.tx) { this.aF(); } }, setCommandLogic: function (JP, Nl, uN, Vw, IF) { if (JP == "MULTI") { if (!Vw) { this.Al.pE("The schema for the underlying tables cannot be null", "setCommandLogic"); return; } this.ea = ls.tx; if (Nl) { this.pT(Nl, uN); } this.RA(Vw); this.IF = IF; } else if (JP) { this.ea = ls.Yo; if (Nl) { this.pT(Nl, uN); } } else { this.ea = ls.hD; } }, getUnderlyingSchema: function () { return this.Vw; }, sPd: function (JW) { var uW = this.uW; if (!uW.UL[this.vQ] || !uW.UL[this.vQ][this.ug.ds]) { return null; } var hf = this.vQ; var rc = {}; rc[0] = uW.uE; rc[1] = hf; rc.length = 2; rc.bZ = []; var wM = uW.QI.length + this.QI.length + 2; var y = 2; var oi; for (; rc.length < wM; rc.length++) { oi = rc.length; if (oi == (uW.keyCode + 1)) { rc[oi] = this.ug.ds; } else if (oi == (uW.hv + 1)) { rc[oi] = "UPDATE"; } else if (oi <= (uW.QI.length + 1)) { rc[oi] = ls.OJ; } else if (JW[y].length > -1) { rc[oi] = JW[y]; rc.bZ.push(oi - 1); y++; } else { rc[oi] = JW[y]; y++; } } return rc; } }; ls.RT(ls.NonVisualTable, ls.Table); ls.RT(ls.NonVisualTable, ls.Fs, "O"); ls.RT(ls.NonVisualTable, ls.vM, "O"); })(Lightstreamer); (function (ls) { Lightstreamer.OverwriteTable = function (bP, Dl, iU) { this.hS(ls.OverwriteTable, bP, Dl, iU); this.kU = this.ug ? false : true; this.ea = ls.sw; this.Al.log(this.getClassName(), arguments); }; Lightstreamer.OverwriteTable.prototype = { toString: function () { return ["[", this.getClassName(), this.Tp, this.ld, this.BG, this.uE, this.TM, "]"].join("|"); }, getClassName: function () { return "OverwriteTable"; }, NB: function () { this.Xb(ls.OverwriteTable, 'NB'); this.Al.log('NB'); if (this.kU) { this.ug = null; } this.II = null; this.dZ = null; }, Jd: function () { this.Al.log('Jd'); this.rb(); this.lT(); }, jN: function () { this.Xb(ls.OverwriteTable, 'jN'); var jv = this.aE; var ab = jv.bc(); for (var Rc in ab) { var Fg = this.ug.FZ(Rc); if (this.onChangingValues) { try { this.onChangingValues(Fg, null, Rc); } catch (XF) { this.Al.ET(XF, this.onChangingValues, "onChangingValues"); } } for (var nU in ab[Rc]) { jv.Xs(Rc, nU); } } }, rb: function () { var ab = this.aE.bc(); if (this.kU) { var jx = []; for (var wL in ab) { jx[jx.length] = wL; } this.ug = new ls.GroupListDescriptor(jx); } this.II = {}; for (var wL in ab) { var St = this.ug.FZ(wL); this.II[St] = wL; } }, onChangingValues: function (St, ZM, iv) { return; }, oU: function (hf, JW, oR) { var qP = hf; var wL = this.II[hf]; if (wL == null) { return; } var iH = ls.AL; iH.iE(this, qP, JW, oR); iH.Rc = wL; if (this.onChangingValues) { var aS = this.ug.EC(hf); try { this.onChangingValues(hf, iH, aS); } catch (XF) { this.Al.ET(XF, this.onChangingValues, "onChangingValues"); } } if (!this.Tq()) { return true; } this.AJ(qP, wL, qP, false, iH); } }; ls.RT(ls.OverwriteTable, ls.VisualTable); ls.RT(ls.OverwriteTable, ls.vC, "O"); })(Lightstreamer); (function (ls) { Lightstreamer.ScrollTable = function (bP, Dl, iU) { this.hS(ls.ScrollTable, bP, Dl, iU); this.oc(); this.vc = 0; this.kA = 1; this.Vl = 1; this.WC = false; this.Vr = -1; this.ea = ls.ON; this.Al.log(this.getClassName(), arguments); }; Lightstreamer.ScrollTable.prototype = { toString: function () { return ["[", this.getClassName(), this.Tp, this.ld, this.BG, this.uE, this.TM, "]"].join("|"); }, getClassName: function () { return "ScrollTable"; }, Sn: function () { this.Xb(ls.ScrollTable, 'Sn'); this.kA = 1; this.Vl = 1; if (this.aE.vc > this.Vr && this.Vr > -1) { this.vc = this.Vr; } else { this.vc = this.aE.vc; } }, NB: function () { this.Xb(ls.ScrollTable, 'NB'); this.dZ = null; }, jN: function () { this.Xb(ls.ScrollTable, 'jN'); this.Rd(); }, onChangingValues: function (ZM) { return; }, onRowUpdate: function (lr, Zp) { return; }, setUpwardScroll: function (qD) { this.nI(qD); }, qD: function () { return this.WC; }, setLastVisibleRow: function (lr) { this.Vr = this.Qn(lr, "setLastVisibleRow", this.Vr, true, -1); }, scM: function () { return this.Vr; }, oU: function (hf, JW, oR) { var cX = null; var Fp = null; var Mc = null; var gf = null; var jZ; var Hl; if (!this.WC) { jZ = 1; Hl = this.Vl; if (this.Vl < this.vc) { this.Vl++; } cX = jZ; Fp = this.vc; } else { jZ = this.vc; Hl = 1; cX = Hl; Fp = jZ; } var qP = this.kA; this.kA++; this.GT(cX, Fp, this.WC, false); var iH = ls.AL; iH.iE(this, hf, JW, oR); iH.Rc = jZ; iH.Gd = qP; if (this.onChangingValues) { try { this.onChangingValues(iH); } catch (XF) { this.Al.ET(XF, this.onChangingValues, "onChangingValues"); } } if (!this.Tq()) { return true; } this.aE.vr(hf, jZ, true); this.aE.an[qP] = jZ; this.aE.Nr[jZ] = qP; this.AJ(hf, jZ, qP, true, iH); var Bf = ls.Zp; Bf.iE(this, qP, jZ); if (this.onRowUpdate) { try { this.onRowUpdate(jZ, Bf); } catch (XF) { this.Al.ET(XF, this.onRowUpdate, "onRowUpdate"); } } if (!this.Tq()) { return true; } } }; ls.RT(ls.ScrollTable, ls.VisualTable); ls.RT(ls.ScrollTable, ls.vC, "O"); ls.RT(ls.ScrollTable, ls.CA, "O"); ls.RT(ls.ScrollTable, ls.No, "O"); })(Lightstreamer); (function (ls) { Lightstreamer.DynaScrollTable = function (bP, Dl, iU) { this.hS(ls.DynaScrollTable, bP, Dl, iU); this.oc(); this.mI = 0; this.nF = 0; this.WC = false; this.fd = null; this.De = "OFF"; this.TJ = false; this.ea = ls.Qd; this.Al.log(this.getClassName(), arguments); }; Lightstreamer.DynaScrollTable.prototype = { toString: function () { return ["[", this.getClassName(), this.Tp, this.ld, this.BG, this.uE, this.TM, "]"].join("|"); }, getClassName: function () { return "DynaScrollTable"; }, Sn: function () { this.Xb(ls.ScrollTable, 'Sn'); this.nF = 0; this.TJ = false; }, NB: function () { this.Xb(ls.DynaScrollTable, 'NB'); this.Al.log('NB'); this.dZ = null; }, jN: function () { this.Xb(ls.DynaScrollTable, 'jN'); var jv = this.aE; while (jv.GL() > 0); jv.sP = 0; jv.Hc = 1; jv.wY = []; jv.kM = this.aE.TD; }, setUpwardScroll: function (qD) { this.nI(qD); }, qD: function () { return this.WC; }, onChangingValues: function (vk, ZM) { return; }, setAutoScroll: function (type, cn) { this.Yn(type, cn); }, setMaxDynaRows: function (mI) { this.Bd(mI); if (this.Tq() && this.mI > 0) { this.aE.iu(this.mI); } }, getMaxDynaRows: function () { return this.bfE(); }, oU: function (hf, JW, oR) { var Ho = this.aE; Ho.sP++; var KQ = Ho.sP; var qP = hf; var iH = ls.AL; iH.iE(this, qP, JW, oR); iH.Rc = KQ; var UK = Ho.tU; var Tk = Ho.IZ.cloneNode(true); Ho.wY.push(Tk); var DQ = this.OWx(); gr = ls.pu.nl(Tk); var pF = 0; for (pF = 0; pF < gr.length; pF++) { var Uc = gr[pF]; var ov = Uc.Qs.getAttribute("FIELD"); if (!ov) { continue; } Ho.Ys(Uc, KQ, ov, Ho.ea); } if (this.onChangingValues) { try { this.onChangingValues(Tk, iH); } catch (XF) { this.Al.ET(XF, this.onChangingValues, "onChangingValues"); } } if (!this.Tq()) { return true; } if (Ho.kM == null || Ho.kM.parentNode == null) { UK.appendChild(Tk); } else { UK.insertBefore(Tk, Ho.kM); } this.AJ(qP, KQ, qP, false, iH); if (DQ) { this.JQ(Tk); } if (!this.WC) { Ho.kM = Tk; } var gf = null; this.aE.iu(this.mI); }, OWx: function () { if (this.De == "OFF") { return false; } if (ls.iR()) { return true; } var Nw = null; if (this.De == "ELEMENT") { Nw = this.fd; } else { Nw = document.body; } if (Nw.scrollTop < this.nF) { this.TJ = true; } this.nF = Nw.scrollTop; if (!this.TJ) { return true; } if ((Nw.clientHeight + Nw.scrollTop) != Nw.scrollHeight) { return false; } else { return true; } } }; ls.RT(ls.DynaScrollTable, ls.VisualTable); ls.RT(ls.DynaScrollTable, ls.No, "O"); ls.RT(ls.DynaScrollTable, ls.Oq, "O"); })(Lightstreamer); (function (ls) { Lightstreamer.MetapushTable = function (bP, Dl, iU) { this.hS(ls.MetapushTable, bP, Dl, iU); this.oc(); this.vc = 0; this.XM = 0; this.hv = null; this.keyCode = null; this.rZ = null; this.gl = false; this.JL = false; this.fY = false; this.Vr = -1; this.XR = {}; this.ea = ls.GB; this.Al.log(this.getClassName(), arguments); }; Lightstreamer.MetapushTable.prototype = { toString: function () { return ["[", this.getClassName(), this.Tp, this.ld, this.BG, this.uE, this.TM, "]"].join("|"); }, getClassName: function () { return "MetapushTable"; }, Sn: function (ld, BG) { this.Xb(ls.MetapushTable, 'Sn'); if (this.aE.vc > this.Vr && this.Vr > -1) { this.vc = this.Vr; } else { this.vc = this.aE.vc; } this.XM = 0; this.XR = []; return true; }, NB: function () { this.Xb(ls.MetapushTable, 'NB'); this.Al.log('NB'); this.dZ = null; }, jN: function () { this.Xb(ls.MetapushTable, 'jN'); this.Rd(); }, setClearOnAdd: ls.Ir, getMetapushSortField: function () { return this.jvU(); }, getMetapushSortFieldName: function () { return this.jEk(); }, isDescendingSort: function () { return this.qEp(); }, isNumericSort: function () { return this.ABP(); }, isCommaAsDecimalSeparator: function () { return this.CvC(); }, setLastVisibleRow: function (lr) { this.Vr = this.Qn(lr, "setLastVisibleRow", this.Vr, true, -1); }, scM: function () { return this.Vr; }, onChangingValues: function (ZM) { return; }, onRowUpdate: function (lr, Zp) { return; }, setMetapushFields: function (Nl, uN) { this.pT(Nl, uN); }, setMetapushSort: function (gC, gl, JL, fY) { this.SD(gC, gl, JL, fY); }, oU: function (qP, JW, oR) { var NF = this.eE.ww(qP, this.hv); var vD = 1; if (this.rZ != null) { vD = this.eE.ww(qP, this.rZ); } var cX = null; var Fp = null; if (NF == "DELETE") { this.GT(this.aE.an[qP], this.XM, true, false); this.Al.sX(!oR, 'oU', 1); var KH = this.aE.mi(this.XM); for (var dZ in KH) { this.aE.Xs(this.XM, dZ); } delete this.aE.Nr[this.XM]; delete this.XR[this.XM]; delete this.aE.an[qP]; this.WX.AP(qP); this.Qo.AP(qP); this.WV.AP(qP); this.eE.AP(qP); if (this.XM > this.vc) { this.aE.PB(this.XM, true); } else { this.aE.PB(this.XM, false); } if (this.onRowUpdate) { try { this.onRowUpdate(this.XM, null); } catch (XF) { this.Al.ET(XF, this.onRowUpdate, "onRowUpdate"); } } if (!this.Tq()) { return true; } this.XM--; } else { vD = this.hLr(vD); var Px = this.aE.an[qP]; var TI = true; if (Px) { var Tg = this.XR[Px]; if (Tg.toString() == vD.toString()) { TI = false; } } else { Px = -1; this.XM++; } var ff = (Px == -1); var gU = Px; if (TI) { gU = 1; var Rc; for (Rc = 1; Rc <= this.XM; Rc++) { if (Rc == Px) { continue; } var DC = this.XR[Rc]; if (!DC) { break; } if (this.tun(vD, DC)) { break; } gU++; } if (gU != Px) { var xS = false; var wh = false; if (!ff) { wh = true; if (gU < Px) { cX = gU; Fp = Px; } else { cX = Px; Fp = gU; xS = true; } } else { cX = gU; Fp = this.XM; } this.GT(cX, Fp, xS, wh); this.aE.an[qP] = gU; this.aE.Nr[gU] = qP; } this.XR[gU] = vD; } var iH = ls.AL; iH.iE(this, qP, JW, oR); iH.Rc = this.aE.an[qP]; if (this.onChangingValues) { try { this.onChangingValues(iH); } catch (XF) { this.Al.ET(XF, this.onChangingValues, "onChangingValues"); } } if (!this.Tq()) { return true; } this.aE.vr(qP, gU, ff); this.AJ(qP, this.aE.an[qP], qP, ff, iH); var Bf = ls.Zp; Bf.iE(this, qP); if (this.onRowUpdate) { try { this.onRowUpdate(this.aE.an[qP], Bf); } catch (XF) { this.Al.ET(XF, this.onRowUpdate, "onRowUpdate"); } } if (!this.Tq()) { return true; } } } }; ls.RT(ls.MetapushTable, ls.VisualTable); ls.RT(ls.MetapushTable, ls.vC, "O"); ls.RT(ls.MetapushTable, ls.Fv, "O"); ls.RT(ls.MetapushTable, ls.CA, "O"); })(Lightstreamer); (function (ls) { Lightstreamer.DynaMetapushTable = function (bP, Dl, iU) { this.hS(ls.DynaMetapushTable, bP, Dl, iU); this.oc(); this.hv = null; this.keyCode = null; this.rZ = null; this.gl = false; this.JL = false; this.fY = false; this.fd = null; this.De = "OFF"; this.mI = 0; this.gp = 1; this.vX = 0; this.xg = false; this.ea = ls.QR; this.Al.log(this.getClassName(), arguments); }; Lightstreamer.DynaMetapushTable.prototype = { toString: function () { return ["[", this.getClassName(), this.Tp, this.ld, this.BG, this.uE, this.TM, "]"].join("|"); }, getClassName: function () { return "DynaMetapushTable"; }, NB: function () { this.Xb(ls.DynaMetapushTable, 'NB'); this.Al.log('NB'); this.dZ = null; }, EM: function () { this.Xb(ls.DynaMetapushTable, 'EM'); this.gp = 1; this.vX = 0; this.xg = false; }, jN: function () { this.Xb(ls.DynaMetapushTable, 'jN'); var Oa = null; var jv = this.aE; for (var qP in jv.XC) { var Oa = jv.XC[qP]; if (this.onChangingValues) { try { this.onChangingValues(Oa.Tk(), null); } catch (XF) { this.Al.ET(XF, this.onChangingValues, "onChangingValues"); } } Oa.parentNode.removeChild(Oa); jv.PB(qP, true); } jv.sP = 0; jv.kM = jv.TD; }, setClearOnAdd: ls.Ir, setMetapushFields: function (Nl, uN) { this.Al.log("setMetapushFields", arguments); if (this.Tq()) { this.Al.pE(this.oB, "setMetapushFields"); } this.hv = this.Qn(Nl, "setMetapushFields", this.hv, true, 1); this.keyCode = this.Qn(uN, "setMetapushFields", this.keyCode, true, 1); }, onChangingValues: function (vk, ZM) { return; }, setAutoScroll: function (type, cn) { this.Yn(type, cn); }, setMetapushSort: function (gC, gl, JL, fY) { this.SD(gC, gl, JL, fY); }, getMetapushSortField: function () { return this.jvU(); }, getMetapushSortFieldName: function () { return this.jEk(); }, isDescendingSort: function () { return this.qEp(); }, isNumericSort: function () { return this.ABP(); }, isCommaAsDecimalSeparator: function () { return this.CvC(); }, setMaxDynaRows: function (mI) { this.Bd(mI); if (this.Tq()) { this.he(); this.Uo(); this.hi(1); } }, getMaxDynaRows: function () { return this.bfE(); }, onCurrentPagesChanged: function (tp) { return; }, goToPage: function (gp) { if (!this.Tq()) { this.Al.pE(this.Vq, "goToPage"); } if (this.mI == 0) { this.Al.pE("Can't switch pages while 'no-page mode' is used", "goToPage"); } var iS = new Number(gp); if (isNaN(iS)) { this.Al.pE("A page number must be provided. " + gp + " is not a valid value", "goToPage"); } if (iS <= 0) { this.Al.pE("A page number must be greater than 0. " + gp + " is not a valid value", "goToPage"); } this.hi(iS); }, getDisplayedPage: function () { if (this.mI == 0) { return 1; } else { return this.gp; } }, getCurrentPages: function () { return this.vX; }, oU: function (qP, JW, oR) { var Ge = this.aE; var NF = this.eE.ww(qP, this.hv); var vD; if (this.rZ != null) { vD = this.hLr(this.eE.ww(qP, this.rZ)); } var pd = null; var sY = null; var UK = Ge.tU; var lw = Ge.wO; var gV = Ge.gV; var IL = Ge.XC[qP]; var DQ = true; if (!this.xg || this.mI > 0) { DQ = false; } var VX = false; var Tk = null; if (NF == "DELETE") { DQ = false; if (IL) { Ge.sP--; VX = true; if (this.onChangingValues) { try { this.onChangingValues(IL.Tk(), null); } catch (XF) { this.Al.ET(XF, this.onChangingValues, "onChangingValues"); } } if (!this.Tq()) { return true; } if (IL.parentNode == UK) { UK.removeChild(IL); this.pa(lw, UK, this.mI); } else if (IL.parentNode == lw) { lw.removeChild(IL); } else { gV.removeChild(IL); if (this.pa(UK, gV, this.mI * (this.gp - 1))) { this.pa(lw, UK, this.mI); } } this.Al.sX(!oR, 'oU', 3); this.WX.AP(qP); this.Qo.AP(qP); this.WV.AP(qP); this.eE.AP(qP); Ge.PB(qP, true); } } else { var TQ = false; var He; if (!IL) { Tk = new ls.JR(this.ld, qP, qP, this.keyCode); Ge.XC[qP] = Tk; } else { Tk = Ge.XC[qP]; pd = Tk.parentNode; He = this.PMx(Tk); if (this.rZ != null) { if (He != null && vD != null) { if (He.toString() == vD.toString()) { TQ = true; } } else if (He == null && vD == null) { TQ = true; } } } var iH = ls.AL; iH.iE(this, qP, JW, oR); iH.Rc = qP; if (this.onChangingValues) { try { this.onChangingValues(Tk.Tk(), iH); } catch (XF) { this.Al.ET(XF, this.onChangingValues, "onChangingValues"); } } if (!this.Tq()) { return true; } if (this.rZ != null && TQ == false) { Ge.Xf[qP] = vD; var kO = 1; var fl = Ge.sP; var TS = -1; var pF = -1; while (kO < fl) { pF = Math.floor((kO + fl) / 2); var lU = null; if (pF <= Ge.sP) { var VJ = this.JuO(pF); if (VJ == Tk) { lU = He; TS = pF; } else { lU = this.PMx(VJ); } } if (this.tun(vD, lU)) { fl = pF - 1; } else { kO = pF + 1; } } var Jx = -1; if (kO == fl) { var VJ = this.JuO(kO); var DC = this.PMx(VJ); if (this.tun(vD, DC)) { Jx = kO; } else { Jx = kO + 1; } } else { Jx = kO; } this.Wn(Jx, Tk); if (!IL) { Ge.sP++; VX = true; } } if (this.rZ == null) { if (!IL) { Ge.sP++; VX = true; if (lw.length > 0 || (UK.length == this.mI && this.mI > 0)) { lw.appendChild(Tk); } else if (UK.length > 0 || gV.length == (this.mI * (this.gp - 1))) { UK.appendChild(Tk); } else { gV.appendChild(Tk); } } } this.AJ(qP, qP, qP, false, iH); } if (Tk) { if (Tk.Fb) { if (DQ) { this.JQ(Tk.Fb); } } } if (VX) { this.he(); } }, Uo: function () { var uX = this.rZ; var IP = new ls.CL(); var HG = this.aE; var UK = HG.tU; var lw = HG.wO; var gV = HG.gV; var x = 1; while (HG.sP > 0) { var KX = this.JuO(x); if (!KX) { HG.sP--; x++; continue; } if (uX == null) { IP.appendChild(KX); HG.sP--; continue; } var tq = KX.qP; if (tq == "") { HG.sP--; x++; continue; } var vD = this.eE.ww(tq, this.rZ); vD = this.hLr(vD); HG.Xf[tq] = vD; var kO = 0; var fl = IP.length - 1; while (kO < fl) { var pF = Math.floor((kO + fl) / 2); var VJ = IP.tF(pF); var Cn = this.PMx(VJ); if (!Cn) { this.Al.sX(false, 'Uo', 1); } if (this.tun(vD, Cn)) { fl = pF - 1; } else { kO = pF + 1; } } var VJ = IP.tF(kO); if (kO == fl) { var DC = this.PMx(VJ); if (this.tun(vD, DC)) { IP.insertBefore(KX, VJ); } else { var qp = IP.tF(fl + 1); if (!qp) { IP.appendChild(KX); } else { IP.insertBefore(KX, qp); } } } else { if (VJ) { IP.insertBefore(KX, VJ); } else { IP.appendChild(KX); } } HG.sP--; } var OR = 0; while (OR < IP.length) { HG.sP++; var Qs = IP.tF(OR); var lU = Qs.qP; if (HG.sP <= (this.mI * (this.gp - 1))) { gV.appendChild(Qs); } else if ((this.mI <= 0) || (HG.sP <= (this.mI * this.gp))) { UK.appendChild(Qs); } else { lw.appendChild(Qs); } } }, PMx: function (VJ) { if (!VJ) { return null; } var DC = VJ.qP; if (DC == "") { return null; } return this.aE.Xf[DC]; }, hi: function (rN) { var Bi = this.aE; var UK = Bi.tU; var lw = Bi.wO; var gV = Bi.gV; var AR = this.gp; if (AR >= rN) { while (this.Gj(gV, UK, (rN - 1) * this.mI)) { this.Gj(UK, lw, this.mI); } } else { while (this.pa(UK, gV, (rN - 1) * this.mI)) { this.pa(lw, UK, this.mI); } } this.gp = rN; }, Wn: function (oi, Fb) { var jv = this.aE; if (oi > jv.sP + 1) { return; } else if (oi <= 0) { return; } if (Fb == this.JuO(oi)) { return; } var pd = Fb.parentNode; var aV; var UK = jv.tU; var lw = jv.wO; var gV = jv.gV; var eC = this.JuO(oi); if (eC == null) { if (lw.length > 0 || (UK.length == this.mI && this.mI > 0)) { lw.appendChild(Fb); aV = lw; } else if (this.mI == 0 || UK.length > 0 || gV.length == (this.mI * (this.gp - 1))) { UK.appendChild(Fb); aV = UK; } else { gV.appendChild(Fb); aV = gV; } } else { aV = eC.parentNode; aV.insertBefore(Fb, eC); } if (aV == UK) { if ((!pd) || (pd == lw)) { this.Gj(UK, lw, this.mI); } else if (pd == gV) { this.pa(UK, gV, this.mI * (this.gp - 1)); } } else if (aV == gV) { if (pd != gV) { if (this.Gj(gV, UK, this.mI * (this.gp - 1))) { this.Gj(UK, lw, this.mI); } } } else if (aV == lw) { if (pd == gV) { this.pa(UK, gV, this.mI * (this.gp - 1)); } this.pa(lw, UK, this.mI); } }, pa: function (LE, pJ, MB) { if (this.mI <= 0) { return false; } if (pJ.length < MB && LE.length > 0) { var wo = LE.tF(0); pJ.appendChild(wo); return true; } return false; }, Gj: function (LE, pJ, oX) { if (this.mI <= 0) { return false; } if (LE.length > oX) { var wo = LE.tF(LE.length - 1); pJ.insertBefore(wo, pJ.tF(0)); return true; } return false; }, JuO: function (oi) { var jv = this.aE; var UK = jv.tU; var lw = jv.wO; var gV = jv.gV; if (oi > jv.sP) { return null; } else if (oi <= 0) { return null; } if (oi <= gV.length) { return gV.tF(oi - 1); } else { oi -= gV.length; if (oi <= UK.length) { return UK.tF(oi - 1); } else { oi -= UK.length; return lw.tF(oi - 1); } } this.Al.sX(false, 'JuO', oi, this); return null; }, he: function () { var dX = 0; if (this.mI <= 0) { dX = 1; } else { dX = Math.ceil(this.aE.sP / this.mI); } if (this.vX != dX) { this.vX = dX; if (this.onCurrentPagesChanged) { try { this.onCurrentPagesChanged(this.vX); } catch (XF) { this.Al.ET(XF, this.onCurrentPagesChanged, "onCurrentPagesChanged"); } } } return dX; } }; ls.RT(ls.DynaMetapushTable, ls.VisualTable); ls.RT(ls.DynaMetapushTable, ls.Fv, "O"); ls.RT(ls.DynaMetapushTable, ls.Oq, "O"); })(Lightstreamer); (function (ls) { Lightstreamer.MultiDynaMetapushTable = function (bP, Dl, iU, Ve) { this.hS(ls.MultiDynaMetapushTable, bP, Dl, iU); this.IF = null; this.UL = {}; this.sr = false; this.Vw = null; this.ea = ls.PU; this.RA(Ve); this.Al.log(this.getClassName(), arguments); }; Lightstreamer.MultiDynaMetapushTable.prototype = { toString: function () { return ["[", this.getClassName(), this.Tp, this.ld, this.BG, this.uE, this.TM, "]"].join("|"); }, getClassName: function () { return "MultiDynaMetapushTable"; }, getUnderlyingSchema: function () { return this.Vw; }, setUnderDataAdapter: function (Lx) { this.Al.log("setUnderDataAdapter", arguments); this.IF = Lx; }, NB: function () { this.Xb(ls.MultiDynaMetapushTable, 'NB'); this.Al.log('NB'); if (this.sr) { this.Vw = null; } }, EM: function () { this.Xb(ls.MultiDynaMetapushTable, 'EM'); this.aF(); } }; ls.RT(ls.MultiDynaMetapushTable, ls.DynaMetapushTable); ls.RT(ls.MultiDynaMetapushTable, ls.vM, "O"); })(Lightstreamer); (function (ls) { ls.RJ = function () { }; ls.RJ.prototype = { Sqp: function (ED, bW, IV) { var ux = new Number(ED); var EO = (ux - bW) / IV; return Math.round(EO); }, kpN: function (ED, bW, IV) { return (ED * IV) + bW; }, ju: function () { for (var Ad = 0; Ad < this.mq.length; Ad++) { if (this.mq[Ad] && ls.pu.Wi(this.mq[Ad])) { this.mq[Ad].parentNode.removeChild(this.mq[Ad]); } } this.mq = []; } }; })(Lightstreamer); (function (ls) { Lightstreamer.ChartTable = function (bP, Dl, iU) { this.hS(ls.ChartTable, bP, Dl, iU); this.oc(); this.fG(); this.OF = null; this.XE = document.createElement("div"); this.XE.style.position = "relative"; this.XE.style.overflow = "visible"; this.offsetY = 0; this.offsetX = 0; this.screenX = null; this.screenY = null; this.ec = {}; this.mq = []; this.ke = new ls.LabelFormatter(); this.fI = false; this.TC = 0; this.DG = null; this.df = null; this.Xj = null; this.Pg = null; this.ea = ls.rU; this.Al.log(this.getClassName(), arguments); }; Lightstreamer.ChartTable.prototype = { toString: function () { return ["[", this.getClassName(), this.Tp, this.ld, this.BG, this.uE, this.TM, "]"].join("|"); }, getClassName: function () { return "ChartTable"; }, HA: function () { return ls.kx.HA(this.ld, this.ea); }, je: function (ld) { this.Al.log('je', 1, this); var ld = this.ld; var gr; gr = ls.pu.nl(document, ["div", "span"]); var pF = 0; for (pF = 0; pF < gr.length; pF++) { var UJ = gr[pF].Qs.getAttribute("table"); if (!UJ || UJ != ld) { continue; } this.eA(gr[pF].Qs); return true; } this.tJ(); return false; }, jN: function () { this.Xb(ls.ChartTable, 'jN'); this.ju(); for (var hP in this.ec) { this.ec[hP].ju(); delete (this.ec[hP]); } if (this.OF && ls.pu.Wi(this.OF)) { this.OF.parentNode.removeChild(this.OF); } delete (this.OF); this.eA(this.XE.parentNode, true); }, setAreaClass: function (qt) { if (!this.OF) { this.qt = qt; } else { this.OF.className = qt; } this.Al.log("setAreaClass", qt); }, setAreaTop: function (top) { this.offsetY = this.Qn(top, "setAreaTop", this.offsetY, false, 0); if (this.OF) { this.OF.style.top = this.offsetY; } }, setAreaLeft: function (left) { this.offsetX = this.Qn(left, "setAreaLeft", this.offsetX, false, 0); if (this.OF) { this.OF.style.left = this.offsetX; } }, setAreaWidth: function (width) { this.screenX = this.Qn(width, "setAreaWidth", this.screenX, false, 0); if (this.OF) { this.OF.style.width = this.screenX; if (this.Xj != null) { this.SG(); this.lq(); for (var lH in this.ec) { if (!this.ec[lH]) { continue; } else if (this.ec[lH].HX.length > 0) { this.ec[lH].VR(); } } } } }, setAreaHeight: function (height) { this.screenY = this.Qn(height, "setAreaHeight", this.screenY, false, 0); if (this.OF) { this.OF.style.height = this.screenY; for (var lH in this.ec) { if (!this.ec[lH]) { continue; } else if (this.ec[lH].Ue != null) { this.ec[lH].un(); this.ec[lH].rl(); if (this.ec[lH].HX.length > 0) { this.ec[lH].VR(); } } } } }, Tl: function () { this.OF = document.createElement("div"); this.OF.style.position = "absolute"; this.OF.style.overflow = "hidden"; this.XE.appendChild(this.OF); if (this.qt) { this.OF.className = this.qt; } this.OF.style.top = this.offsetY + "px"; this.OF.style.left = this.offsetX + "px"; if (this.screenX !== null) { this.OF.style.width = this.screenX + "px"; } if (this.scrrenY !== null) { this.OF.style.height = this.screenY + "px"; } }, eA: function (bl, fx) { if (this.OF) { return; } if (bl && bl.appendChild) { this.Tl(); if (this.XE.parentNode != bl) { bl.appendChild(this.XE); } if (this.screenX == null) { this.screenX = bl.offsetWidth; } if (this.screenY == null) { this.screenY = bl.offsetHeight; } if (this.Xj != null) { this.SG(); this.lq(); } for (var lH in this.ec) { if (!this.ec[lH]) { continue; } else if (this.ec[lH].Ue != null) { this.ec[lH].un(); this.ec[lH].rl(); } } this.Al.log('eA', bl); } else if (!fx) { this.tJ(); } }, tJ: function () { this.Al.error("A DOM element must be provided as an anchor for the chart", "addTable"); }, MYl: function () { if (this.OF) { return this.OF.cloneNode(true); } else { this.Al.error("Sorry, nothing to photograph", 'MYl'); } }, removeLine: function (id) { if (this.ec[id]) { this.ec[id].UX(); this.ec[id].ju(); this.ec[id] = null; } else { this.Al.error("No line to remove with id " + id, "removeLine"); } }, SOQ: function (iM, jq, Ds, Yg) { this.Al.log('SOQ', arguments); var Om = document.createElement("div"); if (iM != null) { Om.className = iM; } Om.style.position = "absolute"; var sT = document.createTextNode(jq); Om.appendChild(sT); this.XE.appendChild(Om); var mK = Om.offsetWidth; if (Yg.toUpperCase() == "X") { Om.style.top = (this.screenY + 5 + this.offsetY) + "px"; Om.style.left = (Ds - (Om.offsetWidth / 2) + this.offsetX) + "px"; } else if (Yg.toUpperCase() == "Y") { Om.style.left = (this.offsetX - mK) + "px"; Om.style.top = ((this.screenY - Ds) - (Om.offsetHeight / 2) + this.offsetY) + "px"; } return Om; }, addLine: function (MZ, id) { this.Al.log("addLine", MZ); MZ.LpT(this); if (this.ec[id] != null) { this.Al.error("A line with this id already exists. Overwriting", "addLine"); } MZ.fPh(id); MZ.St = this.ug.FZ(MZ.Wf); MZ.eH = this.QI.PE(MZ.vx); if (!MZ.Ue || !MZ.wb || !MZ.eH) { this.Al.pE("Cannot create line. Please declare the Y axis", "addLine"); return; } if (this.screenY != null && this.OF) { MZ.un(); MZ.rl(); } this.ec[id] = MZ; }, cv: function (Cl, YN, kE) { this.Al.log('cv', arguments); var Op = this.ec[kE]; var Ml = this.eZt(Cl); var Zn = Op.JGB(YN); if (Op.cc == null) { Op.cc = Ml; Op.dl = Zn; return; } this.Al.log('cv', 0, Op.cc, Op.dl, Ml, Zn); var RG = Ml - Op.cc; var Jl = Zn - Op.dl; this.Al.log('cv', 1, "X", RG, "Y", Jl); var ZV = Math.abs(RG); var kV = Math.abs(Jl); var OD = null; var eJ = 0; var qx = 0; var Ui = 0; if (ZV >= kV) { Ui = Jl / RG; eJ = RG; qx = RG >= 0 ? 1 : -1; } else { Ui = RG / Jl; eJ = Jl; qx = Jl >= 0 ? 1 : -1; } var Si = 0; var Cb = 0; var dP = null; var MR = null; var FM = true; var CX = true; if (ZV < kV) { CX = false; } for (var oi = 0; oi != eJ; oi += qx) { var Ke = 0; var lc = 0; var Ft = 0; var Jp = 0; var aA = false; this.Al.log('cv', 2); if ((oi + qx) == eJ) { this.Al.log('cv', 6); aA = true; FM = true; } OD = document.createElement("div"); if (aA) { OD.className = Op.Bx; } else { OD.className = Op.no; } OD.style.position = "absolute"; OD.style.fontSize = "0px"; this.OF.appendChild(OD); Op.nG[Op.nG.length] = OD; if (FM) { FM = false; dP = Math.ceil(OD.offsetWidth / 2); MR = Math.ceil(OD.offsetHeight / 2); Si = OD.offsetWidth; Cb = OD.offsetHeight; this.Al.log('cv', 3, Si, Cb); } Ft = Si; Jp = Cb; if (CX) { Ke = Math.round(oi + Op.cc); lc = Math.round(this.screenY - (Ui * oi + Op.dl)); if (!aA) { var iQ = 0; while (((oi + qx) != (eJ - qx)) && (lc == Math.round(this.screenY - (Ui * (oi + qx) + Op.dl)))) { oi += qx; iQ++; } this.Al.log('cv', 4, iQ); var TX = dP * iQ; Ft = Si + TX; if (qx < 0) { Ke -= TX; } } } else { Ke = Math.round(Ui * oi + Op.cc); lc = Math.round(this.screenY - (oi + Op.dl)); if (!aA) { var iQ = 0; while (((oi + qx) != (eJ - qx)) && (Ke == Math.round(Ui * (oi + qx) + Op.cc))) { oi += qx; iQ++; } this.Al.log('cv', 5, iQ); var TX = MR * iQ; Jp = Cb + TX; if (qx > 0) { lc -= TX; } } } Ke -= Math.floor(dP / 2); lc -= Math.floor(MR / 2); OD.style.left = Ke + "px"; OD.style.top = lc + "px"; OD.style.width = Ft + "px"; OD.style.height = Jp + "px"; this.Al.log('cv', 7, OD.style.left, OD.style.top, OD.style.width, OD.style.height); this.Al.log('cv', 8, OD.offsetLeft, OD.offsetTop, OD.offsetWidth, OD.offsetHeight); } this.Al.log('cv', 10); Op.cc = Ml; Op.dl = Zn; }, setXAxis: function (field, fY) { this.Al.log("setXAxis", arguments); this.DG = this.QI.PE(field); if (fY) { this.fI = true; } else { this.fI = false; } }, positionXAxis: function (min, max) { this.Al.log("positionXAxis", arguments); this.Xj = this.Qn(max, "positionXAxis", this.Xj); this.df = this.Qn(min, "positionXAxis", this.df); if (this.OF) { if (this.screenX != null) { this.SG(); this.lq(); } for (var lH in this.ec) { if (!this.ec[lH]) { continue; } else if (this.ec[lH].HX.length > 0) { this.ec[lH].VR(); } } } this.Al.log("positionXAxis", 2); }, SG: function () { this.Pg = (this.Xj - this.df) / this.screenX; this.Al.log('SG', this.Pg); }, setXLabels: function (og, HZ, ke) { this.TC = og; this.Zr = HZ; if (ke != null) { this.ke = ke; } if (this.Pg != null && this.OF) { this.lq(); } this.Al.log("setXLabels", arguments); }, lq: function () { this.ju(); var kl = ""; var Ds = -1; if (this.TC <= 0) { return; } if (this.TC > 0) { kl = this.ke.formatValue(this.df); Ds = this.eZt(this.df); this.mq[this.mq.length] = this.SOQ(this.Zr, kl, Ds, "X"); } if (this.TC > 1) { kl = this.ke.formatValue(this.Xj); Ds = this.eZt(this.Xj); this.mq[this.mq.length] = this.SOQ(this.Zr, kl, Ds, "X"); } if (this.TC > 2) { var sU = this.TC - 1; var Kd = (this.Xj - this.df) / sU; var Cq = this.df; for (var FY = 1; FY < sU; FY++) { Cq += Kd; kl = this.ke.formatValue(Cq); Ds = this.eZt(Cq); this.mq[this.mq.length] = this.SOQ(this.Zr, kl, Ds, "X"); } } this.Al.log('lq', arguments); }, onXOverflow: function (cc, SU, uD) { this.Al.log("onXOverflow", arguments); if (cc > uD) { var fU = (uD + SU) / 2; var YB = uD - SU; this.positionXAxis(fU, fU + YB); } else { } }, eZt: function (ED) { return this.Sqp(ED, this.df, this.Pg); }, oU: function (hf, JW, oR) { var qP = hf; for (var lH in this.ec) { if (!this.ec[lH]) { continue; } else if (hf == this.ec[lH].St) { var EQ = null; var ED = this.eE.ww(hf, this.DG); EQ = ls.tw(ED, this.fI); if (EQ < this.df) { continue; } if (EQ > this.Xj) { if (this.onXOverflow) { try { this.onXOverflow(EQ, this.df, this.Xj); } catch (XF) { this.Al.ET(XF, this.onXOverflow, "onXOverflow"); } } if (!this.Tq()) { return; } } var DZ = null; var ED = this.eE.ww(hf, this.ec[lH].eH); DZ = ls.tw(ED, this.BC); if (DZ > this.ec[lH].Ue || DZ < this.ec[lH].wb) { if (this.ec[lH].onYOverflow) { try { this.ec[lH].onYOverflow(DZ, this.ec[lH].wb, this.ec[lH].Ue); } catch (XF) { this.Al.ET(XF, this.ec[lH].onYOverflow, "onYOverflow"); } } if (!this.Tq()) { return; } } var Lq = this.ec[lH].HX.length; this.ec[lH].HX[Lq] = EQ; Lq = this.ec[lH].wp.length; this.ec[lH].wp[Lq] = DZ; this.cv(EQ, DZ, lH); } } } }; ls.RT(ls.ChartTable, ls.VisualTable); ls.RT(ls.ChartTable, ls.RJ, "O"); })(Lightstreamer); (function (ls) { Lightstreamer.ChartLine = function () { this.UK = null; this.Wf = null; this.St = null; this.ld = null; this.Bx = ""; this.no = ""; this.BC = false; this.ix = null; this.eH = null; this.wb = null; this.Ue = null; this.wS = null; this.BF = 0; this.ke = new ls.LabelFormatter(); this.nG = []; this.HX = []; this.wp = []; this.mq = []; this.cc = null; this.dl = null; this.Al = ls.gE.getLogger("TL"); this.Al.log("ChartLine", arguments); }; Lightstreamer.ChartLine.prototype = { Qn: ls.Le, UX: function () { this.Al.log('UX', this.ld); if (this.nG[0] && ls.pu.Wi(this.nG[0])) { for (var YF = 0; YF < this.nG.length; YF++) { this.nG[YF].parentNode.removeChild(this.nG[YF]); } } this.nG = []; this.wp = []; this.HX = []; this.cc = null; this.dl = null; }, VR: function () { this.Al.log('VR', 1); var Sf = this.HX; var UB = this.wp; this.UX(); var pd = false; var SH, MG; while (Sf.length > 0) { if ((Sf.length > 1 && Sf[1] >= this.UK.df) || Sf[0] >= this.UK.df) { this.UK.cv(Sf[0], UB[0], this.ld); this.HX[this.HX.length] = Sf[0]; this.wp[this.wp.length] = UB[0]; } Sf.shift(); UB.shift(); } this.Al.log('VR', 2); }, LpT: function (UK) { this.UK = UK; this.Al.log('LpT', UK); }, fPh: function (ld) { this.ld = ld; this.Al.log('fPh', ld); }, setPointClass: function (IN) { this.Bx = IN; this.Al.log("setPointClass", IN); }, setLineClass: function (DW) { this.no = DW; this.Al.log("setLineClass", DW); }, setYAxis: function (item, field, fY) { this.Al.log("setYAxis", arguments); this.Wf = item; this.vx = field; if (fY) { this.BC = true; } else { this.BC = false; } }, positionYAxis: function (min, max) { this.Al.log("positionYAxis", arguments); this.Ue = this.Qn(max, "positionYAxis", this.Ue); this.wb = this.Qn(min, "positionYAxis", this.wb); if (this.UK && this.UK.screenY != null && this.UK.OF && this.UK.OF.parentNode) { this.un(); this.rl(); if (this.HX.length > 0) { this.VR(); } } this.Al.log("positionYAxis", 2); }, un: function () { this.wS = (this.Ue - this.wb) / this.UK.screenY; ; this.Al.log('un', this.wS); }, setYLabels: function (og, HZ, ke) { this.BF = og; this.Il = HZ; if (ke != null) { this.ke = ke; } if (this.wS != null && this.UK && this.UK.OF && this.UK.OF.parentNode) { this.rl(); } this.Al.log("setYLabels", arguments); }, rl: function () { this.ju(); var kl = ""; var Ds = -1; if (this.BF <= 0) { return; } if (this.BF > 0) { kl = this.ke.formatValue(this.wb); Ds = this.JGB(this.wb); this.mq[this.mq.length] = this.UK.SOQ(this.Il, kl, Ds, "Y"); } if (this.BF > 1) { kl = this.ke.formatValue(this.Ue); Ds = this.JGB(this.Ue); this.mq[this.mq.length] = this.UK.SOQ(this.Il, kl, Ds, "Y"); } if (this.BF > 2) { var sU = this.BF - 1; var Kd = (this.Ue - this.wb) / sU; var Cq = this.wb; for (var FY = 1; FY < sU; FY++) { Cq += Kd; kl = this.ke.formatValue(Cq); Ds = this.JGB(Cq); this.mq[this.mq.length] = this.UK.SOQ(this.Il, kl, Ds, "Y"); } } this.Al.log('rl', arguments); }, onYOverflow: function (dl, SY, tT) { this.Al.log("onYOverflow", arguments); var KY = (tT - SY) / 2; if (dl > tT) { var DV = tT + KY; if (dl > DV) { DV = dl; } this.positionYAxis(SY, DV); } else if (dl < SY) { var Rb = SY - KY; if (dl < Rb) { Rb = dl; } this.positionYAxis(Rb, tT); } }, JGB: function (ED) { return this.Sqp(ED, this.wb, this.wS); } }; ls.RT(ls.ChartLine, ls.RJ, "O"); })(Lightstreamer); Lightstreamer.LabelFormatter = function () { }; Lightstreamer.LabelFormatter.prototype = { formatValue: function (ux) { return ux; } }; (function (ls) { ls.Cp = null; ls.kx = new ls.JM(); ls.dA = new ls.Sg(); ls.wx = new ls.Za(ls.dA, new ls.Aq(), ls.aL, false); ls.Ki = new ls.mL(); ls.mR = new ls.qM(ls.dA); var sE = [function () { if (ls.Cp) { ls.Cp.FI(); } }, function () { if (ls.FlashBridge) { ls.FlashBridge.WB(); } } ]; ls.NG = new ls.Dx(sE); ls.gE.iq(); ls.ms("beforeunload", function () { if (ls.Cp) { ls.Cp.Zm(); } }); ls.ms("unload", function () { ls.kx.UW(); ls.dA.VBa(); ls.Vm = true; }); ls.ft = new ls.bD(); ls.AO = new ls.mb(); ls.pZ = new ls.rk(); if (ls.lb) { ls.sO = new ls.lb(20); } ls.DS(); if (window.Lightstreamer === ls) { if (!ls.avoidLSGlobals) { ls.lV(); } } else { window.Lightstreamer = ls; ls.avoidLSGlobals = true; } ls.Zp = new ls.RowInfo(); ls.ZM = new ls.UpdateItemInfo(); ls.AL = new ls.VisualUpdateInfo(); ls.eu.log("pushpage", "pushpage parsed"); })(Lightstreamer); return Lightstreamer; }); })(window.define || function (tm, qN) { qN(window.Lightstreamer) })//lspushpage