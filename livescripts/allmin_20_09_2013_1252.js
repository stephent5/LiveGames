(function(a,c){function g(a){var b=Ea[a]={};return i.each(a.split(v),function(a,F){b[F]=!0}),b}function d(a,b,f){if(f===c&&a.nodeType===1)if(f="data-"+b.replace(gc,"-$1").toLowerCase(),f=a.getAttribute(f),typeof f=="string"){try{f=f==="true"?!0:f==="false"?!1:f==="null"?null:+f+""===f?+f:Fa.test(f)?i.parseJSON(f):f}catch(d){}i.data(a,b,f)}else f=c;return f}function b(a){for(var b in a)if(!(b==="data"&&i.isEmptyObject(a[b]))&&b!=="toJSON")return!1;return!0}function f(){return!1}function h(){return!0}
function j(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function k(a,b){do a=a[b];while(a&&a.nodeType!==1);return a}function m(a,b,c){b=b||0;if(i.isFunction(b))return i.grep(a,function(a,F){return!!b.call(a,F,a)===c});if(b.nodeType)return i.grep(a,function(a){return a===b===c});if(typeof b=="string"){var f=i.grep(a,function(a){return a.nodeType===1});if(Lb.test(b))return i.filter(b,f,!c);b=i.filter(b,f)}return i.grep(a,function(a){return i.inArray(a,b)>=0===c})}function q(a){var b=Mb.split("|"),
a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function n(a,b){if(b.nodeType===1&&i.hasData(a)){var c,f,d;f=i._data(a);var g=i._data(b,f),h=f.events;if(h)for(c in delete g.handle,g.events={},h){f=0;for(d=h[c].length;f<d;f++)i.event.add(b,c,h[c][f])}g.data&&(g.data=i.extend({},g.data))}}function s(a,b){var c;if(b.nodeType===1)b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?(b.parentNode&&
(b.outerHTML=a.outerHTML),i.support.html5Clone&&a.innerHTML&&!i.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):c==="input"&&pb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(i.expando)}function p(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!=
"undefined"?a.querySelectorAll("*"):[]}function l(a){pb.test(a.type)&&(a.defaultChecked=a.checked)}function z(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),f=b,d=Nb.length;d--;)if(b=Nb[d]+c,b in a)return b;return f}function C(a,b){return a=b||a,i.css(a,"display")==="none"||!i.contains(a.ownerDocument,a)}function x(a,b){for(var c,f,d=[],g=0,h=a.length;g<h;g++)if(c=a[g],c.style)d[g]=i._data(c,"olddisplay"),b?(!d[g]&&c.style.display==="none"&&(c.style.display=""),c.style.display===
""&&C(c)&&(d[g]=i._data(c,"olddisplay",ba(c.nodeName)))):(f=la(c,"display"),!d[g]&&f!=="none"&&i._data(c,"olddisplay",f));for(g=0;g<h;g++)if(c=a[g],c.style&&(!b||c.style.display==="none"||c.style.display===""))c.style.display=b?d[g]||"":"none";return a}function T(a,b,c){return(a=ic.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function u(a,b,c,f){for(var b=c===(f?"border":"content")?4:b==="width"?1:0,d=0;b<4;b+=2)c==="margin"&&(d+=i.css(a,c+ya[b],!0)),f?(c==="content"&&(d-=parseFloat(la(a,"padding"+
ya[b]))||0),c!=="margin"&&(d-=parseFloat(la(a,"border"+ya[b]+"Width"))||0)):(d+=parseFloat(la(a,"padding"+ya[b]))||0,c!=="padding"&&(d+=parseFloat(la(a,"border"+ya[b]+"Width"))||0));return d}function O(a,b,c){var f=b==="width"?a.offsetWidth:a.offsetHeight,d=!0,g=i.support.boxSizing&&i.css(a,"boxSizing")==="border-box";if(f<=0||f==null){f=la(a,b);if(f<0||f==null)f=a.style[b];if(qb.test(f))return f;d=g&&(i.support.boxSizingReliable||f===a.style[b]);f=parseFloat(f)||0}return f+u(a,b,c||(g?"border":"content"),
d)+"px"}function ba(a){if(rb[a])return rb[a];var b=i("<"+a+">").appendTo(y.body),c=b.css("display");b.remove();if(c==="none"||c===""){ua=y.body.appendChild(ua||i.extend(y.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ga||!ua.createElement)Ga=(ua.contentWindow||ua.contentDocument).document,Ga.write("<!doctype html><html><body>"),Ga.close();b=Ga.body.appendChild(Ga.createElement(a));c=la(b,"display");y.body.removeChild(ua)}return rb[a]=c,c}function M(a,b,c,f){var d;if(i.isArray(b))i.each(b,
function(b,d){c||Oa.test(a)?f(a,d):M(a+"["+(typeof d=="object"?b:"")+"]",d,c,f)});else if(!c&&i.type(b)==="object")for(d in b)M(a+"["+d+"]",b[d],c,f);else f(a,b)}function ha(a){return function(b,c){var F;typeof b!="string"&&(c=b,b="*");var f,d,g=b.toLowerCase().split(v),h=0,j=g.length;if(i.isFunction(c))for(;h<j;h++)f=g[h],(d=/^\+/.test(f))&&(f=f.substr(1)||"*"),F=a[f]=a[f]||[],f=F,f[d?"unshift":"push"](c)}}function U(a,b,f,d,g,h){g=g||b.dataTypes[0];h=h||{};h[g]=!0;for(var j,g=a[g],i=0,k=g?g.length:
0,l=a===Ha;i<k&&(l||!j);i++)j=g[i](b,f,d),typeof j=="string"&&(!l||h[j]?j=c:(b.dataTypes.unshift(j),j=U(a,b,f,d,j,h)));return(l||!j)&&!h["*"]&&(j=U(a,b,f,d,"*",h)),j}function V(a,b){var f,d,g=i.ajaxSettings.flatOptions||{};for(f in b)b[f]!==c&&((g[f]?a:d||(d={}))[f]=b[f]);d&&i.extend(!0,a,d)}function fa(){try{return new a.XMLHttpRequest}catch(b){}}function H(){return setTimeout(function(){Za=c},0),Za=i.now()}function ja(a,b){i.each(b,function(b,c){for(var f=($a[b]||[]).concat($a["*"]),d=0,g=f.length;d<
g;d++)if(f[d].call(a,b,c))break})}function ea(a,b,c){var f=0,d=sb.length,g=i.Deferred().always(function(){delete h.elem}),h=function(){for(var b=Za||H(),b=Math.max(0,j.startTime+j.duration-b),c=1-(b/j.duration||0),f=0,d=j.tweens.length;f<d;f++)j.tweens[f].run(c);return g.notifyWith(a,[j,c,b]),c<1&&d?b:(g.resolveWith(a,[j]),!1)},j=g.promise({elem:a,props:i.extend({},b),opts:i.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Za||H(),duration:c.duration,tweens:[],createTween:function(b,
c){var f=i.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(f),f},stop:function(b){for(var c=0,f=b?j.tweens.length:0;c<f;c++)j.tweens[c].run(1);return b?g.resolveWith(a,[j,b]):g.rejectWith(a,[j,b]),this}}),c=j.props;for(G(c,j.opts.specialEasing);f<d;f++)if(b=sb[f].call(j,a,c,j.opts))return b;return ja(j,c),i.isFunction(j.opts.start)&&j.opts.start.call(a,j),i.fx.timer(i.extend(h,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}
function G(a,b){var F;var c,f,d,g,h;for(c in a)if(f=i.camelCase(c),d=b[f],g=a[c],i.isArray(g)&&(d=g[1],F=a[c]=g[0],g=F),c!==f&&(a[f]=g,delete a[c]),(h=i.cssHooks[f])&&"expand"in h)for(c in g=h.expand(g),delete a[f],g)c in a||(a[c]=g[c],b[c]=d);else b[f]=d}function t(a,b,c,f,d){return new t.prototype.init(a,b,c,f,d)}function o(a,b){for(var c,f={height:a},d=0,b=b?1:0;d<4;d+=2-b)c=ya[d],f["margin"+c]=f["padding"+c]=a;return b&&(f.opacity=f.width=a),f}function r(a){return i.isWindow(a)?a:a.nodeType===
9?a.defaultView||a.parentWindow:!1}var R,w,y=a.document,Pa=a.location,Q=a.navigator,qa=a.jQuery,N=a.$,ra=Array.prototype.push,A=Array.prototype.slice,va=Array.prototype.indexOf,W=Object.prototype.toString,E=Object.prototype.hasOwnProperty,sa=String.prototype.trim,i=function(a,b){return new i.fn.init(a,b,R)},X=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,ia=/\S/,v=/\s+/,B=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,S=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ca=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,aa=/^[\],:{}\s]*$/,
za=/(?:^|:|,)(?:\s*\[)+/g,Ka=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ta=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,Ia=/^-ms-/,I=/-([\da-z])/gi,P=function(a,b){return(b+"").toUpperCase()},J=function(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),i.ready()):y.readyState==="complete"&&(y.detachEvent("onreadystatechange",J),i.ready())},D={};i.fn=i.prototype={constructor:i,init:function(a,b,f){var d,g;if(!a)return this;if(a.nodeType)return this.context=this[0]=
a,this.length=1,this;if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?d=[null,a,null]:d=S.exec(a);if(d&&(d[1]||!b)){if(d[1])return b=b instanceof i?b[0]:b,g=b&&b.nodeType?b.ownerDocument||b:y,a=i.parseHTML(d[1],g,!0),ca.test(d[1])&&i.isPlainObject(b)&&this.attr.call(a,b,!0),i.merge(this,a);if((b=y.getElementById(d[2]))&&b.parentNode){if(b.id!==d[2])return f.find(a);this.length=1;this[0]=b}return this.context=y,this.selector=a,this}return!b||b.jquery?(b||f).find(a):
this.constructor(b).find(a)}return i.isFunction(a)?f.ready(a):(a.selector!==c&&(this.selector=a.selector,this.context=a.context),i.makeArray(a,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return A.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){a=i.merge(this.constructor(),a);return a.prevObject=this,a.context=this.context,b==="find"?a.selector=this.selector+(this.selector?" ":
"")+c:b&&(a.selector=this.selector+"."+b+"("+c+")"),a},each:function(a,b){return i.each(this,a,b)},ready:function(a){return i.ready.promise().done(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(A.apply(this,arguments),"slice",A.call(arguments).join(","))},map:function(a){return this.pushStack(i.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||
this.constructor(null)},push:ra,sort:[].sort,splice:[].splice};i.fn.init.prototype=i.fn;i.extend=i.fn.extend=function(){var a,b,f,d,g,h,j=arguments[0]||{},k=1,l=arguments.length,m=!1;typeof j=="boolean"&&(m=j,j=arguments[1]||{},k=2);typeof j!="object"&&!i.isFunction(j)&&(j={});for(l===k&&(j=this,--k);k<l;k++)if((a=arguments[k])!=null)for(b in a)f=j[b],d=a[b],j!==d&&(m&&d&&(i.isPlainObject(d)||(g=i.isArray(d)))?(g?(g=!1,h=f&&i.isArray(f)?f:[]):h=f&&i.isPlainObject(f)?f:{},j[b]=i.extend(m,h,d)):d!==
c&&(j[b]=d));return j};i.extend({noConflict:function(b){return a.$===i&&(a.$=N),b&&a.jQuery===i&&(a.jQuery=qa),i},isReady:!1,readyWait:1,holdReady:function(a){a?i.readyWait++:i.ready(!0)},ready:function(a){if(!(a===!0?--i.readyWait:i.isReady)){if(!y.body)return setTimeout(i.ready,1);i.isReady=!0;a!==!0&&--i.readyWait>0||(w.resolveWith(y,[i]),i.fn.trigger&&i(y).trigger("ready").off("ready"))}},isFunction:function(a){return i.type(a)==="function"},isArray:Array.isArray||function(a){return i.type(a)===
"array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):D[W.call(a)]||"object"},isPlainObject:function(a){if(!a||i.type(a)!=="object"||a.nodeType||i.isWindow(a))return!1;try{if(a.constructor&&!E.call(a,"constructor")&&!E.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}for(var f in a);return f===c||E.call(a,f)},isEmptyObject:function(a){for(var b in a)return!1;return!0},
error:function(a){throw Error(a);},parseHTML:function(a,b,c){var f;return!a||typeof a!="string"?null:(typeof b=="boolean"&&(c=b,b=0),b=b||y,(f=ca.exec(a))?[b.createElement(f[1])]:(f=i.buildFragment([a],b,c?null:[]),i.merge([],(f.cacheable?i.clone(f.fragment):f.fragment).childNodes)))},parseJSON:function(b){if(!b||typeof b!="string")return null;b=i.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(aa.test(b.replace(Ka,"@").replace(ta,"]").replace(za,"")))return(new Function("return "+b))();
i.error("Invalid JSON: "+b)},parseXML:function(b){var f,d;if(!b||typeof b!="string")return null;try{a.DOMParser?(d=new DOMParser,f=d.parseFromString(b,"text/xml")):(f=new ActiveXObject("Microsoft.XMLDOM"),f.async="false",f.loadXML(b))}catch(g){f=c}return(!f||!f.documentElement||f.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+b),f},noop:function(){},globalEval:function(b){b&&ia.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(Ia,
"ms-").replace(I,P)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,f){var d,g=0,h=a.length,j=h===c||i.isFunction(a);if(f)if(j)for(d in a){if(b.apply(a[d],f)===!1)break}else for(;g<h;){if(b.apply(a[g++],f)===!1)break}else if(j)for(d in a){if(b.call(a[d],d,a[d])===!1)break}else for(;g<h;)if(b.call(a[g],g,a[g++])===!1)break;return a},trim:sa&&!sa.call("\ufeff\u00a0")?function(a){return a==null?"":sa.call(a)}:function(a){return a==null?"":(a+"").replace(B,
"")},makeArray:function(a,b){var c,f=b||[];return a!=null&&(c=i.type(a),a.length==null||c==="string"||c==="function"||c==="regexp"||i.isWindow(a)?ra.call(f,a):i.merge(f,a)),f},inArray:function(a,b,c){var f;if(b){if(va)return va.call(b,a,c);f=b.length;for(c=c?c<0?Math.max(0,f+c):c:0;c<f;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var f=b.length,d=a.length,g=0;if(typeof f=="number")for(;g<f;g++)a[d++]=b[g];else for(;b[g]!==c;)a[d++]=b[g++];return a.length=d,a},grep:function(a,b,c){for(var f,
d=[],g=0,h=a.length,c=!!c;g<h;g++)f=!!b(a[g],g),c!==f&&d.push(a[g]);return d},map:function(a,b,f){var d,g,h=[],j=0,k=a.length;if(a instanceof i||k!==c&&typeof k=="number"&&(k>0&&a[0]&&a[k-1]||k===0||i.isArray(a)))for(;j<k;j++)d=b(a[j],j,f),d!=null&&(h[h.length]=d);else for(g in a)d=b(a[g],g,f),d!=null&&(h[h.length]=d);return h.concat.apply([],h)},guid:1,proxy:function(a,b){var f,d,g;return typeof b=="string"&&(f=a[b],b=a,a=f),i.isFunction(a)?(d=A.call(arguments,2),g=function(){return a.apply(b,d.concat(A.call(arguments)))},
g.guid=a.guid=a.guid||i.guid++,g):c},access:function(a,b,f,d,g,h,j){var k,l=f==null,m=0,t=a.length;if(f&&typeof f=="object"){for(m in f)i.access(a,b,m,f[m],1,h,d);g=1}else if(d!==c){k=j===c&&i.isFunction(d);l&&(k?(k=b,b=function(a,b,c){return k.call(i(a),c)}):(b.call(a,d),b=null));if(b)for(;m<t;m++)b(a[m],f,k?d.call(a[m],m,b(a[m],f)):d,j);g=1}return g?a:l?b.call(a):t?b(a[0],f):h},now:function(){return(new Date).getTime()}});i.ready.promise=function(b){if(!w)if(w=i.Deferred(),y.readyState==="complete")setTimeout(i.ready,
1);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",i.ready,!1);else{y.attachEvent("onreadystatechange",J);a.attachEvent("onload",i.ready);var c=!1;try{c=a.frameElement==null&&y.documentElement}catch(f){}c&&c.doScroll&&function hc(){if(!i.isReady){try{c.doScroll("left")}catch(a){return setTimeout(hc,50)}i.ready()}}()}return w.promise(b)};i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){D["[object "+b+"]"]=b.toLowerCase()});
R=i(y);var Ea={};i.Callbacks=function(a){var a=typeof a=="string"?Ea[a]||g(a):i.extend({},a),b,f,d,h,j,k,l=[],m=!a.once&&[],t=function(c){b=a.memory&&c;f=!0;k=h||0;h=0;j=l.length;for(d=!0;l&&k<j;k++)if(l[k].apply(c[0],c[1])===!1&&a.stopOnFalse){b=!1;break}d=!1;l&&(m?m.length&&t(m.shift()):b?l=[]:o.disable())},o={add:function(){if(l){var c=l.length;(function wa(b){i.each(b,function(b,c){var f=i.type(c);f==="function"&&(!a.unique||!o.has(c))?l.push(c):c&&c.length&&f!=="string"&&wa(c)})})(arguments);
d?j=l.length:b&&(h=c,t(b))}return this},remove:function(){return l&&i.each(arguments,function(a,b){for(var c;(c=i.inArray(b,l,c))>-1;)l.splice(c,1),d&&(c<=j&&j--,c<=k&&k--)}),this},has:function(a){return i.inArray(a,l)>-1},empty:function(){return l=[],this},disable:function(){return l=m=b=c,this},disabled:function(){return!l},lock:function(){return m=c,b||o.disable(),this},locked:function(){return!m},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],l&&(!f||m)&&(d?m.push(b):t(b)),this},
fire:function(){return o.fireWith(this,arguments),this},fired:function(){return!!f}};return o};i.extend({Deferred:function(a){var b=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],c="pending",f={state:function(){return c},always:function(){return d.done(arguments).fail(arguments),this},then:function(){var a=arguments;return i.Deferred(function(c){i.each(b,function(b,f){var g=f[0],F=a[b];
d[f[1]](i.isFunction(F)?function(){var a=F.apply(this,arguments);a&&i.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c:this,[a])}:c[g])});a=null}).promise()},promise:function(a){return a!=null?i.extend(a,f):f}},d={};return f.pipe=f.then,i.each(b,function(a,g){var F=g[2],h=g[3];f[g[1]]=F.add;h&&F.add(function(){c=h},b[a^1][2].disable,b[2][2].lock);d[g[0]]=F.fire;d[g[0]+"With"]=F.fireWith}),f.promise(d),a&&a.call(d,d),d},when:function(a){var b=
0,c=A.call(arguments),f=c.length,d=f!==1||a&&i.isFunction(a.promise)?f:0,g=d===1?a:i.Deferred(),h=function(a,b,c){return function(f){b[a]=this;c[a]=arguments.length>1?A.call(arguments):f;c===j?g.notifyWith(b,c):--d||g.resolveWith(b,c)}},j,k,l;if(f>1){j=Array(f);k=Array(f);for(l=Array(f);b<f;b++)c[b]&&i.isFunction(c[b].promise)?c[b].promise().done(h(b,l,c)).fail(g.reject).progress(h(b,k,j)):--d}return d||g.resolveWith(l,c),g.promise()}});i.support=function(){var b,c,f,d,g,h,j,k,l=y.createElement("div");
l.setAttribute("className","t");l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";c=l.getElementsByTagName("*");f=l.getElementsByTagName("a")[0];f.style.cssText="top:1px;float:left;opacity:.5";if(!c||!c.length)return{};d=y.createElement("select");g=d.appendChild(y.createElement("option"));c=l.getElementsByTagName("input")[0];b={leadingWhitespace:l.firstChild.nodeType===3,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,
style:/top/.test(f.getAttribute("style")),hrefNormalized:f.getAttribute("href")==="/a",opacity:/^0.5/.test(f.style.opacity),cssFloat:!!f.style.cssFloat,checkOn:c.value==="on",optSelected:g.selected,getSetAttribute:l.className!=="t",enctype:!!y.createElement("form").enctype,html5Clone:y.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:y.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,
reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};c.checked=!0;b.noCloneChecked=c.cloneNode(!0).checked;d.disabled=!0;b.optDisabled=!g.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}!l.addEventListener&&l.attachEvent&&l.fireEvent&&(l.attachEvent("onclick",k=function(){b.noCloneEvent=!1}),l.cloneNode(!0).fireEvent("onclick"),l.detachEvent("onclick",k));c=y.createElement("input");c.value="t";c.setAttribute("type","radio");b.radioValue=c.value==="t";c.setAttribute("checked","checked");
c.setAttribute("name","t");l.appendChild(c);f=y.createDocumentFragment();f.appendChild(l.lastChild);b.checkClone=f.cloneNode(!0).cloneNode(!0).lastChild.checked;b.appendChecked=c.checked;f.removeChild(c);f.appendChild(l);if(l.attachEvent)for(h in{submit:!0,change:!0,focusin:!0})c="on"+h,(j=c in l)||(l.setAttribute(c,"return;"),j=typeof l[c]=="function"),b[h+"Bubbles"]=j;return i(function(){var c,f,d,g,h=y.getElementsByTagName("body")[0];if(h)c=y.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",
h.insertBefore(c,h.firstChild),f=y.createElement("div"),c.appendChild(f),f.innerHTML="<table><tr><td></td><td>t</td></tr></table>",d=f.getElementsByTagName("td"),d[0].style.cssText="padding:0;margin:0;border:0;display:none",j=d[0].offsetHeight===0,d[0].style.display="",d[1].style.display="none",b.reliableHiddenOffsets=j&&d[0].offsetHeight===0,f.innerHTML="",f.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",
b.boxSizing=f.offsetWidth===4,b.doesNotIncludeMarginInBodyOffset=h.offsetTop!==1,a.getComputedStyle&&(b.pixelPosition=(a.getComputedStyle(f,null)||{}).top!=="1%",b.boxSizingReliable=(a.getComputedStyle(f,null)||{width:"4px"}).width==="4px",g=y.createElement("div"),g.style.cssText=f.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",g.style.marginRight=g.style.width="0",f.style.width="1px",f.appendChild(g),b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)),
typeof f.style.zoom!="undefined"&&(f.innerHTML="",f.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=f.offsetWidth===3,f.style.display="block",f.style.overflow="visible",f.innerHTML="<div></div>",f.firstChild.style.width="5px",b.shrinkWrapBlocks=f.offsetWidth!==3,c.style.zoom=1),h.removeChild(c)}),f.removeChild(l),c=f=d=g=c=f=l=null,b}();var Fa=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,gc=/([A-Z])/g;i.extend({cache:{},
deletedIds:[],uuid:0,expando:"jQuery"+(i.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?i.cache[a[i.expando]]:a[i.expando],!!a&&!b(a)},data:function(a,b,f,d){if(i.acceptData(a)){var g,h,j=i.expando,k=typeof b=="string",l=a.nodeType,m=l?i.cache:a,t=l?a[j]:a[j]&&j;if(t&&m[t]&&(d||m[t].data)||!(k&&f===c)){t||(l?a[j]=t=i.deletedIds.pop()||i.guid++:t=j);m[t]||(m[t]={},l||(m[t].toJSON=i.noop));
if(typeof b=="object"||typeof b=="function")d?m[t]=i.extend(m[t],b):m[t].data=i.extend(m[t].data,b);return g=m[t],d||(g.data||(g.data={}),g=g.data),f!==c&&(g[i.camelCase(b)]=f),k?(h=g[b],h==null&&(h=g[i.camelCase(b)])):h=g,h}}},removeData:function(a,c,f){if(i.acceptData(a)){var d,g,h,j=a.nodeType,k=j?i.cache:a,l=j?a[i.expando]:i.expando;if(k[l]){if(c&&(d=f?k[l]:k[l].data)){i.isArray(c)||(c in d?c=[c]:(c=i.camelCase(c),c in d?c=[c]:c=c.split(" ")));g=0;for(h=c.length;g<h;g++)delete d[c[g]];if(!(f?
b:i.isEmptyObject)(d))return}if(!f&&(delete k[l].data,!b(k[l])))return;j?i.cleanData([a],!0):i.support.deleteExpando||k!=k.window?delete k[l]:k[l]=null}}},_data:function(a,b,c){return i.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&i.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}});i.fn.extend({data:function(a,b){var f,g,h,j,k,l=this[0],m=0,t=null;if(a===c){if(this.length&&(t=i.data(l),l.nodeType===1&&!i._data(l,"parsedAttrs"))){h=l.attributes;for(k=h.length;m<
k;m++)j=h[m].name,j.indexOf("data-")||(j=i.camelCase(j.substring(5)),d(l,j,t[j]));i._data(l,"parsedAttrs",!0)}return t}return typeof a=="object"?this.each(function(){i.data(this,a)}):(f=a.split(".",2),f[1]=f[1]?"."+f[1]:"",g=f[1]+"!",i.access(this,function(b){if(b===c)return t=this.triggerHandler("getData"+g,[f[0]]),t===c&&l&&(t=i.data(l,a),t=d(l,a,t)),t===c&&f[1]?this.data(f[0]):t;f[1]=b;this.each(function(){var c=i(this);c.triggerHandler("setData"+g,f);i.data(this,a,b);c.triggerHandler("changeData"+
g,f)})},null,b,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){i.removeData(this,a)})}});i.extend({queue:function(a,b,c){var f;if(a)return b=(b||"fx")+"queue",f=i._data(a,b),c&&(!f||i.isArray(c)?f=i._data(a,b,i.makeArray(c)):f.push(c)),f||[]},dequeue:function(a,b){var b=b||"fx",c=i.queue(a,b),f=c.length,d=c.shift(),g=i._queueHooks(a,b),h=function(){i.dequeue(a,b)};d==="inprogress"&&(d=c.shift(),f--);d&&(b==="fx"&&c.unshift("inprogress"),delete g.stop,d.call(a,h,g));
!f&&g&&g.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return i._data(a,c)||i._data(a,c,{empty:i.Callbacks("once memory").add(function(){i.removeData(a,b+"queue",!0);i.removeData(a,c,!0)})})}});i.fn.extend({queue:function(a,b){var f=2;return typeof a!="string"&&(b=a,a="fx",f--),arguments.length<f?i.queue(this[0],a):b===c?this:this.each(function(){var c=i.queue(this,a,b);i._queueHooks(this,a);a==="fx"&&c[0]!=="inprogress"&&i.dequeue(this,a)})},dequeue:function(a){return this.each(function(){i.dequeue(this,
a)})},delay:function(a,b){return a=i.fx?i.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var f=setTimeout(b,a);c.stop=function(){clearTimeout(f)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var f,d=1,g=i.Deferred(),h=this,j=this.length,k=function(){--d||g.resolveWith(h,[h])};typeof a!="string"&&(b=a,a=c);for(a=a||"fx";j--;)(f=i._data(h[j],a+"queueHooks"))&&f.empty&&(d++,f.empty.add(k));return k(),g.promise(b)}});var ma,tb,Ja,jc=/[\t\r\n]/g,sc=/\r/g,tc=/^(?:button|input)$/i,
Qa=/^(?:button|input|object|select|textarea)$/i,La=/^a(?:rea|)$/i,ka=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,na=i.support.getSetAttribute;i.fn.extend({attr:function(a,b){return i.access(this,i.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){i.removeAttr(this,a)})},prop:function(a,b){return i.access(this,i.prop,a,b,arguments.length>1)},removeProp:function(a){return a=i.propFix[a]||
a,this.each(function(){try{this[a]=c,delete this[a]}catch(b){}})},addClass:function(a){var b,c,f,d,g,h,j;if(i.isFunction(a))return this.each(function(b){i(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(v);c=0;for(f=this.length;c<f;c++)if(d=this[c],d.nodeType===1)if(!d.className&&b.length===1)d.className=a;else{g=" "+d.className+" ";h=0;for(j=b.length;h<j;h++)g.indexOf(" "+b[h]+" ")<0&&(g+=b[h]+" ");d.className=i.trim(g)}}return this},removeClass:function(a){var b,
f,d,g,h,j,k;if(i.isFunction(a))return this.each(function(b){i(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===c){b=(a||"").split(v);j=0;for(k=this.length;j<k;j++)if(d=this[j],d.nodeType===1&&d.className){f=(" "+d.className+" ").replace(jc," ");g=0;for(h=b.length;g<h;g++)for(;f.indexOf(" "+b[g]+" ")>=0;)f=f.replace(" "+b[g]+" "," ");d.className=a?i.trim(f):""}}return this},toggleClass:function(a,b){var c=typeof a,f=typeof b=="boolean";return i.isFunction(a)?this.each(function(c){i(this).toggleClass(a.call(this,
c,this.className,b),b)}):this.each(function(){if(c==="string")for(var d,g=0,h=i(this),j=b,k=a.split(v);d=k[g++];)j=f?j:!h.hasClass(d),h[j?"addClass":"removeClass"](d);else if(c==="undefined"||c==="boolean")this.className&&i._data(this,"__className__",this.className),this.className=this.className||a===!1?"":i._data(this,"__className__")||""})},hasClass:function(a){for(var a=" "+a+" ",b=0,c=this.length;b<c;b++)if(this[b].nodeType===1&&(" "+this[b].className+" ").replace(jc," ").indexOf(a)>=0)return!0;
return!1},val:function(a){var b,f,d,g=this[0];if(arguments.length)return d=i.isFunction(a),this.each(function(f){var g,h=i(this);if(this.nodeType===1&&(d?g=a.call(this,f,h.val()):g=a,g==null?g="":typeof g=="number"?g+="":i.isArray(g)&&(g=i.map(g,function(a){return a==null?"":a+""})),b=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],!b||!("set"in b)||b.set(this,g,"value")===c))this.value=g});else if(g)return b=i.valHooks[g.type]||i.valHooks[g.nodeName.toLowerCase()],b&&"get"in b&&(f=
b.get(g,"value"))!==c?f:(f=g.value,typeof f=="string"?f.replace(sc,""):f==null?"":f)}});i.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,f=a.selectedIndex,d=[],g=a.options,h=a.type==="select-one";if(f<0)return null;a=h?f:0;for(c=h?f+1:g.length;a<c;a++)if(b=g[a],b.selected&&(i.support.optDisabled?!b.disabled:b.getAttribute("disabled")===null)&&(!b.parentNode.disabled||!i.nodeName(b.parentNode,"optgroup"))){b=
i(b).val();if(h)return b;d.push(b)}return h&&!d.length&&g.length?i(g[f]).val():d},set:function(a,b){var c=i.makeArray(b);return i(a).find("option").each(function(){this.selected=i.inArray(i(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,b,f,d){var g,h,j=a.nodeType;if(a&&!(j===3||j===8||j===2)){if(d&&i.isFunction(i.fn[b]))return i(a)[b](f);if(typeof a.getAttribute=="undefined")return i.prop(a,b,f);(d=j!==1||!i.isXMLDoc(a))&&(b=b.toLowerCase(),h=i.attrHooks[b]||(ka.test(b)?
tb:ma));if(f!==c){if(f===null){i.removeAttr(a,b);return}return h&&"set"in h&&d&&(g=h.set(a,f,b))!==c?g:(a.setAttribute(b,f+""),f)}return h&&"get"in h&&d&&(g=h.get(a,b))!==null?g:(g=a.getAttribute(b),g===null?c:g)}},removeAttr:function(a,b){var c,f,d,g,h=0;if(b&&a.nodeType===1)for(f=b.split(v);h<f.length;h++)(d=f[h])&&(c=i.propFix[d]||d,g=ka.test(d),g||i.attr(a,d,""),a.removeAttribute(na?d:c),g&&c in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(tc.test(a.nodeName)&&a.parentNode)i.error("type property can't be changed");
else if(!i.support.radioValue&&b==="radio"&&i.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return ma&&i.nodeName(a,"button")?ma.get(a,b):b in a?a.value:null},set:function(a,b,c){if(ma&&i.nodeName(a,"button"))return ma.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",
usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,b,f){var d,g,h,j=a.nodeType;return!a||j===3||j===8||j===2?void 0:(h=j!==1||!i.isXMLDoc(a),h&&(b=i.propFix[b]||b,g=i.propHooks[b]),f!==c?g&&"set"in g&&(d=g.set(a,f,b))!==c?d:a[b]=f:g&&"get"in g&&(d=g.get(a,b))!==null?d:a[b])},propHooks:{tabIndex:{get:function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?parseInt(b.value,10):Qa.test(a.nodeName)||La.test(a.nodeName)&&a.href?0:c}}}});tb={get:function(a,
b){var f,d=i.prop(a,b);return d===!0||typeof d!="boolean"&&(f=a.getAttributeNode(b))&&f.nodeValue!==!1?b.toLowerCase():c},set:function(a,b,c){var f;return b===!1?i.removeAttr(a,c):(f=i.propFix[c]||c,f in a&&(a[f]=!0),a.setAttribute(c,c.toLowerCase())),c}};na||(Ja={name:!0,id:!0,coords:!0},ma=i.valHooks.button={get:function(a,b){var f;return f=a.getAttributeNode(b),f&&(Ja[b]?f.value!=="":f.specified)?f.value:c},set:function(a,b,c){var f=a.getAttributeNode(c);return f||(f=y.createAttribute(c),a.setAttributeNode(f)),
f.value=b+""}},i.each(["width","height"],function(a,b){i.attrHooks[b]=i.extend(i.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})}),i.attrHooks.contenteditable={get:ma.get,set:function(a,b,c){b===""&&(b="false");ma.set(a,b,c)}});i.support.hrefNormalized||i.each(["href","src","width","height"],function(a,b){i.attrHooks[b]=i.extend(i.attrHooks[b],{get:function(a){a=a.getAttribute(b,2);return a===null?c:a}})});i.support.style||(i.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||
c},set:function(a,b){return a.style.cssText=b+""}});i.support.optSelected||(i.propHooks.selected=i.extend(i.propHooks.selected,{get:function(){return null}}));i.support.enctype||(i.propFix.enctype="encoding");i.support.checkOn||i.each(["radio","checkbox"],function(){i.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}});i.each(["radio","checkbox"],function(){i.valHooks[this]=i.extend(i.valHooks[this],{set:function(a,b){if(i.isArray(b))return a.checked=i.inArray(i(a).val(),
b)>=0}})});var Ma=/^(?:textarea|input|select)$/i,ub=/^([^\.]*|)(?:\.(.+)|)$/,Ob=/(?:^|\s)hover(\.\S+|)\b/,vb=/^key/,Pb=/^(?:mouse|contextmenu)|click/,wb=/^(?:focusinfocus|focusoutblur)$/,bb=function(a){return i.event.special.hover?a:a.replace(Ob,"mouseenter$1 mouseleave$1")};i.event={add:function(a,b,f,d,g){var h,j,k,l,m,t,o,n,G;if(!(a.nodeType===3||a.nodeType===8||!b||!f||!(h=i._data(a)))){f.handler&&(o=f,f=o.handler,g=o.selector);f.guid||(f.guid=i.guid++);(k=h.events)||(h.events=k={});(j=h.handle)||
(h.handle=j=function(a){return typeof i!="undefined"&&(!a||i.event.triggered!==a.type)?i.event.dispatch.apply(j.elem,arguments):c},j.elem=a);b=i.trim(bb(b)).split(" ");for(h=0;h<b.length;h++){l=ub.exec(b[h])||[];m=l[1];t=(l[2]||"").split(".").sort();G=i.event.special[m]||{};m=(g?G.delegateType:G.bindType)||m;G=i.event.special[m]||{};l=i.extend({type:m,origType:l[1],data:d,handler:f,guid:f.guid,selector:g,needsContext:g&&i.expr.match.needsContext.test(g),namespace:t.join(".")},o);n=k[m];if(!n&&(n=
k[m]=[],n.delegateCount=0,!G.setup||G.setup.call(a,d,t,j)===!1))a.addEventListener?a.addEventListener(m,j,!1):a.attachEvent&&a.attachEvent("on"+m,j);G.add&&(G.add.call(a,l),l.handler.guid||(l.handler.guid=f.guid));g?n.splice(n.delegateCount++,0,l):n.push(l);i.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,f,d){var g,h,j,k,l,m,t,o,n,G,r=i.hasData(a)&&i._data(a);if(r&&(t=r.events)){b=i.trim(bb(b||"")).split(" ");for(g=0;g<b.length;g++)if(h=ub.exec(b[g])||[],j=k=h[1],h=h[2],j){o=i.event.special[j]||
{};j=(f?o.delegateType:o.bindType)||j;n=t[j]||[];l=n.length;h=h?RegExp("(^|\\.)"+h.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(m=0;m<n.length;m++)G=n[m],(d||k===G.origType)&&(!c||c.guid===G.guid)&&(!h||h.test(G.namespace))&&(!f||f===G.selector||f==="**"&&G.selector)&&(n.splice(m--,1),G.selector&&n.delegateCount--,o.remove&&o.remove.call(a,G));n.length===0&&l!==n.length&&((!o.teardown||o.teardown.call(a,h,r.handle)===!1)&&i.removeEvent(a,j,r.handle),delete t[j])}else for(j in t)i.event.remove(a,
j+b[g],c,f,!0);i.isEmptyObject(t)&&(delete r.handle,i.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(b,f,d,g){if(!d||d.nodeType!==3&&d.nodeType!==8){var h,j,k,l,m,t,o,n=b.type||b;l=[];if(!wb.test(n+i.event.triggered)&&(n.indexOf("!")>=0&&(n=n.slice(0,-1),h=!0),n.indexOf(".")>=0&&(l=n.split("."),n=l.shift(),l.sort()),d&&!i.event.customEvent[n]||i.event.global[n]))if(b=typeof b=="object"?b[i.expando]?b:new i.Event(n,b):new i.Event(n),b.type=n,b.isTrigger=
!0,b.exclusive=h,b.namespace=l.join("."),b.namespace_re=b.namespace?RegExp("(^|\\.)"+l.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=n.indexOf(":")<0?"on"+n:"",d){if(b.result=c,b.target||(b.target=d),f=f!=null?i.makeArray(f):[],f.unshift(b),m=i.event.special[n]||{},!(m.trigger&&m.trigger.apply(d,f)===!1)){o=[[d,m.bindType||n]];if(!g&&!m.noBubble&&!i.isWindow(d)){j=m.delegateType||n;h=wb.test(j+n)?d:d.parentNode;for(k=d;h;h=h.parentNode)o.push([h,j]),k=h;k===(d.ownerDocument||y)&&o.push([k.defaultView||
k.parentWindow||a,j])}for(j=0;j<o.length&&!b.isPropagationStopped();j++)h=o[j][0],b.type=o[j][1],(t=(i._data(h,"events")||{})[b.type]&&i._data(h,"handle"))&&t.apply(h,f),(t=l&&h[l])&&i.acceptData(h)&&t.apply&&t.apply(h,f)===!1&&b.preventDefault();return b.type=n,!g&&!b.isDefaultPrevented()&&(!m._default||m._default.apply(d.ownerDocument,f)===!1)&&(n!=="click"||!i.nodeName(d,"a"))&&i.acceptData(d)&&l&&d[n]&&(n!=="focus"&&n!=="blur"||b.target.offsetWidth!==0)&&!i.isWindow(d)&&(k=d[l],k&&(d[l]=null),
i.event.triggered=n,d[n](),i.event.triggered=c,k&&(d[l]=k)),b.result}}else for(j in d=i.cache,d)d[j].events&&d[j].events[n]&&i.event.trigger(b,f,d[j].handle.elem,!0)}},dispatch:function(b){var b=i.event.fix(b||a.event),f,d,g,h,j,k,l=(i._data(this,"events")||{})[b.type]||[],m=l.delegateCount,t=A.call(arguments),n=!b.exclusive&&!b.namespace,o=i.event.special[b.type]||{},G=[];t[0]=b;b.delegateTarget=this;if(!(o.preDispatch&&o.preDispatch.call(this,b)===!1)){if(m&&(!b.button||b.type!=="click"))for(d=
b.target;d!=this;d=d.parentNode||this)if(d.disabled!==!0||b.type!=="click"){h={};j=[];for(f=0;f<m;f++)g=l[f],k=g.selector,h[k]===c&&(h[k]=g.needsContext?i(k,this).index(d)>=0:i.find(k,this,null,[d]).length),h[k]&&j.push(g);j.length&&G.push({elem:d,matches:j})}l.length>m&&G.push({elem:this,matches:l.slice(m)});for(f=0;f<G.length&&!b.isPropagationStopped();f++){h=G[f];b.currentTarget=h.elem;for(d=0;d<h.matches.length&&!b.isImmediatePropagationStopped();d++)if(g=h.matches[d],n||!b.namespace&&!g.namespace||
b.namespace_re&&b.namespace_re.test(g.namespace))b.data=g.data,b.handleObj=g,g=((i.event.special[g.origType]||{}).handle||g.handler).apply(h.elem,t),g!==c&&(b.result=g,g===!1&&(b.preventDefault(),b.stopPropagation()))}return o.postDispatch&&o.postDispatch.call(this,b),b.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),
filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var f,d,g,h=b.button,j=b.fromElement;return a.pageX==null&&b.clientX!=null&&(f=a.target.ownerDocument||y,d=f.documentElement,g=f.body,a.pageX=b.clientX+(d&&d.scrollLeft||g&&g.scrollLeft||0)-(d&&d.clientLeft||g&&g.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||
g&&g.scrollTop||0)-(d&&d.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&j&&(a.relatedTarget=j===a.target?b.toElement:j),!a.which&&h!==c&&(a.which=h&1?1:h&2?3:h&4?2:0),a}},fix:function(a){if(a[i.expando])return a;var b,c,f=a,d=i.event.fixHooks[a.type]||{},g=d.props?this.props.concat(d.props):this.props,a=i.Event(f);for(b=g.length;b;)c=g[--b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,d.filter?d.filter(a,f):a},
special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){i.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,f){a=i.extend(new i.Event,c,{type:a,isSimulated:!0,originalEvent:{}});f?i.event.trigger(a,null,b):i.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};i.event.handle=i.event.dispatch;i.removeEvent=y.removeEventListener?
function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&(typeof a[b]=="undefined"&&(a[b]=null),a.detachEvent(b,c))};i.Event=function(a,b){if(this instanceof i.Event)a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?h:f):this.type=a,b&&i.extend(this,b),this.timeStamp=a&&a.timeStamp||i.now(),this[i.expando]=!0;else return new i.Event(a,b)};i.Event.prototype=
{preventDefault:function(){this.isDefaultPrevented=h;var a=this.originalEvent;if(a)a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=h;var a=this.originalEvent;if(a)a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=h;this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f};i.each({mouseenter:"mouseover",mouseleave:"mouseout"},
function(a,b){i.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,f=a.relatedTarget,d=a.handleObj;if(!f||f!==this&&!i.contains(this,f))a.type=d.origType,c=d.handler.apply(this,arguments),a.type=b;return c}}});i.support.submitBubbles||(i.event.special.submit={setup:function(){if(i.nodeName(this,"form"))return!1;i.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=i.nodeName(a,"input")||i.nodeName(a,"button")?a.form:c)&&!i._data(a,"_submit_attached")&&(i.event.add(a,
"submit._submit",function(a){a._submit_bubble=!0}),i._data(a,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&i.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(i.nodeName(this,"form"))return!1;i.event.remove(this,"._submit")}});i.support.changeBubbles||(i.event.special.change={setup:function(){if(Ma.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")i.event.add(this,"propertychange._change",
function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),i.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);i.event.simulate("change",this,a,!0)});return!1}i.event.add(this,"beforeactivate._change",function(a){a=a.target;Ma.test(a.nodeName)&&!i._data(a,"_change_attached")&&(i.event.add(a,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&i.event.simulate("change",this.parentNode,a,!0)}),i._data(a,"_change_attached",
!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return i.event.remove(this,"._change"),!Ma.test(this.nodeName)}});i.support.focusinBubbles||i.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,f=function(a){i.event.simulate(b,a.target,i.event.fix(a),!0)};i.event.special[b]={setup:function(){c++===0&&y.addEventListener(a,f,!0)},teardown:function(){--c===
0&&y.removeEventListener(a,f,!0)}}});i.fn.extend({on:function(a,b,d,g,h){var j,k;if(typeof a=="object"){typeof b!="string"&&(d=d||b,b=c);for(k in a)this.on(k,b,d,a[k],h);return this}d==null&&g==null?(g=b,d=b=c):g==null&&(typeof b=="string"?(g=d,d=c):(g=d,d=b,b=c));if(g===!1)g=f;else if(!g)return this;return h===1&&(j=g,g=function(a){return i().off(a),j.apply(this,arguments)},g.guid=j.guid||(j.guid=i.guid++)),this.each(function(){i.event.add(this,a,g,d,b)})},one:function(a,b,c,f){return this.on(a,
b,c,f,1)},off:function(a,b,d){var g,h;if(a&&a.preventDefault&&a.handleObj)return g=a.handleObj,i(a.delegateTarget).off(g.namespace?g.origType+"."+g.namespace:g.origType,g.selector,g.handler),this;if(typeof a=="object"){for(h in a)this.off(h,b,a[h]);return this}if(b===!1||typeof b=="function")d=b,b=c;return d===!1&&(d=f),this.each(function(){i.event.remove(this,a,d,b)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return i(this.context).on(a,
this.selector,b,c),this},die:function(a,b){return i(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,f){return this.on(b,a,c,f)},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){i.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return i.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||i.guid++,f=0,d=function(c){var d=(i._data(this,"lastToggle"+
a.guid)||0)%f;return i._data(this,"lastToggle"+a.guid,d+1),c.preventDefault(),b[d].apply(this,arguments)||!1};for(d.guid=c;f<b.length;)b[f++].guid=c;return this.click(d)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){i.fn[b]=function(a,c){return c==
null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)};vb.test(b)&&(i.event.fixHooks[b]=i.event.keyHooks);Pb.test(b)&&(i.event.fixHooks[b]=i.event.mouseHooks)});(function(a,b){function c(a,b,f,d){var f=f||[],b=b||v,g,h,j,i,k=b.nodeType;if(!a||typeof a!="string")return f;if(k!==1&&k!==9)return[];j=z(b);if(!j&&!d&&(g=Pa.exec(a)))if(i=g[1])if(k===9){h=b.getElementById(i);if(!h||!h.parentNode)return f;if(h.id===i)return f.push(h),f}else{if(b.ownerDocument&&(h=b.ownerDocument.getElementById(i))&&
I(b,h)&&h.id===i)return f.push(h),f}else{if(g[2])return M.apply(f,B.call(b.getElementsByTagName(a),0)),f;if((i=g[3])&&aa&&b.getElementsByClassName)return M.apply(f,B.call(b.getElementsByClassName(i),0)),f}return G(a.replace(H,"$1"),b,f,d,j)}function f(a){return function(b){return b.nodeName.toLowerCase()==="input"&&b.type===a}}function d(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function g(a){return A(function(b){return b=+b,A(function(c,f){for(var d,
g=a([],c.length,b),h=g.length;h--;)c[d=g[h]]&&(c[d]=!(f[d]=c[d]))})})}function h(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1}function j(a,b){var f,d,g,h,i,k,F;if(i=T[x][a])return b?0:i.slice(0);i=a;k=[];for(F=s.preFilter;i;){if(!f||(d=Fa.exec(i)))d&&(i=i.slice(d[0].length)),k.push(g=[]);f=!1;if(d=U.exec(i))g.push(f=new P(d.shift())),i=i.slice(f.length),f.type=d[0].replace(H," ");for(h in s.filter)(d=X[h].exec(i))&&(!F[h]||(d=F[h](d,v,!0)))&&(g.push(f=
new P(d.shift())),i=i.slice(f.length),f.type=h,f.matches=d);if(!f)break}return b?i.length:i?c.error(a):T(a,k).slice(0)}function k(a,b,c){var f=b.dir,d=c&&b.dir==="parentNode",g=ja++;return b.first?function(b,c,g){for(;b=b[f];)if(d||b.nodeType===1)return a(b,c,g)}:function(b,c,h){if(h)for(;b=b[f];){if((d||b.nodeType===1)&&a(b,c,h))return b}else for(var j,i=O+" "+g+" ",k=i+q;b=b[f];)if(d||b.nodeType===1){if((j=b[x])===k)return b.sizset;if(typeof j=="string"&&j.indexOf(i)===0){if(b.sizset)return b}else{b[x]=
k;if(a(b,c,h))return b.sizset=!0,b;b.sizset=!1}}}}function l(a){return a.length>1?function(b,c,f){for(var d=a.length;d--;)if(!a[d](b,c,f))return!1;return!0}:a[0]}function m(a,b,c,f,d){for(var g,h=[],j=0,i=a.length,k=b!=null;j<i;j++)if(g=a[j])if(!c||c(g,f,d))h.push(g),k&&b.push(j);return h}function t(a,b,f,d,g,h){return d&&!d[x]&&(d=t(d)),g&&!g[x]&&(g=t(g,h)),A(function(h,j,i,k){if(!h||!g){var F,l,t=[],da=[],n=j.length;if(!(l=h)){l=b||"*";var o=i.nodeType?[i]:i,G=[];F=0;for(var r=o.length;F<r;F++)c(l,
o[F],G,h);l=G}o=a&&(h||!b)?m(l,t,a,i,k):l;G=f?g||(h?a:n||d)?[]:j:o;f&&f(o,G,i,k);if(d){l=m(G,da);d(l,[],i,k);for(i=l.length;i--;)if(F=l[i])G[da[i]]=!(o[da[i]]=F)}if(h)for(i=a&&G.length;i--;){if(F=G[i])h[t[i]]=!(j[t[i]]=F)}else G=m(G===j?G.splice(n,G.length):G),g?g(null,j,G,k):M.apply(j,G)}})}function n(a){var b,c,f,d=a.length,g=s.relative[a[0].type];c=g||s.relative[" "];for(var h=g?1:0,j=k(function(a){return a===b},c,!0),i=k(function(a){return ea.call(b,a)>-1},c,!0),F=[function(a,c,f){return!g&&(f||
c!==D)||((b=c).nodeType?j(a,c,f):i(a,c,f))}];h<d;h++)if(c=s.relative[a[h].type])F=[k(l(F),c)];else{c=s.filter[a[h].type].apply(null,a[h].matches);if(c[x]){for(f=++h;f<d;f++)if(s.relative[a[f].type])break;return t(h>1&&l(F),h>1&&a.slice(0,h-1).join("").replace(H,"$1"),c,h<f&&n(a.slice(h,f)),f<d&&n(a=a.slice(f)),f<d&&a.join(""))}F.push(c)}return l(F)}function o(a,b){var f=b.length>0,d=a.length>0,g=function(h,j,i,k,F){var l,t,da=[],o=0,n="0",G=h&&[],r=F!=null,p=D,Ic=h||d&&s.find.TAG("*",F&&j.parentNode||
j),u=O+=p==null?1:Math.E;for(r&&(D=j!==v&&j,q=g.el);(F=Ic[n])!=null;n++){if(d&&F){for(l=0;t=a[l];l++)if(t(F,j,i)){k.push(F);break}r&&(O=u,q=++g.el)}f&&((F=!t&&F)&&o--,h&&G.push(F))}o+=n;if(f&&n!==o){for(l=0;t=b[l];l++)t(G,da,j,i);if(h){if(o>0)for(;n--;)!G[n]&&!da[n]&&(da[n]=N.call(k));da=m(da)}M.apply(k,da);r&&!h&&da.length>0&&o+b.length>1&&c.uniqueSort(k)}return r&&(O=u,D=p),G};return g.el=0,f?A(g):g}function G(a,b,c,f,d){var g,h,i,k,F=j(a);if(!f&&F.length===1){h=F[0]=F[0].slice(0);if(h.length>2&&
(i=h[0]).type==="ID"&&b.nodeType===9&&!d&&s.relative[h[1].type]){b=s.find.ID(i.matches[0].replace(ma,""),b,d)[0];if(!b)return c;a=a.slice(h.shift().length)}for(g=X.POS.test(a)?-1:h.length-1;g>=0;g--){i=h[g];if(s.relative[k=i.type])break;if(k=s.find[k])if(f=k(i.matches[0].replace(ma,""),qa.test(h[0].type)&&b.parentNode||b,d)){h.splice(g,1);a=f.length&&h.join("");if(!a)return M.apply(c,B.call(f,0)),c;break}}}return w(a,F)(f,b,d,c,qa.test(a)),c}function r(){}var q,p,s,u,z,I,w,y,C,D,R=!0,x=("sizcache"+
Math.random()).replace(".",""),P=String,v=a.document,J=v.documentElement,O=0,ja=0,N=[].pop,M=[].push,B=[].slice,ea=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},A=function(a,b){return a[x]=b==null||b,a},E=function(){var a={},b=[];return A(function(c,f){return b.push(c)>s.cacheLength&&delete a[b.shift()],a[c]=f},a)},ba=E(),T=E(),Q=E(),E="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+
"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",Ea=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+E+")|[^:]|\\\\.)*|.*))\\)|)",H=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),Fa=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,U=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,ha=RegExp(Ea),Pa=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,qa=/[\x20\t\r\n\f]*[+~]/,W=/h\d/i,S=/input|select|textarea|button/i,
ma=/\\(?!\\)/g,X={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+E),PSEUDO:RegExp("^"+Ea),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:RegExp("^:(only|nth|first|last)-child(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},V=function(a){var b=v.createElement("div");try{return a(b)}catch(c){return!1}finally{}},E=V(function(a){return a.appendChild(v.createComment("")),!a.getElementsByTagName("*").length}),fa=V(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")===
"#"}),ra=V(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return a!=="boolean"&&a!=="string"}),aa=V(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!a.getElementsByClassName||!a.getElementsByClassName("e").length?!1:(a.lastChild.className="e",a.getElementsByClassName("e").length===2)}),ca=V(function(a){a.id=x+0;a.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>";J.insertBefore(a,J.firstChild);var b=v.getElementsByName&&
v.getElementsByName(x).length===2+v.getElementsByName(x+0).length;return p=!v.getElementById(x),J.removeChild(a),b});try{B.call(J.childNodes,0)}catch(gc){B=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}c.matches=function(a,b){return c(a,null,null,b)};c.matchesSelector=function(a,b){return c(b,null,null,[a]).length>0};u=c.getText=function(a){var b,c="",f=0;if(b=a.nodeType)if(b===1||b===9||b===11){if(typeof a.textContent=="string")return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=
u(a)}else{if(b===3||b===4)return a.nodeValue}else for(;b=a[f];f++)c+=u(b);return c};z=c.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?a.nodeName!=="HTML":!1};I=c.contains=J.contains?function(a,b){var c=a.nodeType===9?a.documentElement:a,f=b&&b.parentNode;return a===f||!(!f||!(f.nodeType===1&&c.contains&&c.contains(f)))}:J.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1};c.attr=
function(a,b){var c,f=z(a);return f||(b=b.toLowerCase()),(c=s.attrHandle[b])?c(a):f||ra?a.getAttribute(b):(c=a.getAttributeNode(b),c?typeof a[b]=="boolean"?a[b]?b:null:c.specified?c.value:null:null)};s=c.selectors={cacheLength:50,createPseudo:A,match:X,attrHandle:fa?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:p?function(a,b,c){if(typeof b.getElementById!=="undefined"&&!c)return(a=b.getElementById(a))&&a.parentNode?[a]:[]}:function(a,
c,f){if(typeof c.getElementById!=="undefined"&&!f)return(c=c.getElementById(a))?c.id===a||typeof c.getAttributeNode!=="undefined"&&c.getAttributeNode("id").value===a?[c]:b:[]},TAG:E?function(a,b){if(typeof b.getElementsByTagName!=="undefined")return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if(a==="*"){for(var f,d=[],g=0;f=c[g];g++)f.nodeType===1&&d.push(f);return d}return c},NAME:ca&&function(a,b){if(typeof b.getElementsByName!=="undefined")return b.getElementsByName(name)},
CLASS:aa&&function(a,b,c){if(typeof b.getElementsByClassName!=="undefined"&&!c)return b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ma,""),a[3]=(a[4]||a[5]||"").replace(ma,""),a[2]==="~="&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1]==="nth"?(a[2]||c.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):
2*(a[2]==="even"||a[2]==="odd")),a[4]=+(a[6]+a[7]||a[2]==="odd")):a[2]&&c.error(a[0]),a},PSEUDO:function(a){var b,c;if(X.CHILD.test(a[0]))return null;if(a[3])a[2]=a[3];else if(b=a[4])ha.test(b)&&(c=j(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b;return a.slice(0,3)}},filter:{ID:p?function(a){return a=a.replace(ma,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(ma,""),function(b){return(b=typeof b.getAttributeNode!=="undefined"&&
b.getAttributeNode("id"))&&b.value===a}},TAG:function(a){return a==="*"?function(){return!0}:(a=a.replace(ma,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=ba[x][a];return b||(b=ba(a,RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))),function(a){return b.test(a.className||typeof a.getAttribute!=="undefined"&&a.getAttribute("class")||"")}},ATTR:function(a,b,f){return function(d){d=c.attr(d,a);return d==null?b==="!=":b?(d+="",b===
"="?d===f:b==="!="?d!==f:b==="^="?f&&d.indexOf(f)===0:b==="*="?f&&d.indexOf(f)>-1:b==="$="?f&&d.substr(d.length-f.length)===f:b==="~="?(" "+d+" ").indexOf(f)>-1:b==="|="?d===f||d.substr(0,f.length+1)===f+"-":!1):!0}},CHILD:function(a,b,c,f){return a==="nth"?function(a){var b,d;b=a.parentNode;if(c===1&&f===0)return!0;if(b){d=0;for(b=b.firstChild;b;b=b.nextSibling)if(b.nodeType===1&&(d++,a===b))break}return d-=f,d===c||d%c===0&&d/c>=0}:function(b){var c=b;switch(a){case "only":case "first":for(;c=c.previousSibling;)if(c.nodeType===
1)return!1;if(a==="first")return!0;c=b;case "last":for(;c=c.nextSibling;)if(c.nodeType===1)return!1;return!0}}},PSEUDO:function(a,b){var f,d=s.pseudos[a]||s.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return d[x]?d(b):d.length>1?(f=[a,a,"",b],s.setFilters.hasOwnProperty(a.toLowerCase())?A(function(a,c){for(var f,g=d(a,b),h=g.length;h--;)f=ea.call(a,g[h]),a[f]=!(c[f]=g[h])}):function(a){return d(a,0,f)}):d}},pseudos:{not:A(function(a){var b=[],c=[],f=w(a.replace(H,"$1"));return f[x]?
A(function(a,b,c,d){for(var d=f(a,null,d,[]),g=a.length;g--;)if(c=d[g])a[g]=!(b[g]=c)}):function(a,d,g){return b[0]=a,f(b,null,g,c),!c.pop()}}),has:A(function(a){return function(b){return c(a,b).length>0}}),contains:A(function(a){return function(b){return(b.textContent||b.innerText||u(b)).indexOf(a)>-1}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},
selected:function(a){return a.selected===!0},parent:function(a){return!s.pseudos.empty(a)},empty:function(a){for(var b,a=a.firstChild;a;){if(a.nodeName>"@"||(b=a.nodeType)===3||b===4)return!1;a=a.nextSibling}return!0},header:function(a){return W.test(a.nodeName)},text:function(a){var b,c;return a.nodeName.toLowerCase()==="input"&&(b=a.type)==="text"&&((c=a.getAttribute("type"))==null||c.toLowerCase()===b)},radio:f("radio"),checkbox:f("checkbox"),file:f("file"),password:f("password"),image:f("image"),
submit:d("submit"),reset:d("reset"),button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},input:function(a){return S.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href)},active:function(a){return a===a.ownerDocument.activeElement},first:g(function(){return[0]}),last:g(function(a,b){return[b-1]}),eq:g(function(a,b,c){return[c<0?c+b:c]}),even:g(function(a,b){for(var c=
0;c<b;c+=2)a.push(c);return a}),odd:g(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:g(function(a,b,c){for(b=c<0?c+b:c;--b>=0;)a.push(b);return a}),gt:g(function(a,b,c){for(c=c<0?c+b:c;++c<b;)a.push(c);return a})}};y=J.compareDocumentPosition?function(a,b){return a===b?(C=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:function(a,b){if(a===b)return C=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-
b.sourceIndex;var c,f,d=[],g=[];c=a.parentNode;f=b.parentNode;var j=c;if(c===f)return h(a,b);if(!c)return-1;if(!f)return 1;for(;j;)d.unshift(j),j=j.parentNode;for(j=f;j;)g.unshift(j),j=j.parentNode;c=d.length;f=g.length;for(j=0;j<c&&j<f;j++)if(d[j]!==g[j])return h(d[j],g[j]);return j===c?h(a,g[j],-1):h(d[j],b,1)};[0,0].sort(y);R=!C;c.uniqueSort=function(a){var b,c=1;C=R;a.sort(y);if(C)for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1);return a};c.error=function(a){throw Error("Syntax error, unrecognized expression: "+
a);};w=c.compile=function(a,b){var c,f=[],d=[],g=Q[x][a];if(!g){b||(b=j(a));for(c=b.length;c--;)g=n(b[c]),g[x]?f.push(g):d.push(g);g=Q(a,o(d,f))}return g};v.querySelectorAll&&function(){var a,b=G,f=/'|\\/g,d=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,g=[":focus"],h=[":active",":focus"],i=J.matchesSelector||J.mozMatchesSelector||J.webkitMatchesSelector||J.oMatchesSelector||J.msMatchesSelector;V(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||
g.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");a.querySelectorAll(":checked").length||g.push(":checked")});V(function(a){a.innerHTML="<p test=''></p>";a.querySelectorAll("[test^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.innerHTML="<input type='hidden'/>";a.querySelectorAll(":enabled").length||g.push(":enabled",":disabled")});g=RegExp(g.join("|"));G=function(a,c,d,h,i){if(!h&&!i&&(!g||!g.test(a))){var k,F,l=!0,m=x;F=c;k=c.nodeType===
9&&a;if(c.nodeType===1&&c.nodeName.toLowerCase()!=="object"){k=j(a);(l=c.getAttribute("id"))?m=l.replace(f,"\\$&"):c.setAttribute("id",m);m="[id='"+m+"'] ";for(F=k.length;F--;)k[F]=m+k[F].join("");F=qa.test(a)&&c.parentNode||c;k=k.join(",")}if(k)try{return M.apply(d,B.call(F.querySelectorAll(k),0)),d}catch(t){}finally{l||c.removeAttribute("id")}}return b(a,c,d,h,i)};i&&(V(function(b){a=i.call(b,"div");try{i.call(b,"[test!='']:sizzle"),h.push("!=",Ea)}catch(c){}}),h=RegExp(h.join("|")),c.matchesSelector=
function(b,f){f=f.replace(d,"='$1']");if(!z(b)&&!h.test(f)&&(!g||!g.test(f)))try{var j=i.call(b,f);if(j||a||b.document&&b.document.nodeType!==11)return j}catch(k){}return c(f,null,null,[b]).length>0})}();s.pseudos.nth=s.pseudos.eq;s.filters=r.prototype=s.pseudos;s.setFilters=new r;c.attr=i.attr;i.find=c;i.expr=c.selectors;i.expr[":"]=i.expr.pseudos;i.unique=c.uniqueSort;i.text=c.getText;i.isXMLDoc=c.isXML;i.contains=c.contains})(a);var Rb=/Until$/,lc=/^(?:parents|prev(?:Until|All))/,Lb=/^.[^:#\[\.,]*$/,
Sb=i.expr.match.needsContext,mc={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({find:function(a){var b,c,f,d,g,h,j=this;if(typeof a!="string")return i(a).filter(function(){b=0;for(c=j.length;b<c;b++)if(i.contains(j[b],this))return!0});h=this.pushStack("","find",a);b=0;for(c=this.length;b<c;b++)if(f=h.length,i.find(a,this[b],h),b>0)for(d=f;d<h.length;d++)for(g=0;g<f;g++)if(h[g]===h[d]){h.splice(d--,1);break}return h},has:function(a){var b,c=i(a,this),f=c.length;return this.filter(function(){for(b=
0;b<f;b++)if(i.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(m(this,a,!1),"not",a)},filter:function(a){return this.pushStack(m(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Sb.test(a)?i(a,this.context).index(this[0])>=0:i.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,f=0,d=this.length,g=[],h=Sb.test(a)||typeof a!="string"?i(a,b||this.context):0;f<d;f++)for(c=this[f];c&&c.ownerDocument&&c!==b&&c.nodeType!==11;){if(h?
h.index(c)>-1:i.find.matchesSelector(c,a)){g.push(c);break}c=c.parentNode}return g=g.length>1?i.unique(g):g,this.pushStack(g,"closest",a)},index:function(a){return a?typeof a=="string"?i.inArray(this[0],i(a)):i.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?i(a,b):i.makeArray(a&&a.nodeType?[a]:a),f=i.merge(this.get(),c);return this.pushStack(j(c[0])||j(f[0])?f:i.unique(f))},addBack:function(a){return this.add(a==null?
this.prevObject:this.prevObject.filter(a))}});i.fn.andSelf=i.fn.addBack;i.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return i.dir(a,"parentNode")},parentsUntil:function(a,b,c){return i.dir(a,"parentNode",c)},next:function(a){return k(a,"nextSibling")},prev:function(a){return k(a,"previousSibling")},nextAll:function(a){return i.dir(a,"nextSibling")},prevAll:function(a){return i.dir(a,"previousSibling")},nextUntil:function(a,b,c){return i.dir(a,"nextSibling",
c)},prevUntil:function(a,b,c){return i.dir(a,"previousSibling",c)},siblings:function(a){return i.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return i.sibling(a.firstChild)},contents:function(a){return i.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:i.merge([],a.childNodes)}},function(a,b){i.fn[a]=function(c,f){var d=i.map(this,b,c);return Rb.test(a)||(f=c),f&&typeof f=="string"&&(d=i.filter(f,d)),d=this.length>1&&!mc[a]?i.unique(d):d,this.length>1&&lc.test(a)&&
(d=d.reverse()),this.pushStack(d,a,A.call(arguments).join(","))}});i.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?i.find.matchesSelector(b[0],a)?[b[0]]:[]:i.find.matches(a,b)},dir:function(a,b,f){for(var d=[],a=a[b];a&&a.nodeType!==9&&(f===c||a.nodeType!==1||!i(a).is(f));)a.nodeType===1&&d.push(a),a=a[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var Mb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
nc=/ jQuery\d+="(?:null|\d+)"/g,xb=/^\s+/,Tb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ub=/<([\w:]+)/,oc=/<tbody/i,yb=/<|&#?\w+;/,Vb=/<(?:script|style|link)/i,Ua=/<(?:script|object|embed|option|style)/i,zb=RegExp("<(?:"+Mb+")[\\s/>]","i"),pb=/^(?:checkbox|radio)$/,Ab=/checked\s*(?:[^=]|=\s*.checked.)/i,Wb=/\/(java|ecma)script/i,cb=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,oa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],
thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},pc=q(y),Aa=pc.appendChild(y.createElement("div"));oa.optgroup=oa.option;oa.tbody=oa.tfoot=oa.colgroup=oa.caption=oa.thead;oa.th=oa.td;i.support.htmlSerialize||(oa._default=[1,"X<div>","</div>"]);i.fn.extend({text:function(a){return i.access(this,function(a){return a===
c?i.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(i.isFunction(a))return this.each(function(b){i(this).wrapAll(a.call(this,b))});if(this[0]){var b=i(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&a.firstChild.nodeType===1;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return i.isFunction(a)?this.each(function(b){i(this).wrapInner(a.call(this,
b))}):this.each(function(){var b=i(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=i.isFunction(a);return this.each(function(c){i(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,
!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!j(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=i.clean(arguments);return this.pushStack(i.merge(a,this),"before",this.selector)}},after:function(){if(!j(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=i.clean(arguments);return this.pushStack(i.merge(this,
a),"after",this.selector)}},remove:function(a,b){for(var c,f=0;(c=this[f])!=null;f++)if(!a||i.filter(a,[c]).length)!b&&c.nodeType===1&&(i.cleanData(c.getElementsByTagName("*")),i.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){for(var a,b=0;(a=this[b])!=null;b++)for(a.nodeType===1&&i.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return i.clone(this,
a,b)})},html:function(a){return i.access(this,function(a){var b=this[0]||{},f=0,d=this.length;if(a===c)return b.nodeType===1?b.innerHTML.replace(nc,""):c;if(typeof a=="string"&&!Vb.test(a)&&(i.support.htmlSerialize||!zb.test(a))&&(i.support.leadingWhitespace||!xb.test(a))&&!oa[(Ub.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Tb,"<$1></$2>");try{for(;f<d;f++)b=this[f]||{},b.nodeType===1&&(i.cleanData(b.getElementsByTagName("*")),b.innerHTML=a);b=0}catch(g){}}b&&this.empty().append(a)},null,a,arguments.length)},
replaceWith:function(a){return j(this[0])?this.length?this.pushStack(i(i.isFunction(a)?a():a),"replaceWith",a):this:i.isFunction(a)?this.each(function(b){var c=i(this),f=c.html();c.replaceWith(a.call(this,b,f))}):(typeof a!="string"&&(a=i(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;i(this).remove();b?i(b).before(a):i(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,f){var a=[].concat.apply([],a),d,g,h,j=0,k=a[0],l=[],m=this.length;
if(!i.support.checkClone&&m>1&&typeof k=="string"&&Ab.test(k))return this.each(function(){i(this).domManip(a,b,f)});if(i.isFunction(k))return this.each(function(d){var g=i(this);a[0]=k.call(this,d,b?g.html():c);g.domManip(a,b,f)});if(this[0]){d=i.buildFragment(a,this,l);h=d.fragment;g=h.firstChild;h.childNodes.length===1&&(h=g);if(g){b=b&&i.nodeName(g,"tr");for(d=d.cacheable||m-1;j<m;j++)f.call(b&&i.nodeName(this[j],"table")?this[j].getElementsByTagName("tbody")[0]||this[j].appendChild(this[j].ownerDocument.createElement("tbody")):
this[j],j===d?h:i.clone(h,!0,!0))}h=g=null;l.length&&i.each(l,function(a,b){b.src?i.ajax?i.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):i.error("no ajax"):i.globalEval((b.text||b.textContent||b.innerHTML||"").replace(cb,""));b.parentNode&&b.parentNode.removeChild(b)})}return this}});i.buildFragment=function(a,b,f){var d,g,h,j=a[0];return b=b||y,b=!b.nodeType&&b[0]||b,b=b.ownerDocument||b,a.length===1&&typeof j=="string"&&j.length<512&&b===y&&j.charAt(0)==="<"&&!Ua.test(j)&&
(i.support.checkClone||!Ab.test(j))&&(i.support.html5Clone||!zb.test(j))&&(g=!0,d=i.fragments[j],h=d!==c),d||(d=b.createDocumentFragment(),i.clean(a,b,d,f),g&&(i.fragments[j]=h&&d)),{fragment:d,cacheable:g}};i.fragments={};i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){i.fn[a]=function(c){var f,d=0,g=[],c=i(c),h=c.length;f=this.length===1&&this[0].parentNode;if((f==null||f&&f.nodeType===11&&f.childNodes.length===1)&&
h===1)return c[b](this[0]),this;for(;d<h;d++)f=(d>0?this.clone(!0):this).get(),i(c[d])[b](f),g=g.concat(f);return this.pushStack(g,a,c.selector)}});i.extend({clone:function(a,b,c){var f,d,g,h;i.support.html5Clone||i.isXMLDoc(a)||!zb.test("<"+a.nodeName+">")?h=a.cloneNode(!0):(Aa.innerHTML=a.outerHTML,Aa.removeChild(h=Aa.firstChild));if((!i.support.noCloneEvent||!i.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!i.isXMLDoc(a)){s(a,h);f=p(a);d=p(h);for(g=0;f[g];++g)d[g]&&s(f[g],d[g])}if(b&&
(n(a,h),c)){f=p(a);d=p(h);for(g=0;f[g];++g)n(f[g],d[g])}return h},clean:function(a,b,c,f){var d,g,h,j,k,m,t,n=b===y&&pc,o=[];if(!b||typeof b.createDocumentFragment=="undefined")b=y;for(d=0;(h=a[d])!=null;d++)if(typeof h=="number"&&(h+=""),h){if(typeof h=="string")if(yb.test(h)){n=n||q(b);m=b.createElement("div");n.appendChild(m);h=h.replace(Tb,"<$1></$2>");g=(Ub.exec(h)||["",""])[1].toLowerCase();j=oa[g]||oa._default;k=j[0];for(m.innerHTML=j[1]+h+j[2];k--;)m=m.lastChild;if(!i.support.tbody){k=oc.test(h);
j=g==="table"&&!k?m.firstChild&&m.firstChild.childNodes:j[1]==="<table>"&&!k?m.childNodes:[];for(g=j.length-1;g>=0;--g)i.nodeName(j[g],"tbody")&&!j[g].childNodes.length&&j[g].parentNode.removeChild(j[g])}!i.support.leadingWhitespace&&xb.test(h)&&m.insertBefore(b.createTextNode(xb.exec(h)[0]),m.firstChild);h=m.childNodes;m.parentNode.removeChild(m)}else h=b.createTextNode(h);h.nodeType?o.push(h):i.merge(o,h)}m&&(h=m=n=null);if(!i.support.appendChecked)for(d=0;(h=o[d])!=null;d++)i.nodeName(h,"input")?
l(h):typeof h.getElementsByTagName!="undefined"&&i.grep(h.getElementsByTagName("input"),l);if(c){a=function(a){if(!a.type||Wb.test(a.type))return f?f.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)};for(d=0;(h=o[d])!=null;d++)if(!i.nodeName(h,"script")||!a(h))c.appendChild(h),typeof h.getElementsByTagName!="undefined"&&(t=i.grep(i.merge([],h.getElementsByTagName("script")),a),o.splice.apply(o,[d+1,0].concat(t)),d+=t.length)}return o},cleanData:function(a,b){for(var c,f,d,g,h=0,j=
i.expando,k=i.cache,l=i.support.deleteExpando,m=i.event.special;(d=a[h])!=null;h++)if(b||i.acceptData(d))if(c=(f=d[j])&&k[f]){if(c.events)for(g in c.events)m[g]?i.event.remove(d,g):i.removeEvent(d,g,c.handle);k[f]&&(delete k[f],l?delete d[j]:d.removeAttribute?d.removeAttribute(j):d[j]=null,i.deletedIds.push(f))}}});(function(){var a,b;i.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||
a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};a=i.uaMatch(Q.userAgent);b={};a.browser&&(b[a.browser]=!0,b.version=a.version);b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0);i.browser=b;i.sub=function(){function a(b,c){return new a.fn.init(b,c)}i.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function ob(ob,c){return c&&c instanceof i&&!(c instanceof a)&&(c=a(c)),i.fn.init.call(this,
ob,c,b)};a.fn.init.prototype=a.fn;var b=a(y);return a}})();var la,ua,Ga,Va=/alpha\([^)]*\)/i,zc=/opacity=([^)]*)/,Ac=/^(top|right|bottom|left)$/,Bc=/^(none|table(?!-c[ea]).+)/,qc=/^margin/,ic=RegExp("^("+X+")(.*)$","i"),qb=RegExp("^("+X+")(?!px)[a-z%]+$","i"),Cc=RegExp("^([-+])=("+X+")","i"),rb={},Ba={position:"absolute",visibility:"hidden",display:"block"},db={letterSpacing:0,fontWeight:400},ya=["Top","Right","Bottom","Left"],Nb=["Webkit","O","Moz","ms"],Bb=i.fn.toggle;i.fn.extend({css:function(a,
b){return i.access(this,function(a,b,f){return f!==c?i.style(a,b,f):i.css(a,b)},a,b,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(a,b){var c=typeof a=="boolean";return i.isFunction(a)&&i.isFunction(b)?Bb.apply(this,arguments):this.each(function(){(c?a:C(this))?i(this).show():i(this).hide()})}});i.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=la(a,"opacity");return c===""?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,
opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":i.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,f,d){if(a&&!(a.nodeType===3||a.nodeType===8||!a.style)){var g,h,j,k=i.camelCase(b),l=a.style,b=i.cssProps[k]||(i.cssProps[k]=z(l,k));j=i.cssHooks[b]||i.cssHooks[k];if(f===c)return j&&"get"in j&&(g=j.get(a,!1,d))!==c?g:l[b];h=typeof f;h==="string"&&(g=Cc.exec(f))&&(f=(g[1]+1)*g[2]+parseFloat(i.css(a,b)),h="number");if(!(f==null||h==="number"&&isNaN(f)))if(h==="number"&&
!i.cssNumber[k]&&(f+="px"),!j||!("set"in j)||(f=j.set(a,f,d))!==c)try{l[b]=f}catch(m){}}},css:function(a,b,f,d){var g,h,j,k=i.camelCase(b);return b=i.cssProps[k]||(i.cssProps[k]=z(a.style,k)),j=i.cssHooks[b]||i.cssHooks[k],j&&"get"in j&&(g=j.get(a,!0,d)),g===c&&(g=la(a,b)),g==="normal"&&b in db&&(g=db[b]),f||d!==c?(h=parseFloat(g),f||i.isNumeric(h)?h||0:g):g},swap:function(a,b,c){var f,d={};for(f in b)d[f]=a.style[f],a.style[f]=b[f];c=c.call(a);for(f in b)a.style[f]=d[f];return c}});a.getComputedStyle?
la=function(b,c){var f,d,g,h,j=a.getComputedStyle(b,null),k=b.style;return j&&(f=j[c],f===""&&!i.contains(b.ownerDocument,b)&&(f=i.style(b,c)),qb.test(f)&&qc.test(c)&&(d=k.width,g=k.minWidth,h=k.maxWidth,k.minWidth=k.maxWidth=k.width=f,f=j.width,k.width=d,k.minWidth=g,k.maxWidth=h)),f}:y.documentElement.currentStyle&&(la=function(a,b){var c,f,d=a.currentStyle&&a.currentStyle[b],g=a.style;return d==null&&g&&g[b]&&(d=g[b]),qb.test(d)&&!Ac.test(b)&&(c=g.left,f=a.runtimeStyle&&a.runtimeStyle.left,f&&
(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":d,d=g.pixelLeft+"px",g.left=c,f&&(a.runtimeStyle.left=f)),d===""?"auto":d});i.each(["height","width"],function(a,b){i.cssHooks[b]={get:function(a,c,f){if(c)return a.offsetWidth===0&&Bc.test(la(a,"display"))?i.swap(a,Ba,function(){return O(a,b,f)}):O(a,b,f)},set:function(a,c,f){return T(a,c,f?u(a,b,f,i.support.boxSizing&&i.css(a,"boxSizing")==="border-box"):0)}}});i.support.opacity||(i.cssHooks.opacity={get:function(a,b){return zc.test((b&&
a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,f=a.currentStyle,d=i.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=f&&f.filter||c.filter||"";c.zoom=1;if(b>=1&&i.trim(g.replace(Va,""))===""&&c.removeAttribute&&(c.removeAttribute("filter"),f&&!f.filter))return;c.filter=Va.test(g)?g.replace(Va,d):g+" "+d}});i(function(){i.support.reliableMarginRight||(i.cssHooks.marginRight={get:function(a,b){return i.swap(a,{display:"inline-block"},
function(){if(b)return la(a,"marginRight")})}});!i.support.pixelPosition&&i.fn.position&&i.each(["top","left"],function(a,b){i.cssHooks[b]={get:function(a,c){if(c){var f=la(a,b);return qb.test(f)?i(a).position()[b]+"px":f}}}})});i.expr&&i.expr.filters&&(i.expr.filters.hidden=function(a){return a.offsetWidth===0&&a.offsetHeight===0||!i.support.reliableHiddenOffsets&&(a.style&&a.style.display||la(a,"display"))==="none"},i.expr.filters.visible=function(a){return!i.expr.filters.hidden(a)});i.each({margin:"",
padding:"",border:"Width"},function(a,b){i.cssHooks[a+b]={expand:function(c){for(var f=typeof c=="string"?c.split(" "):[c],d={},c=0;c<4;c++)d[a+ya[c]+b]=f[c]||f[c-2]||f[0];return d}};qc.test(a)||(i.cssHooks[a+b].set=T)});var Cb=/%20/g,Oa=/\[\]$/,Wa=/\r?\n/g,eb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Xb=/^(?:select|textarea)/i;i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?
i.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Xb.test(this.nodeName)||eb.test(this.type))}).map(function(a,b){var c=i(this).val();return c==null?null:i.isArray(c)?i.map(c,function(a){return{name:b.name,value:a.replace(Wa,"\r\n")}}):{name:b.name,value:c.replace(Wa,"\r\n")}}).get()}});i.param=function(a,b){var f,d=[],g=function(a,b){b=i.isFunction(b)?b():b==null?"":b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};b===c&&(b=i.ajaxSettings&&
i.ajaxSettings.traditional);if(i.isArray(a)||a.jquery&&!i.isPlainObject(a))i.each(a,function(){g(this.name,this.value)});else for(f in a)M(f,a[f],b,g);return d.join("&").replace(Cb,"+")};var xa,pa,fb=/#.*$/,Yb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Db=/^(?:GET|HEAD)$/,Zb=/^\/\//,$b=/\?/,gb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,hb=/([?&])_=[^&]*/,Ca=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Xa=i.fn.load,Ha={},ib={},Na=["*/"]+["*"];try{pa=Pa.href}catch(Eb){pa=y.createElement("a"),pa.href=
"",pa=pa.href}xa=Ca.exec(pa.toLowerCase())||[];i.fn.load=function(a,b,f){if(typeof a!="string"&&Xa)return Xa.apply(this,arguments);if(!this.length)return this;var d,g,h,j=this,k=a.indexOf(" ");return k>=0&&(d=a.slice(k,a.length),a=a.slice(0,k)),i.isFunction(b)?(f=b,b=c):b&&typeof b=="object"&&(g="POST"),i.ajax({url:a,type:g,dataType:"html",data:b,complete:function(a,b){f&&j.each(f,h||[a.responseText,b,a])}}).done(function(a){h=arguments;j.html(d?i("<div>").append(a.replace(gb,"")).find(d):a)}),this};
i.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){i.fn[b]=function(a){return this.on(b,a)}});i.each(["get","post"],function(a,b){i[b]=function(a,f,d,g){return i.isFunction(f)&&(g=g||d,d=f,f=c),i.ajax({type:b,url:a,data:f,success:d,dataType:g})}});i.extend({getScript:function(a,b){return i.get(a,c,b,"script")},getJSON:function(a,b,c){return i.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?V(a,i.ajaxSettings):(b=a,a=i.ajaxSettings),V(a,b),a},ajaxSettings:{url:pa,
isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(xa[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Na},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},
flatOptions:{context:!0,url:!0}},ajaxPrefilter:ha(Ha),ajaxTransport:ha(ib),ajax:function(a,b){function f(a,b,h,l){var t,F,p,u,I,y=b;if(z!==2){z=2;k&&clearTimeout(k);j=c;g=l||"";w.readyState=a>0?4:0;if(h){u=o;var l=w,C,x,da,D,R=u.contents,P=u.dataTypes,v=u.responseFields;for(x in v)x in h&&(l[v[x]]=h[x]);for(;P[0]==="*";)P.shift(),C===c&&(C=u.mimeType||l.getResponseHeader("content-type"));if(C)for(x in R)if(R[x]&&R[x].test(C)){P.unshift(x);break}if(P[0]in h)da=P[0];else{for(x in h){if(!P[0]||u.converters[x+
" "+P[0]]){da=x;break}D||(D=x)}da=da||D}u=da?(da!==P[0]&&P.unshift(da),h[da]):void 0}if(a>=200&&a<300||a===304)if(o.ifModified&&(I=w.getResponseHeader("Last-Modified"),I&&(i.lastModified[d]=I),I=w.getResponseHeader("Etag"),I&&(i.etag[d]=I)),a===304)y="notmodified",t=!0;else{var J;a:{h=o;t=u;var O;I=h.dataTypes.slice();y=I[0];C={};x=0;h.dataFilter&&(t=h.dataFilter(t,h.dataType));if(I[1])for(J in h.converters)C[J.toLowerCase()]=h.converters[J];for(;F=I[++x];)if(F!=="*"){if(y!=="*"&&y!==F){J=C[y+" "+
F]||C["* "+F];if(!J)for(O in C)if(p=O.split(" "),p[1]===F&&(J=C[y+" "+p[0]]||C["* "+p[0]])){J===!0?J=C[O]:C[O]!==!0&&(F=p[0],I.splice(x--,0,F));break}if(J!==!0)if(J&&h["throws"])t=J(t);else try{t=J(t)}catch(A){J={state:"parsererror",error:J?A:"No conversion from "+y+" to "+F};break a}}y=F}J={state:"success",data:t}}t=J;y=t.state;F=t.data;p=t.error;t=!p}else if(p=y,!y||a)y="error",a<0&&(a=0);w.status=a;w.statusText=(b||y)+"";t?r.resolveWith(n,[F,y,w]):r.rejectWith(n,[w,y,p]);w.statusCode(s);s=c;m&&
G.trigger("ajax"+(t?"Success":"Error"),[w,o,t?F:p]);q.fireWith(n,[w,y]);m&&(G.trigger("ajaxComplete",[w,o]),--i.active||i.event.trigger("ajaxStop"))}}typeof a=="object"&&(b=a,a=c);var b=b||{},d,g,h,j,k,l,m,t,o=i.ajaxSetup({},b),n=o.context||o,G=n!==o&&(n.nodeType||n instanceof i)?i(n):i.event,r=i.Deferred(),q=i.Callbacks("once memory"),s=o.statusCode||{},p={},u={},z=0,I="canceled",w={readyState:0,setRequestHeader:function(a,b){if(!z){var c=a.toLowerCase(),a=u[c]=u[c]||a;p[a]=b}return this},getAllResponseHeaders:function(){return z===
2?g:null},getResponseHeader:function(a){var b;if(z===2){if(!h)for(h={};b=Yb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return b===c?null:b},overrideMimeType:function(a){return z||(o.mimeType=a),this},abort:function(a){return a=a||I,j&&j.abort(a),f(0,a),this}};r.promise(w);w.success=w.done;w.error=w.fail;w.complete=q.add;w.statusCode=function(a){if(a){var b;if(z<2)for(b in a)s[b]=[s[b],a[b]];else b=a[w.status],w.always(b)}return this};o.url=((a||o.url)+"").replace(fb,"").replace(Zb,xa[1]+
"//");o.dataTypes=i.trim(o.dataType||"*").toLowerCase().split(v);o.crossDomain==null&&(l=Ca.exec(o.url.toLowerCase())||!1,o.crossDomain=l&&l.join(":")+(l[3]?"":l[1]==="http:"?80:443)!==xa.join(":")+(xa[3]?"":xa[1]==="http:"?80:443));o.data&&o.processData&&typeof o.data!="string"&&(o.data=i.param(o.data,o.traditional));U(Ha,o,b,w);if(z===2)return w;m=o.global;o.type=o.type.toUpperCase();o.hasContent=!Db.test(o.type);m&&i.active++===0&&i.event.trigger("ajaxStart");if(!o.hasContent&&(o.data&&(o.url+=
($b.test(o.url)?"&":"?")+o.data,delete o.data),d=o.url,o.cache===!1)){l=i.now();var y=o.url.replace(hb,"$1_="+l);o.url=y+(y===o.url?($b.test(o.url)?"&":"?")+"_="+l:"")}(o.data&&o.hasContent&&o.contentType!==!1||b.contentType)&&w.setRequestHeader("Content-Type",o.contentType);o.ifModified&&(d=d||o.url,i.lastModified[d]&&w.setRequestHeader("If-Modified-Since",i.lastModified[d]),i.etag[d]&&w.setRequestHeader("If-None-Match",i.etag[d]));w.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?
o.accepts[o.dataTypes[0]]+(o.dataTypes[0]!=="*"?", "+Na+"; q=0.01":""):o.accepts["*"]);for(t in o.headers)w.setRequestHeader(t,o.headers[t]);if(!o.beforeSend||o.beforeSend.call(n,w,o)!==!1&&z!==2){I="abort";for(t in{success:1,error:1,complete:1})w[t](o[t]);if(j=U(ib,o,b,w)){w.readyState=1;m&&G.trigger("ajaxSend",[w,o]);o.async&&o.timeout>0&&(k=setTimeout(function(){w.abort("timeout")},o.timeout));try{z=1,j.send(p,f)}catch(C){if(z<2)f(-1,C);else throw C;}}else f(-1,"No Transport");return w}return w.abort()},
active:0,lastModified:{},etag:{}});var jb=[],Fb=/\?/,ac=/(=)\?(?=&|$)|\?\?/,Gb=i.now();i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=jb.pop()||i.expando+"_"+Gb++;return this[a]=!0,a}});i.ajaxPrefilter("json jsonp",function(b,f,d){var g,h,j,k=b.data,l=b.url,m=b.jsonp!==!1,o=m&&ac.test(l),t=m&&!o&&typeof k=="string"&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(k);if(b.dataTypes[0]==="jsonp"||o||t)return g=b.jsonpCallback=i.isFunction(b.jsonpCallback)?b.jsonpCallback():
b.jsonpCallback,h=a[g],o?b.url=l.replace(ac,"$1"+g):t?b.data=k.replace(ac,"$1"+g):m&&(b.url+=(Fb.test(l)?"&":"?")+b.jsonp+"="+g),b.converters["script json"]=function(){return j||i.error(g+" was not called"),j[0]},b.dataTypes[0]="json",a[g]=function(){j=arguments},d.always(function(){a[g]=h;b[g]&&(b.jsonpCallback=f.jsonpCallback,jb.push(g));j&&i.isFunction(h)&&h(j[0]);j=h=c}),"script"});i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return i.globalEval(a),a}}});i.ajaxPrefilter("script",function(a){a.cache===c&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});i.ajaxTransport("script",function(a){if(a.crossDomain){var b,f=y.head||y.getElementsByTagName("head")[0]||y.documentElement;return{send:function(d,g){b=y.createElement("script");b.async="async";a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,
d){if(d||!b.readyState||/loaded|complete/.test(b.readyState))b.onload=b.onreadystatechange=null,f&&b.parentNode&&f.removeChild(b),b=c,d||g(200,"success")};f.insertBefore(b,f.firstChild)},abort:function(){b&&b.onload(0,1)}}}});var kb,bc=a.ActiveXObject?function(){for(var a in kb)kb[a](0,1)}:!1,Dc=0;i.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&fa()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:fa;(function(a){i.extend(i.support,
{ajax:!!a,cors:!!a&&"withCredentials"in a})})(i.ajaxSettings.xhr());i.support.ajax&&i.ajaxTransport(function(b){if(!b.crossDomain||i.support.cors){var f;return{send:function(d,g){var h,j,k=b.xhr();b.username?k.open(b.type,b.url,b.async,b.username,b.password):k.open(b.type,b.url,b.async);if(b.xhrFields)for(j in b.xhrFields)k[j]=b.xhrFields[j];b.mimeType&&k.overrideMimeType&&k.overrideMimeType(b.mimeType);!b.crossDomain&&!d["X-Requested-With"]&&(d["X-Requested-With"]="XMLHttpRequest");try{for(j in d)k.setRequestHeader(j,
d[j])}catch(l){}k.send(b.hasContent&&b.data||null);f=function(a,d){var j,l,m,o,t;try{if(f&&(d||k.readyState===4))if(f=c,h&&(k.onreadystatechange=i.noop,bc&&delete kb[h]),d)k.readyState!==4&&k.abort();else{j=k.status;m=k.getAllResponseHeaders();o={};(t=k.responseXML)&&t.documentElement&&(o.xml=t);try{o.text=k.responseText}catch(n){}try{l=k.statusText}catch(G){l=""}!j&&b.isLocal&&!b.crossDomain?j=o.text?200:404:j===1223&&(j=204)}}catch(r){d||g(-1,r)}o&&g(j,l,o,m)};b.async?k.readyState===4?setTimeout(f,
0):(h=++Dc,bc&&(kb||(kb={},i(a).unload(bc)),kb[h]=f),k.onreadystatechange=f):f()},abort:function(){f&&f(0,1)}}}});var Za,lb,Ec=/^(?:toggle|show|hide)$/,Fc=RegExp("^(?:([-+])=|)("+X+")([a-z%]*)$","i"),Gc=/queueHooks$/,sb=[function(a,b,c){var f,d,g,h,j,k,l=this,m=a.style,o={},t=[],n=a.nodeType&&C(a);c.queue||(j=i._queueHooks(a,"fx"),j.unqueued==null&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--;i.queue(a,"fx").length||
j.empty.fire()})}));a.nodeType===1&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],i.css(a,"display")==="inline"&&i.css(a,"float")==="none"&&(!i.support.inlineBlockNeedsLayout||ba(a.nodeName)==="inline"?m.display="inline-block":m.zoom=1));c.overflow&&(m.overflow="hidden",i.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0];m.overflowX=c.overflow[1];m.overflowY=c.overflow[2]}));for(f in b)d=b[f],Ec.exec(d)&&(delete b[f],d!==(n?"hide":"show")&&t.push(f));
if(d=t.length){g=i._data(a,"fxshow")||i._data(a,"fxshow",{});n?i(a).show():l.done(function(){i(a).hide()});l.done(function(){var b;i.removeData(a,"fxshow",!0);for(b in o)i.style(a,b,o[b])});for(f=0;f<d;f++)b=t[f],h=l.createTween(b,n?g[b]:0),o[b]=g[b]||i.style(a,b),b in g||(g[b]=h.start,n&&(h.end=h.start,h.start=b==="width"||b==="height"?1:0))}}],$a={"*":[function(a,b){var c,f,d=this.createTween(a,b),g=Fc.exec(b),h=d.cur(),j=+h||0,k=1,l=20;if(g){c=+g[2];f=g[3]||(i.cssNumber[a]?"":"px");if(f!=="px"&&
j){j=i.css(d.elem,a,!0)||c||1;do k=k||".5",j/=k,i.style(d.elem,a,j+f);while(k!==(k=d.cur()/h)&&k!==1&&--l)}d.unit=f;d.start=j;d.end=g[1]?j+(g[1]+1)*c:c}return d}]};i.Animation=i.extend(ea,{tweener:function(a,b){i.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,f=0,d=a.length;f<d;f++)c=a[f],$a[c]=$a[c]||[],$a[c].unshift(b)},prefilter:function(a,b){b?sb.unshift(a):sb.push(a)}});i.Tween=t;t.prototype={constructor:t,init:function(a,b,c,f,d,g){this.elem=a;this.prop=c;this.easing=d||"swing";this.options=
b;this.start=this.now=this.cur();this.end=f;this.unit=g||(i.cssNumber[c]?"":"px")},cur:function(){var a=t.propHooks[this.prop];return a&&a.get?a.get(this):t.propHooks._default.get(this)},run:function(a){var b,c=t.propHooks[this.prop];return this.options.duration?this.pos=b=i.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):t.propHooks._default.set(this),
this}};t.prototype.init.prototype=t.prototype;t.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||a.elem.style&&a.elem.style[a.prop]!=null?(b=i.css(a.elem,a.prop,!1,""),!b||b==="auto"?0:b):a.elem[a.prop]},set:function(a){i.fx.step[a.prop]?i.fx.step[a.prop](a):a.elem.style&&(a.elem.style[i.cssProps[a.prop]]!=null||i.cssHooks[a.prop])?i.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};t.propHooks.scrollTop=t.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&
(a.elem[a.prop]=a.now)}};i.each(["toggle","show","hide"],function(a,b){var c=i.fn[b];i.fn[b]=function(f,d,g){return f==null||typeof f=="boolean"||!a&&i.isFunction(f)&&i.isFunction(d)?c.apply(this,arguments):this.animate(o(b,!0),f,d,g)}});i.fn.extend({fadeTo:function(a,b,c,f){return this.filter(C).css("opacity",0).show().end().animate({opacity:b},a,c,f)},animate:function(a,b,c,f){var d=i.isEmptyObject(a),g=i.speed(b,c,f),b=function(){var b=ea(this,i.extend({},a),g);d&&b.stop(!0)};return d||g.queue===
!1?this.each(b):this.queue(g.queue,b)},stop:function(a,b,f){var d=function(a){var b=a.stop;delete a.stop;b(f)};return typeof a!="string"&&(f=b,b=a,a=c),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=a!=null&&a+"queueHooks",g=i.timers,h=i._data(this);if(c)h[c]&&h[c].stop&&d(h[c]);else for(c in h)h[c]&&h[c].stop&&Gc.test(c)&&d(h[c]);for(c=g.length;c--;)g[c].elem===this&&(a==null||g[c].queue===a)&&(g[c].anim.stop(f),b=!1,g.splice(c,1));(b||!f)&&i.dequeue(this,a)})}});i.each({slideDown:o("show"),
slideUp:o("hide"),slideToggle:o("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){i.fn[a]=function(a,c,f){return this.animate(b,a,c,f)}});i.speed=function(a,b,c){var f=a&&typeof a=="object"?i.extend({},a):{complete:c||!c&&b||i.isFunction(a)&&a,duration:a,easing:c&&b||b&&!i.isFunction(b)&&b};f.duration=i.fx.off?0:typeof f.duration=="number"?f.duration:f.duration in i.fx.speeds?i.fx.speeds[f.duration]:i.fx.speeds._default;if(f.queue==null||f.queue===
!0)f.queue="fx";return f.old=f.complete,f.complete=function(){i.isFunction(f.old)&&f.old.call(this);f.queue&&i.dequeue(this,f.queue)},f};i.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}};i.timers=[];i.fx=t.prototype.init;i.fx.tick=function(){for(var a,b=i.timers,c=0;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||i.fx.stop()};i.fx.timer=function(a){a()&&i.timers.push(a)&&!lb&&(lb=setInterval(i.fx.tick,i.fx.interval))};i.fx.interval=13;i.fx.stop=
function(){clearInterval(lb);lb=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fx.step={};i.expr&&i.expr.filters&&(i.expr.filters.animated=function(a){return i.grep(i.timers,function(b){return a===b.elem}).length});var mb=/^(?:body|html)$/i;i.fn.offset=function(a){if(arguments.length)return a===c?this:this.each(function(b){i.offset.setOffset(this,a,b)});var b,f,d,g,h,j,k,l={top:0,left:0},m=this[0],o=m&&m.ownerDocument;return!o?void 0:(f=o.body)===m?i.offset.bodyOffset(m):(b=o.documentElement,
i.contains(b,m)?(typeof m.getBoundingClientRect!="undefined"&&(l=m.getBoundingClientRect()),d=r(o),g=b.clientTop||f.clientTop||0,h=b.clientLeft||f.clientLeft||0,j=d.pageYOffset||b.scrollTop,k=d.pageXOffset||b.scrollLeft,{top:l.top+j-g,left:l.left+k-h}):l)};i.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return i.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(i.css(a,"marginTop"))||0,c+=parseFloat(i.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var f=
i.css(a,"position");f==="static"&&(a.style.position="relative");var d=i(a),g=d.offset(),h=i.css(a,"top"),j=i.css(a,"left"),k={},l={},m,o;(f==="absolute"||f==="fixed")&&i.inArray("auto",[h,j])>-1?(l=d.position(),m=l.top,o=l.left):(m=parseFloat(h)||0,o=parseFloat(j)||0);i.isFunction(b)&&(b=b.call(a,c,g));b.top!=null&&(k.top=b.top-g.top+m);b.left!=null&&(k.left=b.left-g.left+o);"using"in b?b.using.call(a,k):d.css(k)}};i.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),c=
this.offset(),f=mb.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(i.css(a,"marginTop"))||0,c.left-=parseFloat(i.css(a,"marginLeft"))||0,f.top+=parseFloat(i.css(b[0],"borderTopWidth"))||0,f.left+=parseFloat(i.css(b[0],"borderLeftWidth"))||0,{top:c.top-f.top,left:c.left-f.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||y.body;a&&!mb.test(a.nodeName)&&i.css(a,"position")==="static";)a=a.offsetParent;return a||y.body})}});i.each({scrollLeft:"pageXOffset",
scrollTop:"pageYOffset"},function(a,b){var f=/Y/.test(b);i.fn[a]=function(d){return i.access(this,function(a,d,g){var h=r(a);if(g===c)return h?b in h?h[b]:h.document.documentElement[d]:a[d];h?h.scrollTo(f?i(h).scrollLeft():g,f?g:i(h).scrollTop()):a[d]=g},a,d,arguments.length,null)}});i.each({Height:"height",Width:"width"},function(a,b){i.each({padding:"inner"+a,content:b,"":"outer"+a},function(f,d){i.fn[d]=function(d,g){var h=arguments.length&&(f||typeof d!="boolean"),j=f||(d===!0||g===!0?"margin":
"border");return i.access(this,function(b,f,d){var g;return i.isWindow(b)?b.document.documentElement["client"+a]:b.nodeType===9?(g=b.documentElement,Math.max(b.body["scroll"+a],g["scroll"+a],b.body["offset"+a],g["offset"+a],g["client"+a])):d===c?i.css(b,f,d,j):i.style(b,f,d,j)},b,h?d:c,h,null)}})});a.jQuery=a.$=i;typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return i})})(window);(function(a){var c=/["\\\x00-\x1f\x7f-\x9f]/g,g={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};a.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(c){if(c===null)return"null";var b=typeof c;if(b!=="undefined"){if(b==="number"||b==="boolean")return""+c;if(b==="string")return a.quoteString(c);if(b==="object"){if(typeof c.toJSON==="function")return a.toJSON(c.toJSON());if(c.constructor===Date){var f=c.getUTCMonth()+1,g=c.getUTCDate(),j=c.getUTCFullYear(),
b=c.getUTCHours(),k=c.getUTCMinutes(),m=c.getUTCSeconds(),c=c.getUTCMilliseconds();f<10&&(f="0"+f);g<10&&(g="0"+g);b<10&&(b="0"+b);k<10&&(k="0"+k);m<10&&(m="0"+m);c<100&&(c="0"+c);c<10&&(c="0"+c);return'"'+j+"-"+f+"-"+g+"T"+b+":"+k+":"+m+"."+c+'Z"'}if(c.constructor===Array){f=[];for(g=0;g<c.length;g++)f.push(a.toJSON(c[g])||"null");return"["+f.join(",")+"]"}g=[];for(j in c){b=typeof j;if(b==="number")f='"'+j+'"';else if(b==="string")f=a.quoteString(j);else continue;b=typeof c[j];b==="function"||b===
"undefined"||(b=a.toJSON(c[j]),g.push(f+":"+b))}return"{"+g.join(",")+"}"}}};a.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(a){return eval("("+a+")")};a.secureEvalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(a){if(/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return eval("("+a+")");else throw new SyntaxError("Error parsing JSON, source is not valid.");
};a.quoteString=function(a){return a.match(c)?'"'+a.replace(c,function(a){var c=g[a];if(typeof c==="string")return c;c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+a+'"'}})(jQuery);window.onerror=function(a,c,g){logError("onerror",a,c,g)};function T5Error(a){this.errordesc=a;this.origin="JS"}
function logError(a,c,g,d){try{var b="";try{var f=JSON.parse(window.sessionStorage.getItem("facebookuser"));f&&(b="[User is "+f.name+"]")}catch(h){}var j=new T5Error("origin:"+a+"; msg:"+c+b+"; url:"+g+"; lineNo:"+d);$.ajax({url:WS_URL_ROOT+"/Game/logError",type:"POST",data:JSON.stringify(j),dataType:"json",contentType:"application/json: charset=utf-8",success:function(){}})}catch(k){}}
function logErrorExtra(a,c,g,d,b){try{var f="";try{var h=JSON.parse(window.sessionStorage.getItem("facebookuser"));h&&(f="[User is "+h.name+"]")}catch(j){}var k=new T5Error("origin:"+a+"; msg:"+c+f+"; url:"+g+"; lineNo:"+d);k.origin=b;$.ajax({url:WS_URL_ROOT+"/Game/logError",type:"POST",data:JSON.stringify(k),dataType:"json",contentType:"application/json: charset=utf-8",success:function(){}})}catch(m){}};(function(a,c){function g(c,f){var d,g;if(a.isArray(c)){for(d=c.length-1;d>=0;d--)g=c[d],a.type(c)==="object"||a.type(g)==="string"&&b.transports[g]||(f.log("Invalid transport: "+g+", removing it from the transports list."),c.splice(d,1));c.length===0&&(f.log("No transports remain within the specified transport array."),c=null)}else if(a.type(c)==="object"||b.transports[c]||c==="auto"){if(c==="auto"&&b._.ieVersion<=8)return["longPolling"]}else f.log("Invalid transport: "+c.toString()),c=null;return c}
function d(a){return a==="http:"?80:a==="https:"?443:void 0}if(typeof a!="function")throw Error("SignalR: jQuery not found. Please ensure jQuery is referenced before the SignalR.js file.");if(!c.JSON)throw Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");var b,f,h=c.document.readyState==="complete",j=a(c),k={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",
onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},m=function(b,c,f){return c===b.state?(b.state=f,a(b).triggerHandler(k.onStateChanged,[{oldState:c,newState:f}]),!0):!1},q=function(a){var f,d;a._.configuredStopReconnectingTimeout||(d=function(a){a.log("Couldn't reconnect within the configured timeout ("+a.disconnectTimeout+"ms), disconnecting.");a.stop(!1,!1)},a.reconnecting(function(){var a=
this;a.state===b.connectionState.reconnecting&&(f=c.setTimeout(function(){d(a)},a.disconnectTimeout))}),a.stateChanged(function(a){a.oldState===b.connectionState.reconnecting&&c.clearTimeout(f)}),a._.configuredStopReconnectingTimeout=!0)};b=function(a,c,f){return new b.fn.init(a,c,f)};b._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:function(){var a,b;return c.navigator.appName==="Microsoft Internet Explorer"&&(b=/MSIE ([0-9]+\.[0-9]+)/.exec(c.navigator.userAgent),
b&&(a=c.parseFloat(b[1]))),a}()};b.events=k;b.changeState=m;b.isDisconnecting=function(a){return a.state===b.connectionState.disconnected};b.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4};b.hub={start:function(){throw Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/hubs'><\/script>.");}};j.load(function(){h=!0});b.fn=b.prototype={init:function(a,b,c){this.url=a;this.qs=b;this._={};typeof c=="boolean"&&(this.logging=c)},
isCrossDomain:function(b,f){var g;return(b=a.trim(b),b.indexOf("http")!==0)?!1:(f=f||c.location,g=c.document.createElement("a"),g.href=b,g.protocol+(g.host.match(/:\d+$/)?g.host:g.host+":"+d(g.protocol))!==f.protocol+(f.host.match(/:\d+$/)?f.host:f.host+":"+d(f.protocol)))},ajaxDataType:"json",contentType:"application/json; charset=UTF-8",logging:!1,state:b.connectionState.disconnected,keepAliveData:{},reconnectDelay:2E3,disconnectTimeout:3E4,keepAliveWarnAt:2/3,start:function(f,d){var p=this,l={waitForPageLoad:!0,
transport:"auto",jsonp:!1},z,C=p._deferral||a.Deferred(),x=c.document.createElement("a"),T;if(a.type(f)==="function"?d=f:a.type(f)==="object"&&(a.extend(l,f),a.type(l.callback)==="function"&&(d=l.callback)),l.transport=g(l.transport,p),!l.transport)throw Error("SignalR: Invalid transport(s) specified, aborting start.");return!h&&l.waitForPageLoad===!0?(j.load(function(){p._deferral=C;p.start(f,d)}),C.promise()):(q(p),m(p,b.connectionState.disconnected,b.connectionState.connecting)===!1)?(C.resolve(p),
C.promise()):(x.href=p.url,x.protocol&&x.protocol!==":"?(p.protocol=x.protocol,p.host=x.host,p.baseUrl=x.protocol+"//"+x.host):(p.protocol=c.document.location.protocol,p.host=c.document.location.host,p.baseUrl=p.protocol+"//"+p.host),p.wsProtocol=p.protocol==="https:"?"wss://":"ws://",l.transport==="auto"&&l.jsonp===!0&&(l.transport="longPolling"),this.isCrossDomain(p.url)&&(p.log("Auto detected cross domain url."),l.transport==="auto"&&(l.transport=["webSockets","longPolling"]),l.jsonp||(l.jsonp=
!a.support.cors,l.jsonp&&p.log("Using jsonp because this browser doesn't support CORS")),p.contentType=b._.defaultContentType),p.ajaxDataType=l.jsonp?"jsonp":"json",a(p).bind(k.onStart,function(){a.type(d)==="function"&&d.call(p);C.resolve(p)}),z=function(c,f){if(f=f||0,f>=c.length)p.transport||(a(p).triggerHandler(k.onError,["SignalR: No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization."]),C.reject("SignalR: No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization."),
p.stop());else{var d=c[f],g=a.type(d)==="object"?d:b.transports[d];d.indexOf("_")===0?z(c,f+1):g.start(p,function(){g.supportsKeepAlive&&p.keepAliveData.activated&&b.transports._logic.monitorKeepAlive(p);p.transport=g;m(p,b.connectionState.connecting,b.connectionState.connected);a(p).triggerHandler(k.onStart);j.unload(function(){p.stop(!1)})},function(){z(c,f+1)})}},T=p.url+"/negotiate",T=b.transports._logic.addQs(T,p),p.log("Negotiating with '"+T+"'."),a.ajax({url:T,global:!1,cache:!1,type:"GET",
contentType:p.contentType,data:{},dataType:p.ajaxDataType,error:function(b){a(p).triggerHandler(k.onError,[b.responseText]);C.reject("SignalR: Error during negotiation request: "+b.responseText);p.stop()},success:function(c){var f=p.keepAliveData,d,g;(p.appRelativeUrl=c.Url,p.id=c.ConnectionId,p.token=c.ConnectionToken,p.webSocketServerUrl=c.WebSocketServerUrl,p.disconnectTimeout=c.DisconnectTimeout*1E3,c.KeepAliveTimeout?(f.activated=!0,f.timeout=c.KeepAliveTimeout*1E3,f.timeoutWarning=f.timeout*
p.keepAliveWarnAt,f.checkInterval=(f.timeout-f.timeoutWarning)/3):f.activated=!1,!c.ProtocolVersion||c.ProtocolVersion!=="1.2")?(a(p).triggerHandler(k.onError,["You are using a version of the client that isn't compatible with the server. Client version 1.2, server version "+c.ProtocolVersion+"."]),C.reject("You are using a version of the client that isn't compatible with the server. Client version 1.2, server version "+c.ProtocolVersion+".")):(a(p).triggerHandler(k.onStarting),d=[],g=[],a.each(b.transports,
function(a){if(a==="webSockets"&&!c.TryWebSockets)return!0;g.push(a)}),a.isArray(l.transport)?a.each(l.transport,function(){(a.type(this)==="object"||a.type(this)==="string"&&a.inArray(""+this,g)>=0)&&d.push(a.type(this)==="string"?""+this:this)}):a.type(l.transport)==="object"||a.inArray(l.transport,g)>=0?d.push(l.transport):d=g,z(d))}}),C.promise())},starting:function(b){var c=this;return a(c).bind(k.onStarting,function(){b.call(c)}),c},send:function(a){if(this.state===b.connectionState.disconnected)throw Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");
if(this.state===b.connectionState.connecting)throw Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return this.transport.send(this,a),this},received:function(b){var c=this;return a(c).bind(k.onReceived,function(a,f){b.call(c,f)}),c},stateChanged:function(b){var c=this;return a(c).bind(k.onStateChanged,function(a,f){b.call(c,f)}),c},error:function(b){var c=this;return a(c).bind(k.onError,function(a,f){b.call(c,
f)}),c},disconnected:function(b){var c=this;return a(c).bind(k.onDisconnect,function(){b.call(c)}),c},connectionSlow:function(b){var c=this;return a(c).bind(k.onConnectionSlow,function(){b.call(c)}),c},reconnecting:function(b){var c=this;return a(c).bind(k.onReconnecting,function(){b.call(c)}),c},reconnected:function(b){var c=this;return a(c).bind(k.onReconnect,function(){b.call(c)}),c},stop:function(c,f){if(this.state!==b.connectionState.disconnected){try{this.transport&&(f!==!1&&this.transport.abort(this,
c),this.transport.supportsKeepAlive&&this.keepAliveData.activated&&b.transports._logic.stopMonitoringKeepAlive(this),this.transport.stop(this),this.transport=null),a(this).triggerHandler(k.onDisconnect),delete this.messageId,delete this.groupsToken,delete this.id,delete this._deferral}finally{m(this,this.state,b.connectionState.disconnected)}return this}},log:function(a){if(this.logging!==!1){var b;typeof c.console!="undefined"&&(b="["+(new Date).toTimeString()+"] SignalR: "+a,c.console.debug?c.console.debug(b):
c.console.log&&c.console.log(b))}}};b.fn.init.prototype=b.fn;b.noConflict=function(){return a.connection===b&&(a.connection=f),b};a.connection&&(f=a.connection);a.connection=a.signalR=b})(window.jQuery,window);
(function(a,c){function g(f){var j=f.keepAliveData,k,m;f.state===d.connectionState.connected&&(k=new Date,k.setTime(k-j.lastKeepAlive),m=k.getTime(),m>=j.timeout?(f.log("Keep alive timed out.  Notifying transport that connection has been lost."),f.transport.lostConnection(f)):m>=j.timeoutWarning?j.userNotified||(f.log("Keep alive has been missed, connection may be dead/slow."),a(f).triggerHandler(b.onConnectionSlow),j.userNotified=!0):j.userNotified=!1);j.monitoring&&c.setTimeout(function(){g(f)},
j.checkInterval)}var d=a.signalR,b=a.signalR.events,f=a.signalR.changeState;d.transports={};d.transports._logic={pingServer:function(b,c){var f=(c==="webSockets"?"":b.baseUrl)+b.appRelativeUrl+"/ping",d=a.Deferred();return f=this.addQs(f,b),a.ajax({url:f,global:!1,cache:!1,type:"GET",contentType:b.contentType,data:{},dataType:b.ajaxDataType,success:function(a){a.Response==="pong"?d.resolve():d.reject("SignalR: Invalid ping response when pinging server: "+(a.responseText||a.statusText))},error:function(a){d.reject("SignalR: Error pinging server: "+
(a.responseText||a.statusText))}}),d.promise()},addQs:function(b,c){var f=b.indexOf("?")!==-1?"&":"?",d;if(!c.qs)return b;if(typeof c.qs=="object")return b+f+a.param(c.qs);if(typeof c.qs=="string")return d=c.qs.charAt(0),(d==="?"||d==="&")&&(f=""),b+f+c.qs;throw Error("Connections query string property must be either a string or object.");},getUrl:function(a,b,f,d){var g=(b==="webSockets"?"":a.baseUrl)+a.appRelativeUrl,b="transport="+b+"&connectionToken="+c.encodeURIComponent(a.token);return a.data&&
(b+="&connectionData="+c.encodeURIComponent(a.data)),a.groupsToken&&(b+="&groupsToken="+c.encodeURIComponent(a.groupsToken)),f?(g+=d?"/poll":"/reconnect",a.messageId&&(b+="&messageId="+c.encodeURIComponent(a.messageId))):g+="/connect",g+="?"+b,g=this.addQs(g,a),g+("&tid="+Math.floor(Math.random()*11))},maximizePersistentResponse:function(a){return{MessageId:a.C,Messages:a.M,Disconnect:typeof a.D!="undefined"?!0:!1,TimedOut:typeof a.T!="undefined"?!0:!1,LongPollDelay:a.L,GroupsToken:a.G}},updateGroups:function(a,
b){b&&(a.groupsToken=b)},ajaxSend:function(f,g){var k=f.url+"/send?transport="+f.transport.name+"&connectionToken="+c.encodeURIComponent(f.token);return k=this.addQs(k,f),a.ajax({url:k,global:!1,type:f.ajaxDataType==="jsonp"?"GET":"POST",contentType:d._.defaultContentType,dataType:f.ajaxDataType,data:{data:g},success:function(c){c&&a(f).triggerHandler(b.onReceived,[c])},error:function(c,d){d!=="abort"&&d!=="parsererror"&&a(f).triggerHandler(b.onError,[c])}})},ajaxAbort:function(b,f){if(typeof b.transport!=
"undefined"){var f=typeof f=="undefined"?!0:f,d=b.url+"/abort?transport="+b.transport.name+"&connectionToken="+c.encodeURIComponent(b.token),d=this.addQs(d,b);a.ajax({url:d,async:f,timeout:1E3,global:!1,type:"POST",contentType:b.contentType,dataType:b.ajaxDataType,data:{}});b.log("Fired ajax abort async = "+f)}},processMessages:function(c,f){var d,g;if(c.transport&&!(g=a(c),c.transport.supportsKeepAlive&&c.keepAliveData.activated&&this.updateKeepAlive(c),!f))(d=this.maximizePersistentResponse(f),
d.Disconnect)?(c.log("Disconnect command received from server"),c.stop(!1,!1)):(this.updateGroups(c,d.GroupsToken),d.Messages&&a.each(d.Messages,function(a,c){g.triggerHandler(b.onReceived,[c])}),d.MessageId&&(c.messageId=d.MessageId))},monitorKeepAlive:function(c){var f=c.keepAliveData,d=this;f.monitoring?c.log("Tried to monitor keep alive but it's already being monitored"):(f.monitoring=!0,d.updateKeepAlive(c),c.keepAliveData.reconnectKeepAliveUpdate=function(){d.updateKeepAlive(c)},a(c).bind(b.onReconnect,
c.keepAliveData.reconnectKeepAliveUpdate),c.log("Now monitoring keep alive with a warning timeout of "+f.timeoutWarning+" and a connection lost timeout of "+f.timeout),g(c))},stopMonitoringKeepAlive:function(c){var f=c.keepAliveData;f.monitoring&&(f.monitoring=!1,a(c).unbind(b.onReconnect,c.keepAliveData.reconnectKeepAliveUpdate),c.keepAliveData={},c.log("Stopping the monitoring of the keep alive"))},updateKeepAlive:function(a){a.keepAliveData.lastKeepAlive=new Date},ensureReconnectingState:function(c){return f(c,
d.connectionState.connected,d.connectionState.reconnecting)===!0&&a(c).triggerHandler(b.onReconnecting),c.state===d.connectionState.reconnecting},clearReconnectTimeout:function(a){a&&a._.reconnectTimeout&&(c.clearTimeout(a._.reconnectTimeout),delete a._.reconnectTimeout)},reconnect:function(a,b){var f=d.transports[b],g=this;(a.state===d.connectionState.connected||a.state===d.connectionState.reconnecting)&&!a._.reconnectTimeout&&(a._.reconnectTimeout=c.setTimeout(function(){f.stop(a);g.ensureReconnectingState(a)&&
(a.log(b+" reconnecting"),f.start(a))},a.reconnectDelay))},foreverFrame:{count:0,connections:{}}}})(window.jQuery,window);
(function(a,c){var g=a.signalR,d=a.signalR.events,b=a.signalR.changeState,f=g.transports._logic;g.transports.webSockets={name:"webSockets",supportsKeepAlive:!0,send:function(a,b){a.socket.send(b)},start:function(h,j,k){var m,q=!1,n=this,s=!j,p=a(h);c.WebSocket?h.socket||(m=h.webSocketServerUrl?h.webSocketServerUrl:h.wsProtocol+h.host,m+=f.getUrl(h,this.name,s),h.log("Connecting to websocket endpoint '"+m+"'"),h.socket=new c.WebSocket(m),h.socket.onopen=function(){q=!0;h.log("Websocket opened");f.clearReconnectTimeout(h);
j?j():b(h,g.connectionState.reconnecting,g.connectionState.connected)===!0&&p.triggerHandler(d.onReconnect)},h.socket.onclose=function(b){this===h.socket&&(q?(typeof b.wasClean!="undefined"&&b.wasClean===!1?(a(h).triggerHandler(d.onError,[b.reason]),h.log("Unclean disconnect from websocket."+b.reason)):h.log("Websocket closed"),n.reconnect(h)):k?k():s&&n.reconnect(h))},h.socket.onmessage=function(b){var b=c.JSON.parse(b.data),g=a(h);b&&(a.isEmptyObject(b)||b.M?f.processMessages(h,b):g.triggerHandler(d.onReceived,
[b]))}):k()},reconnect:function(a){f.reconnect(a,this.name)},lostConnection:function(a){this.reconnect(a)},stop:function(a){f.clearReconnectTimeout(a);a.socket!==null&&(a.log("Closing the Websocket"),a.socket.close(),a.socket=null)},abort:function(){}}})(window.jQuery,window);
(function(a,c){var g=a.signalR,d=a.signalR.events,b=a.signalR.changeState,f=g.transports._logic;g.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:!0,timeOut:3E3,start:function(h,j,k){var m=this,q=!1,n=a(h),s=!j,p,l;if(h.eventSource&&(h.log("The connection already has an event source. Stopping it."),h.stop()),!c.EventSource)k&&(h.log("This browser doesn't support SSE."),k());else{p=f.getUrl(h,this.name,s);try{h.log("Attempting to connect to SSE endpoint '"+p+"'"),h.eventSource=
new c.EventSource(p)}catch(z){h.log("EventSource failed trying to connect with error "+z.Message);k?k():(n.triggerHandler(d.onError,[z]),s&&m.reconnect(h));return}l=c.setTimeout(function(){q===!1&&(h.log("EventSource timed out trying to connect"),h.log("EventSource readyState: "+h.eventSource.readyState),s||m.stop(h),s?h.eventSource.readyState!==c.EventSource.CONNECTING&&h.eventSource.readyState!==c.EventSource.OPEN&&m.reconnect(h):k&&k())},m.timeOut);h.eventSource.addEventListener("open",function(){h.log("EventSource connected");
l&&c.clearTimeout(l);f.clearReconnectTimeout(h);q===!1&&(q=!0,j?j():b(h,g.connectionState.reconnecting,g.connectionState.connected)===!0&&n.triggerHandler(d.onReconnect))},!1);h.eventSource.addEventListener("message",function(a){a.data!=="initialized"&&f.processMessages(h,c.JSON.parse(a.data))},!1);h.eventSource.addEventListener("error",function(a){this===h.eventSource&&(q?(h.log("EventSource readyState: "+h.eventSource.readyState),a.eventPhase===c.EventSource.CLOSED?(h.log("EventSource reconnecting due to the server connection ending"),
m.reconnect(h)):(h.log("EventSource error"),n.triggerHandler(d.onError))):k&&k())},!1)}},reconnect:function(a){f.reconnect(a,this.name)},lostConnection:function(a){this.reconnect(a)},send:function(a,b){f.ajaxSend(a,b)},stop:function(a){f.clearReconnectTimeout(a);a&&a.eventSource&&(a.log("EventSource calling close()"),a.eventSource.close(),a.eventSource=null,delete a.eventSource)},abort:function(a,b){f.ajaxAbort(a,b)}}})(window.jQuery,window);
(function(a,c){var g=a.signalR,d=a.signalR.events,b=a.signalR.changeState,f=g.transports._logic,h=function(){var b=null,f=0;return{prevent:function(){g._.ieVersion<=8&&(f===0&&(b=c.setInterval(function(){var b=a("<iframe style='position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;' src=''></iframe>");a("body").append(b);b.remove()},1E3)),f++)},cancel:function(){f===1&&c.clearInterval(b);f>0&&f--}}}();g.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:!0,timeOut:3E3,start:function(b,
d,g){var q=this,n=f.foreverFrame.count+=1,s,p=a("<iframe data-signalr-connection-id='"+b.id+"' style='position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;' src=''></iframe>");c.EventSource?g&&(b.log("This browser supports SSE, skipping Forever Frame."),g()):(h.prevent(),s=f.getUrl(b,this.name),s+="&frameId="+n,a("body").append(p),p.prop("src",s),f.foreverFrame.connections[n]=b,b.log("Binding to iframe's readystatechange event."),p.bind("readystatechange",function(){a.inArray(this.readyState,
["loaded","complete"])>=0&&(b.log("Forever frame iframe readyState changed to "+this.readyState+", reconnecting"),q.reconnect(b))}),b.frame=p[0],b.frameId=n,d&&(b.onSuccess=d),c.setTimeout(function(){b.onSuccess&&(b.log("Failed to connect using forever frame source, it timed out after "+q.timeOut+"ms."),q.stop(b),g&&g())},q.timeOut))},reconnect:function(a){var b=this;c.setTimeout(function(){if(a.frame&&f.ensureReconnectingState(a)){var c=a.frame,d=f.getUrl(a,b.name,!0)+"&frameId="+a.frameId;a.log("Updating iframe src to '"+
d+"'.");c.src=d}},a.reconnectDelay)},lostConnection:function(a){this.reconnect(a)},send:function(a,b){f.ajaxSend(a,b)},receive:function(b,c){var d;f.processMessages(b,c);b.frameMessageCount=(b.frameMessageCount||0)+1;b.frameMessageCount>50&&(b.frameMessageCount=0,d=b.frame.contentWindow||b.frame.contentDocument,d&&d.document&&a("body",d.document).empty())},stop:function(b){var c=null;if(h.cancel(),b.frame){if(b.frame.stop)b.frame.stop();else try{c=b.frame.contentWindow||b.frame.contentDocument,c.document&&
c.document.execCommand&&c.document.execCommand("Stop")}catch(d){b.log("SignalR: Error occured when stopping foreverFrame transport. Message = "+d.message)}a(b.frame).remove();delete f.foreverFrame.connections[b.frameId];b.frame=null;b.frameId=null;delete b.frame;delete b.frameId;b.log("Stopping forever frame")}},abort:function(a,b){f.ajaxAbort(a,b)},getConnection:function(a){return f.foreverFrame.connections[a]},started:function(c){c.onSuccess?(c.onSuccess(),c.onSuccess=null,delete c.onSuccess):b(c,
g.connectionState.reconnecting,g.connectionState.connected)===!0&&a(c).triggerHandler(d.onReconnect)}}})(window.jQuery,window);
(function(a,c){var g=a.signalR,d=a.signalR.events,b=a.signalR.changeState,f=a.signalR.isDisconnecting,h=g.transports._logic;g.transports.longPolling={name:"longPolling",supportsKeepAlive:!1,reconnectDelay:3E3,init:function(a,b){var d=this,g,n=function(b){f(a)===!1&&(a.log("SignalR: Server ping failed because '"+b+"', re-trying ping."),c.setTimeout(g,d.reconnectDelay))};a.log("SignalR: Initializing long polling connection with server.");g=function(){h.pingServer(a,d.name).done(b).fail(n)};g()},start:function(j,
k){var m=this,q=!1,n=function(){q||(q=!0,k(),j.log("Longpolling connected"))},s=0,p=null,l=function(f){c.clearTimeout(p);p=null;b(j,g.connectionState.reconnecting,g.connectionState.connected)===!0&&(j.log("Raising the reconnect event"),a(f).triggerHandler(d.onReconnect))};j.pollXhr&&(j.log("Polling xhr requests already exists, aborting."),j.stop());m.init(j,function(){j.messageId=null;c.setTimeout(function(){(function C(b,k){var q=b.messageId!==null,O=h.getUrl(b,m.name,q,!k);f(b)!==!0&&(j.log("Attempting to connect to '"+
O+"' using longPolling."),b.pollXhr=a.ajax({url:O,global:!1,cache:!1,type:"GET",dataType:j.ajaxDataType,contentType:j.contentType,success:function(d){var g=0,j;(s=0,p!==null&&l(),n(),d&&(j=h.maximizePersistentResponse(d)),h.processMessages(b,d),j&&a.type(j.LongPollDelay)==="number"&&(g=j.LongPollDelay),j&&j.Disconnect)||f(b)!==!0&&(g>0?c.setTimeout(function(){C(b,!1)},g):C(b,!1))},error:function(f,k){(c.clearTimeout(p),p=null,k==="abort")?j.log("Aborted xhr requst."):(s++,j.state!==g.connectionState.reconnecting&&
(j.log("An error occurred using longPolling. Status = "+k+". "+f.responseText),a(b).triggerHandler(d.onError,[f.responseText])),h.ensureReconnectingState(b),m.init(b,function(){C(b,!0)}))}}),q&&k===!0&&(p=c.setTimeout(function(){l(b)},Math.min(1E3*(Math.pow(2,s)-1),36E5))))})(j);c.setTimeout(function(){n()},250)},250)})},lostConnection:function(){throw Error("Lost Connection not handled for LongPolling");},send:function(a,b){h.ajaxSend(a,b)},stop:function(a){a.pollXhr&&(a.pollXhr.abort(),a.pollXhr=
null,delete a.pollXhr)},abort:function(a,b){h.ajaxAbort(a,b)}}})(window.jQuery,window);
(function(a,c){function g(a,b,c){for(var f=a.length,d=[],g=0;g<f;g+=1)a.hasOwnProperty(g)&&(d[g]=b.call(c,a[g],g,a));return d}function d(b){return a.isFunction(b)?null:a.type(b)==="undefined"?null:b}function b(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1}function f(a,b){return new f.fn.init(a,b)}function h(b,c){var f={qs:null,logging:!1,useDefaultPath:!0};return a.extend(f,c),(!b||f.useDefaultPath)&&(b=(b||"")+"/signalr"),new h.fn.init(b,f)}var j=0,k={};f.fn=f.prototype={init:function(a,
b){this.state={};this.connection=a;this.hubName=b;this._={callbackMap:{}}},hasSubscriptions:function(){return b(this._.callbackMap)},on:function(b,c){var f=this,d=f._.callbackMap;return b=b.toLowerCase(),d[b]||(d[b]={}),d[b][c]=function(a,b){c.apply(f,b)},a(f).bind(b+".hubProxy",d[b][c]),f},off:function(c,f){var d=this._.callbackMap,g;return c=c.toLowerCase(),g=d[c],g&&(g[f]?(a(this).unbind(c+".hubProxy",g[f]),delete g[f],b(g)||delete d[c]):f||(a(this).unbind(c+".hubProxy"),delete d[c])),this},invoke:function(b){var f=
this,h=a.makeArray(arguments).slice(1),h=g(h,d),h={H:f.hubName,M:b,A:h,I:j},s=a.Deferred();return k[j.toString()]={scope:f,method:function(b){b=f._maximizeHubResponse(b);a.extend(f.state,b.State);b.Error?(b.StackTrace&&f.connection.log(b.Error+"\n"+b.StackTrace),s.rejectWith(f,[b.Error])):s.resolveWith(f,[b.Result])}},j+=1,a.isEmptyObject(f.state)||(h.S=f.state),f.connection.send(c.JSON.stringify(h)),s.promise()},_maximizeHubResponse:function(a){return{State:a.S,Result:a.R,Id:a.I,Error:a.E,StackTrace:a.T}}};
f.fn.init.prototype=f.fn;h.fn=h.prototype=a.connection();h.fn.init=function(b,c){var f={qs:null,logging:!1,useDefaultPath:!0},d=this;a.extend(f,c);a.signalR.fn.init.call(d,b,f.qs,f.logging);d.proxies={};d.received(function(b){var c,f,g,h,j,m;b&&(typeof b.I!="undefined"?(g=b.I.toString(),h=k[g],h&&(k[g]=null,delete k[g],h.method.call(h.scope,b))):(c=this._maximizeClientHubInvocation(b),d.log("Triggering client hub event '"+c.Method+"' on hub '"+c.Hub+"'."),j=c.Hub.toLowerCase(),m=c.Method.toLowerCase(),
f=this.proxies[j],a.extend(f.state,c.State),a(f).triggerHandler(m+".hubProxy",[c.Args])))})};h.fn._maximizeClientHubInvocation=function(a){return{Hub:a.H,Method:a.M,Args:a.A,State:a.S}};h.fn._registerSubscribedHubs=function(){this._subscribedToHubs||(this._subscribedToHubs=!0,this.starting(function(){var b=[];a.each(this.proxies,function(a){this.hasSubscriptions()&&b.push({name:a})});this.data=c.JSON.stringify(b)}))};h.fn.createHubProxy=function(a){var a=a.toLowerCase(),b=this.proxies[a];return b||
(b=f(this,a),this.proxies[a]=b),this._registerSubscribedHubs(),b};h.fn.init.prototype=h.fn;a.hubConnection=h})(window.jQuery,window);(function(a){a.signalR.version="1.1.2"})(window.jQuery);window.onerror=function(a,c,g){logT5PusherError("onerror",a,c,g,"","")};function T5Error(a){this.errordesc=a;this.origin="JS"}function logT5PusherError(a,c,g,d,b,f){try{logErrorExtra(a,c+":"+b+":"+f,g,d,0)}catch(h){alert("ex")}}function JSONPCallback(){}
function PushQueueItem(a,c,g){this.processName=a;this.messageList=c;this.groupName=g}PushQueueItem.prototype.GetProcessName=function(){return this.processName};PushQueueItem.prototype.GetMessageList=function(){return this.messageList};PushQueueItem.prototype.GetGroupName=function(){return this.groupName};
var T5Pusher=function(){function a(){try{var a=navigator.userAgent.toLowerCase();a.indexOf("android")>-1&&(ta=1,a.indexOf("gt-")>-1&&(Ia=1));a.indexOf("safari")!=-1&&(Ka=a.indexOf("chrome")>-1||a.indexOf("crios")>-1?1:0)}catch(b){logT5PusherError("DetermineIfSafari",ex,null,0,Q,A)}}function c(a){var b;try{var c="3PG:"+Q;b=a.indexOf(c)==0?a.substring(c.length+1,a.length):a}catch(f){b=a}return b}function g(){try{return M.transport.name}catch(a){logT5PusherError("GetCurrentConnectionMethod",a,null,0,
Q,A)}}function d(){try{var a=0;if(!(G==null||y==0)){var c=(new Date).getTime(),f=parseInt((c-G)/1E3);f>w?(j("ManageConnection_TimeTooGreat!!!!!"),logT5PusherError("ManageConnection","ManageConnection - about to call RestartSignalRConnection! - TimeSinceLastInteraction is "+f+" and timeBetweenConnections is "+w,null,0,Q,A),b("ManageConnection_TimeTooGreat"),a=1):U!=-101&&U!=-102&&typeof V!="undefined"&&V!=null&&V.length>0&&U<V.length&&(logT5PusherError("ManageConnection","T5Pusher ManageConnection - we have joined groups BUT we DONT have any groups set up with signalr (well accoring to DB we dont anyway!!!) - so REjoining groups now!!!",
null,0,Q,A),j("ManageConnection_GroupsNotAllThere!!!!!"),u()<=0&&(logT5PusherError("ManageConnection","CheckConnection - unable to rejoin groups - so restarting entire connection",null,0,Q,A),b("ManageConnection_NoGroups"),a=1))}}catch(g){logT5PusherError("CheckConnection",g,null,0,Q,A)}a==0&&(j("setting manageConnection in "+w/2*1E3+" seconds"),U==-101&&k(M.id),window.setTimeout(function(){d()},w/2*1E3))}function b(a){try{j("in RestartSignalRConnection - restarting connection Origin is "+a+"!!!!!"),
o=r=0,ea+=1,ea==2&&ia&&ia.call(),ea==4&&B&&B.call(),M.stop(),ba=null,R=0,N.connectionstatus="reconnecting",U=-101,f()}catch(b){N.connectionstatus="reconnection attempt failed - "+b,X&&X.call(),logT5PusherError("RestartSignalRConnection",b,null,0,Q,A)}}function f(){try{M=$.hubConnection();M.logging=!0;M.url=ha+"/signalr";ba=M.createHubProxy("T5Pusher");M.qs={ur:Q};ba.on("rtpm",function(a,b){ea=0;G=(new Date).getTime();var c=W.indexOf(a);c>-1&&E[c].call(void 0,b)});ba.on("invalidsendattempt",function(a){alert(a)});
ba.on("keepalive",function(){ea=0;G=(new Date).getTime()});M.connectionSlow(function(){ia&&ia.call()});M.stateChanged(function(a){if(va!=a.newState)if(va=a.newState,a.newState===$.signalR.connectionState.connected){N.connectionstatus="connected";t&&(clearTimeout(t),t=null);if(A!=$.connection.hub.id)A=$.connection.hub.id,U=-101;v&&v.call(void 0,N.connectionstatus)}else if(a.newState===$.signalR.connectionState.disconnected)N.connectionstatus="disconnected",v&&v.call(void 0,N.connectionstatus);else if(a.newState===
$.signalR.connectionState.connecting)N.connectionstatus=y==1?"reconnecting":"connecting",v&&v.call(void 0,N.connectionstatus)});if(r==0){r=1;var a=["webSockets","longPolling"];try{Ka==0&&ta==1&&Ia==1&&(a=["longPolling"],logError("SamsungSwitch","ua is "+navigator.userAgent.toLowerCase()))}catch(b){logError("UAIdentifyError",b)}M.start({transport:a}).done(function(){R==0&&(R=1);p(M.id)}).fail(function(a){N.connectionstatus=y==0?"connection attempt failed - "+a:"reconnection attempt failed - "+a;X&&
X.call()})}o==0&&(j("setting manageConnection in "+w*1E3+" seconds"),window.setTimeout(function(){d()},w*1E3),o=1)}catch(c){logT5PusherError("Connect",c,null,0,Q,A);if(R==0)N.connectionstatus=y==0?"connection attempt failed - "+c:"reconnection attempt failed - "+c,X&&X.call();return!1}}function h(){for(var a=0;a<ra.length;a++)try{z(ra[a].GetProcessName(),ra[a].GetMessageList(),ra[a].GetGroupName())}catch(b){}ra=[]}function j(a){typeof console==="undefined"||typeof j==="undefined"||console.log(a)}
function k(a){$.ajax({url:ha+"/Connection/CheckGroups",dataType:"jsonp",data:"connectionid="+a,success:function(a){U=parseInt(a,10)}})}function m(){try{y==0||qa==1?(qa=0,O("InternalDefaultGroupJoin_T5I",function(a){if(a)a.joined==1?(sa&&sa.call(),y=1,N.connectionstatus="connected",h()):(N.connectionstatus=y==0?"connection attempt failed - unable to join the default group ":"reconnection attempt failed - unable to join the default group ",X&&X.call())}),T("3P:"+Q,"InternalDefaultGroupJoin_T5I",1)):
(u(),h())}catch(a){logT5PusherError("CompleteConnection",a,null,0,Q,A),N.connectionstatus=y==0||qa==1?"connection attempt failed - "+a:"reconnection attempt failed - "+a,X&&X.call()}}function q(a,b,c){try{if(a&&a.auth)ba.invoke("dsg",a.auth,b).done(function(a){if(a==1){if(c){var f=W.indexOf(c);f>-1&&(a={groupName:b,deleted:1,status:"deleted"},E[f].call(void 0,a))}}else c&&(f=W.indexOf(c),f>-1&&(a=a==0?{groupName:b,deleted:-1,status:"DeleteSecureGroup failed authorization"}:{groupName:b,deleted:-1,
status:"DeleteSecureGroup failed on T5 server"},E[f].call(void 0,a)))});else if(c){var f=W.indexOf(c);f>-1&&E[f].call(void 0,{groupName:b,deleted:-1,status:"DeleteSecureGroup - client authorization return data not valid - data is "+g})}}catch(d){logT5PusherError("DeleteSecureGroupReturn",d,null,0,Q,A);if(c&&(f=W.indexOf(c),f>-1)){var g=JSON.stringify(a);E[f].call(void 0,"DeleteSecureGroup - error processing client authorization return data - data is "+g+", error is "+d.toString())}return!1}}function n(a,
b,c,f){try{if(a&&a.auth)ba.invoke("csg",a.auth,b,c).done(function(a){if(a==1){if(f&&(a=W.indexOf(f),a>-1)){var c={groupName:b,created:1,status:"created"};E[a].call(void 0,c)}}else f&&(a=W.indexOf(f),a>-1&&(c={groupName:b,created:-1,status:"failed authorization"},E[a].call(void 0,c)))});else if(f){var d=W.indexOf(f);if(d>-1){var g=JSON.stringify(a),c={groupName:b,created:-1,status:"failed - client authorization return data not valid - data is "+g};E[d].call(void 0,c)}}}catch(h){return logT5PusherError("CreateSecureGroupReturn",
h,null,0,Q,A),f&&(d=W.indexOf(f),d>-1&&(g=JSON.stringify(a),c={groupName:b,created:-1,status:"failed - error processing client authorization return data - data is "+g},E[d].call(void 0,c))),!1}}function s(a,b){try{var c;c=aa?aa:ca;za==!1?$.ajax({url:c,type:"POST",data:{connectionid:M.id,groupName:a,broadcast:0},dataType:"json",error:function(){},success:function(c){try{var f;f=c||c!="object"?JSON.parse(c):c;C(a,f,b)}catch(d){C(a,c,b)}}}):$.ajax({url:c,dataType:"jsonp",data:{connectionid:M.id,groupName:a,
broadcast:0},error:function(){},success:function(c){c=JSON.parse(c);C(a,c,b)}})}catch(f){return logT5PusherError("joinGroupFinalStep",f,null,0,Q,A),!1}}function p(a){try{S==!0?za==!1?$.ajax({url:ca,type:"POST",data:"connectionid="+a,dataType:"json",error:function(){N.connectionstatus="unauthorized - error calling client authorization URL - "+ca;i&&i.call()},success:function(a){try{var b;b=a||a!="object"?JSON.parse(a):a;l(b)}catch(c){l(a)}}}):$.ajax({url:ca,dataType:"jsonp",data:"connectionid="+a,
error:function(a,b,c){N.connectionstatus="unauthorized - error calling client authorization URL - "+c;i&&i.call()},success:function(a){a=JSON.parse(a);l(a)}}):m()}catch(b){return logT5PusherError("ValidateConnection",b,null,0,Q,A),N.connectionstatus="unauthorized - error calling client authorization URL - "+b.toString(),X&&X.call(),!1}return Pa}function l(a){try{a&&a.auth?ba.invoke("vtp",a.auth).done(function(a){a==1?m():(N.connectionstatus="unauthorized - failed authorization",i&&i.call())}):(N.connectionstatus=
"unauthorized - client authorization return data not valid",i&&i.call())}catch(b){return logT5PusherError("ClientValidationReturn",b,null,0,Q,A),N.connectionstatus="unauthorized - error validating clients authorisation return data - data is "+dataAsJSON+",error is "+b.toString(),X&&X.call(),!1}}function z(a,b,c){try{if(R==1)return b&&b.length>0?(ba.invoke("stpm",b,c?"3PG:"+Q+":"+c:"3P:"+Q,a),!0):!1;else{var f=new PushQueueItem(a,b,c);ra.push(f);return!0}}catch(d){return logT5PusherError("PushMessage",
d,null,0,Q,A),!1}}function C(a,b,f){try{var d="",g=0;if(b)try{d=b.auth?b.auth:b}catch(h){d=b}else d="";b&&(g=1);ba.invoke("thirdPartyJoinGroupV2",a,g,d).done(function(b){if(b==1){if(V.indexOf(a)<0){V.push(a);H.push(g);if(f){if(b=W.indexOf(f),b>-1){var d={groupName:c(a),joined:1,status:"joined",secure:g};E[b].call(void 0,d)}}else f="";ja.push(f);fa.push(new Date);j("rejoining group - "+a)}U=-101;return 1}else b=W.indexOf(f),b>-1&&(c(a),E[b].call(void 0,"failed!!"))});return 1}catch(i){return logT5PusherError("joinGroupFinalStep",
i,null,0,Q,A),-1}}function x(){var a=0;try{for(var b=new Date,c=0;c<fa.length;c++){var f=fa[c];(b.getTime()-f.getTime())/1E3<=5&&(a+=1)}}catch(d){logT5PusherError("GetNumGroupsJoinedInLast5Seconds",d,null,0,Q,A)}return a}function T(a,b,c,f){try{var d=0,h="",h=c?a:a?"3PG:"+Q+":"+a:"3P:"+Q;R==1?x()<5||g()!="longPolling"?f==1?(s(h,b),d=1):d=C(h,null,b):(window.setTimeout(function(){T(a,b,c,f)},5500),d=-2):(V.indexOf(h)<0&&(V.push(h),f||(f=0),H.push(f),b||(b=""),ja.push(b)),d=-3)}catch(j){logT5PusherError("JoinGroupPrivate",
j,null,0,Q,A),d=-1}return d}function u(){var a=0;try{if(V.length>0)for(var b=V.length,c=0;c<b;c++)if(a=T(V[c],ja[c],!0,H[c]),a<0)return a}catch(f){logT5PusherError("RejoinGroups",f,null,0,Q,A),a=-1}return a}function O(a,b){try{a&&b&&W.indexOf(a)<0&&(W.push(a),E.push(b))}catch(c){logT5PusherError("T5Bind",c,null,0,Q,A)}}var ba,M,ha="",U=-101,V=[],fa=[],H=[],ja=[],ea=0,G,t,o=0,r=0,R=0,w=14,y=0,Pa=0,Q,qa=0,N=function(){return{connectionstatus:void 0}},ra=[],A,va=-1,W=[],E=[],sa=null,i=null,X=null,ia=
null,v=null,B=null,S=!1,ca="AuthHandler.ashx",aa="",za=!1,Ka=0,ta=0,Ia=0;return{start:function(c){try{N.connectionstatus="connecting",Q=c,R==0?(a(),Ka==0&&ta==1?window.setTimeout(function(){f()},2E3):f()):(qa=1,V=[],fa=[],H=[],ja=[],b("Initialise"))}catch(d){return logT5PusherError("Initialise",d,null,0,Q,A),N.connectionstatus="error starting connection - error is "+d.toString(),X&&X.call(),!1}},joinGroup:T,push:z,bind:O,connectionbind:function(a,b){if(a)if(a.toLowerCase()=="connected")sa=b;else if(a.toLowerCase()==
"connectionattemptfailed")X=b;else if(a.toLowerCase()=="connectionslow")ia=b;else if(a.toLowerCase()=="statechanged")v=b;else if(a.toLowerCase()=="connectionlost")B=b;else if(a.toLowerCase()=="unauthorised"||a.toLowerCase()=="unauthorized")i=b},useSecureConnection:function(){S=!0},useJSONPAuthorisation:function(){za=!0},setClientAuthorisationURL:function(a){ca=a},connection:N,GetCurrentConnectionMethod:g,GetCurrentTimeStamp:function(){return(new Date).getTime()},stopBrowserLoading:function(){alert("isbl");
var a=$('<iframe style="height:0;width:0;display:none" src=""></iframe>');$("body").append(a);a.remove()},CreateSecureGroup:function(a,b,c){try{c||(c=0);var f;f=aa?aa:ca;za==!1?$.ajax({url:f,type:"POST",data:{connectionid:M.id,groupName:a,broadcast:c},dataType:"json",error:function(){if(b){var c=W.indexOf(b);c>-1&&E[c].call(void 0,{groupName:a,created:-1,status:"error calling CreateSecureGroup authorization URL - "+ca})}},success:function(f){try{var d;d=f||f!="object"?JSON.parse(f):f;n(d,a,c,b)}catch(g){n(f,
a,c,b)}}}):$.ajax({url:f,dataType:"jsonp",data:{connectionid:M.id,groupName:a,broadcast:c},error:function(a,b,c){Failure&&(a=W.indexOf(Failure),a>-1&&E[a].call(void 0,"unauthorized - error calling CreateSecureGroup JSONP authorization URL - "+c))},success:function(f){f=JSON.parse(f);n(f,a,c,b)}})}catch(d){return logT5PusherError("CreateSecureGroup",d,null,0,Q,A),b&&(f=W.indexOf(b),f>-1&&E[f].call(void 0,{groupName:a,created:-1,status:"error calling CreateSecureGroup JSONP authorization URL - "+ca+
", error is "+d.toString()})),!1}},JoinSecureGroup:function(a,b){T(a,b,null,1)},restartTest:b,DeleteSecureGroup:function(a,b){try{za==!1?$.ajax({url:ca,type:"POST",data:"connectionid="+encodeURIComponent(M.id)+"&d=1&groupName="+encodeURIComponent(a),dataType:"json",error:function(){if(b){var c=W.indexOf(b);c>-1&&E[c].call(void 0,{groupName:a,deleted:-1,status:"error calling DeleteSecureGroup authorization URL - "+ca})}},success:function(c){try{var f;f=c||c!="object"?JSON.parse(c):c;q(f,a,b)}catch(d){q(c,
a,b)}}}):$.ajax({url:ca,dataType:"jsonp",data:"connectionid="+encodeURIComponent(M.id)+"&d=1&groupName="+encodeURIComponent(a),error:function(){if(b){var c=W.indexOf(b);c>-1&&E[c].call(void 0,{groupName:a,deleted:-1,status:"error calling DeleteSecureGroup authorization URL - "+ca})}},success:function(c){JSON.parse(c);q(c,a,b)}})}catch(c){logT5PusherError("DeleteSecureGroup",c,null,0,Q,A);if(b){var f=W.indexOf(b);f>-1&&E[f].call(void 0,{groupName:a,deleted:-1,status:"error calling DeleteSecureGroup JSONP authorization URL - "+
ca+", error is "+c.toString()})}return!1}},SetPusherURL:function(a){ha=a},setGroupAuthorisationURL:function(a){aa=a}}};var League=function(){IsThisLeagueTableUptoDate=function(a,c){var g=1,d=typeof a!="object"?JSON.parse(a):a,b;try{if(b=d[0].T){var f=new Date(b),h;try{h=JSON.parse(window.sessionStorage.getItem("LeaderboardLog"))}catch(j){}if(h&&h!="null"&&h!=""){var k=h[0];h[1]==c&&k&&(new Date(k)>f?g=0:updateThisLeaderboardLog(b,c))}else updateThisLeaderboardLog(b,c)}}catch(m){logError("IsThisLeagueTableUptoDate",m)}return g};updateThisLeaderboardLog=function(a,c){var g=[];g.push(a);g.push(c);window.sessionStorage.setItem("LeaderboardLog",
$.toJSON(g))};DisplayListOfLeagues=function(a,c,g){$(".leaguepanel").hide();$(".leaguestandings").hide();for(var d=JSON.parse(window.sessionStorage.getItem("facebookuser")),a=typeof a!="object"?JSON.parse(a):a,b="",f=0;f<a.length;f++){var h=a[f].Name,j=a[f].ID,k=a[f].nummembers,m=a[f].CreaterFBID,q=a[f].ismember,n=a[f].defaultleague,s=a[f].allowinvites;q>0?(b+=n==1?"<div class='league_title_highlight' id='LL"+a[f].ID+"' onClick='userLeague.GetLeagueTable("+j+',"'+h+'",null,'+m+","+k+",null,1); return false;'>":
"<div class='league_title' id='LL"+a[f].ID+"' onClick='userLeague.GetLeagueTable("+j+',"'+h+'",null,'+m+","+k+",null,1); return false;'>",b+="<span>"+h+"</span> <span class='league_population'>"+k+"</span>"):b+="<div class='league_title' id='LL"+a[f].ID+"'><span>"+h+"</span> <span class='league_population'>"+k+"</span>";q>0&&n!=1&&m!=d.id&&(b+="<a class='join_league' onClick='userLeague.LeaveLeague("+j+',"'+h+"\"); DontContinue(); return false;'>Leave</a>");g&&g==!0&&q<=0?b+="<a class='join_league' onClick='userLeague.JoinLeague("+
j+',"'+h+'",null,'+m+","+k+"); DontContinue(); return false;'>Join</a>":m==d.id?b+="<a class='join_league' onClick='userLeague.ManageLeague("+j+',"'+c+"\"); DontContinue(); return false;'>Manage</a>":q>0&&s==1?b+="<a class='join_league' onClick='userLeague.LeagueInvite("+j+',"'+c+"\",false); DontContinue(); return false;'>Invite</a>":a[f].status==1&&admin&&admin.isAdmin()&&n!=1&&(b+="<a class='join_league' onClick='userLeague.DeActivateLeague("+j+',"'+h+"\"); DontContinue(); return false;'>DeActivate</a>");
b+="</div>"}$("#"+displaymode+"_league_view_1").html(b);$("#"+displaymode+"_league_view_1").show();refreshScroller(leaderboardScroller,"LeagueLeaderboard2");window.sessionStorage.setItem(c,$.toJSON(a))};return{name:void 0,desc:void 0,id:void 0,type:void 0,num_MembersInLeague:void 0,creater_Id:void 0,positions_array:void 0,mobile_APICall_Needed:1,OutputScores:function(a,c,g,d){JSON.parse(window.sessionStorage.getItem("facebookuser"));a=typeof a!="object"?JSON.parse(a):a;c=d?"<div class='league_title'  id='"+
displaymode+g+"'><span>"+c+"</span> <span class='league_population'>"+d+"</span></div>":"<div class='league_title'  id='"+displaymode+g+"'><span>"+c+"</span></div>";for(g=0;g<a.length;g++)(d=a[g].P)||(d="?"),c+='<div class="standing"><span class="pos">'+d+'</span><img src="'+(a[g].I?facebookprofilepicurl+a[g].I:"/images/profile-pic.png")+'" /><span class="usr">'+a[g].U+'</span><span class="creditstotal">'+a[g].S+"</span></div>";return c},Set_mobile_APICallStatus:function(a){this.mobile_APICall_Needed=
a},LeaveLeague:function(a,c){var g=getRandomNumber();$("#"+displaymode+"_league_messages").prepend("<div id="+g+">Are you sure you want to leave league '<strong>"+c+"</strong>' <br> <span class='button' onClick='userLeague.ConfirmLeaveLeague("+g+","+a+',"'+c+"\"); return false;'>Yes</span><span class='button' onclick='hideLeagueExtraDetails("+g+"); return false'>No</span></div>");showLeagueExtraDetails();refreshScroller(leagueMessageScroller,"invitepanel");_gaq.push(["_trackEvent","Clicks","LeaveLeague"])},
LeaveLeague:function(a,c){var g=getRandomNumber();$("#"+displaymode+"_league_messages").prepend("<div id="+g+">Are you sure you want to leave league '<strong>"+c+"</strong>' <br> <span class='button' onClick='userLeague.ConfirmLeaveLeague("+g+","+a+',"'+c+"\"); return false;'>Yes</span><span class='button' onclick='hideLeagueExtraDetails("+g+"); return false'>No</span></div>");showLeagueExtraDetails();refreshScroller(leagueMessageScroller,"invitepanel");_gaq.push(["_trackEvent","Clicks","LeaveLeague"])},
ConfirmLeaveLeague:function(a,c,g){hideLeagueExtraDetails(a);var a=getRandomNumber(),d="",b=JSON.parse(window.sessionStorage.getItem("facebookuser")),f=GetCurrentfixtureID();$.ajax({url:WS_URL_ROOT+"/League/LeaveLeague",type:"POST",data:"leagueid="+c+"&fixtureid="+f+"&userid="+b.id,error:function(b,c,f){AjaxFail("LeaveLeague",b,c,f);d="<div id="+a+">Error removing you from league '<strong>"+g+"</strong>'. Please Try again. <br> <span class='button' onclick='hideLeagueExtraDetails("+a+"); return false'>OK</span></div>";
$("#"+displaymode+"_league_messages").prepend(d);showLeagueExtraDetails();refreshScroller(leagueMessageScroller,"invitepanel")},success:function(b){var c=typeof objArray!="object"?JSON.parse(b):b;try{c&&c.length>0?(DisplayListOfLeagues(b,"ListOfUsersLeagues_"+f,!1),d="<div id="+a+">You have been removed from league '<strong>"+g+"</strong>' <br> <span class='button' onclick='hideLeagueExtraDetails("+a+"); return false'>OK</span></div>"):d="<div id="+a+">Error removing you from league '<strong>"+g+
"</strong>'. Please Try again. <br> <span class='button' onclick='hideLeagueExtraDetails("+a+"); return false'>OK</span></div>"}catch(k){d="<div id="+a+">Error removing you from league '<strong>"+g+"</strong>'. Please Try again. <br> <span class='button' onclick='hideLeagueExtraDetails("+a+"); return false'>OK</span></div>"}$("#"+displaymode+"_league_messages").prepend(d);showLeagueExtraDetails();refreshScroller(leagueMessageScroller,"invitepanel")}});_gaq.push(["_trackEvent","Clicks","LeaveLeague_confirm"])},
GetLeagueInvites:function(){var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));a&&a.id>0&&$.ajax({url:WS_URL_ROOT+"/League/GetLeagueInvites",type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+a.id+"&fu="+a.fbuserid,error:function(a,g,d){AjaxFail("GetLeagueInvites",a,g,d)},success:function(a){try{if(a){var g=typeof a!="object"?JSON.parse(a):a;if(g.length>0){showLeagueExtraDetails();for(var a="",d=0;d<g.length;d++)a+="<div class='linv_"+g[d].lid+"'><strong>"+g[d].iname+"</strong> has invited you to join league <strong>"+
g[d].ln+"</strong> <br clear='all' /><span class='button' onClick='userLeague.acceptLeagueInvitation("+g[d].iid+","+g[d].lid+',"'+g[d].ln+'",'+g[d].iuid+"); return false;'>Join</span> <span class='button' onclick='userLeague.rejectLeagueInvitation("+g[d].iid+","+g[d].lid+"); return false'>Decline</span></div>";$("#"+displaymode+"_league_messages").html(a);refreshScroller(leagueMessageScroller,"invitepanel")}}}catch(b){}}})},ManageLeague:function(a,c){var g=0,d;if(c){var b;try{b=JSON.parse(window.sessionStorage.getItem(c))}catch(f){}if(b){b=
typeof b!="object"?JSON.parse(b):b;for(var h=0;h<b.length;h++)b[h].ID==a&&(d=b[h])}d&&(b=JSON.parse(window.sessionStorage.getItem("facebookuser")),d.CreaterFBID==b.id&&(g=1))}g==1?($("#"+displaymode+"_edit_leaguename").val(d.Name),$("#"+displaymode+"_edit_lid").val(d.ID),d.leaguetype==1?($("[name="+displaymode+"_edit_LeagueType]").filter("[value=1]").prop("checked",!0),$("[name="+displaymode+"_edit_LeagueType]").filter("[value=2]").prop("checked",!1)):($("[name="+displaymode+"_edit_LeagueType]").filter("[value=1]").prop("checked",
!1),$("[name="+displaymode+"_edit_LeagueType]").filter("[value=2]").prop("checked",!0)),d.allowinvites==1?$("#"+displaymode+"_edit_allowinvites").prop("checked",!0):$("#"+displaymode+"_edit_allowinvites").prop("checked",!1),showleaguepanel(4),_gaq.push(["_trackEvent","Clicks","ManageLeague_click"])):(showLeagueExtraDetails(),g=getRandomNumber(),$("#"+displaymode+"_league_messages").prepend("<div id="+g+"><strong>You don't have permission to edit this league. </strong> <br /> <span class='button' onclick='hideLeagueExtraDetails("+
g+"); return false'>OK</span></div>"),refreshScroller(leagueMessageScroller,"invitepanel"))},EditLeagueDetails:function(){var a=$("#"+displaymode+"_edit_lid").val(),c=$("#"+displaymode+"_edit_leaguename").val(),g=parseInt($("#"+displaymode+"_league_view_4 input:checked").val()),d=0;$("#"+displaymode+"_edit_allowinvites").is(":checked")==!0&&(d=1);var b=GetCurrentfixtureID(),f=JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/League/UpdateLeagueDetails",type:"POST",
data:"leagueid="+a+"&fixtureID="+b+"&userid="+f.id+"&leagueName="+c+"&LeagueType="+g+"&allowinvites="+d,dataType:"html",error:function(a,b,c){AjaxFail("EditLeagueDetails",a,b,c);hideleaguepanel(4);showLeagueExtraDetails();a=getRandomNumber();$("#"+displaymode+"_league_messages").prepend("<div id="+a+"><strong>Unable to Edit League. Please try again later </strong> <br /> <span class='button' onclick='hideLeagueExtraDetails("+a+"); return false'>OK</span></div>");refreshScroller(leagueMessageScroller,
"invitepanel")},success:function(b){if(b>0){hideleaguepanel(4);showLeagueExtraDetails();var d=getRandomNumber();$("#"+displaymode+"_league_messages").prepend("<div id="+d+"><strong>League Updated!</strong> <br /> <span class='button' onclick='hideLeagueExtraDetails("+d+"); return false'>OK</span></div>");refreshScroller(leagueMessageScroller,"invitepanel");userLeague.GetLeagueTable(a,c,null,f.id,b)}else hideleaguepanel(4),showLeagueExtraDetails(),d=getRandomNumber(),$("#"+displaymode+"_league_messages").prepend("<div id="+
d+"><strong>Unable to Edit League.</strong> <br /> Please try again later <br /><span class='button' onclick='hideLeagueExtraDetails("+d+"); return false'>OK</span></div>"),refreshScroller(leagueMessageScroller,"invitepanel")}});_gaq.push(["_trackEvent","Clicks","ManageLeague_edit"])},SendInvitesFromManageLeaguePopup:function(){var a=$("#"+displaymode+"_edit_lid").val(),c="ListOfUsersLeagues_"+GetCurrentfixtureID();userLeague.LeagueInvite(a,c,!1);hideleaguepanel(4);_gaq.push(["_trackEvent","Clicks",
"ManageLeague_invite"])},LeagueInvite:function(a,c,g){var d;if(c){var b;try{b=JSON.parse(window.sessionStorage.getItem(c))}catch(f){}if(b){c=typeof b!="object"?JSON.parse(b):b;for(b=0;b<c.length;b++)c[b].ID==a&&(d=c[b])}}else if(UsersLastCreatedLeague&&(UsersLastCreatedLeague.ID=a))d=UsersLastCreatedLeague;if(d){var h=JSON.parse(window.sessionStorage.getItem("facebookuser"));(d.CreaterFBID==h.id||d.ismember>0&&d.allowinvites==1)&&FB.ui({method:"apprequests",message:"You've been invited to join a KingOfTheKop league by "+
h.name+"!!"},function(a){if(a&&a.request&&a.to)try{for(var b="",c=0;c<a.to.length;c++)c==0?b=a.to[c]:b+=","+a.to[c];$.ajax({url:WS_URL_ROOT+"/League/LogLeagueInvites",type:"POST",data:"userid="+h.id+"&fbREquest="+a.request+"&FBUserID_List="+b+"&LeagueID="+d.ID,dataType:"html",error:function(a,b,c){AjaxFail("LeagueInvite",a,b,c);g&&g==!0?(userLeague.GetLeagueTable(d.ID,d.Name,d.Description,d.CreaterFBID,d.nummembers),showLeagueExtraDetails(),a=getRandomNumber(),$("#"+displaymode+"_league_messages").prepend("<div id="+
a+"><strong>League was created but no invites were sent!!</strong> <br /> <span class='button' onclick='hideLeagueExtraDetails("+a+"); return false'>OK</span></div>")):(showLeagueExtraDetails(),a=getRandomNumber(),$("#"+displaymode+"_league_messages").prepend("<div id="+a+"><strong>Invites were not sent! Please try again later.</strong> <br /> <span class='button' onclick='hideLeagueExtraDetails("+a+"); return false'>OK</span></div>"));refreshScroller(leagueMessageScroller,"invitepanel")},success:function(a){a=
typeof a!="object"?JSON.parse(a):a;userLeague.sendLeagueInvitesViaSignalR(a,d.ID,d.Name);g&&g==!0?(userLeague.GetLeagueTable(d.ID,d.Name,d.Description,d.CreaterFBID,d.nummembers),showLeagueExtraDetails(),a=getRandomNumber(),$("#"+displaymode+"_league_messages").prepend("<div id="+a+"><strong>League Created!!</strong> <br /> <span class='button' onclick='hideLeagueExtraDetails("+a+"); return false'>OK</span></div>")):(showLeagueExtraDetails(),a=getRandomNumber(),$("#"+displaymode+"_league_messages").prepend("<div id="+
a+"><strong>Invites Sent!!</strong> <br /> <span class='button' onclick='hideLeagueExtraDetails("+a+"); return false'>OK</span></div>"));refreshScroller(leagueMessageScroller,"invitepanel")}})}catch(f){}else g&&g==!0?(userLeague.GetLeagueTable(d.ID,d.Name,d.Description,d.CreaterFBID,d.nummembers),showLeagueExtraDetails(),a=getRandomNumber(),$("#"+displaymode+"_league_messages").prepend("<div id="+a+"><strong>League was created but no invites were sent !!</strong> <br /> <span class='button' onclick='hideLeagueExtraDetails("+
a+"); return false'>OK</span></div>")):(showLeagueExtraDetails(),a=getRandomNumber(),$("#"+displaymode+"_league_messages").prepend("<div id="+a+"><strong>Invites were not sent! Please try again later.</strong> <br /> <span class='button' onclick='hideLeagueExtraDetails("+a+"); return false'>OK</span></div>")),refreshScroller(leagueMessageScroller,"invitepanel")})}else g&&g==!0?(userLeague.GetLeagueTable(d.ID,d.Name,d.Description,d.CreaterFBID,d.nummembers),showLeagueExtraDetails(),a=getRandomNumber(),
$("#"+displaymode+"_league_messages").prepend("<div id="+a+"><strong>League was created but no invites were sent !!</strong> <br /> <span class='button' onclick='hideLeagueExtraDetails("+a+"); return false'>OK</span></div>")):(showLeagueExtraDetails(),a=getRandomNumber(),$("#"+displaymode+"_league_messages").prepend("<div id="+a+"><strong>Invites were not sent! Please try again later.</strong> <br /> <span class='button' onclick='hideLeagueExtraDetails("+a+"); return false'>OK</span></div>")),refreshScroller(leagueMessageScroller,
"invitepanel")},sendLeagueInvitesViaSignalR:function(a,c,g){for(var d=JSON.parse(window.sessionStorage.getItem("facebookuser")),b=0;b<a.length;b++){var f="UD"+a[b].uid,h=a[b].iid;if(h>0)if(LiveEventMethod=="T5P"){if(UserHasFriendsPlayingThisGame()==1){var j=[];j.push(h);j.push(c);j.push(g);j.push(d.id);j.push(d.name);j.push(GetCurrentfixtureID());sp==1?FriendPusher.push("DisplayLeagueInvite",j,f):AdminPusher.push("DisplayLeagueInvite",j,f);_gaq.push(["_trackEvent","T5Pusher","LeagueInvite"])}}else liveGamesSignalRConnection.server.sendleagueinvite(h,
c,g,d.name,GetCurrentfixtureID(),f)}},sendLeagueInvitesViaFacebookPost:function(a,c,g){c=JSON.parse(window.sessionStorage.getItem("facebookuser"));GetCurrentfixtureID();for(var d=0;d<a.length;d++)try{FB.api("/"+a[d].uid+"/feed","post",{name:g,message:"You've been invited to join  "+c.name+"'s LiveGames league -  "+g+" - http://apps.facebook.com/tfivelive",picture:"http://profile.ak.fbcdn.net/hprofile-ak-snc4/373028_169134899848595_616111560_n.jpg",link:"http://apps.facebook.com/tfivelive"},function(){})}catch(b){logError("sendLeagueInvitesViaFacebookPost",
b)}},DisplayLeagueInvite:function(a,c,g,d,b){$("#"+displaymode+"_league_messages").prepend("<div style='display:block;' class='linv_"+c+"'><strong>"+b+"</strong> has invited you to join league <strong>"+g+"</strong> <br clear='all' /><span class='button' onClick='userLeague.acceptLeagueInvitation("+a+","+c+',"'+g+'",'+d+"); return false;'>Join</span> <span class='button' onclick='userLeague.rejectLeagueInvitation("+a+","+c+"); return false'>Decline</span></div>");refreshScroller(leagueMessageScroller,
"invitepanel");showLeagueExtraDetails()},rejectLeagueInvitation:function(a,c){hideInvites(c);var g=JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/League/updateLeagueInvitation",type:"POST",data:"inviteID="+a+"&leagueid=-1&userid="+g.id+"&status=-1&fu="+g.fbuserid,error:function(a,b,c){AjaxFail("rejectLeagueInvitation",a,b,c)},success:function(){}})},acceptLeagueInvitation:function(a,c,g,d){hideInvites(c);$(".leaguepanel").hide();$(".leaguestandings").hide();$(".loadingpanel").show();
var b=JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/League/updateLeagueInvitation",type:"POST",data:"inviteID="+a+"&leagueID="+c+"&userid="+b.id+"&status=1&fu="+b.fbuserid,error:function(a,b,c){AjaxFail("rejectLeagueInvitation",a,b,c)},success:function(a){userLeague.DisplayTheLeagueTable(a,c,g,null,d,0)}})},MakeSureFriendsTableIsTheSameAsLeagueTable:function(a){try{var c=typeof a!="object"?JSON.parse(a):a,g;try{g=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"))}catch(d){}a=
0;if(g&&g.length>0){for(var b=0;b<c.length;b++)for(var f=c[b].S,h=c[b].F,j=0;j<=g.length-1;j++){var k=g[j];if(k.F==h){if(k.S!=f&&(k.B==null||k.B.status!=0))k.S=f,a=1;break}}a==1&&(window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(g)),ReOrderFriendsScoresBasedOnCurrentScore())}}catch(m){logError("MakeSureFriendsTableIsTheSameAsLeagueTable",m)}},DisplayTheLeagueTable:function(a,c,g,d,b,f,h){if(IsThisLeagueTableUptoDate(a,c)==1)$("#"+displaymode+"_leaguestandings_1").html(userLeague.OutputScores(a,
g,c,f)),window.sessionStorage.setItem("leaderboard",$.toJSON(a)),$(".leaguepanel").hide(),$(".leaguestandings").hide(),$("#"+displaymode+"_leaguestandings_1").show(),$(".loadingpanel").hide(),this.mobile_APICall_Needed=0,refreshScroller(leaderboardScroller,"LeagueLeaderboard2"),userLeague.StoreLeagueDetails(a,c,g,d,b,f),c==thisFixture.defaultleagueid?(this.currentlyShowingDefaultLeague=c,h||SetTickerContent("LeagueStandings_ticker",GetLeagueStandingsTickerDetailsBasedOnTheOverallScoresForThisGame(a,
f)),this.MakeSureFriendsTableIsTheSameAsLeagueTable(a)):this.currentlyShowingDefaultLeague=-1},GetLeagueTable:function(a,c,g,d,b,f,h,j){var k=JSON.parse(window.sessionStorage.getItem("facebookuser"));$(".loadingpanel").hide();f||($(".leaguepanel").hide(),$(".leaguestandings").hide(),$(".loadingpanel").show());h&&(a==thisFixture.defaultleagueid?_gaq.push(["_trackEvent","Clicks","ViewLeaderBoard_DefaultLeague"]):_gaq.push(["_trackEvent","Clicks","ViewLeaderBoard_NOTDefaultLeague"]));$.ajax({url:WS_URL_ROOT+
"/LeaderBoard/GetleagueLeaderboard",type:"POST",data:"LeagueID="+a+"&u="+k.id+"&fu="+k.fbuserid,dataType:"html",error:function(b,c,f){AjaxFail("GetLeagueTable additional info LeagueID="+a+"&u="+k.id+"&fu="+k.fbuserid,b,c,f)},success:function(f){f&&userLeague.DisplayTheLeagueTable(f,a,c,g,d,b,j)}})},createNewLeague:function(){var a=$("#"+displaymode+"_leaguename").val(),c=parseInt($("#"+displaymode+"_league_view_2 input:checked").val()),g=0;$("#"+displaymode+"_allowinvites").is(":checked")==!0&&(g=
1);var d=GetCurrentfixtureID();if(a&&c>0){var b=JSON.parse(window.sessionStorage.getItem("facebookuser"));b&&(b=window.sessionStorage.getItem("facebookuser"),$.ajax({url:WS_URL_ROOT+"/League/LeagueCreateHandler",type:"POST",data:"name="+a+"&fixtureID="+d+"&allowinvites="+g+"&LeagueType="+c+"&description=&user="+b,dataType:"html",error:function(a,b,c){AjaxFail("createNewLeague",a,b,c)},success:function(a){JSON.parse(a).ID>0?(UsersLastCreatedLeague=JSON.parse(a),userLeague.LeagueInvite(UsersLastCreatedLeague.ID,
null,!0)):(a=getRandomNumber(),$("#"+displaymode+"_league_messages").prepend("<div id="+a+"><strong>League was not created! Please try again.</strong> <br /> <span class='button' onclick='hideLeagueExtraDetails("+a+"); return false'>OK</span></div>"),refreshScroller(leagueMessageScroller,"invitepanel"),showLeagueExtraDetails())}}));_gaq.push(["_trackEvent","Clicks","CreateLeague_step2"])}else $("#"+displaymode+"_CreateLeagueError").html("You must give the league a name!")},GetUserLeaguesLinkedToThisFixture:function(){$(".loadingpanel").hide();
var a=JSON.parse(window.sessionStorage.getItem("facebookuser")),c=GetCurrentfixtureID(),g="ListOfUsersLeagues_"+c,d;try{d=JSON.parse(window.sessionStorage.getItem(g))}catch(b){}d&&DisplayListOfLeagues(d,g,!1);$.ajax({url:WS_URL_ROOT+"/League/GetUserLeaguesLinkedToThisFixture",type:"POST",data:"fixtureid="+c+"&userid="+a.id,dataType:"html",error:function(a,b,c){AjaxFail("GetUserLeaguesLinkedToThisFixture",a,b,c)},success:function(a){DisplayListOfLeagues(a,g,!1)}});_gaq.push(["_trackEvent","Clicks",
"ViewMyLeagues"])},GetOfficialLeagues:function(a){$(".loadingpanel").hide();var c=JSON.parse(window.sessionStorage.getItem("facebookuser")),g=GetCurrentfixtureID(),d="ListOfOfficialLeagues_"+g,b;try{b=JSON.parse(window.sessionStorage.getItem(d))}catch(f){}b&&DisplayListOfLeagues(b,d,!0);$.ajax({url:WS_URL_ROOT+"/League/GetOfficialLeagues",type:"POST",data:"fixtureid="+g+"&userid="+c.id,dataType:"html",error:function(a,b,c){AjaxFail("GetOfficialLeagues",a,b,c)},success:function(a){DisplayListOfLeagues(a,
d,!0)}});a&&_gaq.push(["_trackEvent","Clicks","ViewOfficialLeagues"])},GetOfficialLeagues_ForAdmin:function(a){var c=JSON.parse(window.sessionStorage.getItem("facebookuser")),g=GetCurrentfixtureID(),d="ListOfOfficialLeagues_"+g;$.ajax({url:WS_URL_ROOT+"/League/GetOfficialLeagues",type:"POST",data:"fixtureid="+g+"&userid="+c.id,dataType:"html",error:function(a,c,d){AjaxFail("GetOfficialLeagues",a,c,d)},success:function(b){userLeague.GetFixturesLeagues();b=typeof b!="object"?JSON.parse(b):b;$("#"+a).html("");
for(var c=0;c<b.length;c++)$("#"+a).append("<option value="+b[c].ID+">"+b[c].Name+"</option>");window.sessionStorage.setItem(d,$.toJSON(b));$("#"+a).multiSelect({selectableHeader:"<div class='custom-header'>All Official Leagues</div>",selectionHeader:"<div class='custom-header'>Leagues Linked To This Fixture</div>"});$("#"+a).multiSelect("refresh")}})},DeActivateLeague:function(a,c){var g=getRandomNumber();$("#"+displaymode+"_league_messages").prepend("<div id="+g+">Are you sure you want to DeActivate league '<strong>"+
c+"</strong>' <br> <span class='button' onClick='userLeague.ConfirmDeActivateLeague("+g+","+a+"); return false;'>Yes</span><span class='button' onclick='hideLeagueExtraDetails("+g+"); return false'>No</span></div>");$("#"+displaymode+"_league_messages").show()},ConfirmDeActivateLeague:function(a,c){hideLeagueExtraDetails(a);var g=JSON.parse(window.sessionStorage.getItem("facebookuser"));GetCurrentfixtureID();$.ajax({url:WS_URL_ROOT+"/League/DeActivateLeague",type:"POST",data:"l="+c+"&u="+g.id+"&fu="+
g.fbuserid,dataType:"html",error:function(a,b,c){AjaxFail("DeActivateLeague",a,b,c)},success:function(a){a>0&&$("#LL"+c).hide()}})},GetFixturesLeagues:function(){var a=JSON.parse(window.sessionStorage.getItem("facebookuser")),c=GetCurrentfixtureID();$.ajax({url:WS_URL_ROOT+"/League/GetFixturesLeagues",type:"POST",data:"f="+c+"&u="+a.id+"&fu="+a.fbuserid,dataType:"html",error:function(a,c,b){AjaxFail("GetFixturesLeagues",a,c,b)},success:function(a){for(var a=typeof a!="object"?JSON.parse(a):a,c=0;c<
a.length;c++){var b=""+a[c].ID;$("#FixturesLeague").multiSelect("select",b)}$("#FixturesLeague").multiSelect({selectableHeader:"<div class='custom-header'>All Official Leagues</div>",selectionHeader:"<div class='custom-header'>Leagues Linked To This Fixture</div>"})}})},JoinLeague:function(a,c,g,d,b){var f=JSON.parse(window.sessionStorage.getItem("facebookuser"));$(".leaguepanel").hide();$(".leaguestandings").hide();$(".loadingpanel").show();$.ajax({url:WS_URL_ROOT+"/League/JoinLeague",type:"POST",
data:"leagueid="+a+"&u="+f.id+"&fu="+f.fbuserid,dataType:"html",error:function(a,b,c){AjaxFail("JoinLeague",a,b,c);$(".loadingpanel").hide();userLeague.GetOfficialLeagues();showLeagueExtraDetails();a=getRandomNumber();$("#"+displaymode+"_league_messages").prepend("<div id="+a+"><strong>Failed to join the league! Please try again.</strong> <br /> <span class='button' onclick='hideLeagueExtraDetails("+a+"); return false'>OK</span></div>");refreshScroller(leagueMessageScroller,"invitepanel")},success:function(f){userLeague.DisplayTheLeagueTable(f,
a,c,g,d,b)}});_gaq.push(["_trackEvent","Clicks","JoinOfficialLeague"])},StoreLeagueDetails:function(a,c,g,d,b,f){this.name=g;this.desc=d;this.id=c;this.num_MembersInLeague=f;this.creater_Id=b;this.positions_array=a},GetDefaultLeague:function(){thisFixture&&userLeague.GetLeagueTable(thisFixture.defaultleagueid,thisFixture.defaultleaguename,null,thisFixture.defaultleaguecreator,thisFixture.defaultleaguenummembers)},UpdateCurrentLeaderboard:function(a){this.id>0&&$("#"+displaymode+"_leaguestandings_1").css("display")==
"block"&&(a?userLeague.GetLeagueTable(this.id,this.name,null,this.creater_Id,this.num_MembersInLeague,a):userLeague.GetLeagueTable(this.id,this.name,null,this.creater_Id,this.num_MembersInLeague))},GetFriendsLeaderBoard:function(){try{var a;try{a=JSON.parse(window.sessionStorage.getItem("facebookfriendlist"))}catch(c){}var g="";if(a)for(var d=0;d<a.length;d++)g=d==0?a[d].id:g+","+a[d].id;var b=JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/Leaderboard/GetFriendsLeaderboard",
type:"POST",data:"FriendList="+g+"&f="+fixture+"&u="+b.id+"&fu="+b.fbuserid,dataType:"html",error:function(a,b,c){AjaxFail("GetFriendsLeaderBoard",a,b,c)},success:function(a){try{if(a){var b=typeof a!="object"?JSON.parse(a):a;window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(b));$(".FriendsLeaderboard").html(userLeague.DisplayFriendsLeaderBoard(a,"ff",!0));refreshScroller(friendsScoreScroller,"FriendsLeaderboard");SetTickerContent("friendDetails_ticker",null,"friendsFirst")}}catch(c){logError("DisplayFriendsLeaderBoard",
c+"response is "+a)}}})}catch(f){logError("GetFriendsLeaderBoard",f)}},DisplayFriendsLeaderBoard:function(a,c,g){c===void 0&&(c="mediumTable");g=!1;g===void 0&&(g=!0);var d=JSON.parse(window.sessionStorage.getItem("facebookuser")),a=typeof a!="object"?JSON.parse(a):a,c='<table class="'+c+'">';if(g){c+="<thead><tr>";for(var b in a[0])c+='<th scope="col" class="'+b.toString()+'">'+b+"</th>";c+="</tr></thead>"}c+="<tbody>";for(g=0;g<a.length;g++){b=a[g].P;var f=a[g].U.replace(/'/g,"'"),f=a[g].U,h=a[g].S,
j=a[g].F,k=a[g].I;k&&k.indexOf("http")<0&&(k=facebookprofilepicurl+k);var m;try{m=a[g].B}catch(q){}var n="";m&&m.status==0&&m.betid>0&&(n=" beton");c+=d.fbuserid==j?'<tr class="alt_me'+n+'">':'<tr class="alt'+n+'">';c+='<td class="P">'+b+'</td><td class="U"><img src="'+k+'" /><span class="uname">'+f+'</span></td><td class="S">'+h+"</td>";c+="</tr>"}c+="</tbody>";c+="</table>";return c}}};var Store=function(){return{storeitems:void 0,ubbillingobject:void 0,resetinventory:function(){$("#"+displaymode+"_checkout").hide();$("#"+displaymode+"_billing").hide();$("#"+displaymode+"_inventory").show()},showstore:function(){$(".storepopup").is(":visible")==!0?($(".storepopup").fadeOut("fast"),Store.resetinventory()):(_gaq.push(["_trackEvent","Clicks","ShowStore"]),Store.GetStoreItems(),$(".storepopup").fadeIn("fast"))},GetMyStorePurchases:function(){var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));
$.ajax({url:WS_URL_ROOT+"/Game/GetStorePurchases",type:"POST",data:"&u="+a.id+"&fu="+a.fbuserid,error:function(a,g,d){AjaxFail("GetMyStorePurchases",a,g,d)},success:function(a){for(var a=typeof a!="object"?JSON.parse(a):a,g="",d=0;d<a.length;d++){if(a[d].p==4){var b=JSON.parse(window.sessionStorage.getItem("facebookuser")),f;var h=a[d].price.toFixed(2),b=b.CurrencyData;try{var j=typeof b!="object"?JSON.parse(b):b;if(j.currency)j=j.currency;var k={USD:"$",EUR:"\u20ac",GBP:"\u00a3"}[j.user_currency]||
j.user_currency,m=j.currency_offset,q=String(Math.round(h*j.currency_exchange_inverse*m)),m={1:0,10:-1,100:-2,1E3:-3}[m],n=q.substr(m),s=q.substring(0,q.length+m)||"0",p=(1.1).toLocaleString()[1];f=k+String(s)+(n?p+n:"")}catch(l){f="price unknown"}g+="<p class='purchasehistory_row'><span class='time'>"+a[d].time+"</span> - <span class='name'>"+a[d].name+" </span> for <span class='price'>"+f+"</span>"}else g+="<p class='purchasehistory_row'><span class='time'>"+a[d].time+"</span> - <span class='name'>"+
a[d].name+" </span> for <span class='price'>"+a[d].cs+""+a[d].price+"</span>";a[d].status==1?g+=" <span class='status complete'>Purchase Complete</span>":a[d].status==-1?g+=" <span class='status fail'>Purchase Failed - Not Billed</span>":a[d].status==0&&(g+=" <span class='status processing'>Purchase Processing....</span>");g+="</p>"}$("#"+displaymode+"_storepurchases").html(g);refreshScroller(myStorePurchasesScroller,"storepurchases")}})},GetStoreItems:function(a){var c=JSON.parse(window.sessionStorage.getItem("facebookuser"));
$.ajax({url:WS_URL_ROOT+"/Game/GetStoreItems",type:"POST",data:"fixtureID="+GetCurrentfixtureID()+"&userid="+c.id+"&p="+getPlatform(),error:function(a,c,b){AjaxFail("GetStoreItems",a,c,b)},success:function(c){Store.storeitems=typeof c!="object"?JSON.parse(c):c;if(a)for(c=0;c<Store.storeitems.length;c++)Store.storeitems[c].name.toLowerCase().indexOf(a)>0&&Store.confirmPurchase(c,!0);else Store.DisplayStoreItems(c)}})},DisplayStoreItems:function(){for(var a="",c=0;c<Store.storeitems.length;c++)a+=getPlatform()==
2?'<div style="width:25%; float:left; text-align:center;"> <img src="https://d2q72sm6lqeuqa.cloudfront.net/images/'+Store.storeitems[c].imgurl+'" border="0" alt="200"  /><br /><strong>'+Store.storeitems[c].cs+Store.storeitems[c].price.toFixed(2)+'</strong><br /> <div class="button" onclick="Store.DisplayStoreItem('+c+'); return false;">More Info</div></div>':'<div style="width:25%; float:left; text-align:center;"> <img src="https://d2q72sm6lqeuqa.cloudfront.net/images/'+Store.storeitems[c].imgurl+'" border="0" alt="200"  /><br /> <div class="button" onclick="Store.DisplayStoreItem('+
c+'); return false;">More Info</div></div>';$("#"+displaymode+"_inventory").html(a)},DisplayStoreItem:function(a,c){_gaq.push(["_trackEvent","Clicks","ShowStoreItem_"+Store.storeitems[a].name]);if(getPlatform()==2){$(".itemdescriptiondetails").html("<p><strong>"+Store.storeitems[a].name+"</strong> <br />"+Store.storeitems[a].description+"</p><br />");$("#"+displaymode+"_inventory").fadeOut("fast",function(){$("#"+displaymode+"_checkout").fadeIn("fast")});var g="<p>Price "+Store.storeitems[a].price+
" <div class='button' onclick='Store.confirmPurchase("+a+"); return false;'>Buy</div></p>";$(".itempurchasedetails").html(g)}else Store.confirmPurchase(a,c)},confirmPurchase:function(a,c){var g=JSON.parse(window.sessionStorage.getItem("facebookuser")),d=Store.storeitems[a].id,b="";try{var f=typeof g.CurrencyData!="object"?JSON.parse(g.CurrencyData):g.CurrencyData,b=f.currency?f.currency.user_currency:f.user_currency}catch(h){}$.ajax({url:WS_URL_ROOT+"/Game/LogPurchaseRequest",type:"POST",data:"fixtureID="+
GetCurrentfixtureID()+"&cc="+b+"&userid="+g.id+"&si="+d+"&p="+getPlatform()+"&fu="+uiUser.fbuserid+"&c="+Store.storeitems[a].c,error:function(a,b,c){AjaxFail("confirmPurchase",a,b,c)},success:function(b){if(b.id>0)if(getPlatform()==2)Store.DoIOSBilling(b);else if(getPlatform()==4)if(g.payment_test_group&&g.payment_test_group==1){var f={method:"pay",action:"buy_item",order_info:{item_id:"'"+b.fboi+"'"},dev_purchase_params:{oscif:!0}};Store.lastfbid=b.id;FB.ui(f,Store.HandleFacebookBilingResponse)}else Store.lastfbid=
b.id,FB.ui({method:"pay",action:"purchaseitem",product:b.u,request_id:b.id},Store.HandleFacebookBilingResponseV2);else $(".itemdescriptiondetails").html("<p><strong>"+Store.storeitems[a].name+"</strong> <br />"+Store.storeitems[a].description+"</p><br />"),$("#"+displaymode+"_inventory").fadeOut("fast",function(){$("#"+displaymode+"_checkout").fadeIn("fast")}),Store.InitiateUBBillingV2(b,Store.storeitems[a].price,a),$(".itempurchasedetails").html("<p>Retrieving purchase details........</p>"),c&&Store.DisplayStoreItems(Store.storeitems);
else $(".itemdescriptiondetails").html("<p>Error displaying item details. Please try again later</p><br />")}})},HandleFacebookBilingResponseV2:function(a){var c=JSON.parse(window.sessionStorage.getItem("facebookuser"));a.payment_id?$.ajax({url:WS_URL_ROOT+"/Game/UpdateFBStorePurchase",type:"POST",data:{pid:a.payment_id,spid:Store.lastfbid,a:a.amount,c:a.currency,q:a.quantity,s:a.status,sr:a.signed_request,u:c.id,fu:c.fbuserid},error:function(a,c,b){AjaxFail("UpdateFBStorePurchase",a,c,b)},success:function(a){a&&
a.id>0&&Store.CompletePurchase(a)}}):a.error_code&&Store.lastfbid&&$.ajax({url:WS_URL_ROOT+"/Game/LogFailedFBStorePurchase",type:"POST",data:"u="+c.id+"&spid="+Store.lastfbid+"&ec="+a.error_code+"&em="+encodeURIComponent(a.error_message)+"&fu="+uiUser.fbuserid,error:function(a,c,b){AjaxFail("CompleteFailedFBStorePurchase",a,c,b)},success:function(a){a&&a.id>0&&Store.CompletePurchase(a)}})},HandleFacebookBilingResponse:function(a){var c=JSON.parse(window.sessionStorage.getItem("facebookuser"));a.order_id?
$.ajax({url:WS_URL_ROOT+"/Game/CompleteFBStorePurchase",type:"POST",data:"fboid="+a.order_id+"&u="+c.id+"&fu="+uiUser.fbuserid,error:function(a,c,b){AjaxFail("UpdateFBStorePurchase",a,c,b)},success:function(a){a&&a.id>0&&Store.CompletePurchase(a)}}):a.error_code&&Store.lastfbid&&$.ajax({url:WS_URL_ROOT+"/Game/LogFailedFBStorePurchase",type:"POST",data:"u="+c.id+"&spid="+Store.lastfbid+"&ec="+a.error_code+"&em="+encodeURIComponent(a.error_message)+"&fu="+uiUser.fbuserid,error:function(a,c,b){AjaxFail("CompleteFailedFBStorePurchase",
a,c,b)},success:function(a){a&&a.id>0&&Store.CompletePurchase(a)}})},InitiateUBBilling:function(a,c){var g=JSON.parse(window.sessionStorage.getItem("facebookuser")),d=a.id;$.ajax({url:WS_URL_ROOT+"/Game/CallUBBillRequest",type:"POST",data:"fixtureID="+GetCurrentfixtureID()+"&userid="+g.id+"&si="+a.storeitemid+"&pid="+a.id+"&price="+c,error:function(a,c,d){AjaxFail("InitiateUBBilling",a,c,d)},success:function(a){a=a.replace(/@/g,"");Store.ubbillingobject=typeof a!="object"?JSON.parse(a):a;if(!g.sak&&
g.sak!=Store.ubbillingobject.Billing.SAK)g.sak=Store.ubbillingobject.Billing.SAK;a="<p>Price "+Store.ubbillingobject.Billing.BillOptions.Billoption.BillingPrice+" <div class='button' onclick='Store.DoUBBilling("+Store.ubbillingobject.Billing.BillOptions.Billoption.BillOptionID+","+Store.ubbillingobject.Billing.BillOptions.Billoption.BillingPrice+","+d+"); return false;'>Buy</div></p>";$(".itempurchasedetails").html(a)}})},InitiateUBBillingV2:function(a,c,g){var d=JSON.parse(window.sessionStorage.getItem("facebookuser")),
b=a.id;$.ajax({url:WS_URL_ROOT+"/Game/CallUBBillRequestV2",type:"POST",data:"fixtureID="+GetCurrentfixtureID()+"&userid="+d.id+"&si="+a.storeitemid+"&pid="+a.id+"&price="+c+"&title= "+encodeURIComponent(Store.storeitems[g].name)+"&sak="+d.sak,error:function(a,b,c){AjaxFail("InitiateUBBillingV2",a,b,c)},success:function(a){if(a=="-1"||a=="-2")$(".itempurchasedetails").html("Error retrieving purchase details. Please try again later. <br />");else{a=a.replace(/@/g,"");Store.ubbillingobject=typeof a!=
"object"?JSON.parse(a):a;a={USD:"$",EUR:"\u20ac",GBP:"\u00a3"};if(Store.ubbillingobject.Billing.BillOptions.BillOption.BillingPrice){var c;try{c=Store.ubbillingobject.Billing.BillOptions.BillOption.BillingCurrencyDisplay}catch(d){c=a[Store.ubbillingobject.Billing.BillOptions.BillOption.BillingCurrency]}c||(c="");c="<p>Price "+c+Store.ubbillingobject.Billing.BillOptions.BillOption.BillingPrice+" <div class='button' onclick='Store.DoUBBilling("+Store.ubbillingobject.Billing.BillOptions.BillOption.BillOptionID+
","+Store.ubbillingobject.Billing.BillOptions.BillOption.BillingPrice+","+b+"); return false;'>Buy</div></p>"}else{try{c=Store.ubbillingobject.Billing.BillOptions.BillOption[0].BillingCurrencyDisplay}catch(g){c=a[Store.ubbillingobject.Billing.BillOptions.BillOption[0].BillingCurrency]}c||(c="");c="<p>Price "+c+Store.ubbillingobject.Billing.BillOptions.BillOption[0].BillingPrice+" <div class='button' onclick='Store.DoUBBilling("+Store.ubbillingobject.Billing.BillOptions.BillOption[0].BillOptionID+
","+Store.ubbillingobject.Billing.BillOptions.BillOption[0].BillingPrice+","+b+"); return false;'>Buy</div></p>"}$(".itempurchasedetails").html(c)}}})},DoUBBilling:function(a,c,g){var d=JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/Game/LogUsersSelectedUBBillOption",type:"POST",data:"&userid="+d.id+"&pid="+g+"&ubboid="+a+"&ubp="+c+"&fu="+uiUser.fbuserid,error:function(a,c,d){AjaxFail("DoUBBilling",a,c,d)},success:function(a){if(a>0){var c;try{c=Store.ubbillingobject.Billing.BillOptions.BillOption.InstructionSet.IS.Step.URI}catch(d){}if(!c)try{c=
Store.ubbillingobject.Billing.BillOptions.BillOption.InstructionSet.IS.Step[0].URI}catch(g){}if(!c)try{c=Store.ubbillingobject.Billing.BillOptions.BillOption[0].InstructionSet.IS.Step[0].URI}catch(k){}if(!c)try{c=Store.ubbillingobject.Billing.BillOptions.BillOption[0].InstructionSet.IS.Step.URI}catch(m){}window.location.href=c}else a==-999?$(".itemdescriptiondetails").html("<p>Error - invalid user</p><br />"):$(".itemdescriptiondetails").html("<p>Error. Please try again later</p><br />")}})},DoIOSBilling:function(a){try{window.location=
"livegames:BuyItem:"+a.storeitemid+":"+a.id}catch(c){logError("DoIOSBilling",c)}},LogIOSBillingError:function(a,c,g){$.ajax({url:WS_URL_ROOT+"/Game/LogIOSReceiptError",type:"POST",data:"&errorText="+a+"&purchaseID="+c+"&errorCode="+g,error:function(a,b,c){AjaxFail("DoUBBilling",a,b,c)},success:function(){}})},DoAndroidBilling:function(){},CheckForOpenStorePurchases:function(){var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));a&&a.id>0&&(getPlatform()==1?$.ajax({url:WS_URL_ROOT+"/Game/CheckForSuccessfullUBPurchases",
type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+a.id+"&fu="+a.fbuserid,error:function(c,g,d){AjaxFail("CheckForOpenStorePurchases additional data we sent was f="+GetCurrentfixtureID()+"&u="+a.id+"&fu="+a.fbuserid,c,g,d)},success:function(a){if(a){for(var a=typeof a!="object"?JSON.parse(a):a,g=0,d=0;d<=a.length-1;d++)a[d].ubresultid<0||a[d].ubresultid==2?Store.CompletePurchase(a[d]):g+=1;g>0&&($(".GameFeedInfo").prepend("<b>Store purchase pending - will check again in 30 seconds</b> <br />"),refreshScroller(GameFeedScroller,
"GameFeedInfo"),setTimeout("Store.CheckForOpenStorePurchases();",3E4))}}}):getPlatform())},GetStorePurchase:function(a){$.ajax({url:WS_URL_ROOT+"/Game/GetStorePurchase",type:"POST",data:"&id="+a,error:function(a,g,d){AjaxFail("LogIOSReceiptID",a,g,d)},success:function(a){return a}})},UpdateIOSPurchases:function(a,c){try{var g=Store.GetStorePurchase(c);$.ajax({url:WS_URL_ROOT+"/Game/LogIOSReceiptID",type:"POST",data:"&receiptID="+a+"&purchaseID="+c,error:function(a,c,d){AjaxFail("LogIOSReceiptID",
a,c,d)},success:function(){$.ajax({url:WS_URL_ROOT+"/Game/ValidateReceipt",type:"POST",data:'&jsonString={"receipt-data": "'+a+'"}',error:function(a,c,d){AjaxFail("LogIOSReceiptID",a,c,d)},success:function(a){a=JSON.parse(a);try{$.ajax({url:WS_URL_ROOT+"/Game/LogIOSReceiptInfo",type:"POST",data:"&transactionID="+a.receipt.transaction_id+"&purchaseDate="+a.receipt.purchase_date+"&purchaseID="+c+"&quantity="+a.receipt.quantity+"&productID="+a.receipt.product_id+"&originalPurchaseDate="+a.receipt.original_purchase_date+
"&appItemID="+a.receipt.app_item_id+"&versionExternalId="+a.receipt.version_external_id+"&bid="+a.receipt.bid+"&bvrs="+a.receipt.bvrs+"&originalTransactionID="+a.receipt.original_transaction_id+"&result="+a.status,error:function(a,b,c){AjaxFail("LogIOSReceiptID",a,b,c)},success:function(){CompletePurchase(g)}})}catch(f){logError("DoIOSBilling",f),Store.LogIOSBillingError(a.exception,c,a.status)}}})}})}catch(d){logError("DoIOSBilling",d)}},UpdateAndroidPurchases:function(){},CompletePurchase:function(a){var c=
JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/Game/completeStorePurchase",type:"POST",data:"fixtureID="+GetCurrentfixtureID()+"&userid="+c.id+"&id="+a.id+"&fu="+uiUser.fbuserid,error:function(a,c,b){AjaxFail("CompletePurchase",a,c,b)},success:function(a){if(a.purchaseresult>0)switch($(".storepopup").fadeOut("fast"),$(".tooltip-shade").hide(),Store.resetinventory(),$(".popup-notify-purchase > h1").text("Purchase Complete!"),$(".popup-notify-purchase > span").text(a.purchaseresult),
$(".popup-notify-purchase").fadeIn(200).delay(3E3).fadeOut(200),a.storeitemid){case 1:thisFixture.unlockcredits=a.purchaseresult;DisplayHigherCreditsAvailabilityToUserV2(a.purchaseresult,0,0,"updateTicker");break;case 2:var c="<span>"+a.purchaseresult+"</span>Power Play";a.purchaseresult>1&&(c+="s");$("#"+displaymode+"_powerplayclickbtn").html(c);$("#powerplayclickbtn2 span").html(a.purchaseresult);$(".powerplayclick").removeClass("off");thisFixture.remainingpowerplays+=1;break;case 3:$("#"+displaymode+
"_forfeitnum").html(a.purchaseresult);try{c=JSON.parse(window.sessionStorage.getItem("Currentbet"))}catch(b){}c!=null&&c.status==0&&($("#"+displaymode+"_forfeitnum").show(),$(".forfeitclick").show());remainingforfeits=a.purchaseresult;break;case 4:$(".credits").html(a.purchaseresult)}}})}}};var Administrator=function(a){var c=0,g=0,d="";return{user:a,secureGroupName:0,isAdmin:function(){var b=!1;try{a&&a.level=="trust5"&&(b=!0)}catch(c){logError("isAdmin",c)}return b},SendKeepAlive:function(){try{keepAliveStarted=1}catch(a){}},SetUpRefereesSecureGroup:function(){try{d="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0;return(a=="x"?b:b&3|8).toString(16)}),AdminPusher.CreateSecureGroup(d,"CreateBroadcastGroupReturn",1)}catch(a){alert("error creating broadcast group!!! ex is "+
a.toString())}},DisplayAdminDivs:function(){$("#AdminButtons").show();$("#AdminExtraButtons").show();$("#slide5").show();$("#gameoptions").hide();$("#slide2").hide()},showFreeze:function(){$("#EventID22").show();$("."+displaymode+"_pitch-icons").hide()},freezeBets:function(){freezeInDB=0;admin.putEventDetailsInDB(22,0,"","");lastEventSent=22;admin.populateListOfGoalScorers();$("#EventID22").hide();$("#EventID23").show();$("."+displaymode+"_pitch-icons").show()},ResetBackup:function(){try{if(admin&&
admin.isAdmin()){var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/Admin/RB",type:"POST",data:"u="+a.id+"&fu="+a.fbuserid,error:function(a,b,c){AjaxFail("RB",a,b,c)},success:function(a){a>0?$(".GameFeedInfo").prepend("DB Backup values reset!!!<br />"):$(".GameFeedInfo").prepend("DB Backup values NOT reset - contact DBA!!!<br />")}})}}catch(c){logError("ResetBackup",c)}},putEventDetailsInDB:function(a,c,d,g){try{if(admin&&admin.isAdmin())if(currentlyConnected==
1){var k=JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/Admin/LogEvent",type:"POST",data:"eventID="+a+"&FixtureID="+GetCurrentfixtureID()+"&FBOID="+c+"&BroadCastMessage="+d+"&EventTimeStamp="+g+"&u="+k.id+"&fu="+k.fbuserid,error:function(a,b,c){AjaxFail("setLive",a,b,c)},success:function(a){a&&admin.pushEventDetailsToPlayers(a)}})}else alert("you are NOT connected to T5Pusher!!!!! - reload page to establish connection - then - send message again!!!!!!!")}catch(m){logError("putEventDetailsInDB",
m)}},testPusher:function(){try{if(admin&&admin.isAdmin()){var a=[];a.push(1);var c;try{c=JSON.parse(window.sessionStorage.getItem("facebookuser"))}catch(d){}AdminPusher.push("pusherTest",a,"PT"+c.fbuserid)}}catch(g){logError("testPusher",g)}},pushEventDetailsToPlayers:function(a){try{if(admin&&admin.isAdmin()){a.c&&admin.confirmEventSent(a.c);if(a.ne){var c=[];c.push(a.f);c.push(a.e);c.push(a.ne);c.push(a.h);c.push(a.a);c.push(a.d);c.push(a.t);c.push(a.et);c.push(a.p);c.push(a.s);AdminPusher.push("UpdateGameEvent",
c,d)}a.o&&(c=[],c.push(a.o),c.push(GetCurrentfixtureID()),AdminPusher.push("UpdateGameOdds",c,d));a.i&&(c=[],c.push(a.l),c.push(a.i),c.push(a.f),c.push(a.ne),c.push(a.n),AdminPusher.push("UpdateLeaderboard",c,d))}}catch(g){logError("confirmEventSent",g)}},confirmEventSent:function(a){try{if(admin&&admin.isAdmin()){var c=a.split(":"),d=c[1];c[0]==22&&(freezeInDB=d,lastEventSent!=22&&lastEventSent!=23&&(admin.thawBets(),logError("FreezeIssue","We had to send a thaw!!!! - lastEventSent is "+lastEventSent+
", newEventID is "+d)))}}catch(g){logError("confirmEventSent",g)}},thawBets:function(){JSON.parse(window.sessionStorage.getItem("facebookuser"));admin.putEventDetailsInDB(23,0,"","");freezeInDB=1;lastEventSent=23;$("#EventID22").show();$("#EventID23").hide();$("."+displaymode+"_pitch-icons").hide()},confirmEvent:function(a){freezeInDB==0?(setTimeout("admin.SendEvent("+a+");",500),logError("FreezeIssue","We had to delay sending the actual event. eventid is "+a)):(logError("NoFreezeIssue","We did NOT have to delay sending the actual event. eventid is "+
a),admin.SendEvent(a))},SendEvent:function(a){JSON.parse(window.sessionStorage.getItem("facebookuser"));admin.putEventDetailsInDB(a,0,"","");lastEventSent=a;$("#EventID22").show();$("#EventID23").hide();$("."+displaymode+"_pitch-icons").hide();$("#confirmevent").hide()},GetEventTimeStamp:function(){return(new Date).getTime()},confirmGoal:function(a){var c=parseInt($("#betoptionselect9").val());c>=0?(JSON.parse(window.sessionStorage.getItem("facebookuser")),admin.putEventDetailsInDB(a,c,"",""),lastEventSent=
a,$("#confirmgoal").hide(),$("#EventID22").show(),$("#EventID23").hide(),$("."+displaymode+"_pitch-icons").hide()):alert("YOU MUST SELECT WHO SCORED!!!!")},sendEvent:function(a,c){a==4||a==6?($("#confirmgoal").show(),$("#confirmgoal").animate({top:"55px"},300),$("#confirmgoal").attr("style","display:block;z-index:900;"),$("#confirmgoal h4").html("You have selected <span style='color:#FFFFCC;'>"+c+"</span><br />Select the GoalScorer and confirm the event."),$("#confirmgoalbutton").attr("onClick","admin.confirmGoal("+
a+")")):($("#confirmevent").show(),$("#confirmevent").animate({top:"55px"},300),$("#confirmevent").attr("style","display:block;z-index:900;"),$("#confirmevent h4").html("You have selected <span style='color:#FFFFCC;'>"+c+"</span><br />Are you sure?"),$("#confirmeventbutton").attr("onClick","admin.confirmEvent("+a+")"))},sendBroadcastMessage:function(a,c){if(a==27)if((c=$("#broadcastmessagetext").val())&&c.length>0){if(confirm("You have selected to send out the message \n'"+c+"' \nAre you sure?"))JSON.parse(window.sessionStorage.getItem("facebookuser")),
admin.putEventDetailsInDB(a,0,c,""),lastEventSent=a,$("#broadcastmessagetext").value=""}else alert("You can't send empty broadcast messages!!!!!!");else confirm("You have selected "+c+"\nAre you sure?")&&(JSON.parse(window.sessionStorage.getItem("facebookuser")),admin.putEventDetailsInDB(a,0,"",""),lastEventSent=a)},configureStartButtons:function(){if(thisFixture)switch(thisFixture.currenthalf){case -101:admin.notStartedSetup();break;case -102:admin.halfTimeSetup();break;case -103:admin.fullTimeSetup();
break;case 1:admin.firstHalfSetup();break;case 2:admin.secondHalfSetup()}},setLive:function(){if(confirm("Are you sure?")){var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/Game/SetLive",type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+a.id,error:function(a,b,c){AjaxFail("setLive",a,b,c)},success:function(a){a==1&&($("#setLive").hide(),alert("Game is now live!"))}})}},notStartedSetup:function(){$("."+displaymode+"_pitch-icons").hide();$("#EventID22").hide();
$("#EventID11").show();$("#EventID12").hide();$("#EventID13").hide();$("#EventID14").hide();$("#EventFullTime").hide()},halfTimeSetup:function(){$("."+displaymode+"_pitch-icons").hide();$("#EventID22").hide();$("#EventID11").hide();$("#EventID12").hide();$("#EventID13").show();$("#EventID14").hide();$("#EventFullTime").hide();$("#previewpitchdiv").hide()},fullTimeSetup:function(){$("."+displaymode+"_pitch-icons").hide();$("#EventID22").hide();$("#EventID11").hide();$("#EventID12").hide();$("#EventID13").hide();
$("#EventID14").hide();$("#previewpitchdiv").hide();$("#BackupToDisk").show();$("#ShowAwardPrizes").show()},firstHalfSetup:function(){$("."+displaymode+"_pitch-icons").hide();$("#EventID22").show();$("#EventID11").hide();$("#EventID12").show();$("#EventID13").hide();$("#EventID14").hide();$("#EventFullTime").hide()},secondHalfSetup:function(){$("."+displaymode+"_pitch-icons").hide();$("#EventID22").show();$("#EventID11").hide();$("#EventID12").hide();$("#EventID13").hide();$("#EventID14").show();
$("#EventFullTime").hide();$("#previewpitchdiv").show()},startGame:function(){$("."+displaymode+"_pitch-icons").hide();$("#EventID22").show();$("#EventID11").hide();$("#EventID12").hide();$("#EventID13").hide();$("#EventID14").show();$("#EventFullTime").hide()},ShowAwardPrizes:function(){$("#setMatchPrizes").show();$("#awardcreditsresult").html("");userLeague.GetOfficialLeagues_ForAdmin("FixturesLeaguePrizes")},previewPitch:function(){c==0?($(".match-notstarted").hide(),c=1,$("."+displaymode+"_pitch-icons").show(),
$(".pitch-container").show(),$(".pitch").show()):(c=0,$("."+displaymode+"_pitch-icons").hide(),$("#EventID11").is(":visible")&&($(".pitch-container").hide(),$(".pitch").hide()))},inPreview:function(){return c},CleanupDBMidMatch:function(){g==0&&confirm("Are you sure?")&&($.ajax({url:WS_URL_ROOT+"/Game/MidGameDBCleanUp",type:"POST",data:"fixtureID="+GetCurrentfixtureID(),error:function(a,c,d){AjaxFail("GetLastEvent",a,c,d)},success:function(a){g=0;a?a.result==1&&$(".GameFeedInfo").prepend("<span class='losetext'>DB cleaned up <br />"+
a.details+"</span><br />"):$(".GameFeedInfo").prepend("<span class='losetext'>Error cleaning up DB!!! <br /></span>")}}),g=1,$(".GameFeedInfo").prepend("DB Clean up started!<br />"))},ChangeDiskMemoryTableStatus:function(a){if(confirm("Are you sure you want to change the LiveGames system to use "+a+" tables?????! - This may take a few moments")){$("#memdiskstatusdiv").hide();$("#changingsystem").show();var c=JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/Game/SetSystemMemoryDiskStatus",
type:"POST",data:{u:c.id,fu:c.fbuserid,g:1,s:a},error:function(a,b,c){AjaxFail("ChangeDiskMemoryTableStatus",a,b,c)},success:function(c){c?c==1?(alert("System switched to use "+a+" tables"),a=="Memory"?ShowThatWeAreUsingMemoryTables():ShowThatWeAreUsingDiskTables()):c==-2?alert("System already using "+a+" tables"):c==-3?alert("failed to back up tables before moving to Memory system"):c==-4?alert("failed to back up tables before moving to Disk system"):alert("failed to do update"):alert("failed to do update")}})}},
BackupDBToDisk:function(){confirm("Are you sure you want to Back up the memory tables to disk now??!")&&($.ajax({url:WS_URL_ROOT+"/Game/BackupToDisk",type:"POST",data:"fixtureID="+GetCurrentfixtureID(),error:function(a,c,d){AjaxFail("BackupToDisk",a,c,d)},success:function(a){a?a.backupresult>0?($(".GameFeedInfo").prepend("<span class='losetext'>Data Backed up to Disk!<br /> "+replaceAll("brk","<br />",a.backupdetails)+"</span>"),refreshScroller(GameFeedScroller,"GameFeedInfo")):a.backupresult==-4?
$(".GameFeedInfo").prepend("Unable to back up to disk - awaiting previous MEMORY backup to complete - this can take up to 5 minutes - if this function still does not run in  max 10 minutes - contact administrator!!!!<br />"):a.backupresult==-5?$(".GameFeedInfo").prepend("Unable to back up to disk - awaiting previous LEAGUE backup to complete - if this function still does not run in  max 10 minutes - contact administrator!!!!<br />"):$(".GameFeedInfo").prepend("Error backing up data to disk!!!!<br />"):
$(".GameFeedInfo").prepend("Error backing up data to disk!!!!<br />")}}),$(".GameFeedInfo").prepend("Starting backing up memory tables to disk ..this may take a number of minutes....<br />"))},RebootMemoryTables:function(){confirm("Are you sure you want to reboot the memory tables now??!  You MUST have backed up to disk before calling this or you will LOSE ALL DATA!!!!!")&&confirm("This will kill any games currently running????!!??!")&&($.ajax({url:WS_URL_ROOT+"/Game/RebootMemoryTables",type:"POST",
data:"fixtureID="+GetCurrentfixtureID(),error:function(a,c,d){AjaxFail("RebootMemoryTables",a,c,d)},success:function(a){a?a.resetresult>0?($(".GameFeedInfo").prepend("<span class='wintext'>System Rebooted!<br /> "+replaceAll("brk","<br />",a.resetdetails)+"</span>"),refreshScroller(GameFeedScroller,"GameFeedInfo")):$(".GameFeedInfo").prepend("Error rebooting memory tables!!!<br />"):$(".GameFeedInfo").prepend("Error rebooting memory tables!!!!<br />")}}),$(".GameFeedInfo").prepend("Starting memory tables reboot to disk ..this may take a number of minutes....<br />"))},
CompareMemoryTables:function(){confirm("Are you sure you want to Compare the disk and memory table contents for this fixture????!")&&($.ajax({url:WS_URL_ROOT+"/Game/CompareMemoryTables",type:"POST",data:"fixtureID="+GetCurrentfixtureID(),error:function(a,c,d){AjaxFail("CompareMemoryTables",a,c,d)},success:function(a){a&&($(".GameFeedInfo").prepend("<span class='losetext'>"+replaceAll("brk","<br />",a)+"</span>"),refreshScroller(GameFeedScroller,"GameFeedInfo"))}}),$(".GameFeedInfo").prepend("Starting the comparisson of the disk and memory table contents for this fixture ..this may take a number of minutes....<br />"))},
PopulateEditTeamColourDropDowns:function(){var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));teamcolours?admin.PopulateEditTeamColourDropDowns_DisplayHTML(teamcolours):$.ajax({url:WS_URL_ROOT+"/Game/GetTeamColours",type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+a.id,error:function(a,b,c){AjaxFail("GetTeamColours",a,b,c)},success:function(a){teamcolours=typeof a!="object"?JSON.parse(a):a;window.sessionStorage.setItem("teamcolours",teamcolours);admin.PopulateEditTeamColourDropDowns_DisplayHTML(teamcolours)}})},
PopulateEditTeamColourDropDowns_DisplayHTML:function(a){for(var c="<select id='edithometeamcolour' name='edithometeamcolour'>",d="<select id='editawayteamcolour' name='editawayteamcolour'>",g=0;g<a.length;g++)c=thisFixture.hometeamcolour==a[g]?c+"<option selected value='"+a[g]+"'>"+a[g]+"</option>":c+"<option value='"+a[g]+"'>"+a[g]+"</option>",d=thisFixture.awayteamcolour==a[g]?d+"<option selected value='"+a[g]+"'>"+a[g]+"</option>":d+"<option value='"+a[g]+"'>"+a[g]+"</option>";c+="</select>";d+=
"</select>";$("#hometeamcolourdiv").html(c);$("#awayteamcolourdiv").html(d)},EditPusherDetails:function(){$("#UpdateStatus").html("");$("#editpusherdetails").show();$("#EditPusher").hide();$("#PusherURL").html();$("#UpdateStatus").html();$("#PusherDDL option[value='0']").attr("selected","selected")},EditIndividualPusher:function(){var b=$("#PusherDDL").val();$.ajax({url:WS_URL_ROOT+"/Admin/GetPusherURLS",type:"POST",data:"p="+b+"&u="+a.id+"&fu="+a.fbuserid,dataType:"html",error:function(a,b,c){AjaxFail("GetPusherURLS",
a,b,c)},success:function(a){if((a=typeof a!="object"?JSON.parse(a):a)&&a.length>0){$("#EditPusher").show();$("#PusherURL").html("");for(var b=0;b<a.length;b++)a[b].id>0?$("#PusherURL").append("<option selected >"+a[b].url+"</option>"):$("#PusherURL").append("<option>"+a[b].url+"</option>")}}})},UpdatePusherURL:function(){var b=$("#PusherDDL").val(),c=$("#newpushurl").val();c||(c=$("#PusherURL").val());b&&c?$.ajax({url:WS_URL_ROOT+"/Admin/UpdatePusherURL",type:"POST",data:"p="+b+"&pu="+c+"&u="+a.id+
"&fu="+a.fbuserid,dataType:"html",error:function(a,b,c){AjaxFail("GetPusherURLS",a,b,c)},success:function(a){a>0?($("#editpusherdetails").hide(),alert("pusher url was updated - reload the game page and check the pusherurl in the Chrome console view to confirm!!!")):$("#UpdateStatus").html("<br />pusher url was NOT updated - contact system administrator!!!")}}):$("#UpdateStatus").html("<br />You must select the pusher AND1 enter or select a valid URL")},UpdateNumPushers:function(){var b="1",c=$("input[type='radio'][name='SeperatePushers']:checked");
c.length>0&&(b=c.val());$.ajax({url:WS_URL_ROOT+"/Admin/UpdateNumPushers",type:"POST",data:"np="+b+"&u="+a.id+"&fu="+a.fbuserid,dataType:"html",error:function(a,b,c){AjaxFail("UpdateNumPushers",a,b,c)},success:function(a){a>0?($("#editpusherdetails").hide(),alert("number of pusher urls was updated - reload the game page and check the number of pusherurls in the Chrome console view to confirm!!!")):$("#UpdateStatus").html("<br />pusher numbers were NOT updated - contact system administrator!!!")}})},
GetNumPushers:function(){var b="1",c=$("input[type='radio'][name='SeperatePushers']:checked");c.length>0&&(b=c.val());$.ajax({url:WS_URL_ROOT+"/Admin/GetNumPushers",type:"POST",data:"np="+b+"&u="+a.id+"&fu="+a.fbuserid,dataType:"html",error:function(a,b,c){AjaxFail("GetNumPushers",a,b,c)},success:function(a){a>-1&&$("#sp"+a).attr("checked","checked")}})},DisplayEditMatchPopUp:function(){try{userLeague.GetOfficialLeagues_ForAdmin("FixturesLeague");$("#editmatchdetails").show();$("#hometeamname").val(thisFixture.hometeam);
$("#awayteamname").val(thisFixture.awayteam);$("#homecrest").val(thisFixture.homecrest);$("#awaycrest").val(thisFixture.awaycrest);$("#fixturedescription").val(thisFixture.fd);$("#fixturecrest").val(thisFixture.fc);$("#kotime").val(thisFixture.starttime);thisFixture.hp==1?$("#hp_1").attr("checked","checked"):$("#hp_0").attr("checked","checked");var a="<select id='editteamdirection' name='editteamdirection'>",a=thisFixture.firsthalfleftteam==thisFixture.hometeam?a+"<option value='1'>"+thisFixture.hometeam+
"</option><option value='2'>"+thisFixture.awayteam+"</option>":a+"<option value='2'>"+thisFixture.awayteam+"</option><option value='1'>"+thisFixture.hometeam+"</option>";a+="</select>";$("#teamDirectionhtml").html(a);$("#editvoid").val(thisFixture.voidOffset);admin.PopulateEditTeamColourDropDowns()}catch(c){alert(c)}},EditMatchDetails:function(){try{var a=$("#hometeamname").val(),c=$("#awayteamname").val(),g=$.trim($("#homecrest").val()),j=$.trim($("#awaycrest").val()),k=$.trim($("#fixturecrest").val()),
m=$.trim($("#fixturedescription").val()),q=$("#kotime").val(),n="0",s=$("input[type='radio'][name='HomePageFixture']:checked");s.length>0&&(n=s.val());if(n==1&&(!k||!q))return $("#editstatus").html("You MUST set the image and ko Time for the homepage fixture!!!!!!"),-1;var p=$("#edithometeamcolour").val(),l=$("#editawayteamcolour").val(),z=$("#editteamdirection").val(),z=z==1?a:c,C=$("#editvoid").val();if(isNaN(C))C=thisFixture.voidOffset;var x;try{x=$("#FixturesLeague").val().toString()}catch(T){x=
""}var u=JSON.parse(window.sessionStorage.getItem("facebookuser"));a&&c&&a!=c?$.ajax({url:WS_URL_ROOT+"/Game/EditMatchDetails",type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+u.id+"&htn="+encodeURIComponent(a)+"&atn="+encodeURIComponent(c)+"&atc="+encodeURIComponent(l)+"&htc="+encodeURIComponent(p)+"&fhlt="+encodeURIComponent(z)+"&v="+C+"&hc="+encodeURIComponent(g)+"&ac="+encodeURIComponent(j)+"&fc="+encodeURIComponent(k)+"&fb="+encodeURIComponent(m)+"&tsko="+encodeURIComponent(q)+"&hp="+encodeURIComponent(n)+
"&fl="+encodeURIComponent(x),error:function(a,b,c){AjaxFail("EditMatchDetails",a,b,c)},success:function(a){parseInt(a)>0?($("#editmatchdetails").hide(),confirm("Match Details Updated!")&&thisFixture.currenthalf>0&&(a=[],a.push(p+"^"+l+"^"+z+"^"+C),AdminPusher.push("updateGameDetails",a,d)),GetGameDetails(GetCurrentfixtureID(),GameDetailsComplete)):$("#editstatus").html("Error editing details!!")}}):$("#editstatus").html("You must enter a valid names for the teams!!")}catch(O){alert(O)}},AwardCredits:function(){try{var a=
$("#resultscredits").val(),c=$("#resultsnumplayers").val(),d;try{d=$("#FixturesLeaguePrizes").val().toString()}catch(g){d=""}var k=0;$("#awardoverallcredits").is(":checked")&&(k=1);var m=JSON.parse(window.sessionStorage.getItem("facebookuser"));a&&c&&(d||k==1)&&!isNaN(a)&&!isNaN(c)?$.ajax({url:WS_URL_ROOT+"/Game/AwardCredits",type:"POST",data:"c="+a+"&t="+c+"&o="+k+"&f="+encodeURIComponent(GetCurrentfixtureID())+"&l="+encodeURIComponent(d)+"&u="+encodeURIComponent(m.id),error:function(a,b,c){AjaxFail("AwardCredits",
a,b,c)},success:function(a){parseInt(a)>0?d&&k==1?$("#awardcreditsresult").html("Leagues AND Overall Credits Updated!"):d?$("#awardcreditsresult").html("Leagues Credits updated but Overall Credits NOT Updated (as overall credits was NOT selected)"):k==1&&$("#awardcreditsresult").html("Overall Credits Updated but Leagues Credits NOT updated  (as Leagues Credits was NOT selected)"):$("#awardcreditsresult").html("Credits NOT Updated!!!")}}):$("#awardcreditsresult").html("You must enter the correct details!!!!")}catch(q){alert(q)}},
AwardBonus:function(){try{var a=$("#resultsbonus").val(),c=$("#resultsnumplayersbonus").val(),d=$("#BonusPrize").val(),g=JSON.parse(window.sessionStorage.getItem("facebookuser"));a&&c&&d&&!isNaN(c)&&!isNaN(a)?$.ajax({url:WS_URL_ROOT+"/Game/AwardBonus",type:"POST",data:"a="+a+"&t="+c+"&b="+d+"&f="+encodeURIComponent(GetCurrentfixtureID())+"&u="+encodeURIComponent(g.id),error:function(a,b,c){AjaxFail("AwardBonus",a,b,c)},success:function(g){parseInt(g)>0?$("#awardbonusresult").html("<br />The top "+
c+" players have been awarded "+a+" "+d+"(s)"):$("#awardbonusresult").html("<br />Bonuses have NOT been awarded")}}):$("#awardcreditsresult").html("<br />You must enter all details!!")}catch(k){alert(k)}},DisplayEditTickerText:function(){$.ajax({url:WS_URL_ROOT+"/Game/GetTickerText",type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+a.id+"&fu="+a.fbuserid,dataType:"html",error:function(a,c,d){AjaxFail("UpdateMiscellaneousTickerText",a,c,d)},success:function(a){var a=a.split("^"),c="";if(a.length>0){for(var d=
0;d<a.length;d++)a[d].length>0&&(c=c+a[d]+"\n");$("#pregametickertext").val(c)}$("#edittickertext").show()}})},EditTickerText:function(){for(var a=JSON.parse(window.sessionStorage.getItem("facebookuser")),c=$("#pregametickertext").val().split("\n"),d="",g=0;g<c.length;g++)g>0&&(d+="^"),d+=c[g];$.ajax({url:WS_URL_ROOT+"/Game/UpdateTickerText",type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+a.id+"&fu="+a.fbuserid+"&tt="+encodeURIComponent(d)+"&mp=-101",error:function(a,b,c){AjaxFail("UpdateTickerText",
a,b,c)},success:function(a){parseInt(a)>0?$("#pregametickereditstatus").html("Details Updated!!"):$("#pregametickereditstatus").html("Error updating ticker details!!")}})},ShowAddGoalScorerPanel:function(){try{admin.populateListOfGoalScorers(),admin.populateListOfPlayers(),$("#addgoalscorer").show(),$("#AddGoalScorerDetails").html("")}catch(a){alert(a)}},addGoalScorer:function(){try{var a=document.getElementById("NewGoalScorerOdds").value,c=document.getElementById("NewGoalScorerName").value,d=document.getElementById("playerList").value;
d&&d>0&&c?$("#AddGoalScorerDetails").html("<br /><b>Unable to add goalscorer. <br />You can't add a player AND enter a goalscorer at the same time!!</b>"):!isNaN(a)&&a&&(d&&d>0||c)?($("#AddGoalScorerDetails").html("<br /><b>Adding goalscorer.....</b>"),$.ajax({url:WS_URL_ROOT+"/Game/AddNewGoalScorer",type:"POST",data:"fixtureid="+GetCurrentfixtureID()+"&potentialwinnings="+a+"&goalscorer="+c+"&p="+d,error:function(a,b,c){AjaxFail("addGoalScorer",a,b,c)},success:function(a){parseInt(a)>0?($("#AddGoalScorerDetails").html("<br /><b>Goalscorer added.</b>"),
document.getElementById("NewGoalScorerOdds").value="",document.getElementById("NewGoalScorerName").value="",admin.populateListOfGoalScorers()):$("#AddGoalScorerDetails").html("<br /><b>Goalscorer not added.</b>")}})):$("#AddGoalScorerDetails").html("<br /><b>Unable to add goalscorer. <br /> You must enter a goalscorer or player AND you must enter valid winnings!!</b>")}catch(g){alert(g)}},removeGoalScorer:function(){var a=parseInt($("#betoptionselect_remove9").val());a>0?($("#AddGoalScorerDetails").html("<br /><b>Removing goalscorer.....</b>"),
$.ajax({url:WS_URL_ROOT+"/Game/RemoveGoalScorer",type:"POST",data:"fixtureid="+GetCurrentfixtureID()+"&fboid="+a,error:function(a,b,c){AjaxFail("removeGoalScorer",a,b,c)},success:function(a){parseInt(a)>0?($("#AddGoalScorerDetails").html("<br /><b>Goalscorer removed.</b>"),admin.populateListOfGoalScorers()):$("#AddGoalScorerDetails").html("<br /><b>Goalscorer not removed</b>")}})):$("#AddGoalScorerDetails").html("<br /><b>YOU MUST SELECT a goalscorer to remove!!!!!!!!</b>")},populateGoalScorers_HTML:function(a){try{var c=
typeof a!="object"?JSON.parse(a):a,a="<select id='betoptionselect9' name='betoptionselect9'><option value='-1'></option>";if(c&&c.length>0)for(var d=0;d<c.length;d++)a=a+"<option value='"+c[d].oid+"'>"+c[d].d+" ("+c[d].w+")</option>";a+="<option value='0'>None Of The Above</option>";a+="</select>";var g=a.replace("betoptionselect9","betoptionselect_remove9"),g=g.replace("betoptionselect9","betoptionselect_remove9");$("#goalscorersListhtml").html(g);$("#goalscorershtml").html(a)}catch(k){alert(k)}},
populateListOfGoalScorers:function(){var a;try{a=JSON.parse(window.sessionStorage.getItem("listofscorers"))}catch(c){}a&&admin.populateGoalScorers_HTML(a);a=JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/Game/GetListOfGoalScorers",type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+a.id,error:function(a,b,c){AjaxFail("populateListOfGoalScorers",a,b,c)},success:function(a){window.sessionStorage.setItem("listofscorers",$.toJSON(a));admin.populateGoalScorers_HTML(a)}})},
populateListOfPlayers:function(){var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/Game/GetListOfPlayers",type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+a.id,success:function(a){admin.populatePlayers_HTML(a)}})},populatePlayers_HTML:function(a){try{var c=typeof a!="object"?JSON.parse(a):a;if(c&&c.length>0){for(var a="<select id='playerList' name='playerList'><option value='-1'></option>",d=0;d<c.length;d++)a=a+"<option value='"+c[d].id+"'>"+c[d].name+" ("+
c[d].team+")</option>";a+="</select>";$("#playerListhtml").html(a)}}catch(g){alert(g)}},CreateNewFixture:function(){$("#creatematchdetails").show();var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));teamcolours?admin.PopulateCreateFixtureColourDropDowns_DisplayHTML(teamcolours):$.ajax({url:WS_URL_ROOT+"/Game/GetTeamColours",type:"POST",data:"f=-1&u="+a.id,error:function(a,b,c){AjaxFail("GetTeamColours",a,b,c)},success:function(a){teamcolours=typeof a!="object"?JSON.parse(a):a;window.sessionStorage.setItem("teamcolours",
teamcolours);admin.PopulateCreateFixtureColourDropDowns_DisplayHTML(teamcolours)}})},CreateNewMatch:function(){try{var a=$("#hometeamname").val(),c=$("#awayteamname").val(),d=$("#createhometeamcolour").val(),g=$("#createawayteamcolour").val(),k=$("#createteamdirection").val(),k=k==1?a:c,m="0",q=$("input[type='radio'][name='LiveFixture']:checked");q.length>0&&(m=q.val());var n=JSON.parse(window.sessionStorage.getItem("facebookuser"));a&&c&&a!=c?(q=1,m==1&&(q=0,confirm("You have selected to clear the DB before creating this game - this may take a minute or two - be patient!!!!!")&&
(q=1)),q==1&&$.ajax({url:WS_URL_ROOT+"/Game/CreateMatch",type:"POST",data:"u="+n.id+"&htn="+encodeURIComponent(a)+"&atn="+encodeURIComponent(c)+"&atc="+encodeURIComponent(g)+"&htc="+encodeURIComponent(d)+"&fhlt="+encodeURIComponent(k)+"&l="+encodeURIComponent(m),error:function(a,b,c){AjaxFail("CreateNewMatch",a,b,c)},success:function(a){a=parseInt(a);a>0?($("#creatematchdetails").hide(),confirm("MatchCreated! FixtureID is "+a),GetFixtures()):a==-2?$("#createstatus").html("Match not created - You can only have one live match in system at any time - Please wait until the current live game is finished before creating another live game!!!!!"):
a==-3?$("#createstatus").html("Match not created - Can't create live fixture while Disk Backup is currently running - try again in a minute and if problem persists then contact administrator!!"):a==-4?$("#createstatus").html("Match not created - Can't create live fixture while Memory Tables Backup is currently running - try again in a minute and if problem persists then contact administrator!!"):a==-5?$("#createstatus").html("Match not created - Can't create live fixture while League Memory Tables Backup is currently running - try again in a minute and if problem persists then contact administrator!!"):
$("#createstatus").html("Error creating match!!")}})):$("#createstatus").html("You must enter a valid names for the teams!!")}catch(s){alert(s)}},PopulateCreateFixtureColourDropDowns_DisplayHTML:function(a){for(var c="<select id='createhometeamcolour' name='createhometeamcolour' style='padding:0.5em;'>",d="<select id='createawayteamcolour' name='createawayteamcolour' style='padding:0.5em;'>",g=0;g<a.length;g++)c=c+"<option value='"+a[g]+"'>"+a[g]+"</option>",d=d+"<option value='"+a[g]+"'>"+a[g]+"</option>";
c+="</select>";d+="</select>";$("#hometeamcolourdiv").html(c);$("#awayteamcolourdiv").html(d)}}};window.Modernizr=function(a,c,g){function d(a,b){for(var c in a)if(k[a[c]]!==g)return b=="pfx"?a[c]:!0;return!1}function b(a,b,c){var f=a.charAt(0).toUpperCase()+a.substr(1),h=(a+" "+q.join(f+" ")+f).split(" ");if(typeof b==="string"||typeof b==="undefined")b=d(h,b);else{h=(a+" "+n.join(f+" ")+f).split(" ");a:{var a=h,j;for(j in a)if(f=b[a[j]],f!==g){b=c===!1?a[j]:typeof f==="function"?f.bind(c||b):f;break a}b=!1}}return b}var f={},h=c.documentElement,j=c.createElement("modernizr"),k=j.style,m=" -webkit- -moz- -o- -ms- ".split(" "),
q="Webkit Moz O ms".split(" "),n="webkit moz o ms".split(" "),j={},s=[],p=s.slice,l,z=function(a,b,f,d){var g,j,k,l=c.createElement("div"),m=c.body,n=m?m:c.createElement("body");if(parseInt(f,10))for(;f--;)k=c.createElement("div"),k.id=d?d[f]:"modernizr"+(f+1),l.appendChild(k);return g=["&#173;<style>",a,"</style>"].join(""),l.id="modernizr",n.innerHTML+=g,n.appendChild(l),m||h.appendChild(n),j=b(l,a),m?l.parentNode.removeChild(l):n.parentNode.removeChild(n),!!j},C={}.hasOwnProperty,x;typeof C!==
"undefined"&&typeof C.call!=="undefined"?x=function(a,b){return C.call(a,b)}:x=function(a,b){return b in a&&typeof a.constructor.prototype[b]==="undefined"};Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if(typeof b!="function")throw new TypeError;var c=p.call(arguments,1),f=function(){if(this instanceof f){var d=function(){};d.prototype=b.prototype;var d=new d,g=b.apply(d,c.concat(p.call(arguments)));return Object(g)===g?g:d}return b.apply(a,c.concat(p.call(arguments)))};
return f});j.canvas=function(){var a=c.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")};j.backgroundsize=function(){return b("backgroundSize")};j.cssgradients=function(){var a=("background-image:"+"-webkit- ".split(" ").join("gradient(linear,left top,right bottom,from(#9f9),to(white));background-image:")+m.join("linear-gradient(left top,#9f9, white);background-image:")).slice(0,-17);k.cssText=a;return!!~(""+k.backgroundImage).indexOf("gradient")};j.localstorage=function(){try{return localStorage.setItem("modernizr",
"modernizr"),localStorage.removeItem("modernizr"),!0}catch(a){return!1}};for(var T in j)x(j,T)&&(l=T.toLowerCase(),f[l]=j[T](),s.push((f[l]?"":"no-")+l));k.cssText="";return j=null,function(a,b){function c(){var a=l.elements;return typeof a=="string"?a.split(" "):a}function f(a){var b,d={},g=a.createElement;b=a.createDocumentFragment;for(var j=c(),k=b(),m=j.length;m--;)b=j[m],d[b]=g(b),k.createElement(b);a.createElement=function(a){var b=(d[a]||(d[a]=g(a))).cloneNode(!1);return l.shivMethods&&!h.test(a)?
k.appendChild(b):b};a.createDocumentFragment=function(){var a=k.cloneNode(!1);return l.shivMethods?(f(a),a):a}}function d(a){var b;if(!a.documentShived){if(l.shivCSS&&!j){b=a.createElement("p");var c=a.getElementsByTagName("head")[0]||a.documentElement;b=!!(b.innerHTML="x<style>article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio{display:none}canvas,video{display:inline-block;*display:inline;*zoom:1}[hidden]{display:none}audio[controls]{display:inline-block;*display:inline;*zoom:1}mark{background:#FF0;color:#000}</style>",
c.insertBefore(b.lastChild,c.firstChild))}a=(l.shivMethods&&!k&&(b=!f(a)),b&&(a.documentShived=b),a)}return a}var g=a.html5||{},h=/^<|^(?:button|iframe|input|script|textarea)$/i,j,k;(function(){var c,f=b.createElement("a"),d=a.getComputedStyle,g=b.documentElement,h=b.body||(c=g.insertBefore(b.createElement("body"),g.firstChild));h.insertBefore(f,h.firstChild);f.hidden=!0;f.innerHTML="<xyz></xyz>";j=(f.currentStyle||d(f,null)).display=="none";k=f.childNodes.length==1||function(){try{b.createElement("a")}catch(a){return!0}var c=
b.createDocumentFragment();return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"}();h.removeChild(f);c&&g.removeChild(c)})();var l={elements:g.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" "),shivCSS:g.shivCSS!==!1,shivMethods:g.shivMethods!==!1,type:"default",shivDocument:d};a.html5=l;d(b)}(this,c),f._version=
"2.5.2",f._prefixes=m,f._domPrefixes=n,f._cssomPrefixes=q,f.mq=function(b){var c=a.matchMedia||a.msMatchMedia;if(c)return c(b).matches;var f;return z("@media "+b+" { #modernizr { position: absolute; } }",function(b){f=(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle).position=="absolute"}),f},f.testProp=function(a){return d([a])},f.testAllProps=b,f.testStyles=z,h.className=h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(" js "+s.join(" ")),f}(this,this.document);
(function(a,c,g){function d(a){return l.call(a)=="[object Function]"}function b(a){return typeof a=="string"}function f(){}function h(a){return!a||a=="loaded"||a=="complete"||a=="uninitialized"}function j(){var a=z.shift();C=1;a?a.t?s(function(){(a.t=="c"?H.injectCss:H.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),j()):C=0}function k(a,b,f,d,g,k,l){function m(c){if(!q&&h(n.readyState)&&(O.r=q=1,!C&&j(),n.onload=n.onreadystatechange=null,c)){a!="img"&&s(function(){u.removeChild(n)},50);for(var f in U[b])U[b].hasOwnProperty(f)&&
U[b][f].onload()}}var l=l||H.errorTimeout,n={},q=0,x=0,O={t:f,s:b,e:g,a:k,x:l};U[b]===1&&(x=1,U[b]=[],n=c.createElement(a));a=="object"?n.data=b:(n.src=b,n.type=a);n.width=n.height="0";n.onerror=n.onload=n.onreadystatechange=function(){m.call(this,x)};z.splice(d,0,O);a!="img"&&(x||U[b]===2?(u.insertBefore(n,T?null:p),s(m,l)):U[b].push(n))}function m(a,c,f,d,g){return C=0,c=c||"j",b(a)?k(c=="c"?ba:O,a,c,this.i++,f,d,g):(z.splice(this.i++,0,a),z.length==1&&j()),this}function q(){var a=H;return a.loader=
{load:m,i:0},a}var n=c.documentElement,s=a.setTimeout,p=c.getElementsByTagName("script")[0],l={}.toString,z=[],C=0,x="MozAppearance"in n.style,T=x&&!!c.createRange().compareNode,u=T?n:p.parentNode,n=!!c.attachEvent,O=x?"object":n?"script":"img",ba=n?"script":O,M=Array.isArray||function(a){return l.call(a)=="[object Array]"},ha=[],U={},V={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},fa,H;H=function(a){function c(a){var a=a.split("!"),b=ha.length,f=a.pop(),d=a.length,f={url:f,origUrl:f,
prefixes:a},g,h,j;for(h=0;h<d;h++)j=a[h].split("="),(g=V[j.shift()])&&(f=g(f,j));for(h=0;h<b;h++)f=ha[h](f);return f}function h(a,b,f,k,l){var o=c(a),t=o.autoCallback;o.url.split(".").pop().split("?").shift();o.bypass||(b&&(b=d(b)?b:b[a]||b[k]||b[a.split("/").pop().split("?")[0]]||j),o.instead?o.instead(a,b,f,k,l):(U[o.url]?o.noexec=!0:U[o.url]=1,f.load(o.url,o.forceCSS||!o.forceJS&&"css"==o.url.split(".").pop().split("?").shift()?"c":g,o.noexec,o.attrs,o.timeout),(d(b)||d(t))&&f.load(function(){q();
b&&b(o.origUrl,l,k);t&&t(o.origUrl,l,k);U[o.url]=2})))}function k(a,c){function g(a,f){if(a)if(b(a))f||(o=function(){var a=[].slice.call(arguments);t.apply(this,a);m()}),h(a,o,c,0,j);else{if(Object(a)===a)for(n in r=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!f&&!--r&&(d(o)?o=function(){var a=[].slice.call(arguments);t.apply(this,a);m()}:o[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b);m()}}(t[n])),h(a[n],o,c,n,
j))}else!f&&m()}var j=!!a.test,l=a.load||a.both,o=a.callback||f,t=o,m=a.complete||f,r,n;g(j?a.yep:a.nope,!!l);l&&g(l)}var l,m,n=this.yepnope.loader;if(b(a))h(a,0,n,0);else if(M(a))for(l=0;l<a.length;l++)m=a[l],b(m)?h(m,0,n,0):M(m)?H(m):Object(m)===m&&k(m,n);else Object(a)===a&&k(a,n)};H.addPrefix=function(a,b){V[a]=b};H.addFilter=function(a){ha.push(a)};H.errorTimeout=1E4;c.readyState==null&&c.addEventListener&&(c.readyState="loading",c.addEventListener("DOMContentLoaded",fa=function(){c.removeEventListener("DOMContentLoaded",
fa,0);c.readyState="complete"},0));a.yepnope=q();a.yepnope.executeStack=j;a.yepnope.injectJs=function(a,b,d,g,k,l){var m=c.createElement("script"),n,q,g=g||H.errorTimeout;m.src=a;for(q in d)m.setAttribute(q,d[q]);b=l?j:b||f;m.onreadystatechange=m.onload=function(){!n&&h(m.readyState)&&(n=1,b(),m.onload=m.onreadystatechange=null)};s(function(){n||(n=1,b(1))},g);k?m.onload():p.parentNode.insertBefore(m,p)};a.yepnope.injectCss=function(a,b,d,g,h,k){var g=c.createElement("link"),l,b=k?j:b||f;g.href=a;
g.rel="stylesheet";g.type="text/css";for(l in d)g.setAttribute(l,d[l]);h||(p.parentNode.insertBefore(g,p),s(b,0))}})(this,document);Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};var fbid="276786905679012",timeBetweenLightstreamConnections=12,srstarted=0,thisFixture=null,LSBound=0,ReTryBetAttempts=0,FriendScoresUpdating=0,LoginClick=0,loginFixtureID=0,listOfPreGameBetScrollers=[],listOfPreGameBetScrollerNames=[],pregamescroller=null,numPreGameplaced=0,lastInteractionTime=null,DateHelper=new Date,lastEventReceivedTime=null,CreditsWon=0,KeepAliveCount=0,displayFriendsDetals=0,WS_URL_ROOT="",gameOver=0,remainingforfeits=0,LastGoalScorer="",teamcolours,alreadycalledGameDetails=
0,connection,liveGamesSignalRProxy,liveGamesSignalRConnection,admin,keepAliveStarted=0,LastEventReceived=0,DisplayedFreezeAndThawEventIDs=[],DisplayedLeagueEventIDs=[],BetNumberJustDisplayed=0,correctedBetsNeeded=0,displaymode="w",screenwidth=-1,screenheight=-1,isFaceBookSession;
$(document).ready(function(){(isFaceBookSession=parent!==window)&&$("#"+displaymode+"_changepass").hide();screenwidth=$(window).width();screenheight=$(window).height();screenwidth<=799?(displaymode="m",_gaq.push(["_trackEvent","DeviceView","Mobile"])):(displaymode="w",_gaq.push(["_trackEvent","DeviceView","Web"]));Login.FaceBookElementsLoaded();(function(){var a=document.createElement("script");a.async=!0;a.src=document.location.protocol+"//connect.facebook.net/en_US/all.js";document.getElementById("fb-root").appendChild(a)})();
window.fbAsyncInit=function(){FB.init({appId:fbid,status:!0,cookie:!0,oauth:!0,xfbml:!0,channelUrl:"http://"+location.host+"/channel.html"});checkIfUserInPrivateBrowsing();FB.getLoginStatus(Login.DoLoginFlow);FB.Event.subscribe("auth.login",function(a){Login.DoLoginFlow(a)});FB.Event.subscribe("auth.logout",function(){Login.SetUpSiteForLoggedOutUser(0)})};setTimeout(function(){window.scrollTo(0,1)},100);Login.DoEmailLoginChecks();if(homepagefixtureid){var a=$(window).height();$("#mobileview .promo").height(a);
$(window).resize(function(){var a=$(window).height();$("#mobileview .promo").height(a)});new Date>startDate?($("#m_kickoffcountdown").hide(),$("#w_kickoffcountdown").hide()):($("#matchcountdown").countdown({until:startDate,format:"dHMS",layout:"<span>{dn} {dl}</span><span>{hn} {hl}</span><span>{mn} {ml}</span><span>{sn} {sl}</span>"}),$("#m_matchcountdown").countdown({until:startDate,format:"HMS",layout:"<span>{hn} {hl}</span><span>{mn} {ml}</span><span>{sn} {sl}</span>"}));$(".fcrest").show()}});
try{var canvasOK=Modernizr.canvas,backgroundsizeOK=Modernizr.backgroundsize,MediaQueriesOK=Modernizr.mq("only all and (min-width: 200px)"),localStorageOK=Modernizr.localstorage;if(!canvasOK||!backgroundsizeOK||!MediaQueriesOK)window.location=location.protocol+"//"+location.host+"/Support";else if(!localStorageOK){var privatebrowsingOn=0,testKey="qeTest",storage=window.sessionStorage;try{storage.setItem(testKey,"1"),storage.removeItem(testKey)}catch(error$$4){error$$4.code===DOMException.QUOTA_EXCEEDED_ERR&&
storage.length===0&&(privatebrowsingOn=1)}window.location=privatebrowsingOn==1?location.protocol+"//"+location.host+"/Support?ei=pb":location.protocol+"//"+location.host+"/Support"}}catch(error$$5){}
function postToFeed(){FB.ui({method:"feed",link:"http://play.t5livegames.com",picture:"http://content.t5livegames.com.s3.amazonaws.com/intro-crests.png",name:"T5Live Games",caption:"Predict What Happens Next!",description:"I'm Playing Germany V Greece at T5Live Games -  Join me!"},function(a){document.getElementById("msg").innerHTML="Post ID: "+a.post_id})}var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-28469603-2"]);_gaq.push(["_trackPageview"]);
function showslide(a){$(".howtoslide").hide();$("#"+displaymode+"_howtoslide"+a).fadeIn("slow");$("body").scrollTop(0)}function replaceAll(a,c,g){return g.replace(RegExp(a,"g"),c)}function WeAreCurrentlyShowingLeagueTable(){var a=!1;displaymode=="m"?$("#panel4").is(":visible")==!0&&$("#"+displaymode+"_leaguestandings_1").css("display")=="block"&&(a=!0):$("#"+displaymode+"_leaguestandings_1").css("display")=="block"&&(a=!0);return a}
function WeAreCurrentlyShowingFriendsLeagueTable(){var a=!1;displaymode=="m"?$("#panel3").is(":visible")==!0&&$(".FriendsLeaderboard").css("display")=="block"&&(a=!0):a=!0;return a}
var freezeInDB=0,lastEventSent=0,BetValidCount=0,gameisLive=1,userLeague=new League,Store=new Store,LiveEventMessaging,schema=["Ball","EventID","timestamp","Adapter","Admin","FixtureID","HomeScore","AwayScore","EventDescription","EventLogID","EventOdds","UBD","UserID","BD","EventTime","KeepAlive","EventEndTime","BM","PE"],LSEngine,page,group,pushTable,UsersLastCreatedLeague,thisEventId,thisFixtureId,thisDescription,thisHomeScore,thisAwayScore,thisEventLogID,userBetDetails,timestamp,friendUserID,newOdds,
eventTime,eventEndTime,PreviousEvents,LastPlayerDisplayed=1,LastTeamDisplayed=1,PreGamesBetsToPlace=0,numPreGamesBetsJustPlaced=0,tempArray=[];window.sessionStorage.setItem("listOfFriendsBets",tempArray);window.sessionStorage.setItem("listOfDisplayedEvents",tempArray);window.sessionStorage.setItem("leagueview",null);window.sessionStorage.setItem("listOfFriendsScores",tempArray);window.sessionStorage.setItem("pregamebets",tempArray);
window.sessionStorage.setItem("listOfAlreadyReceivedPreGameBetOptionDetails",tempArray);window.sessionStorage.setItem("leaderboard",tempArray);window.sessionStorage.setItem("Currentbet",null);window.sessionStorage.setItem("tempBet",null);window.sessionStorage.setItem("timeOutBet",null);window.sessionStorage.setItem("fbs",0);window.sessionStorage.setItem("LeaderboardLog",null);window.sessionStorage.setItem("usersOneClickCreditValue",0);var inPowerPlay=0,betJustComplete=0,FriendsAddedToLSSchema=0;
window.sessionStorage.setItem("tempBet",null);function GetRequestParam(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(window.location.href);return a==null?"":a[1]}function getRandomNumber(a,c){!c&&!a&&(c=1E3,a=0);return Math.floor(Math.random()*(c-a+1))+a}function iOSAppTrue(){iosApp=!0}function getPlatform(){return iosApp?2:isFaceBookSession&&(isFaceBookSession==!0||isFaceBookSession=="true"||isFaceBookSession=="True")?4:1};var isSafari=0,isChrome=0,IOSversion=-1;function LogThisInteractionTime(){numReconnectsSinceWeLastReceivedASignalRMessage=0;lastInteractionTime=(new Date).getTime()}function ReloadPage(){window.location.reload(!1)}function GetCurrentTimeStamp(){return(new Date).getTime()}function DetermineClientDetails(){DetermineIfSafari();DetermineIOSVersion()}
function DetermineIfSafari(){try{var a=navigator.userAgent.toLowerCase();a.indexOf("safari")!=-1&&(a.indexOf("chrome")>-1||a.indexOf("crios")>-1?(isSafari=0,isChrome=1):(isSafari=1,isChrome=0))}catch(c){logError("DetermineIfSafari",ex)}}
function DetermineIOSVersion(){try{IOSversion=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1}catch(a){logError("DetermineIOSVersion",a)}}function HaveWeReceviedThisFreezeOrThawEventBefore(a){return DisplayedFreezeAndThawEventIDs.indexOf(a)>-1?!0:(DisplayedFreezeAndThawEventIDs.push(a),!1)}
function HaveWeReceviedThisLeagueTableBefore(a){return DisplayedLeagueEventIDs.indexOf(a)>-1?!0:(DisplayedLeagueEventIDs.push(a),!1)}DetermineClientDetails();function DoHomePageLoadLogic(){try{var a,c=-1;try{a=JSON.parse(window.sessionStorage.getItem("facebookuser")),c=a.id}catch(g){}$.ajax({url:WS_URL_ROOT+"/Home/GetGameTrackerDetailsForHomePage",type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+c,error:function(a,c,d){AjaxFail("GetGameTrackerDetails",a,c,d)},success:function(a){DisplayGameTracker(a)}})}catch(d){logError("GetGameTrackerDetails",d)}IOSWebViewWarning()}
function DoGamePageLoadLogic(){GetGameDetails(GetCurrentfixtureID(),GameDetailsComplete);alreadycalledGameDetails==1&&($(".pregameclick").show(),$("#BeforeMatchPreGame").show(),userLeague.GetLeagueInvites())}
function GetGameDetails(a,c){try{var g=-1;if((uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser")))&&uiUser.id>0){g=uiUser.id;$.ajax({url:WS_URL_ROOT+"/Game/GetGameDetails",type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+g+"&fu="+uiUser.fbuserid,error:function(a,b,c){AjaxFail("GetGameDetails",a,b,c)},success:function(a){c instanceof Function&&c(a)}});alreadycalledGameDetails=1;var d;try{d=window.sessionStorage.getItem("lim"),d==2?($("#menubtn2").hide(),$(".FriendFeedInfo").html("<p>You have no Friends playing.</p><p style='background:#3b5998;color:#fff;border-radius:10px;-webkit-border-radius:10px;-moz-border-radius:10px;'><strong>Login using Facebook</strong> to compete against your Facebook friends that are playing.</p>"),
$("#InviteClick").hide()):$("#InviteClick").show()}catch(b){}}else logError("GetGameDetails","calling getgame details - no user!!");IOSWebViewWarning()}catch(f){logError("GetGameDetails",f)}}
function GameDetailsComplete(a){try{if(thisFixture=a,thisFixture.v==-999)Login.ClearSessionDetails(),logError("GetGameDetailsError","-999");else if(thisFixture.a==1)$("#"+displaymode+"_leavepagemessage").html("Game has been archived! Returning to home page!!"),$("#"+displaymode+"_leavepagestatus").fadeIn(50).delay(500).fadeOut(50),setTimeout("Login.goHome();",500),logError("GetGameDetailsError","Archive");else if(thisFixture.tmp>0)window.location.href="http://liveplayfootballterms.s3-website-eu-west-1.amazonaws.com/full.html",
logError("GetGameDetailsError","PlayerLimit");else{if(PushConnectionStarted==0&&thisFixture.fixtureid>0)sp=thisFixture.sp,ap=thisFixture.ap,fp=thisFixture.fp,EstablishPushConnection();else if(PushConnectionStarted==0){window.location.href=location.protocol+"//"+location.host+"/";logError("GetGameDetailsError","DontHaveAllDetails");return}gameisLive=thisFixture.live;UpdatePreGameTickerTickerText();thisFixture.sound==1?displaymode=="m"?($("#soundbadge-off").show(),$("#soundbadge-on").hide()):$("#soundlink").html("&#10006; Turn Off Sound"):
displaymode=="m"?($("#soundbadge-off").hide(),$("#soundbadge-on").show()):$("#soundlink").html("&#10004; Turn On Sound");$(".credits").html(a.credits);$(".credits").show();if(a.currenthalf==-101){HideNonPitchDisplays();populatePitch(a);if(!admin||!admin.isAdmin())$(".match-notstarted").show(),$(".match_desc").html("<span class='home_team_desc'>"+a.hometeam+"</span><span class='seperator'>V</span><span class='away_team_desc'>"+a.awayteam+"</span>"),$(".game-desc-image").attr({src:"https://d2q72sm6lqeuqa.cloudfront.net/images/game-intro.png",
alt:a.hometeam+" V "+a.awayteam});HidePitch()}else a.currenthalf==-102?DisplayHalfTime(a.hometeam,a.awayteam,a.homescore,a.awayscore,a.fixtureid):a.currenthalf==-103?(DisplayFullTime(a.hometeam,a.awayteam,a.homescore,a.awayscore,a.fixtureid),admin&&admin.isAdmin()):populatePitch(a);remainingforfeits=a.remainingforfeits;DisplayHigherCreditsAvailabilityToUserV2(a.unlockcredits,a.numbetsplaced,a.numbetstounlockhigherlevel);LiveHelper.SavePowerPlayTimeRemaining(a.remainingPowerPlaySecs);if(LiveHelper.GetPowerPlayTimeRemaining()>
0)showPowerPlayTimer(),inPowerPlay=1;else if(a.remainingpowerplays==0)RemovePowerPlayTimer(-1);else{var c="<span>"+a.remainingpowerplays+"</span>Power Play";a.remainingpowerplays>1&&(c+="s");$("#"+displaymode+"_powerplayclickbtn").html(c)}oneClickBetValue=a.oneClickBetValue;oneClickBetValue>0&&(localStorage.getItem("usersOneClickCreditValue")!=null&&localStorage.removeItem("usersOneClickCreditValue"),localStorage.setItem("usersOneClickCreditValue",GetCurrentfixtureID()+"-"+oneClickBetValue));voidOffset=
a.voidOffset;if(a.activebet){Currentbet=a.activebet;try{Currentbet.odds=Currentbet.odds.toFixed(2)}catch(g){}window.sessionStorage.setItem("Currentbet",$.toJSON(Currentbet));remainingforfeits>0&&($(".forfeitclick").show(),$("#"+displaymode+"_forfeitnum").html(remainingforfeits))}else Currentbet=null,window.sessionStorage.setItem("Currentbet",Currentbet);populatePitchOdds(a);Currentbet!=null&&Currentbet.status==0&&($("#"+displaymode+"_bubble"+Currentbet.eventid).removeClass("bubble"),$("#"+displaymode+
"_bubble"+Currentbet.eventid).addClass("bubble_active"),$("#"+displaymode+"_bubble"+Currentbet.eventid).html(""+Currentbet.amount+""));a.events&&DisplayGameTracker(a.events);a.justjoinedgame>0?NotifyFriendsThatUserHasJoinedGame(friendsNotified)<0&&setTimeout("NotifyFriendsThatUserHasJoinedGame(friendsNotified,1);",5E3):GetPreGameBetDetails(!0,1);userLeague.GetDefaultLeague();admin&&admin.isAdmin()&&admin.configureStartButtons()}}catch(d){logError("GameDetailsComplete",d)}}
function CheckGameLimits(){try{var a,c=-1,g="";try{a=JSON.parse(window.sessionStorage.getItem("facebookuser")),c=a.id,g=a.fbuserid}catch(d){}$.ajax({url:WS_URL_ROOT+"/Game/CheckGameLimits",type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+c+"&fu="+g,error:function(a,b,c){EstablishPushConnection();AjaxFail("CheckGameLimits",a,b,c)},success:function(a){a>0||EstablishPushConnection()}})}catch(b){EstablishPushConnection(),logError("GetGameTrackerDetails",b)}}
var LiveHelper=function(){var a;return{SavePowerPlayTimeRemaining:function(c){a=c},GetPowerPlayTimeRemaining:function(){return a}}}(),uiUser,Currentbet,lastUpdateID,teamPlayingFromLeftToRight,teamPlayingFromRightToLeft,iosApp=!1;function GetCurrentfixtureID(){var a=GetRequestParam("f");!a&&homepagefixtureid&&(a=homepagefixtureid);return a}function CastToDecimal(a){try{return(""+a).indexOf(".")>0?a:a.toFixed(2)}catch(c){logError("CastToDecimal",c)}}
function IOSWebViewWarning(){if(IOSversion>0&&/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)){var a=0;try{localStorage.getItem("IOSWebViewWarning")!=null&&(a=1)}catch(c){}a==0&&window.setTimeout(function(){alert("For the best gaming experience open this page in Safari using the 'Open in Safari' link in the app menu");localStorage.setItem("IOSWebViewWarning",1)},100)}}
function HidePitch(){try{$(".headline").hide(),$(".pitch-container").hide(),$(".pitch-icons").hide(),$(".pitch").hide(),$(".headline").hide(),$(".helpclick").hide(),$(".forfeitclick").hide(),$(".powerplayclick").hide(),displaymode!="m"?($("#"+displaymode+"_phonepowerplay").hide(),$("#"+displaymode+"_powerplaytimertext").hide(),$("#"+displaymode+"_powerplaytimerlabel").hide()):$("#"+displaymode+"_powerplaytimertext").hide()}catch(a){logError("HidePitch",a)}}
function HideNonPitchDisplays(){try{$(".match-notstarted").hide(),$(".halftime").hide(),$(".fulltime").hide()}catch(a){logError("HideNonPitchDisplays",a)}}
function ShowPitch(){try{$(".headline").show(),$(".pitch-container").show(),$(".pitch-icons").show(),$(".pitch").show(),$(".headline").show(),$(".helpclick").show(),$(".powerplayclick").show(),$("#"+displaymode+"_phonepowerplay").show(),$("#"+displaymode+"_powerplaytimertext").show(),$("#"+displaymode+"_powerplaytimerlabel").show(),$("#powerplayclickbtn2 span").html(thisFixture.remainingpowerplays)}catch(a){logError("ShowPitch",a)}}
function GetLastEvent(a){try{$.ajax({url:WS_URL_ROOT+"/Game/GetLastEventFixture",type:"POST",data:"fixtureID="+GetCurrentfixtureID(),error:function(a,c,b){AjaxFail("GetLastEvent",a,c,b)},success:function(c){a instanceof Function&&a(c)}})}catch(c){logError("GetLastEvent",c)}}function DisplayLastEvent(a){try{a.eventid&&a.eventid>0&&UpdateGameEvent(a.f,a.e,a.u,a.h,a.a,a.d,new Date(a.et),new Date(a.eet))}catch(c){logError("DisplayLastEvent",c)}}
function powerplaypopup(){try{if(inPowerPlay!=1)if(thisFixture.remainingpowerplays<=0)$(".storepopup").fadeIn("fast"),Store.GetStoreItems("power");else{var a;try{a=JSON.parse(window.sessionStorage.getItem("dontShowPowerPlayPopup"))}catch(c){}var g=-1,d=-1;if(a){var b=a.split("-"),g=parseInt(b[0]);g==GetCurrentfixtureID()&&(d=parseInt(b[1]))}d!=1&&(a='<h4 class=\'PPStart\'>Start Power Play now?</h4><br clear="all"/><br clear="all"/>',a+='<h4>Your odds are going to double for the next 10 minutes! <br clear="all"/><br clear="all"/>',
thisFixture.remainingpowerplays==1?a+="You currently have only 1 power play - but remember you can buy more in the store at any time!!</h4>":thisFixture.remainingpowerplays>1&&(a+="You currently have "+thisFixture.remainingpowerplays+" power plays remaining!!</h4>"),$("#"+displaymode+"_powerplaypopup").animate({top:"5%"},300),$("#"+displaymode+"_powerplaypopup").attr("style","display:block;z-index:900;"),$("#"+displaymode+"_powerplaypopup .text").html(a),$("#"+displaymode+"_powerplayconfirmbutton").attr("onClick",
"startpowerplay()"))}}catch(f){logError("powerplaypopup",f)}}
function startpowerplay(){try{if(thisFixture.currenthalf<0)closepowerplaypopup(),displaymode=="w"?($("#"+displaymode+"_predictionpending").html("<strong>You can only start a power play when the game is on!!!</strong>!"),$("#"+displaymode+"_predictionpending").show(),$(".tooltip-shade").show(),$(".betcountdown").show(),$(".betcountdown").delay(2500).fadeOut("slow"),$(".tooltip-shade").delay(2500).fadeOut("slow")):displaymode=="m"&&($(".popup-notify > h1").text("You can only start a power play when the game is on!"),$(".popup-notify > span").text(""),
$(".popup-notify").fadeIn(200).delay(3E3).fadeOut(200));else{var a=-1;if(uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser")))a=uiUser.id,$.ajax({url:WS_URL_ROOT+"/Game/StartPowerPlay",type:"POST",data:"fixtureID="+GetCurrentfixtureID()+"&userid="+a+"&fu="+uiUser.fbuserid,error:function(a,c,b){AjaxFail("startpowerplay",a,c,b)},success:function(a){powerplayused=1;var c=a.inPowerPlay;if(c==0||c==1)inPowerPlay=1,GameDetailsComplete(a),_gaq.push(["_trackEvent","Clicks","PowerPlay"]),$(".popup-notify-powerplay > h1").text("Power Play Started!"),
$(".popup-notify-powerplay").fadeIn(200).delay(3E3).fadeOut(200)}});closepowerplaypopup();$("#powerplayclickbtn2 span").html(thisFixture.remainingpowerplays)}}catch(c){logError("startpowerplay",c)}}function powerplaypopupTest(){$("#m_powerplaytimertest").countdown({until:20,compact:!0,format:"MS"})}
function showPowerPlayTimer(){try{$("#"+displaymode+"_powerplaytimertext").is(":visible")==!0?logError("ppDebug","_powerplaytimertext IS visible - "+$("#"+displaymode+"_powerplaytimertext").is(":visible")):logError("ppDebug","_powerplaytimertext is NOT visible - "+$("#"+displaymode+"_powerplaytimertext").is(":visible"));logError("ppDebug","about to start pp!!!");logError("ppDebug","html is "+$("#"+displaymode+"_powerplaytimertext").html()+" remainingPowerPlaySecs is "+LiveHelper.GetPowerPlayTimeRemaining());
$("#"+displaymode+"_powerplaytimertext").countdown({until:LiveHelper.GetPowerPlayTimeRemaining(),compact:!0,onExpiry:RemovePowerPlayTimer,format:"MS"});logError("ppDebug","PP1!");try{slider(0)}catch(a){}logError("ppDebug","PP2!");var c="<span>"+thisFixture.remainingpowerplays+"</span>Activated!";$("#"+displaymode+"_powerplayclickbtn").html(c);$("#powerplayclickbtn2 span").html(thisFixture.remainingpowerplays);logError("ppDebug","PP3!")}catch(g){logError("ShowPowerPlayTimer",g)}}
function RemovePowerPlayTimer(a){try{if(inPowerPlay=0,$(".pitch").is(":visible")){var c;c="<span>"+thisFixture.remainingpowerplays+"</span>Power Play";thisFixture.remainingpowerplays!=1&&(c+="s");$("#"+displaymode+"_powerplayclickbtn").html(c);$("#powerplayclickbtn2 span").html(thisFixture.remainingpowerplays);$("#"+displaymode+"_powerplayclickbtn").html(c);$("#"+displaymode+"_powerplaytimertext").countdown("destroy");$("#"+displaymode+"_powerplaytimertext").html("10.00");c=-1;if(uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser")))if(c=
uiUser.id,a!=-1){try{slider(0)}catch(g){}$(".popup-notify-powerplay > h1").text("Power Play Ended!");$(".popup-notify-powerplay").fadeIn(200).delay(3E3).fadeOut(200);displaymode=="m"&&thisFixture.remainingpowerplays>0&&$("#phonepowerplaybadge").attr("style","opacity:1;");$.ajax({url:WS_URL_ROOT+"/Game/GetGameDetails",type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+c+"&fu="+uiUser.fbuserid,error:function(a,c,d){AjaxFail("GetGameDetails",a,c,d)},success:function(a){GameDetailsComplete(a)}})}}else $("#"+
displaymode+"_powerplaytimertext").countdown("destroy")}catch(d){logError("RemovePowerPlayTimer",d)}}
function DisplayGameTracker(a){var c=[],g="";window.sessionStorage.setItem("listOfDisplayedEvents",c);for(var d="",b=0;b<a.length;b++)try{try{a[b].d=a[b].d.replace("^","<span class='min'>"),a[b].d=a[b].d.replace("~","</span>")}catch(f){}if(a[b].d.toLowerCase().indexOf("ref says")>0)d=d+a[b].d+"<br />";else if(a[b].d.toLowerCase().indexOf("win")>0||a[b].d.toLowerCase().indexOf("won")>0)d=d+"<b class='wintext'>"+a[b].d+"</b><br />";else if(a[b].d.toLowerCase().indexOf("lose")>0||a[b].d.toLowerCase().indexOf("lost")>
0||a[b].d.toLowerCase().indexOf("too late")>0)d=d+"<b class='losetext'>"+a[b].d+"</b><br />";else if(a[b].d.toLowerCase().indexOf("made")>0)d=d+"<b class='bettext'>"+a[b].d+"</b><br />";else if(a[b].d.toLowerCase().indexOf("invite")>0)a[b].d.toLowerCase().indexOf("accept_0")>0&&(g+=a[b].d);else try{d=a[b].e==19||a[b].e==20?d+AddPredictionsToEvents(null,a[b].d,a[b].e,a[b].c)+"<br />":d+a[b].d+"<br />"}catch(h){d=d+a[b].d+"<br />"}c.push(a[b].u)}catch(j){}window.sessionStorage.setItem("listOfDisplayedEvents",
$.toJSON(c));$(".GameFeedInfo").html(d);refreshScroller(GameFeedScroller,"GameFeedInfo");GetRequestParam("f")&&($("#"+displaymode+"_MyleagueInvites").html(g),refreshScroller(leaderboardScroller,"MyleagueInvites"))}
function DisplayHigherCreditsAvailabilityToUserV2(a,c,g,d){try{a>100?($(".unlockcreditsDiv_locked").fadeOut("slow"),$(window).width()>=799?$(".unlockcreditsDiv").fadeIn("slow").animate({top:"150px"},1E3):($("#lockedcreditsbadge").fadeOut("slow"),$("#lockedcreditsbadge").fadeOut("slow",function(){$("#unlockedcreditsbadge").fadeIn("slow")})),displaymode=="w"&&$("#"+displaymode+"_unlockcreditsSpan").html("You unlocked the <strong>"+a+"</strong> Credit Limit!"),d&&SetTickerContent("creditLimit_ticker",
GetCreditLimitTickerText(0)),a==200&&($("#"+displaymode+"_BonusCredits200").show(),$("#"+displaymode+"_StoreBonusCredits200").show())):(c==0?$("#"+displaymode+"_UnlockNumBetsSpan").html("<strong>"+g+"</strong> predictions"):(a=g-c,a==1?$("#"+displaymode+"_UnlockNumBetsSpan").html("<strong>1</strong> more prediction!!"):$("#"+displaymode+"_UnlockNumBetsSpan").html("<strong>"+a+"</strong> more predictions"),betJustComplete==1&&(betJustComplete=0,$(".betnum").html(a),$(".betnum").show(),$(".betnum").animate({position:"absolute",
top:"100px",right:"40px",fontSize:"45px",opacity:"0.0"},2E3,function(){$(".betnum").hide();$(".betnum").css({top:"",fontSize:"",opacity:""})}),BetNumberJustDisplayed=a),d&&SetTickerContent("creditLimit_ticker",GetCreditLimitTickerText(a))),$(".unlockcreditsDiv_locked").show())}catch(b){logError("DisplayHigherCreditsAvailabilityToUserV2",b)}}
function DisplayHigherCreditsAvailabilityToUser(a){try{a>100&&($(".unlockcreditsDiv_locked").fadeOut("slow"),$(window).width()>=799?$(".unlockcreditsDiv").fadeIn("slow").animate({top:"150px"},1E3):($(".unlockcreditsDiv").fadeIn("slow").animate({top:"0px"},1E3),$("#lockedcreditsbadge").fadeOut("slow",function(){$("#unlockedcreditsbadge").fadeIn("slow")})),$("#"+displaymode+"_unlockcreditsSpan").html("You unlocked the <strong>"+a+"</strong> Credit Limit!"),a==200&&($("#"+displaymode+"_BonusCredits200").show(),
$("#"+displaymode+"_StoreBonusCredits200").show()))}catch(c){logError("DisplayHigherCreditsAvailabilityToUser",c)}}
function AddPredictionsToEvents(a,c,g,d){try{if(g==19)if(d==1){a&&(a.numfreesfirsthalf+=1);var b=localStorage.getItem("predictedFirstHalfFrees");if(b){var f=b.split("_"),h=f[0],j=GetRequestParam("f");j==h&&(c=c+" - You predicted between "+f[1].replace("-"," and "))}}else{a&&(a.numfreessecondhalf+=1);var k=localStorage.getItem("predicted2ndHalfFrees");k&&(f=k.split("_"),h=f[0],j=GetRequestParam("f"),j==h&&(c=c+" - You predicted between "+f[1].replace("-"," and ")))}else if(g==20)if(d==1){a&&(a.numthrowsfirsthalf+=
1);var m=localStorage.getItem("predictedFirstHalfThrows");m&&(f=m.split("_"),h=f[0],j=GetRequestParam("f"),j==h&&(c=c+" - You predicted between "+f[1].replace("-"," and ")))}else{a&&(a.numthrowssecondhalf+=1);var q=localStorage.getItem("predicted2ndHalfThrows");q&&(f=q.split("_"),h=f[0],j=GetRequestParam("f"),j==h&&(c=c+" - You predicted between "+f[1].replace("-"," and ")))}}catch(n){logError("AddPredictionsToEvents",ex)}return c}
function DisplayHalfTime(a,c,g,d){HideNonPitchDisplays();$(".halftime").show();$(".match_desc").html("<span class='home_team_desc'>"+a+"</span><span class='score_desc'>"+g+" - "+d+"</span><span class='away_team_desc'>"+c+"</span>");$(".game-desc-image").attr({src:"https://d2q72sm6lqeuqa.cloudfront.net/images/game-intro.png",alt:a+" V "+c});HidePitch();admin&&admin.isAdmin()&&admin.halfTimeSetup()}
function DisplayFullTime(a,c,g,d){gameOver=1;HideNonPitchDisplays();$(".fulltime").show();$(".match_desc").html("<span class='home_team_desc'>"+a+"</span><span class='score_desc'>"+g+" - "+d+"</span><span class='away_team_desc'>"+c+"</span>");$(".game-desc-image").attr({src:"https://d2q72sm6lqeuqa.cloudfront.net/images/game-intro.png",alt:a+" V "+c});HidePitch();admin&&admin.isAdmin()&&admin.fullTimeSetup()}
function populatePitchOdds(a){if(a.eventodds)for(var c=0;c<a.eventodds.length;c++)if($("#"+displaymode+"_bubble"+a.eventodds[c].e).html(a.eventodds[c].o+"/1"),Currentbet&&Currentbet.eventid==a.eventodds[c].e&&Currentbet.odds!=a.eventodds[c].o)Currentbet.newodds=a.eventodds[c].o,window.sessionStorage.setItem("Currentbet",$.toJSON(Currentbet))}
function populatePitch(a){try{var c="",g,d,b,f,h,j,k,m,q,n;a.currenthalf==1||a.currenthalf==-101?a.firsthalfleftteam==a.hometeam?(teamPlayingFromLeftToRight=a.hometeam,teamPlayingFromRightToLeft=a.awayteam,k=a.hometeamcolour,m=a.awayteamcolour):(teamPlayingFromLeftToRight=a.awayteam,teamPlayingFromRightToLeft=a.hometeam,m=a.hometeamcolour,k=a.awayteamcolour):a.firsthalfleftteam==a.hometeam?(teamPlayingFromLeftToRight=a.awayteam,teamPlayingFromRightToLeft=a.hometeam,m=a.hometeamcolour,k=a.awayteamcolour):
(teamPlayingFromLeftToRight=a.hometeam,teamPlayingFromRightToLeft=a.awayteam,k=a.hometeamcolour,m=a.awayteamcolour);$("#"+displaymode+"_home_team").html(a.hometeam);$("#"+displaymode+"_away_team").html(a.awayteam);teamPlayingFromLeftToRight==a.hometeam?(g=1,d=4,b=5,f=3,h=6,j=7,RightSaveEventID=17,LeftSaveEventID=18,q=15,n=16):(g=3,d=6,b=7,f=1,h=4,j=5,LeftSaveEventID=17,RightSaveEventID=18,n=15,q=16);$("#"+displaymode+"_home_score").html(a.homescore);$("#"+displaymode+"_away_score").html(a.awayscore);
c=c+'<div class="home-corner icon-corner-'+m+'" onClick="betpupup(\'CORNER FOR '+teamPlayingFromRightToLeft+"', "+g+');"></div><div id="'+displaymode+"_bubble"+g+'" class="bubble-home-corner bubble"></div>';c=c+'<div class="home-goal icon-goal-'+m+'" onClick="betpupup(\'GOAL FOR '+teamPlayingFromRightToLeft+"', "+d+');"></div><div id="'+displaymode+"_bubble"+d+'" class="bubble-home-goal bubble"></div>';c=c+'<div class="home-wide icon-wide-'+m+'"  onClick="betpupup(\'WIDE BY '+teamPlayingFromRightToLeft+
"', "+b+');"></div><div id="'+displaymode+"_bubble"+b+'" class="bubble-home-wide bubble"></div>';c=c+'<div class="away-save icon-save-'+k+'"  onClick="betpupup(\'SAVE BY '+teamPlayingFromLeftToRight+"', "+RightSaveEventID+');"></div><div id="'+displaymode+"_bubble"+RightSaveEventID+'" class="bubble-away-save bubble"></div>';admin&&admin.isAdmin()&&(c=c+'<div class="home-peno icon-goal-'+m+'"  onClick="betpupup(\'Peno For '+teamPlayingFromRightToLeft+"', "+n+');"></div><div id="'+displaymode+"_bubble"+
n+'" class="bubble-home-peno bubble"></div>');c=c+'<div class="gen-free icon-free-gen" onClick="betpupup(\'FREE-KICK\', 19);"></div><div id="'+displaymode+'_bubble19" class="bubble-free bubble"></div>';c=c+'<div class="gen-throw icon-throw-gen" onClick="betpupup(\'THROWIN\', 20);"></div><div id="'+displaymode+'_bubble20" class="bubble-throw bubble"></div>';admin&&admin.isAdmin()&&(c=c+'<div class="away-peno icon-goal-'+k+'"  onClick="betpupup(\'Peno For '+teamPlayingFromLeftToRight+"', "+q+');"></div><div id="'+
displaymode+"_bubble"+q+'" class="bubble-away-peno bubble"></div>');c=c+'<div class="home-save icon-save-'+m+'"  onClick="betpupup(\'SAVE BY '+teamPlayingFromRightToLeft+"', "+LeftSaveEventID+');"></div><div id="'+displaymode+"_bubble"+LeftSaveEventID+'" class="bubble-home-save bubble"></div>';c=c+'<div class="away-corner icon-corner-'+k+'" onClick="betpupup(\'CORNER FOR '+teamPlayingFromLeftToRight+"', "+f+');"></div><div id="'+displaymode+"_bubble"+f+'" class="bubble-away-corner bubble"></div>';
c=c+'<div class="away-goal icon-goal-'+k+'" onClick="betpupup(\'GOAL FOR '+teamPlayingFromLeftToRight+"', "+h+');"></div><div id="'+displaymode+"_bubble"+h+'" class="bubble-away-goal bubble"></div>';c=c+'<div class="away-wide icon-wide-'+k+'" onClick="betpupup(\'WIDE BY '+teamPlayingFromLeftToRight+"', "+j+');"></div><div id="'+displaymode+"_bubble"+j+'" class="bubble-away-wide bubble"></div>';HideNonPitchDisplays();$("."+displaymode+"_pitch-icons").html(c);ShowPitch();$(".gameinfo").show()}catch(s){logError("populatePitch",
s)}}
function updateFixtureDetails(a){a=a.split("^");thisFixture.hometeamcolour=a[0];thisFixture.awayteamcolour=a[1];thisFixture.firsthalfleftteam=a[2];thisFixture.voidOffset=parseInt(a[3]);voidOffset=thisFixture.voidOffset;populatePitch(thisFixture);populatePitchOdds(thisFixture);var c;try{c=JSON.parse(window.sessionStorage.getItem("Currentbet"))}catch(g){}c!=null&&c.status==0&&($("#"+displaymode+"_bubble"+c.eventid).removeClass("bubble"),$("#"+displaymode+"_bubble"+c.eventid).addClass("bubble_active"),$("#"+
displaymode+"_bubble"+c.eventid).html(""+c.amount+""))}
function MatchStartEvents(a,c,g,d,b){try{if(a==11){playsound("gamestart");$(".helpclick").show();admin&&admin.isAdmin()?(thisFixture.currenthalf=1,updateFixtureDetails(b),admin.firstHalfSetup()):(thisFixture.currenthalf=1,updateFixtureDetails(b),UpdatePreGameTickerTickerText());if(displaymode=="m"){var f=1;$(".panel").hide();$(".coda-nav a").removeAttr("class");$("#panel"+f).fadeIn("fast");$(".tab"+f+" a").attr("class","current")}return!1}else if(a==12){try{if($("#"+displaymode+"_powerplaytimertext").is(":visible")==
!0){var h=$("#"+displaymode+"_powerplaytimertext").countdown("getTimes"),j=h[5],k=h[6];if(j>0||k>0)LiveHelper.SavePowerPlayTimeRemaining(j*60+k),$("#"+displaymode+"_powerplaytimertext").countdown("destroy")}}catch(m){}thisFixture.currenthalf=-102;$(".GameFeedInfo").prepend("<b>Half Time</b> <br />");refreshScroller(GameFeedScroller,"GameFeedInfo");DisplayHalfTime(thisFixture.hometeam,thisFixture.awayteam,c,g,thisFixture.fixtureid);var q;try{q=JSON.parse(window.sessionStorage.getItem("Currentbet"))}catch(n){}if(q&&
q.status==0){$(".forfeitclick").hide();$(".GameFeedInfo").prepend("<span class='losetext'>BET VOID [Half-Time] - CREDITS RETURNED</span><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");var s=JSON.parse(window.sessionStorage.getItem("facebookuser"));s.credits+=q.amount;window.sessionStorage.setItem("facebookuser",$.toJSON(s));$(".credits").html(s.credits);q.status=-102;UpdateFriendScoresWithBetResult(q);ReOrderFriendsScoresBasedOnCurrentScore();window.sessionStorage.setItem("Currentbet",$.toJSON(q))}else playsound("halftime");
updateFriendsBetStatus(a,null);return!1}else if(a==13){playsound("secondhalf");try{LiveHelper.GetPowerPlayTimeRemaining()>0&&showPowerPlayTimer()}catch(p){}$(".GameFeedInfo").prepend("<b>And we're off again!!</b> <br />");refreshScroller(GameFeedScroller,"GameFeedInfo");admin&&admin.isAdmin()?GetGameDetails(GetCurrentfixtureID(),GameDetailsComplete):(thisFixture.currenthalf=2,populatePitch(thisFixture),populatePitchOdds(thisFixture));displaymode=="m"&&(f=1,$(".panel").hide(),$(".coda-nav a").removeAttr("class"),
$("#panel"+f).fadeIn("fast"),$(".tab"+f+" a").attr("class","current"));$(".helpclick").show();return!1}else return a==21?!1:a==24||a==26||a==15||a==16||a==27?(d!=null&&($(".GameFeedInfo").prepend(d+"<br />"),refreshScroller(GameFeedScroller,"GameFeedInfo")),!1):!0}catch(l){logError("MatchStartEvents",l)}}
function ChangeSound(){var a;thisFixture.sound==1?(a=0,displaymode=="m"?($("#soundbadge-off").hide(),$("#soundbadge-on").show()):$("#soundlink").html("&#10004; Turn On Sound")):(a=1,displaymode=="m"?($("#soundbadge-on").hide(),$("#soundbadge-off").show()):$("#soundlink").html("&#10006; Turn Off Sound"));thisFixture.sound=a;try{var c=JSON.parse(window.sessionStorage.getItem("facebookuser"));c&&$.ajax({url:WS_URL_ROOT+"/Game/SetSound",type:"POST",data:"fu="+c.fbuserid+"&u="+c.id+"&s="+a,error:function(a,
b,c){AjaxFail("SetSound",a,b,c)},success:function(){}})}catch(g){logError("SetSound",g)}}
function playsound(a){try{if(thisFixture.sound==1){var c;switch(a){case "gamestart":c="whistle.mp3";break;case "halftime":c="whistle.mp3";break;case "secondhalf":c="whistle.mp3";break;case "gameover":c="whistle.mp3";break;case "win":c="cheer_8k.mp3";break;case "lose":c="sadtrombone.mp3";break;case "void":c="pan.mp3"}var g;g=document.getElementById("audio");g.load();g.src="/Content/sounds/"+c;g.play()}}catch(d){logError("playsound",d)}}
function storeOneClickCreditValue(){try{var a=parseInt($("#"+displaymode+"_creditsmanager input:checked").val());a||(a=0);localStorage.getItem("usersOneClickCreditValue")!=null&&localStorage.removeItem("usersOneClickCreditValue");localStorage.setItem("usersOneClickCreditValue",GetCurrentfixtureID()+"-"+a);var c=-1;if(uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser")))c=uiUser.id,$.ajax({url:WS_URL_ROOT+"/Game/StoreOneClickCreditValue",type:"POST",data:"fixtureID="+GetCurrentfixtureID()+
"&userid="+c+"&oneClickVlaue="+a,error:function(a,b,c){AjaxFail("StoreOneClickCreditValue",a,b,c)},success:function(){}});_gaq.push(["_trackEvent","Clicks","SetOneClickBet","",parseInt(a)])}catch(g){logError("storeOneClickCreditValue",g)}ToggleCreditsmanager()}function getUsersOneClickCreditValue(){var a=0;try{var c=localStorage.getItem("usersOneClickCreditValue");if(c){var g=c.split("-"),d=g[0];GetRequestParam("f")==d&&(a=parseInt(g[1]))}}catch(b){}return a}
function MakeSurePitchIsDisplayed(a){if(a!=24&&a!=26&&a!=27&&displaymode=="w"&&$(".pitch").is(":visible")!=!0){var c=GetRequestParam("f");GetGameDetails(c,GameDetailsComplete);logError("MakeSurePitchIsDisplayed","MatchEventReceived while pitch not displayed!!!!!! eventid is  "+a,"","")}}function UpdateLatestEventReceived(a){lastEventReceivedTime?a>lastEventReceivedTime&&(lastEventReceivedTime=a):lastEventReceivedTime=a}
function FriendsBetIsUpToDate(a){return lastEventReceivedTime?new Date(a.eventtime)>lastEventReceivedTime?!0:!1:!0}
function CheckWeHaveReceivedAllRecentMessages(a){try{for(var c=!0,g=a.split(","),a=0;a<g.length;a++)if(!HaveWeDisplayedThisEventBefore(g[a])){c=!1;logError("CheckWeHaveReceivedAllRecentMessages","We missed at least one event. Reloading GameDetails!!!!!!!","","");GetGameDetails(GetCurrentfixtureID(),GameDetailsComplete);break}}catch(d){logError("CheckWeHaveReceivedAllRecentMessages",d)}return c}
function UpdateGameEvent(a,c,g,d,b,f,h,j,k,m){try{if(GetCurrentfixtureID()==a&&a>0){var q=HaveWeDisplayedThisEventBefore(g),n=CheckWeHaveReceivedAllRecentMessages(k);if(!q&&g>0&&n){UpdateLatestEventReceived(h);if(MatchStartEvents(c,d,b,f,m)){$("#"+displaymode+"_home_score").html(d);$("#"+displaymode+"_away_score").html(b);if(checkBetStatusNew(c,h,j)==-200)setTimeout("GetGameDetails("+a+", GameDetailsComplete);",500);else if(f!=null){if(c==19||c==20)f=AddPredictionsToEvents(thisFixture,f,c,thisFixture.currenthalf);
$(".GameFeedInfo").prepend(f+"<br />");refreshScroller(GameFeedScroller,"GameFeedInfo")}updateFriendsBetStatus(c,h,j);if(c==14)DisplayFullTime(thisFixture.hometeam,thisFixture.awayteam,d,b,thisFixture.fixtureid),thisFixture.currenthalf=-103;else if(c==4||c==6){var s=f.indexOf(" - ");LastGoalScorer=s>0?f.substring(s+3):""}c!=14&&MakeSurePitchIsDisplayed(c)}updatePreGamebets(c,d,b);userLeague.id==thisFixture.defaultleagueid&&AddMyScoreToOverAllLeaderBoard()}else{var p=JSON.parse(window.sessionStorage.getItem("facebookuser"));
logError("Event Debug",p.name+" is Not showing event.updateId is '"+g+"' ,WeDisplayedThisEventBefore '"+q+"' ,WeHaveReceivedAllRecentMessages is '"+n+"'")}}}catch(l){logError("UpdateGameEventFromLightStreamer",l)}}
function HaveWeDisplayedThisEventBefore(a){try{var c;try{c=window.sessionStorage.getItem("listOfDisplayedEvents")}catch(g){}var d;if(typeof c!="undefined"&&c!=null&&c!="")if(d=typeof c!="object"?JSON.parse(c):c,a="e"+a,typeof d!="undefined"&&d!=null)for(c=0;c<=d.length-1;c++){if(d[c]==a)return!0}else d=[];else d=[];d.push(a);window.sessionStorage.setItem("listOfDisplayedEvents",$.toJSON(d))}catch(b){logError("listOfDisplayedEvents",b)}return!1}
function forfeitpopup(){try{var a;try{a=JSON.parse(window.sessionStorage.getItem("dontShowForfeitPopup"))}catch(c){}if(a==1)forfeitbet();else{var g;try{g=JSON.parse(window.sessionStorage.getItem("Currentbet"))}catch(d){}var b;g!=null&&g.status==0?(b="Are you sure that you want to cancel your prediction and lose your "+g.amount+" credits?",b+='<br clear="all"/>',b+=remainingforfeits>1?'<br clear="all"/> You have '+remainingforfeits+" forfeits remaining!":'<br clear="all"/> You only have '+remainingforfeits+
" forfeit remaining!",$("#"+displaymode+"_forfeitconfirm").animate({top:"55px"},300),$("#"+displaymode+"_forfeitconfirm").attr("style","display:block;z-index:903;"),$("#"+displaymode+"_forfeitconfirm h4").html(b),$("#"+displaymode+"_forfeitconfirmbutton").attr("onClick","forfeitbet()")):$(".forfeitclick").hide()}}catch(f){logError("forfeitpopup",f)}}
function betpupup(a,c){try{uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser"));if(uiUser==null)return displaymode=="w"?($("#"+displaymode+"_predictionpending").html("<strong>Sign in with Facebook to Play!</strong>!"),$("#"+displaymode+"_predictionpending").show(),$(".tooltip-shade").show(),$(".betcountdown").show(),$(".betcountdown").delay(2500).fadeOut("slow"),$(".tooltip-shade").delay(2500).fadeOut("slow")):displaymode=="m"&&($(".popup-notify > h1").text("Sign in with Facebook to Play!"),
$(".popup-notify > span").text(""),$(".popup-notify").fadeIn(200).delay(3E3).fadeOut(200)),!1;if(admin&&admin.isAdmin())admin.inPreview()!=1&&admin.sendEvent(c,a);else{var g;try{g=JSON.parse(window.sessionStorage.getItem("Currentbet"))}catch(d){}if(g!=null&&g.status==0)return LastEventReceived==22?displaymode=="w"?($("#"+displaymode+"_predictionpending").html("<strong>Can't place a bet right now - waiting for the referee's decision!!!</strong>!"),$("#"+displaymode+"_predictionpending").show(),$(".tooltip-shade").show(),
$(".betcountdown").show(),$(".betcountdown").delay(2500).fadeOut("slow"),$(".tooltip-shade").delay(2500).fadeOut("slow")):displaymode=="m"&&($(".popup-notify > h1").text("Can't place a bet right now - waiting for the referee's decision!!"),$(".popup-notify > span").text(""),$(".popup-notify").fadeIn(200).delay(3E3).fadeOut(200)):displaymode=="w"?($("#"+displaymode+"_predictionpending").html("<strong>You have already made a prediction!</strong>!"),$("#"+displaymode+"_predictionpending").show(),$(".tooltip-shade").show(),
$(".betcountdown").show(),$(".betcountdown").delay(2500).fadeOut("slow"),$(".tooltip-shade").delay(2500).fadeOut("slow")):displaymode=="m"&&($(".popup-notify > h1").text("You have already made a prediction!"),$(".popup-notify > span").text(""),$(".popup-notify").fadeIn(200).delay(3E3).fadeOut(200)),!1;var b;try{b=JSON.parse(window.sessionStorage.getItem("tempBet"))}catch(f){}if(b!=null)return displaymode=="w"?($("#"+displaymode+"_predictionpending").html("<strong>You must wait until your previous prediction has finished processing!!!</strong>!"),
$("#"+displaymode+"_predictionpending").show(),$(".tooltip-shade").show(),$(".betcountdown").show(),$(".betcountdown").delay(2500).fadeOut("slow"),$(".tooltip-shade").delay(2500).fadeOut("slow")):displaymode=="m"&&($(".popup-notify > h1").text("You must wait until your previous prediction has finished processing!"),$(".popup-notify > span").text(""),$(".popup-notify").fadeIn(200).delay(3E3).fadeOut(200)),!1;getUsersOneClickCreditValue()>0?prepareBet(c):($("#"+displaymode+"_popupplacebet").animate({top:"55px"},
300),$("#"+displaymode+"_popupplacebet").attr("style","display:block;z-index:900;"),$("#"+displaymode+"_popupplacebet h4").html("You have selected <span style='color:#FFFFCC;'>'"+a+"'</span>, How many credits do you want to risk?"),$("#"+displaymode+"_confirm").attr("onClick","prepareBet("+c+")"))}}catch(h){logError("betpupup",h)}}
function prepareBet(a){try{var c=10,g=getUsersOneClickCreditValue();if((c=g>0?g:parseInt($("#"+displaymode+"_popupplacebet input:checked").val()))&&c>0){uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser"));var d=new Bet(a,GetCurrentfixtureID(),c,uiUser.id);d.user=uiUser;window.sessionStorage.setItem("tempBet",$.toJSON(d));$("#"+displaymode+"_bubble"+a).removeClass("bubble");$("#"+displaymode+"_bubble"+a).addClass("bubble_loading");$("#"+displaymode+"_popupplacebet").hide();ReTryBetAttempts=
0;placeBet(BetComplete,d)}else displaymode=="w"?($("#"+displaymode+"_predictionpending").html("<strong>You must select an amount!</strong>!"),$("#"+displaymode+"_predictionpending").show(),$(".tooltip-shade").show(),$(".betcountdown").show(),$(".betcountdown").delay(2500).fadeOut("slow"),$(".tooltip-shade").delay(2500).fadeOut("slow")):displaymode=="m"&&($(".popup-notify > h1").text("You must select an amount!"),$(".popup-notify > span").text(""),$(".popup-notify").fadeIn(200).delay(3E3).fadeOut(200))}catch(b){logError("prepareBet",
b)}}
function placeBet(a,c,g){if(g==1)try{c=JSON.parse(window.sessionStorage.getItem("timeOutBet"))}catch(d){}else if(!c||typeof c=="undefined")try{c=JSON.parse(window.sessionStorage.getItem("tempBet"))}catch(b){}try{var f=JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/Game/PlaceBet",type:"POST",timeout:7E3,data:"u="+f.id+"&e="+c.eventid+"&f="+GetCurrentfixtureID()+"&a="+c.amount+"&fu="+f.fbuserid,success:function(b){a instanceof Function&&a(b)},error:function(a,b){b==
"timeout"?ReTryBetAttempts<1?(ReTryBetAttempts+=1,window.sessionStorage.setItem("timeOutBet",$.toJSON(c)),setTimeout("placeBet(BetComplete,null,1);",1500)):(logError("placeBet","Failed to place bet - 2 times in a row. Reloading page!!!!!!!","",""),location.reload(!1)):BetNotPlaced(c)}});window.sessionStorage.setItem("tempBet",null);window.sessionStorage.setItem("Currentbet",$.toJSON(c))}catch(h){logError("placeBet",h)}}
function BetComplete(a){try{if(ReTryBetAttempts=0,a.betid>0){StartBetCountDown();try{Currentbet=JSON.parse(window.sessionStorage.getItem("Currentbet"))}catch(c){}Currentbet.betdescription=a.betdescription;Currentbet.eventdesc=a.eventdesc;Currentbet.betid=a.betid;Currentbet.creditsremaining=a.creditsremaining;Currentbet.odds=a.odds;Currentbet.eventtime=a.eventtime;Currentbet.existingBetId=a.existingBetId;Currentbet.unlockcredits=a.unlockcredits;Currentbet.numbetsplaced=a.numbetsplaced;Currentbet.numbetstounlockhigherlevel=
a.numbetstounlockhigherlevel;if(a.existingBetId&&a.existingBetId>0)Currentbet.eventid=a.existingBetId;Currentbet.amount=a.amount;Currentbet.incorrectEventID=a.incorrectEventID;Currentbet.incorrectOdds=a.incorrectOdds;Currentbet.status=a.status;betJustComplete=1;DisplayHigherCreditsAvailabilityToUserV2(a.unlockcredits,a.numbetsplaced,a.numbetstounlockhigherlevel,"updateTicker");uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser"));uiUser.credits=a.creditsremaining;window.sessionStorage.setItem("facebookuser",
$.toJSON(uiUser));$(".credits").html(uiUser.credits);Currentbet.user=uiUser;Currentbet.odds=CastToDecimal(Currentbet.odds);window.sessionStorage.setItem("Currentbet",$.toJSON(Currentbet));window.sessionStorage.setItem("tempBet",null);NotifyFriendsOfBetPlaced(friendsNotified)<0&&setTimeout("NotifyFriendsOfBetPlaced(friendsNotified);",2E3);$("#"+displaymode+"_button"+Currentbet.eventid).hide();$("#"+displaymode+"_bubble"+Currentbet.eventid).removeClass("bubble_loading");$("#"+displaymode+"_bubble"+
Currentbet.eventid).addClass("bubble_active");$("#"+displaymode+"_bubble"+Currentbet.eventid).html(""+Currentbet.amount+"");Currentbet.incorrectEventID&&($("#"+displaymode+"_bubble"+Currentbet.incorrectEventID).removeClass("bubble_loading"),$("#"+displaymode+"_bubble"+Currentbet.incorrectEventID).addClass("bubble"),$("#"+displaymode+"_bubble"+Currentbet.incorrectEventID).html(Currentbet.incorrectOdds+"/1"));var g=a.betdescription;try{g=g.replace("^","<span class='min'>"),g=g.replace("~","</span>")}catch(d){}var b;
$(".GameFeedInfo").prepend("<b class='bettext'>"+g+"</b><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");WeAreCurrentlyShowingLeagueTable()==!0&&userLeague.UpdateCurrentLeaderboard(1);WeAreCurrentlyShowingFriendsLeagueTable==!0?userLeague.GetFriendsLeaderBoard():AddBetToFriendScores(Currentbet);remainingforfeits>0&&($(".forfeitclick").show(),$("#"+displaymode+"_forfeitnum").html(remainingforfeits));_gaq.push(["_trackEvent","Bets","BetPlaced",GetEventFromEventDescription(Currentbet.eventdesc),
parseInt(Currentbet.amount)])}else if(a.betid==-2)a.numattempts==0?(a.numattempts=1,placeBet(BetComplete,a)):($("#"+displaymode+"_bubble"+a.eventid).removeClass("bubble_loading"),$("#"+displaymode+"_bubble"+a.eventid).addClass("bubble"),$("#"+displaymode+"_bubble"+a.eventid).html(""+a.odds+"/1"),window.sessionStorage.setItem("Currentbet",null),window.sessionStorage.setItem("tempBet",null),b="<b class='bettext'>"+a.betdescription+"</b><br />",$(".GameFeedInfo").prepend(b),refreshScroller(GameFeedScroller,
"GameFeedInfo"),logError("BetComplete - BetFailed","Failed To connect to place bet in DB twice : -2"));else if(a.betid==-101)a.numattempts==0?(a.numattempts=1,placeBet(BetComplete,a)):($("#"+displaymode+"_bubble"+a.eventid).removeClass("bubble_loading"),$("#"+displaymode+"_bubble"+a.eventid).addClass("bubble"),$("#"+displaymode+"_bubble"+a.eventid).html(""+a.odds+"/1"),window.sessionStorage.setItem("Currentbet",null),window.sessionStorage.setItem("tempBet",null),b="<b class='bettext'>"+a.betdescription+
"</b><br />",$(".GameFeedInfo").prepend(b),refreshScroller(GameFeedScroller,"GameFeedInfo"),logError("BetComplete - BetFailed","Failed To connect to place bet in DB twice : -101"));else if(a.betid==-3)return $("#"+displaymode+"_bubble"+a.eventid).removeClass("bubble_loading"),$("#"+displaymode+"_bubble"+a.eventid).addClass("bubble"),$("#"+displaymode+"_bubble"+a.eventid).html(""+a.odds+"/1"),window.sessionStorage.setItem("Currentbet",null),window.sessionStorage.setItem("tempBet",null),_gaq.push(["_trackEvent",
"Bets","BetDeniedAwaitingDecision"]),displaymode=="w"?($("#"+displaymode+"_predictionpending").html("<strong>Can't make a prediction right now - Waiting for the LiveGames referee's decision!</strong>!"),$("#"+displaymode+"_predictionpending").show(),$(".tooltip-shade").show(),$(".betcountdown").show(),$(".betcountdown").delay(2500).fadeOut("slow"),$(".tooltip-shade").delay(2500).fadeOut("slow")):displaymode=="m"&&($(".popup-notify > h1").text("Can't make a prediction right now - Waiting for the LiveGames referee's decision!"),
$(".popup-notify > span").text(""),$(".popup-notify").fadeIn(200).delay(3E3).fadeOut(200)),!1;else a.betid==-104&&(displaymode=="w"?($("#"+displaymode+"_predictionpending").html("<strong>You have run out of credits! You can buy more in the store!!</strong>!"),$("#"+displaymode+"_predictionpending").show(),$(".tooltip-shade").show(),$(".betcountdown").show(),$(".betcountdown").delay(2500).fadeOut("slow"),$(".tooltip-shade").delay(2500).fadeOut("slow")):displaymode=="m"&&($(".popup-notify > h1").text("You have run out of credits! You can buy more in the store!!"),
$(".popup-notify > span").text(""),$(".popup-notify").fadeIn(200).delay(3E3).fadeOut(200))),$(".GameFeedInfo").prepend("<b class='bettext'>"+a.betdescription+"</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"),$("#"+displaymode+"_bubble"+a.eventid).removeClass("bubble_loading"),$("#"+displaymode+"_bubble"+a.eventid).addClass("bubble"),$("#"+displaymode+"_bubble"+a.eventid).html(""+a.odds+"/1"),window.sessionStorage.setItem("Currentbet",null),window.sessionStorage.setItem("tempBet",null)}catch(f){logError("BetComplete",
f)}}function BetNotPlaced(a){ReTryBetAttempts=0;$("#"+displaymode+"_bubble"+a.eventid).removeClass("bubble_loading");$("#"+displaymode+"_bubble"+a.eventid).addClass("bubble");window.sessionStorage.setItem("Currentbet",null);window.sessionStorage.setItem("tempBet",null);$(".GameFeedInfo").prepend("Unable to make a prediction... try again <br />");refreshScroller(GameFeedScroller,"GameFeedInfo");logError("BetNotPlaced")}
function forfeitbet(){$(".forfeitclick").hide();closeforfeitpopup();var a;try{a=JSON.parse(window.sessionStorage.getItem("Currentbet"))}catch(c){}try{$("#"+displaymode+"_dontshowforfeit").prop("checked")&&window.sessionStorage.setItem("dontShowForfeitPopup",$.toJSON(1));var g=JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/Game/ForFeitBet",type:"POST",timeout:5E3,data:"u="+g.id+"&b="+a.betid+"&f="+GetCurrentfixtureID()+"&fu="+g.fbuserid,success:function(a){if(a.status==
-103){forfeitsUsed=1;BetValidCount>0&&(BetValidCount=-1,$("#"+displaymode+"_predictionpending").html("<strong>Bet Forfeit!</strong>!"),$("#"+displaymode+"_predictionpending").delay(1E3).fadeOut("slow"),$("#"+displaymode+"_count").hide(),$(".tooltip-shade").delay(1E3).fadeOut("slow"),$(".betcountdown").delay(1E3).fadeOut("slow"));NotifyFriendsOfBetForfeit()<0&&setTimeout("NotifyFriendsOfBetForfeit();",2E3);remainingforfeits-=1;remainingforfeits==0&&bouncenotification("Purchase more Forfeits from the Store!");
window.sessionStorage.setItem("Currentbet",null);var c=JSON.parse(window.sessionStorage.getItem("facebookuser"));RemoveForfeitBetFromFriendScores(c.fbuserid,a.betid);RemoveUsersForfeitBetFromLeaderboards(c.fbuserid,a.betid);remainingforfeits>1?$(".GameFeedInfo").prepend("<span class='losetext'>FORFEIT - CREDITS LOST - "+remainingforfeits+" forfeits left!</span><br />"):remainingforfeits==1?$(".GameFeedInfo").prepend("<span class='losetext'>FORFEIT - CREDITS LOST - ONLY "+remainingforfeits+" forfeit left!</span><br />"):
$(".GameFeedInfo").prepend("<span class='losetext'>FORFEIT - CREDITS LOST - NO forfeits left!</span><br />");$("#"+displaymode+"_bubble"+Currentbet.eventid).removeClass("bubble_active");$("#"+displaymode+"_bubble"+Currentbet.eventid).addClass("bubble");c=a.newodds?Math.round(a.newodds):Math.round(a.odds);$("#"+displaymode+"_bubble"+a.eventid).html(""+c+"/1");$("#"+displaymode+"_forfeitnum").html(remainingforfeits);_gaq.push(["_trackEvent","Clicks","Forfeit"])}else a.status==-1?displaymode=="w"?($("#"+
displaymode+"_predictionpending").html("<strong>Too late to forfeit - Waiting for the LiveGames referee's decision!</strong>!"),$("#"+displaymode+"_predictionpending").show(),$(".tooltip-shade").show(),$(".betcountdown").show(),$(".betcountdown").delay(2500).fadeOut("slow"),$(".tooltip-shade").delay(2500).fadeOut("slow")):displaymode=="m"&&($(".popup-notify > h1").text("Too late to forfeit - Waiting for the LiveGames referee's decision!"),$(".popup-notify > span").text(""),$(".popup-notify").fadeIn(200).delay(3E3).fadeOut(200)):
($(".GameFeedInfo").prepend("We were unable to forfeit your prediction - please try again.<br />"),$(".forfeitclick").show())},error:function(a,c,d){AjaxFail("forfeitBet",a,c,d)}})}catch(d){logError("placeBet",d)}}function AjaxFail(a,c){var g="status: "+c.status+"; response-text:"+c.responseText;a&&logError("AjaxFail : "+a,g)}function FinishedProcessingFriendScores(){FriendScoresUpdating=0}
function RemoveForfeitBetFromFriendScores(a,c){try{var g;try{g=window.sessionStorage.getItem("lim")}catch(d){}if(g!=2){var b;try{b=window.sessionStorage.getItem("listOfFriendsBets")}catch(f){}var h;g=0;var j;typeof b!="undefined"&&b!=null&&b!=""&&(h=typeof b!="object"?JSON.parse(b):b);if(h)for(b=0;b<=h.length-1;b++){if(h[b].betid==c){h[b].status=-103;j=UpdateFriendScoresWithBetResult(h[b]);g=1;break}}else h=[],g=1;if(g==1)if(window.sessionStorage.setItem("listOfFriendsBets",$.toJSON(h)),j+="",j.indexOf("sameasbefore")>=
0){ReOrderFriendsScoresBasedOnCurrentScore("BetObjectUpdatedButScoreNotChanged");var k=j.split(":")[1];UpdateLeaderboardWithNewBalance(a,k)}else ReOrderFriendsScoresBasedOnCurrentScore(),UpdateLeaderboardWithNewBalance(a,j)}}catch(m){logError("RemoveForfeitBetFromFriendScores",m)}}function FinishedProcessingFriendScores(){FriendScoresUpdating=0}
function RemoveUsersForfeitBetFromLeaderboards(a,c){try{var g,d=0,b;try{g=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"))}catch(f){}if(g)for(var h=0;h<=g.length-1;h++){if(g[h].F==a&&g[h].B&&g[h].B.betid==c){g[h].B.status=-103;if(parseInt(g[h].B.addamount)==0)g[h].S=parseInt(g[h].S)-parseInt(g[h].B.amount);b=g[h].S;d=1;break}}else g=[],d=1;d==1&&(window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(g)),ReOrderFriendsScoresBasedOnCurrentScore(),UpdateLeaderboardWithNewBalance(a,
b))}catch(j){logError("RemoveForfeitBetFromFriendScores",j)}FinishedProcessingFriendScores()}
function AddBetToFriendScores(a){try{var c,g=0;try{c=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"))}catch(d){}if(c)for(var b=0;b<=c.length-1;b++){if(c[b].F==a.user.fbuserid){c[b].B=a;var g=1,f=JSON.parse(window.sessionStorage.getItem("facebookuser"));c[b].F!=f.fbuserid&&(a="",a=c[b].U.indexOf("<span")>0?c[b].U.substring(0,c[b].U.indexOf("<span")).trim():c[b].U,friend_notification(c[b].I,a+" made a prediction"));break}}else c=[],g=1;g==1&&(window.sessionStorage.setItem("listOfFriendsScores",
$.toJSON(c)),ReOrderFriendsScoresBasedOnCurrentScore("BetObjectUpdatedButScoreNotChanged"))}catch(h){logError("AddBetToFriendScores",h)}FinishedProcessingFriendScores()}function Leaderboard(){this.F="";this.S=0;this.U="";this.P=-1;this.B=null;this.I=""}
function AddFriendToFriendScores(a,c,g){try{var d;try{d=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"))}catch(b){}d==null&&(d=[]);var f=new Leaderboard;f.F=a;f.S=0;f.U=c;f.I=g;IsUserAlreadyInFriendsLeaderBoard(a)==0&&(d.push(f),window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(d)),ReOrderFriendsScoresBasedOnCurrentScore())}catch(h){logError("AddFriendToFriendScores",h)}FinishedProcessingFriendScores()}function friend(){this.id="";this.name=0}
function CheckAndAddFriendToFriendList(a,c){try{var g;try{g=JSON.parse(window.sessionStorage.getItem("facebookfriendlist"))}catch(d){}g==null&&(g=[]);for(var b=0,f=0;f<=g.length-1;f++)if(g[f].id==a){b=1;break}if(b==0){var h=new friend;h.id=a;h.name=c;g.push(h);window.sessionStorage.setItem("facebookfriendlist",$.toJSON(g));var j=JSON.parse(window.sessionStorage.getItem("facebookuser"));liveGamesSignalRConnection.server.joingroup("UBD"+a,j.firstname)}}catch(k){logError("AddFriendToFriendList",k)}}
function IsUserAlreadyInFriendsLeaderBoard(a){try{var c;try{c=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"))}catch(g){}if(c!=null)for(var d=0;d<=c.length-1;d++)if(c[d].F==a)return 1;return 0}catch(b){logError("IsUserAlreadyInFriendsLeaderBoard",b)}}
function UpdateFriendScoresWithNewBalance(a,c){try{var g;try{g=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"))}catch(d){}if(g){var b=typeof g!="object"?JSON.parse(g):g;for(g=0;g<=b.length-1;g++)if(b[g].F==a){if(b[g].S!=parseInt(c))b[g].S=parseInt(c),b[g].B=null,window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(b)),ReOrderFriendsScoresBasedOnCurrentScore();break}}}catch(f){logError("UpdateFriendScoresWithNewBalance",f)}UpdateLeaderboardWithNewBalance(a,c)}
function UpdateLeaderboardWithNewBalance(a,c){try{var g;try{g=JSON.parse(window.sessionStorage.getItem("leaderboard"))}catch(d){}if(g){var b=typeof g!="object"?JSON.parse(g):g;for(g=0;g<=b.length-1;g++)if(b[g].F==a&&b[g].S!=parseInt(c)){b[g].S=parseInt(c);window.sessionStorage.setItem("leaderboard",$.toJSON(b));var f=0;JSON.parse(window.sessionStorage.getItem("facebookuser")).fbuserid==b[g].F?(ReOrderLeaderBoardBasedOnCurrentScore("userJustUpdatedIsCurrentUser"),f=1):ReOrderLeaderBoardBasedOnCurrentScore();
userLeague.currentlyShowingDefaultLeague>0||(UpdateTickersLeaderboardWithNewBalance(a,c),f==1?ReOrderTickersOverallScoresBasedOnCurrentScore("userJustUpdatedIsCurrentUser"):ReOrderTickersOverallScoresBasedOnCurrentScore(),SetTickerContent("LeagueStandings_ticker",GetLeagueStandingsTickerDetailsBasedOnTheOverallScoresForThisGame()));break}}}catch(h){logError("UpdateLeaderboardWithNewBalance",h)}}
function UpdateTickersLeaderboardWithNewBalance(a,c){try{var g;try{g=JSON.parse(lastOverallScoresList)}catch(d){}if(g){var b=typeof g!="object"?JSON.parse(g):g;for(g=0;g<=b.length-1;g++)if(b[g].F==a&&b[g].S!=parseInt(c)){b[g].S=parseInt(c);lastOverallScoresList=$.toJSON(b);break}}}catch(f){logError("UpdateTickersLeaderboardWithNewBalance",f)}}
function ReOrderLeaderBoardBasedOnCurrentScore(a){try{var c=JSON.parse(window.sessionStorage.getItem("leaderboard")),g=JSON.parse(window.sessionStorage.getItem("facebookuser")),d=[],b=1,f=0;if(c){for(f=c.length;c.length>0;){for(var h=-1,j=-1E8,k=0;k<=c.length-1;k++)if(c[k].S>j)j=c[k].S,h=k;c[h].P=c.length==1&&(c[0].P==""||c[0].P=="?"||c[0].P>f||c[0].F==g.fbuserid&&a)?a?"":c[0].P:b;b+=1;d.push(c[h]);c.splice(h,1)}window.sessionStorage.setItem("leaderboard",$.toJSON(d));userLeague.DisplayTheLeagueTable($.toJSON(d),
userLeague.id,userLeague.name,null,userLeague.creater_Id,userLeague.num_MembersInLeague)}}catch(m){logError("ReOrderLeaderBoardBasedOnCurrentScore",m)}}
function ReOrderTickersOverallScoresBasedOnCurrentScore(a){try{var c=typeof lastOverallScoresList!="object"?JSON.parse(lastOverallScoresList):lastOverallScoresList,g=[],d=1;if(c){for(;c.length>0;){for(var b=-1,f=-1E8,h=0;h<=c.length-1;h++)if(c[h].S>f)f=c[h].S,b=h;c[b].P=c.length==1&&(c[0].P==""||c[0].P=="?"||c[0].P>0)?a?"":c[0].P:d;d+=1;g.push(c[b]);c.splice(b,1)}lastOverallScoresList=$.toJSON(g)}}catch(j){logError("ReOrderTickersOverallScoresBasedOnCurrentScore",j)}}
function UpdateFriendScoresWithNewCredit(a,c,g,d,b){try{var f;try{f=window.sessionStorage.getItem("listOfAlreadyReceivedPreGameBetOptionDetails")}catch(h){}var j=1,c=a+"-"+c+"-"+d;if(typeof f!="undefined"&&f!=null&&f!=""){f=JSON.parse(window.sessionStorage.getItem("listOfAlreadyReceivedPreGameBetOptionDetails"));for(var k=0;k<=f.length-1;k++)if(f[k]==c){j=0;break}}else f=[];if(j==1){f.push(c);var m;try{m=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"))}catch(q){}if(m)for(k=0;k<=m.length-
1;k++)if(m[k].F==d){var n=JSON.parse(window.sessionStorage.getItem("facebookuser"));b==1?(m[k].S=parseInt(m[k].S)+parseInt(g),m[k].F==n.fbuserid&&NotifyFriendsOfNewBalanceForThisGame(a,n.fbuserid,m[k].S)):m[k].S=parseInt(m[k].S)-parseInt(g);window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(m));ReOrderFriendsScoresBasedOnCurrentScore();break}}window.sessionStorage.setItem("listOfAlreadyReceivedPreGameBetOptionDetails",$.toJSON(f))}catch(s){logError("UpdateFriendScoresWithNewCredit",s)}}
function UpdateFriendScoresWithBetResult(a){try{var c="",g=0,d;try{d=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"))}catch(b){}if(d){for(var f=0;f<=d.length-1;f++)if(d[f].B&&d[f].B.betid==a.betid){var h=parseInt(d[f].B.addamount);d[f].B=a;if(a.status==1){var j;j=h==1?parseInt(a.creditsearned)+parseInt(a.amount):parseInt(a.creditsearned);d[f].S=parseInt(d[f].S)+j}else if(a.status==-1)h==0?(g=parseInt(d[f].S)-parseInt(a.amount),g!=d[f].S?d[f].S=g:c="sameasbefore:"+d[f].S):c="sameasbefore:"+
d[f].S;else if(a.status==-102){if(h==1)d[f].S=parseInt(d[f].S)+parseInt(a.amount)}else if(a.status==-103)h==0?(g=parseInt(d[f].S)-parseInt(a.amount),g!=d[f].S?d[f].S=g:c="sameasbefore:"+d[f].S):c="sameasbefore:"+d[f].S;if(c.indexOf("sameasbefore")<0)c=d[f].S;break}window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(d))}}catch(k){logError("UpdateFriendScoresWithBetResult",k)}FinishedProcessingFriendScores();return c}
function ReOrderFriendsScoresBasedOnCurrentScore(a){try{var c;try{c=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"))}catch(g){}var d=[],b=1;if(c){for(;c.length>0;){for(var f=-1,h=-1E8,j=0;j<=c.length-1;j++)if(c[j].S>h)h=c[j].S,f=j;c[f].P=b;b+=1;d.push(c[f]);c.splice(f,1)}window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(d));$(".FriendsLeaderboard").html(userLeague.DisplayFriendsLeaderBoard(d,"ff",!0));refreshScroller(friendsScoreScroller,"FriendsLeaderboard");a||SetTickerContent("friendDetails_ticker")}}catch(k){logError("ReOrderFriendsScoresBasedOnCurrentScore",
k)}}
function AddMyScoreToOverAllLeaderBoard(a,c){try{var g,d;try{g=window.sessionStorage.getItem("listOfFriendsScores")}catch(b){}try{d=window.sessionStorage.getItem("facebookuser")}catch(f){}if(g&&d){var h=typeof g!="object"?JSON.parse(g):g,j=typeof d!="object"?JSON.parse(d):d,k;for(g=0;g<=h.length-1;g++)if(h[g].F==j.fbuserid){k=h[g];break}if(k){var m;try{var q;q=c?lastOverallScoresList:JSON.parse(window.sessionStorage.getItem("leaderboard"));m=typeof q!="object"?JSON.parse(q):q}catch(n){}h=0;if(m){for(g=0;g<=
m.length-1;g++)if(m[g].F==j.fbuserid){h=1;break}if(h==0)k.P="",m.push(k),c?lastOverallScoresList=$.toJSON(q):window.sessionStorage.setItem("leaderboard",$.toJSON(m)),a?userLeague.DisplayTheLeagueTable(m,thisFixture.defaultleagueid,thisFixture.defaultleaguename,null,thisFixture.defaultleaguecreator,a):userLeague.DisplayTheLeagueTable(m,thisFixture.defaultleagueid,thisFixture.defaultleaguename,null,thisFixture.defaultleaguecreator,0)}}}}catch(s){logError("AddMyScoreToOverAllLeaderBoard",s)}}
function updateFriendsBetStatus(a,c,g){try{var d;try{d=window.sessionStorage.getItem("listOfFriendsBets")}catch(b){}var f,h=0;if(typeof d!="undefined"&&d!=null&&d!="")if(f=typeof d!="object"?JSON.parse(d):d,typeof f!="undefined"&&f!=null){for(d=0;d<=f.length-1;d++)if(f[d].status==0)if(a==12)f[d].status=-102,UpdateFriendScoresWithBetResult(f[d]),h=1;else{var j=new Date(f[d].eventtime),k=new Date;k.setTime(c.getTime()-voidOffset*1E3);j<=k?(f[d].status=f[d].eventid==a?1:-1,UpdateFriendScoresWithBetResult(f[d]),
h=1):j<g?(f[d].status=-102,UpdateFriendScoresWithBetResult(f[d]),h=1):logError("VoidFlow","not clearing friends bet due to LS latency","","")}h==1&&(ReOrderFriendsScoresBasedOnCurrentScore(),FinishedProcessingFriendScores());displayFriendsDetals=="1"&&$(".FriendFeedInfo").prepend("")}else f=[];else f=[];window.sessionStorage.setItem("listOfFriendsBets",$.toJSON(f))}catch(m){logError("updateFriendsBetStatus",m)}}
function GetEventFromEventDescription(a){try{var c=a.indexOf(" ");c==-1&&(c=a.indexOf("-"));return a.substring(0,c)}catch(g){return logError("GetEventFromEventDescription",g),""}}
function checkBetStatusNew(a,c,g){try{try{Currentbet=JSON.parse(window.sessionStorage.getItem("Currentbet"))}catch(d){}if(Currentbet==null)return!1;else if(Currentbet.status!=0&&Currentbet.status!=-102)return window.sessionStorage.setItem("Currentbet",null),!1;else{var b="",f=new Date(Currentbet.eventtime),h=new Date;h.setTime(c.getTime()-voidOffset*1E3);if(f<=h)if(Currentbet.eventid==a){$(".forfeitclick").hide();closeforfeitpopup();var j=Math.round(Currentbet.amount*Currentbet.odds+Currentbet.amount),
b="<span class='wintext'>You win "+j+" credits!</span><br />";Currentbet.status=1;Currentbet.creditsearned=Math.round(Currentbet.amount*Currentbet.odds);uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser"));uiUser.credits+=j;window.sessionStorage.setItem("facebookuser",$.toJSON(uiUser));$(".credits").html(uiUser.credits);playsound("win");try{slider(0)}catch(k){}$(".popup-notify > h1").text("WIN!");$(".popup-notify > span").text("You won "+j+" credits!");$(".popup-notify").fadeIn(200).delay(3E3).fadeOut(200);
UpdateFriendScoresWithBetResult(Currentbet);ReOrderFriendsScoresBasedOnCurrentScore();FinishedProcessingFriendScores();_gaq.push(["_trackEvent","Bets","Win",GetEventFromEventDescription(Currentbet.eventdesc),parseInt(j)])}else{$(".forfeitclick").hide();closeforfeitpopup();b="<span class='losetext'>YOU LOSE!!!!!!!</span><br />";Currentbet.status=-1;playsound("lose");UpdateFriendScoresWithBetResult(Currentbet);try{slider(0)}catch(m){}$(".popup-notify > h1").text("LOSE!");$(".popup-notify > span").text("You lost "+
Currentbet.amount+" credits!");$(".popup-notify").fadeIn(200).delay(3E3).fadeOut(200);ReOrderFriendsScoresBasedOnCurrentScore();FinishedProcessingFriendScores();_gaq.push(["_trackEvent","Bets","Lose",GetEventFromEventDescription(Currentbet.eventdesc),parseInt(Currentbet.amount)])}else if(!f||f<g)$(".forfeitclick").hide(),closeforfeitpopup(),b="<span class='losetext'>CREDITS RETURNED - PREDICTION WAS TOO LATE</span><br />",uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser")),uiUser.credits+=
Currentbet.amount,window.sessionStorage.setItem("facebookuser",$.toJSON(uiUser)),$(".credits").html(uiUser.credits),Currentbet.status=-102,UpdateFriendScoresWithBetResult(Currentbet),ReOrderFriendsScoresBasedOnCurrentScore(),FinishedProcessingFriendScores(),_gaq.push(["_trackEvent","Bets","Void",GetEventFromEventDescription(Currentbet.eventdesc),parseInt(Currentbet.amount)]);else return logError("VoidFlow","not clearing users bet due to LS latency","",""),-200;$("#"+displaymode+"_bubble"+Currentbet.eventid).removeClass("bubble_active");
$("#"+displaymode+"_bubble"+Currentbet.eventid).addClass("bubble");var q;q=Currentbet.newodds?Math.round(Currentbet.newodds):Math.round(Currentbet.odds);$("#"+displaymode+"_bubble"+Currentbet.eventid).html(""+q+"/1");var n=$(".GameFeedInfo").html();$(".GameFeedInfo").html(b+n);refreshScroller(GameFeedScroller,"GameFeedInfo");Currentbet.user=uiUser;Currentbet.odds=CastToDecimal(Currentbet.odds);Currentbet.status==-102?window.sessionStorage.setItem("Currentbet",null):window.sessionStorage.setItem("Currentbet",
$.toJSON(Currentbet))}}catch(s){logError("checkBetStatusNew",s)}return 1}
function DoBetVoidLogic(a,c){if(!a||a<c)$(".forfeitclick").hide(),closeforfeitpopup(),newFeedHTML="<span class='losetext'>CREDITS RETURNED - PREDICTION WAS TOO LATE</span><br />",uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser")),uiUser.credits+=Currentbet.amount,window.sessionStorage.setItem("facebookuser",$.toJSON(uiUser)),$(".credits").html(uiUser.credits),Currentbet.status=-102,UpdateFriendScoresWithBetResult(Currentbet),ReOrderFriendsScoresBasedOnCurrentScore(),FinishedProcessingFriendScores(),
_gaq.push(["_trackEvent","Bets","Void",GetEventFromEventDescription(Currentbet.eventdesc),parseInt(Currentbet.amount)]);else return logError("VoidFlow","not clearing users bet due to LS latency","",""),-200}
function NotifyFriendsThatUserHasJoinedGame(a,c){try{if(uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser")),uiUser.currentfixtureid=GetCurrentfixtureID(),LiveEventMethod=="SR"){var g="UBD"+uiUser.fbuserid,d="";if(uiUser.profilepic)d=uiUser.profilepic;var b;b=uiUser.nn?"3;"+uiUser.name+" <span class='nick'>"+uiUser.nn+"</span>;"+d:"3;"+uiUser.name;liveGamesSignalRConnection.server.processfriendupdates(b,g,GetCurrentfixtureID());return 1}else if(LiveEventMethod=="T5P"&&UserHasFriendsPlayingThisGame()==
1){g="UBD"+uiUser.fbuserid;d="";if(uiUser.profilepic)d=uiUser.profilepic;b=uiUser.nn?"3;"+uiUser.name+" <span class='nick'>"+uiUser.nn+"</span>;"+d:"3;"+uiUser.name+";"+d;d=[];d.push(b);d.push(uiUser.fbuserid);d.push(GetCurrentfixtureID());sp==0?AdminPusher.push("processfriendupdates",d,g):FriendPusher.push("processfriendupdates",d,g);_gaq.push(["_trackEvent","T5Pusher","JoinGame"])}}catch(f){return c&&logError("NotifyFriendsThatUserHasJoinedGame - Second Call!",f),-1}}
function NotifyFriendsOfBetPlaced(a){try{try{Currentbet=JSON.parse(window.sessionStorage.getItem("Currentbet"))}catch(c){}if(LiveEventMethod=="LS")$.ajax({url:WS_URL_ROOT+"/Game/NotifyFriendsOfBetPlaced",type:"POST",data:JSON.stringify(Currentbet),dataType:"json",contentType:"application/json: charset=utf-8",error:function(a,b,c){AjaxFail("NotifyFriendsOfBetPlaced",a,b,c)},success:function(b){a instanceof Function&&a(b)}});else if(LiveEventMethod=="SR"){var g=Currentbet.amount*Currentbet.odds,d="1;"+
Currentbet.eventid+";"+Currentbet.betid+";"+Currentbet.amount+";"+g+";"+Currentbet.eventtime,b=JSON.parse(window.sessionStorage.getItem("facebookuser")),f="UBD"+b.fbuserid;liveGamesSignalRConnection.server.processfriendupdates(d,f,GetCurrentfixtureID());return 1}else LiveEventMethod=="T5P"&&UserHasFriendsPlayingThisGame()==1&&(g=Currentbet.amount*Currentbet.odds,d="1;"+Currentbet.eventid+";"+Currentbet.betid+";"+Currentbet.amount+";"+g+";"+Currentbet.eventtime,b=JSON.parse(window.sessionStorage.getItem("facebookuser")),
f="UBD"+b.fbuserid,g=[],g.push(d),g.push(b.fbuserid),g.push(GetCurrentfixtureID()),sp==0?AdminPusher.push("processfriendupdates",g,f):FriendPusher.push("processfriendupdates",g,f),_gaq.push(["_trackEvent","T5Pusher","BetPlaced"]))}catch(h){return logError("NotifyFriendsOfBetPlaced",h),-1}}
function NotifyFriendsOfBetForfeit(){try{try{Currentbet=JSON.parse(window.sessionStorage.getItem("Currentbet"))}catch(a){}if(LiveEventMethod=="LS")$.ajax({url:WS_URL_ROOT+"/Game/NotifyFriendsOfForfeit",type:"POST",data:JSON.stringify(Currentbet),dataType:"json",contentType:"application/json: charset=utf-8",error:function(a,b,c){AjaxFail("NotifyFriendsOfBetPlaced",a,b,c)},success:function(a){callback instanceof Function&&callback(a)}});else if(LiveEventMethod=="SR"){var c=JSON.parse(window.sessionStorage.getItem("facebookuser")),
g="UBD"+c.fbuserid,d="2;"+Currentbet.betid;liveGamesSignalRConnection.server.processfriendupdates(d,g,GetCurrentfixtureID());return 1}else if(LiveEventMethod=="T5P"&&UserHasFriendsPlayingThisGame()==1){var c=JSON.parse(window.sessionStorage.getItem("facebookuser")),g="UBD"+c.fbuserid,d="2;"+Currentbet.betid,b=[];b.push(d);b.push(c.fbuserid);b.push(GetCurrentfixtureID());sp==0?AdminPusher.push("processfriendupdates",b,g):FriendPusher.push("processfriendupdates",b,g);_gaq.push(["_trackEvent","T5Pusher",
"Forfeit"])}}catch(f){return logError("NotifyFriendsOfBetForfeit",f),-1}}
function NotifyFriendsOfNewBalanceForThisGame(a,c,g){try{if(LiveEventMethod=="LS")$.ajax({url:WS_URL_ROOT+"/Game/NotifyFriendsOfNewBalance",type:"POST",data:"fixtureID="+a+"&fbuserid="+c+"&newBalance="+g,error:function(a,b,c){AjaxFail("NotifyFriendsOfBetPlaced",a,b,c)},success:function(){}});else if(LiveEventMethod=="SR"){var d,b;liveGamesSignalRConnection.server.processfriendupdates("4;"+g,"UBD"+c,GetCurrentfixtureID())}else LiveEventMethod=="T5P"&&UserHasFriendsPlayingThisGame()==1&&(d="UBD"+c,
b="4;"+g,a=[],a.push(b),a.push(uiUser.fbuserid),a.push(GetCurrentfixtureID()),sp==0?AdminPusher.push("processfriendupdates",a,d):FriendPusher.push("processfriendupdates",a,d),_gaq.push(["_trackEvent","T5Pusher","NewBalance"]))}catch(f){logError("NotifyFriendsOfNewBalanceForThisGame",f)}}function friendsNotified(){}
function updateOdds(a){try{var c=1;inPowerPlay==1&&(c=2);var g=a.split(",");if(g&&g.length>0){try{Currentbet=JSON.parse(window.sessionStorage.getItem("Currentbet"))}catch(d){}for(a=0;a<g.length;a++)try{var b=g[a].split(":"),f=b[0],h=Math.round(b[1])*c;$("#"+displaymode+"_bubble"+f).hasClass("bubble_active")&&Currentbet?(Currentbet.newodds=h,window.sessionStorage.setItem("Currentbet",$.toJSON(Currentbet))):$("#"+displaymode+"_bubble"+f).html(h+"/1")}catch(j){}}}catch(k){logError("updateOdds",k)}}
function HaveWeDisplayedFriendsBetBefore(a){try{var c;try{c=window.sessionStorage.getItem("listOfFriendsBets")}catch(g){}var d;if(typeof c!="undefined"&&c!=null&&c!="")if(d=typeof c!="object"?JSON.parse(c):c,typeof d!="undefined"&&d!=null)for(c=0;c<=d.length-1;c++){if(d[c].betid==a.betid)return!0}else d=[];else d=[];d.push(a);window.sessionStorage.setItem("listOfFriendsBets",$.toJSON(d))}catch(b){logError("HaveWeDisplayedFriendsBetBefore",b)}FinishedProcessingFriendScores();return!1}
function DisplayInviteDetails(a){try{var c=a.split(";"),g=c[1];HaveWeDisplayedThisEventBefore(c[2]*-1)||(g.replace(/s:/g,";"),refreshScroller(leaderboardScroller,"MyleagueInvites"))}catch(d){logError("DisplayInviteDetails",d)}}
function ProcessFriendUpdate(a,c){var g=a.split(";"),d=g[0];if(d==1){d=new Bet;d.eventid=g[1];d.betid=g[2];var b=new FriendUser(c,null);d.user=b;d.amount=g[3];d.creditsearned=parseInt(g[4]);d.eventtime=g[5];UserIsMyFriend(c)&&!HaveWeDisplayedFriendsBetBefore(d)&&FriendsBetIsUpToDate(d)&&AddBetToFriendScores(d)}else d==2?(g=parseInt(g[1]),RemoveForfeitBetFromFriendScores(c,g)):d==3?UserIsMyFriend(c)&&AddFriendToFriendScores(c,g[1],g[2]):d==4&&UserIsMyFriend(c)&&(g=parseInt(g[1]),UpdateFriendScoresWithNewBalance(c,
g))}function UserIsMyFriend(a){try{var c;try{c=JSON.parse(window.sessionStorage.getItem("facebookfriendlist"))}catch(g){logError("GetFriends",g)}if(typeof c!="undefined"&&c!=null)for(var d=0;d<=c.length-1;d++)if(c[d].id==a)return!0}catch(b){logError("UserIsMyFriend",b)}return!1}function closeforfeitpopup(){try{$("#"+displaymode+"_forfeitconfirm").hide()}catch(a){logError("closeforfeitpopup",a)}}
function closebetpanel(){try{$("#"+displaymode+"_popupplacebet").hide()}catch(a){logError("closepanel",a)}}function closepowerplaypopup(){try{$("#"+displaymode+"_powerplaypopup").hide()}catch(a){logError("closepowerplaypopup",a)}}function closeinvitefriendpopup(){try{$("#"+displaymode+"_invitefriendspopup").hide()}catch(a){logError("closeinvitefriendpopup",a)}}
function nicknamePopup(){try{_gaq.push(["_trackEvent","Clicks","ViewMyAccount"]);$(".nicknamepopup").show();$("#"+displaymode+"_confirm_nn").attr("onClick","nickNameConfirm()");var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));a.nn&&$("#"+displaymode+"_nicknameValue").val(a.nn);Store.GetMyStorePurchases()}catch(c){logError("nickNameEditor",c)}}
function nickNameConfirm(){try{_gaq.push(["_trackEvent","Clicks","SetNickName"]);var a=$("#"+displaymode+"_nicknameValue").val(),a=$.trim(a);$(".nicknamepopup").hide();var c=-1;uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser"));a!=null&&a.length>0&&uiUser!=null?(c=uiUser.id,$.ajax({url:WS_URL_ROOT+"/Game/EditNickName",type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+c+"&fu="+uiUser.fbuserid+"&nickname="+a,error:function(a,b,c){alert("Nickname hasn't been updated, Please Try again later!");
AjaxFail("EditNickName",a,b,c)},success:function(c){_gaq.push(["_trackEvent","Clicks","EditNickName"]);if(c==-2)displaymode=="w"?($("#"+displaymode+"_predictionpending").html("<strong>NickName is already used by another user, please try another one!</strong>!"),$("#"+displaymode+"_predictionpending").show(),$(".tooltip-shade").show(),$(".betcountdown").show(),$(".betcountdown").delay(2500).fadeOut("slow"),$(".tooltip-shade").delay(2500).fadeOut("slow")):displaymode=="m"&&($(".popup-notify > h1").text("NickName is already used by another user, please try another one!"),
$(".popup-notify > span").text(""),$(".popup-notify").fadeIn(200).delay(3E3).fadeOut(200));else if(c<0)alert("Oops - NickName NOT changed - try again later!");else if(c>0)localStorage.getItem("nickname")!=null&&localStorage.removeItem("nickname"),localStorage.setItem("nickname",a),c=JSON.parse(window.sessionStorage.getItem("facebookuser")),c.nn=a,window.sessionStorage.setItem("facebookuser",$.toJSON(c)),displaymode=="w"?($("#"+displaymode+"_predictionpending").html("<strong>Nickname changed!</strong>!"),
$("#"+displaymode+"_predictionpending").show(),$(".tooltip-shade").show(),$(".betcountdown").show(),$(".betcountdown").delay(1E3).fadeOut("slow"),$(".tooltip-shade").delay(1E3).fadeOut("slow")):displaymode=="m"&&($(".popup-notify > h1").text("Nickname changed!"),$(".popup-notify > span").text(""),$(".popup-notify").fadeIn(200).delay(3E3).fadeOut(200)),WeAreCurrentlyShowingLeagueTable()==!0&&userLeague.UpdateCurrentLeaderboard(0),WeAreCurrentlyShowingFriendsLeagueTable==!0&&userLeague.GetFriendsLeaderBoard()}})):
alert("Please type a nickname or press cancel!")}catch(g){logError("nickNameEditor",g)}}function nickNameCancel(){try{$(".nicknamepopup").hide()}catch(a){logError("nickNamecancel",a)}}function closepanel(a){try{$(a).closest(".popup-placebet").hide()}catch(c){alert(c)}}
function GetGameAdminDetails(){GetFixtures();GetGameSetupDetails();$("#managePusherdiv").show();var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));$("#GetEmailSpan").html("<h2><a href='/Admin/GetEmailDetails?u="+a.id+"&fu="+a.fbuserid+"'>Get Email List</a></h2>");admin.GetNumPushers()}
function GetGameSetupDetails(){JSON.parse(window.sessionStorage.getItem("facebookuser"));admin&&admin.isAdmin()&&$.ajax({url:WS_URL_ROOT+"/Game/GetSystemMemoryDiskStatus",type:"POST",data:"gameidID=1",error:function(a,c,g){AjaxFail("GetSystemMemoryDiskStatus",a,c,g)},success:function(a){a&&(a.toLowerCase()=="memory"?ShowThatWeAreUsingMemoryTables():a.toLowerCase()=="disk"&&ShowThatWeAreUsingDiskTables())}})}
function ShowThatWeAreUsingDiskTables(){$("#memdiskstatusdiv").show();$("#changingsystem").hide();$("#memdiskstatusSpan").html("System using Disk Tables --- Click To Switch To Use Memory");$("#memdiskstatusdiv").click(function(){admin.ChangeDiskMemoryTableStatus("Memory")})}
function ShowThatWeAreUsingMemoryTables(){$("#memdiskstatusdiv").show();$("#changingsystem").hide();$("#memdiskstatusSpan").html("System using Memory Tables ---  Click To Switch To Use Disk");$("#memdiskstatusdiv").click(function(){admin.ChangeDiskMemoryTableStatus("Disk")})}
function GetFixtures(){var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));admin&&admin.isAdmin()&&$.ajax({url:WS_URL_ROOT+"/Fixtures/GetFixtures",type:"POST",data:"u="+a.id,error:function(a,g,d){AjaxFail("GetFixtures",a,g,d)},success:function(a){$("#createFixtureLink").show();for(var a=typeof a!="object"?JSON.parse(a):a,g="",d=0;d<a.length;d++){var b="<b style='color:red;'>DB NOT cleared before this game</b>",f="",h="";a[d].lg==1&&(b="<b>DB WAS cleared before this game</b>",h="style='background:red;color:#fff;'");
a[d].et&&(f=a[d].tsftbu?"<b style='color:yellow;'>Memory Tables have been backed up to disk!!!</b>":"<b style='color:#0bdad8;'>This game has ended but we have not backed up to disk yet!!!</b>");g=g+"<div class='ui-button' "+h+"><h1> "+a[d].fixture+" -  "+a[d].fixtureid+"</h1><span>"+b+"</span><br /><span>"+f+"</span><a href='/Game/?f="+a[d].fixtureid+"'>Go To Fixture</a></div>"}$("#FixtureDiv").html(g)}})};(function(a,c){function g(a){if(f==="")return a;a=a.charAt(0).toUpperCase()+a.substr(1);return f+a}var d=Math,b=c.createElement("div").style,f=function(){for(var a="t,webkitT,MozT,msT,OT".split(","),c,f=0,d=a.length;f<d;f++)if(c=a[f]+"ransform",c in b)return a[f].substr(0,a[f].length-1);return!1}(),h=f?"-"+f.toLowerCase()+"-":"",j=g("transform"),k=g("transitionProperty"),m=g("transitionDuration"),q=g("transformOrigin"),n=g("transitionTimingFunction"),s=g("transitionDelay"),p=/android/gi.test(navigator.appVersion),
l=/iphone|ipad/gi.test(navigator.appVersion),z=/hp-tablet/gi.test(navigator.appVersion),C=g("perspective")in b,x="ontouchstart"in a&&!z,T=!!f,u=g("transition")in b,O="onorientationchange"in a?"orientationchange":"resize",ba=x?"touchstart":"mousedown",M=x?"touchmove":"mousemove",ha=x?"touchend":"mouseup",U=x?"touchcancel":"mouseup",V=f=="Moz"?"DOMMouseScroll":"mousewheel",fa;fa=f===!1?!1:{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[f];
var H=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){return setTimeout(a,1)}}(),ja=a.cancelRequestAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||clearTimeout,ea=C?" translateZ(0)":"",z=function(b,f){var d=this,g;d.wrapper=typeof b=="object"?b:c.getElementById(b);
d.wrapper.style.overflow="hidden";d.scroller=d.wrapper.children[0];d.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:p,hideScrollbar:l,fadeScrollbar:l&&C,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){for(var b=a.target;b.nodeType!=
1;)b=b.parentNode;b.tagName!="SELECT"&&b.tagName!="INPUT"&&b.tagName!="TEXTAREA"&&a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(g in f)d.options[g]=f[g];d.x=d.options.x;d.y=d.options.y;d.options.useTransform=T&&d.options.useTransform;d.options.hScrollbar=d.options.hScroll&&d.options.hScrollbar;d.options.vScrollbar=d.options.vScroll&&d.options.vScrollbar;
d.options.zoom=d.options.useTransform&&d.options.zoom;d.options.useTransition=u&&d.options.useTransition;d.options.zoom&&p&&(ea="");d.scroller.style[k]=d.options.useTransform?h+"transform":"top left";d.scroller.style[m]="0";d.scroller.style[q]="0 0";d.options.useTransition&&(d.scroller.style[n]="cubic-bezier(0.33,0.66,0.66,1)");d.options.useTransform?d.scroller.style[j]="translate("+d.x+"px,"+d.y+"px)"+ea:d.scroller.style.cssText+=";position:absolute;top:"+d.y+"px;left:"+d.x+"px";if(d.options.useTransition)d.options.fixedScrollbar=
!0;d.refresh();d._bind(O,a);d._bind(ba);x||d.options.wheelAction!="none"&&d._bind(V);if(d.options.checkDOMChanges)d.checkDOMTime=setInterval(function(){d._checkDOMChanges()},500)};z.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){switch(a.type){case ba:if(!x&&a.button!==0)break;this._start(a);break;case M:this._move(a);break;case ha:case U:this._end(a);break;case O:this._resize();break;case V:this._wheel(a);
break;case fa:this._transitionEnd(a)}},_checkDOMChanges:function(){!this.moved&&!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(a){var b;if(this[a+"Scrollbar"]){if(!this[a+"ScrollbarWrapper"]){b=c.createElement("div");this.options.scrollbarClass?b.className=this.options.scrollbarClass+a.toUpperCase():b.style.cssText="position:absolute;z-index:100;"+(a=="h"?"height:7px;bottom:1px;left:2px;right:"+
(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px");b.style.cssText+=";pointer-events:none;"+h+"transition-property:opacity;"+h+"transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1");this.wrapper.appendChild(b);this[a+"ScrollbarWrapper"]=b;b=c.createElement("div");if(!this.options.scrollbarClass)b.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+
h+"background-clip:padding-box;"+h+"box-sizing:border-box;"+(a=="h"?"height:100%":"width:100%")+";"+h+"border-radius:3px;border-radius:3px";b.style.cssText+=";pointer-events:none;"+h+"transition-property:"+h+"transform;"+h+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+h+"transition-duration:0;"+h+"transform: translate(0,0)"+ea;this.options.useTransition&&(b.style.cssText+=";"+h+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)");this[a+"ScrollbarWrapper"].appendChild(b);this[a+
"ScrollbarIndicator"]=b}a=="h"?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=d.max(d.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=d.max(d.round(this.vScrollbarSize*
this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY);this._scrollbarPos(a,!0)}else this[a+"ScrollbarWrapper"]&&(T&&(this[a+"ScrollbarIndicator"].style[j]=""),this[a+"ScrollbarWrapper"].parentNode.removeChild(this[a+"ScrollbarWrapper"]),this[a+"ScrollbarWrapper"]=null,this[a+"ScrollbarIndicator"]=null)},_resize:function(){var a=
this;setTimeout(function(){a.refresh()},p?200:0)},_pos:function(a,b){if(!this.zoomed)a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[j]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+ea:(a=d.round(a),b=d.round(b),this.scroller.style.left=a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=b,this._scrollbarPos("h"),this._scrollbarPos("v")},_scrollbarPos:function(a,b){var c=a=="h"?this.x:this.y;if(this[a+"Scrollbar"])c*=this[a+"ScrollbarProp"],c<0?(this.options.fixedScrollbar||
(c=this[a+"ScrollbarIndicatorSize"]+d.round(c*3),c<8&&(c=8),this[a+"ScrollbarIndicator"].style[a=="h"?"width":"height"]=c+"px"),c=0):c>this[a+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?c=this[a+"ScrollbarMaxScroll"]:(c=this[a+"ScrollbarIndicatorSize"]-d.round((c-this[a+"ScrollbarMaxScroll"])*3),c<8&&(c=8),this[a+"ScrollbarIndicator"].style[a=="h"?"width":"height"]=c+"px",c=this[a+"ScrollbarMaxScroll"]+(this[a+"ScrollbarIndicatorSize"]-c))),this[a+"ScrollbarWrapper"].style[s]="0",this[a+"ScrollbarWrapper"].style.opacity=
b&&this.options.hideScrollbar?"0":"1",this[a+"ScrollbarIndicator"].style[j]="translate("+(a=="h"?c+"px,0)":"0,"+c+"px)")+ea},_start:function(b){var c=x?b.touches[0]:b,f,g;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,b);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;if(this.options.zoom&&x&&b.touches.length>1)g=d.abs(b.touches[0].pageX-
b.touches[1].pageX),f=d.abs(b.touches[0].pageY-b.touches[1].pageY),this.touchesDistStart=d.sqrt(g*g+f*f),this.originX=d.abs(b.touches[0].pageX+b.touches[1].pageX-this.wrapperOffsetLeft*2)/2-this.x,this.originY=d.abs(b.touches[0].pageY+b.touches[1].pageY-this.wrapperOffsetTop*2)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,b);if(this.options.momentum&&(this.options.useTransform?(f=getComputedStyle(this.scroller,null)[j].replace(/[^0-9\-.,]/g,"").split(","),g=+f[4],f=+f[5]):
(g=+getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),f=+getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),g!=this.x||f!=this.y))this.options.useTransition?this._unbind(fa):ja(this.aniTime),this.steps=[],this._pos(g,f),this.options.onScrollEnd&&this.options.onScrollEnd.call(this);this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=c.pageX;this.pointY=c.pageY;this.startTime=b.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,
b);this._bind(M,a);this._bind(ha,a);this._bind(U,a)}},_move:function(a){var b=x?a.touches[0]:a,c=b.pageX-this.pointX,f=b.pageY-this.pointY,g=this.x+c,h=this.y+f,k=a.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,a);if(this.options.zoom&&x&&a.touches.length>1)g=d.abs(a.touches[0].pageX-a.touches[1].pageX),h=d.abs(a.touches[0].pageY-a.touches[1].pageY),this.touchesDist=d.sqrt(g*g+h*h),this.zoomed=!0,b=1/this.touchesDistStart*this.touchesDist*this.scale,
b<this.options.zoomMin?b=0.5*this.options.zoomMin*Math.pow(2,b/this.options.zoomMin):b>this.options.zoomMax&&(b=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/b)),this.lastScale=b/this.scale,g=this.originX-this.originX*this.lastScale+this.x,h=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[j]="translate("+g+"px,"+h+"px) scale("+b+")"+ea,this.options.onZoom&&this.options.onZoom.call(this,a);else{this.pointX=b.pageX;this.pointY=b.pageY;if(g>0||g<this.maxScrollX)g=this.options.bounce?
this.x+c/2:g>=0||this.maxScrollX>=0?0:this.maxScrollX;if(h>this.minScrollY||h<this.maxScrollY)h=this.options.bounce?this.y+f/2:h>=this.minScrollY||this.maxScrollY>=0?this.minScrollY:this.maxScrollY;this.distX+=c;this.distY+=f;this.absDistX=d.abs(this.distX);this.absDistY=d.abs(this.distY);if(!(this.absDistX<6&&this.absDistY<6)){if(this.options.lockDirection)if(this.absDistX>this.absDistY+5)h=this.y,f=0;else if(this.absDistY>this.absDistX+5)g=this.x,c=0;this.moved=!0;this._pos(g,h);this.dirX=c>0?-1:
c<0?1:0;this.dirY=f>0?-1:f<0?1:0;if(k-this.startTime>300)this.startTime=k,this.startX=this.x,this.startY=this.y;this.options.onScrollMove&&this.options.onScrollMove.call(this,a)}}},_end:function(b){if(!(x&&b.touches.length!==0)){var f=this,g=x?b.changedTouches[0]:b,h,k,l={dist:0,time:0},n={dist:0,time:0},q=(b.timeStamp||Date.now())-f.startTime,p=f.x,z=f.y;f._unbind(M,a);f._unbind(ha,a);f._unbind(U,a);f.options.onBeforeScrollEnd&&f.options.onBeforeScrollEnd.call(f,b);if(f.zoomed)p=f.scale*f.lastScale,
p=Math.max(f.options.zoomMin,p),p=Math.min(f.options.zoomMax,p),f.lastScale=p/f.scale,f.scale=p,f.x=f.originX-f.originX*f.lastScale+f.x,f.y=f.originY-f.originY*f.lastScale+f.y,f.scroller.style[m]="200ms",f.scroller.style[j]="translate("+f.x+"px,"+f.y+"px) scale("+f.scale+")"+ea,f.zoomed=!1,f.refresh(),f.options.onZoomEnd&&f.options.onZoomEnd.call(f,b);else{if(f.moved){if(q<300&&f.options.momentum){l=p?f._momentum(p-f.startX,q,-f.x,f.scrollerW-f.wrapperW+f.x,f.options.bounce?f.wrapperW:0):l;n=z?f._momentum(z-
f.startY,q,-f.y,f.maxScrollY<0?f.scrollerH-f.wrapperH+f.y-f.minScrollY:0,f.options.bounce?f.wrapperH:0):n;p=f.x+l.dist;z=f.y+n.dist;if(f.x>0&&p>0||f.x<f.maxScrollX&&p<f.maxScrollX)l={dist:0,time:0};if(f.y>f.minScrollY&&z>f.minScrollY||f.y<f.maxScrollY&&z<f.maxScrollY)n={dist:0,time:0}}if(l.dist||n.dist){l=d.max(d.max(l.time,n.time),10);if(f.options.snap)n=p-f.absStartX,q=z-f.absStartY,d.abs(n)<f.options.snapThreshold&&d.abs(q)<f.options.snapThreshold?f.scrollTo(f.absStartX,f.absStartY,200):(n=f._snap(p,
z),p=n.x,z=n.y,l=d.max(n.time,l));f.scrollTo(d.round(p),d.round(z),l)}else f.options.snap?(n=p-f.absStartX,q=z-f.absStartY,d.abs(n)<f.options.snapThreshold&&d.abs(q)<f.options.snapThreshold?f.scrollTo(f.absStartX,f.absStartY,200):(n=f._snap(f.x,f.y),(n.x!=f.x||n.y!=f.y)&&f.scrollTo(n.x,n.y,n.time))):f._resetPos(200)}else{if(x)if(f.doubleTapTimer&&f.options.zoom)clearTimeout(f.doubleTapTimer),f.doubleTapTimer=null,f.options.onZoomStart&&f.options.onZoomStart.call(f,b),f.zoom(f.pointX,f.pointY,f.scale==
1?f.options.doubleTapZoom:1),f.options.onZoomEnd&&setTimeout(function(){f.options.onZoomEnd.call(f,b)},200);else if(this.options.handleClick)f.doubleTapTimer=setTimeout(function(){f.doubleTapTimer=null;for(h=g.target;h.nodeType!=1;)h=h.parentNode;if(h.tagName!="SELECT"&&h.tagName!="INPUT"&&h.tagName!="TEXTAREA")k=c.createEvent("MouseEvents"),k.initMouseEvent("click",!0,!0,b.view,1,g.screenX,g.screenY,g.clientX,g.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null),k._fake=!0,h.dispatchEvent(k)},
f.options.zoom?250:0);f._resetPos(400)}f.options.onTouchEnd&&f.options.onTouchEnd.call(f,b)}}},_resetPos:function(a){var b=this.x>=0?0:this.x<this.maxScrollX?this.maxScrollX:this.x,c=this.y>=this.minScrollY||this.maxScrollY>0?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;if(b==this.x&&c==this.y){if(this.moved)this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this);if(this.hScrollbar&&this.options.hideScrollbar)f=="webkit"&&(this.hScrollbarWrapper.style[s]="300ms"),
this.hScrollbarWrapper.style.opacity="0";if(this.vScrollbar&&this.options.hideScrollbar)f=="webkit"&&(this.vScrollbarWrapper.style[s]="300ms"),this.vScrollbarWrapper.style.opacity="0"}else this.scrollTo(b,c,a||0)},_wheel:function(a){var b=this,c,f;if("wheelDeltaX"in a)c=a.wheelDeltaX/12,f=a.wheelDeltaY/12;else if("wheelDelta"in a)c=f=a.wheelDelta/12;else if("detail"in a)c=f=-a.detail*3;else return;if(b.options.wheelAction=="zoom"){f=b.scale*Math.pow(2,1/3*(f?f/Math.abs(f):0));if(f<b.options.zoomMin)f=
b.options.zoomMin;if(f>b.options.zoomMax)f=b.options.zoomMax;f!=b.scale&&(!b.wheelZoomCount&&b.options.onZoomStart&&b.options.onZoomStart.call(b,a),b.wheelZoomCount++,b.zoom(a.pageX,a.pageY,f,400),setTimeout(function(){b.wheelZoomCount--;!b.wheelZoomCount&&b.options.onZoomEnd&&b.options.onZoomEnd.call(b,a)},400))}else{c=b.x+c;f=b.y+f;if(c>0)c=0;else if(c<b.maxScrollX)c=b.maxScrollX;if(f>b.minScrollY)f=b.minScrollY;else if(f<b.maxScrollY)f=b.maxScrollY;b.maxScrollY<0&&b.scrollTo(c,f,0)}},_transitionEnd:function(a){a.target==
this.scroller&&(this._unbind(fa),this._startAni())},_startAni:function(){var a=this,b=a.x,c=a.y,f=Date.now(),g,h,j;if(!a.animating)if(a.steps.length){g=a.steps.shift();if(g.x==b&&g.y==c)g.time=0;a.animating=!0;a.moved=!0;a.options.useTransition?(a._transitionTime(g.time),a._pos(g.x,g.y),a.animating=!1,g.time?a._bind(fa):a._resetPos(0)):(j=function(){var k=Date.now();if(k>=f+g.time)a._pos(g.x,g.y),a.animating=!1,a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a),a._startAni();else if(k=(k-
f)/g.time-1,h=d.sqrt(1-k*k),k=(g.x-b)*h+b,a._pos(k,(g.y-c)*h+c),a.animating)a.aniTime=H(j)},j())}else a._resetPos(400)},_transitionTime:function(a){a+="ms";this.scroller.style[m]=a;this.hScrollbar&&(this.hScrollbarIndicator.style[m]=a);this.vScrollbar&&(this.vScrollbarIndicator.style[m]=a)},_momentum:function(a,b,c,f,g){var b=d.abs(a)/b,h=b*b/0.0012,j=0,j=0;a>0&&h>c?(c+=g/(6/(h/b*6.0E-4)),b=b*c/h,h=c):a<0&&h>f&&(f+=g/(6/(h/b*6.0E-4)),b=b*f/h,h=f);h*=a<0?-1:1;return{dist:h,time:d.round(b/6.0E-4)}},
_offset:function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;a!=this.wrapper&&(b*=this.scale,c*=this.scale);return{left:b,top:c}},_snap:function(a,b){var c,f,g;g=this.pagesX.length-1;c=0;for(f=this.pagesX.length;c<f;c++)if(a>=this.pagesX[c]){g=c;break}g==this.currPageX&&g>0&&this.dirX<0&&g--;a=this.pagesX[g];f=(f=d.abs(a-this.pagesX[this.currPageX]))?d.abs(this.x-a)/f*500:0;this.currPageX=g;g=this.pagesY.length-1;for(c=0;c<g;c++)if(b>=this.pagesY[c]){g=
c;break}g==this.currPageY&&g>0&&this.dirY<0&&g--;b=this.pagesY[g];c=(c=d.abs(b-this.pagesY[this.currPageY]))?d.abs(this.y-b)/c*500:0;this.currPageY=g;g=d.round(d.max(f,c))||200;return{x:a,y:b,time:g}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){this.scroller.style[j]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(O,a);this._unbind(ba);
this._unbind(M,a);this._unbind(ha,a);this._unbind(U,a);this.options.hasTouch||this._unbind(V);this.options.useTransition&&this._unbind(fa);this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var a,b,c,f=0;b=0;if(this.scale<this.options.zoomMin)this.scale=this.options.zoomMin;this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=
d.round(this.scroller.offsetWidth*this.scale);this.scrollerH=d.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&this.maxScrollX<0;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&
this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;a=this._offset(this.wrapper);this.wrapperOffsetLeft=-a.left;this.wrapperOffsetTop=-a.top;if(typeof this.options.snap=="string"){this.pagesX=[];this.pagesY=[];c=this.scroller.querySelectorAll(this.options.snap);a=0;for(b=c.length;a<b;a++)f=this._offset(c[a]),f.left+=this.wrapperOffsetLeft,f.top+=this.wrapperOffsetTop,this.pagesX[a]=f.left<this.maxScrollX?this.maxScrollX:f.left*this.scale,this.pagesY[a]=
f.top<this.maxScrollY?this.maxScrollY:f.top*this.scale}else if(this.options.snap){for(this.pagesX=[];f>=this.maxScrollX;)this.pagesX[b]=f,f-=this.wrapperW,b++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);b=f=0;for(this.pagesY=[];f>=this.maxScrollY;)this.pagesY[b]=f,f-=this.wrapperH,b++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-
1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[m]="0",this._resetPos(400))},scrollTo:function(a,b,c,f){var d=a;this.stop();d.length||(d=[{x:a,y:b,time:c,relative:f}]);a=0;for(b=d.length;a<b;a++){if(d[a].relative)d[a].x=this.x-d[a].x,d[a].y=this.y-d[a].y;this.steps.push({x:d[a].x,y:d[a].y,time:d[a].time||0})}this._startAni()},scrollToElement:function(a,b){var c;if(a=a.nodeType?a:this.scroller.querySelector(a))c=this._offset(a),c.left+=
this.wrapperOffsetLeft,c.top+=this.wrapperOffsetTop,c.left=c.left>0?0:c.left<this.maxScrollX?this.maxScrollX:c.left,c.top=c.top>this.minScrollY?this.minScrollY:c.top<this.maxScrollY?this.maxScrollY:c.top,b=b===void 0?d.max(d.abs(c.left)*2,d.abs(c.top)*2):b,this.scrollTo(c.left,c.top,b)},scrollToPage:function(a,b,c){c=c===void 0?400:c;this.options.onScrollStart&&this.options.onScrollStart.call(this);if(this.options.snap)a=a=="next"?this.currPageX+1:a=="prev"?this.currPageX-1:a,b=b=="next"?this.currPageY+
1:b=="prev"?this.currPageY-1:b,a=a<0?0:a>this.pagesX.length-1?this.pagesX.length-1:a,b=b<0?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=a,this.currPageY=b,a=this.pagesX[a],b=this.pagesY[b];else{a*=-this.wrapperW;b*=-this.wrapperH;if(a<this.maxScrollX)a=this.maxScrollX;if(b<this.maxScrollY)b=this.maxScrollY}this.scrollTo(a,b,c)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(M,a);this._unbind(ha,a);this._unbind(U,a)},enable:function(){this.enabled=!0},
stop:function(){this.options.useTransition?this._unbind(fa):ja(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(a,b,c,f){var d=c/this.scale;if(this.options.useTransform)this.zoomed=!0,f=f===void 0?200:f,a=a-this.wrapperOffsetLeft-this.x,b=b-this.wrapperOffsetTop-this.y,this.x=a-a*d+this.x,this.y=b-b*d+this.y,this.scale=c,this.refresh(),this.x=this.x>0?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:
this.y,this.scroller.style[m]=f+"ms",this.scroller.style[j]="translate("+this.x+"px,"+this.y+"px) scale("+c+")"+ea,this.zoomed=!1},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};b=null;typeof exports!=="undefined"?exports.iScroll=z:a.iScroll=z})(window,document);var GameFeedScroller,friendsScoreScroller,leaderboardScroller,popupScroller,leagueMessageScroller,myStorePurchasesScroller;function DontContinue(){window.event?window.event.cancelBubble=!0:e.cancelable&&e.stopPropagation()}
function refreshScroller(a,c){try{if(c=="GameFeedInfo"){if(!GameFeedScroller)GameFeedScroller=displaymode=="w"?new iScroll("wrapper",{hScrollbar:!1,vScrollbar:!1}):new iScroll("wrapper5",{hScrollbar:!1,vScrollbar:!1}),GameFeedScroller.onScrollEnd=function(){_gaq.push(["_trackEvent","Clicks","ViewGameTracker","Scroll"])},a=GameFeedScroller}else if(c=="MyleagueInvites"||c=="LeagueLeaderboard2"){if(!leaderboardScroller)leaderboardScroller=displaymode=="w"?new iScroll("wrapper3",{hScrollbar:!1,vScrollbar:!1}):
new iScroll("wrapper7",{hScrollbar:!1,vScrollbar:!1}),leaderboardScroller.onScrollEnd=function(){_gaq.push(["_trackEvent","Clicks","ViewLeaderboard","Scroll"])},a=leaderboardScroller}else if(c=="FriendsLeaderboard"){if(!friendsScoreScroller)friendsScoreScroller=displaymode=="w"?new iScroll("wrapper2",{hScrollbar:!1,vScrollbar:!1}):new iScroll("wrapper6",{hScrollbar:!1,vScrollbar:!1}),friendsScoreScroller.onScrollEnd=function(){_gaq.push(["_trackEvent","Clicks","ViewFriendsScores","Scroll"])},a=leaderboardScroller}else if(c==
"invitepanel"){if(!leagueMessageScroller)leagueMessageScroller=displaymode=="w"?new iScroll("leagueMessageWrapper",{hScrollbar:!1,vScrollbar:!1}):new iScroll("leagueMessageWrapper_mobile",{hScrollbar:!1,vScrollbar:!1}),leagueMessageScroller.onScrollEnd=function(){_gaq.push(["_trackEvent","Clicks","ViewLeagueMessages","Scroll"])},a=leagueMessageScroller}else if(c=="storepurchases"){if(!myStorePurchasesScroller)myStorePurchasesScroller=new iScroll(displaymode+"_scroll_storepurchases",{hScrollbar:!1,
vScrollbar:!1}),myStorePurchasesScroller.onScrollEnd=function(){_gaq.push(["_trackEvent","Clicks","ScrollMyStorePurchases","Scroll"])},a=myStorePurchasesScroller}else c=="popup"&&!popupScroller&&(a=popupScroller=new iScroll("wrapperpopup",{hScrollbar:!1,scrollbarClass:"myScrollbar"}));a&&typeof a!="undefined"&&setTimeout(function(){a.refresh()},0)}catch(g){}}
function ToggleCreditsmanager(){$("#"+displaymode+"_creditsmanager").is(":visible")==!1?($("#"+displaymode+"_creditsmanager").animate({top:"5%"},800,function(){$("#"+displaymode+"_creditsmanagerclickbtn").html($("#"+displaymode+"_creditsmanagerclickbtn").html()=="<span>$</span>1-Click Mode"?"<span>$</span>&nbsp;Close":"<span>$</span>1-Click Mode")}),$("#"+displaymode+"_creditsmanager").attr("style","display:block;z-index:900;")):$("#"+displaymode+"_creditsmanager").fadeOut("slow",function(){$("#"+
displaymode+"_creditsmanagerclickbtn").html($("#"+displaymode+"_creditsmanagerclickbtn").html()=="<span>$</span>1-Click Mode"?"<span>$</span>&nbsp;Close":"<span>$</span>1-Click Mode")});if($("#"+displaymode+"_creditsmanager").is(":visible")==!0){var a=getUsersOneClickCreditValue();$("input:radio[name="+displaymode+"_storecredits]").filter("[value="+a+"]").attr("checked",!0)}}function showhowtoplay(){$("#"+displaymode+"_howtotutorial").toggle("fast")}
function showtech(){$("#"+displaymode+"_techsupport").toggle("fast");$("#techsupport").toggle("fast")}function nicknameeditor(){$(".nicknamepopup").is(":visible")==!0?$(".nicknamepopup").fadeOut("fast"):$(".nicknamepopup").fadeIn("fast")}function makePurchase(){}function reconnectclick(){$("#"+displaymode+"_reconnectstatus").slideToggle("fast")}
function ShowTips(){displaymode=="m"&&$("[href=#3]").click();$("#"+displaymode+"_tooltips").toggle("fast",function(){$("#"+displaymode+"_helpclickbtn").html($("#"+displaymode+"_helpclickbtn").html()=="<span>?</span>Help!"?"<span>X</span>Hide":"<span>?</span>Help!");$(".tooltip-shade-bg").toggle()});$("#"+displaymode+"_tooltips").is(":visible")==!0&&_gaq.push(["_trackEvent","Clicks","ShowTips"])}
function ToggleUserInfo(){$("#"+displaymode+"_userinfo").slideToggle("fast",function(){});$("#"+displaymode+"_userinfo").is(":visible")==!0&&_gaq.push(["_trackEvent","Clicks","ShowMenu"])}function hideLeagueExtraDetails(a){$("#"+a).hide()}function hideInvites(a){$(".linv_"+a).hide()}function showLeagueExtraDetails(){$(".invitepanel").show()}
function checkBetCountDown(){BetValidCount--;BetValidCount>0?(span=document.getElementById(displaymode+"_count"),span.innerHTML=BetValidCount,setTimeout("checkBetCountDown();",1E3)):BetValidCount===0&&($("#"+displaymode+"_predictionpending").html('<img src="https://d2q72sm6lqeuqa.cloudfront.net/images/icon_tick.png" border="0" alt="Success" style="vertical-align:middle; height:16px;" />&nbsp;<strong>Success</strong>, Prediction Made!'),$("#"+displaymode+"_predictionpending").delay(1E3).hide(),$("#"+
displaymode+"_count").hide(),$(".tooltip-shade").delay(1E3).hide())}function StartBetCountDown(){voidOffset==0&&(voidOffset=5);BetValidCount=voidOffset;$(".tooltip-shade").show();$(".betcountdown").show();$("#"+displaymode+"_count").html(BetValidCount);$("#"+displaymode+"_count").show();$("#"+displaymode+"_predictionpending").html("Prediction pending...");$("#"+displaymode+"_predictionpending").show();setTimeout("checkBetCountDown();",1E3)}
function bouncenotification(a){var c="",c=a;c!=""&&$(".notification-bubble .text").text(c);$(".notification-bubble").fadeIn("slow");for(a=0;a<6;a++)$(".notification-bubble").animate({top:"15px"},500).animate({top:"0px"},500);$(".notification-bubble").fadeOut("slow")}
function showleaguepanel(a){a==2&&($("#"+displaymode+"_CreateLeagueError").html(""),$("#"+displaymode+"_leaguename").val(""),_gaq.push(["_trackEvent","Clicks","CreateLeague_step1"]));$("#"+displaymode+"_league_view_"+a).fadeIn("fast")}function hideleaguepanel(a){$("#"+displaymode+"_league_view_"+a).hide()}function getleague(a){$(".leaguepanel").hide();$("#"+displaymode+"_leaguestandings_"+a).fadeIn("fast")}
function slider(a){a==0?($(".slidepanel").slideUp(),$(".game-control-close").hide(),$(".button-1").removeClass("active")):($(".slidepanel").not("#"+displaymode+"_slide"+a).slideUp(),$(".button-1").removeClass("active"),$("#"+displaymode+"_slide"+a).slideToggle("fast",function(){$("#"+displaymode+"_slide"+a).is(":visible")?($(".game-control-close").show(),$("#"+displaymode+"slidebtn"+a).addClass("active")):($(".game-control-close").hide(),$(".button-1").removeClass("active"))}));var c="";a==1?c="ViewGameTracker":
a==2?c="ViewFriendsScores":a==3?c="ViewLeaderboard":a==4&&(c="ViewBonus");c&&_gaq.push(["_trackEvent","Clicks",c])}
function setupcarousel_mobile(a,c){var g=0,d=1,g=0,g=$("#b"+a+" > div").size();$(".option3 > .betselection").hide();c&&(c==1?d=LastPlayerDisplayed:c==2&&(d=LastTeamDisplayed));$(".option3 > #selection_"+d).show();if(a!=1&&a!=2||a==1&&LastPlayerDisplayed==1||a==2&&LastTeamDisplayed==1)$("#"+displaymode+"_pregamebet_"+a).find("#next").attr("onClick","showoption("+a+",2);return false;"),$("#"+displaymode+"_pregamebet_"+a).find("#prev").attr("onClick","showoption("+a+","+g+");return false;");g<=1?show_navbtns(a,
1):(show_navbtns(a,0),$("#"+displaymode+"_pregamebet_"+a).find("#betnum").html(d+"/"+g))}
function setupcarousel_web(a,c){var g=0,d=1,b=0;$(".option3").each(function(){try{b="b"+a;g=$("#"+b+" > div").size();$("#"+b+" > .betselection").hide();c&&(c==1?d=LastPlayerDisplayed:c==2&&(d=LastTeamDisplayed));$("#"+b+" > #selection_1").show();if(a!=1&&a!=2||a==1&&LastPlayerDisplayed==1||a==2&&LastTeamDisplayed==1)$("#"+displaymode+"_pregamebet_"+a).find(".nextbet").attr("onClick","showoption("+a+",2);return false;"),$("#"+displaymode+"_pregamebet_"+a).find(".prevbet").attr("onClick","showoption("+
a+","+g+");return false;");g<=1?show_navbtns(a,1):(show_navbtns(a,0),$("#"+displaymode+"_pregamebet_"+a).find(".betnum").html("1/"+g));d+=1;a+=1}catch(f){console.log(f)}})}
function show_navbtns(a,c){displaymode=="m"?c==0?($("#"+displaymode+"_pregamebet_"+a).find("#next").show(),$("#"+displaymode+"_pregamebet_"+a).find("#prev").show()):($("#"+displaymode+"_pregamebet_"+a).find("#next").hide(),$("#"+displaymode+"_pregamebet_"+a).find("#prev").hide()):c==0?($("#"+displaymode+"_pregamebet_"+a).find(".nextbet").show(),$("#"+displaymode+"_pregamebet_"+a).find(".prevbet").show()):($("#"+displaymode+"_pregamebet_"+a).find(".nextbet").hide(),$("#"+displaymode+"_pregamebet_"+
a).find(".prevbet").hide())}
function showoption(a,c){a==1?LastPlayerDisplayed=c:a==2&&(LastTeamDisplayed=c);var g=1,g=a,d=c+1,b=c-1,f=1,f="b"+g,h=$("#"+f+" > div").size();c==h&&(d="1");b==0&&(b=h);displaymode=="m"?($(".betselection").hide(),$(".option3 > #selection_"+c).show(),$("#"+displaymode+"_pregamebet_"+g).find("#betnum").html(c+"/"+h),$("#"+displaymode+"_pregamebet_"+g).find("#next").attr("onClick","showoption("+g+","+d+");return false;"),$("#"+displaymode+"_pregamebet_"+g).find("#prev").attr("onClick","showoption("+
g+","+b+");return false;")):($("#"+f+" > .betselection").hide(),$("#"+f+" > #selection_"+c).show(),$("#"+displaymode+"_pregamebet_"+g).find(".betnum").html(c+"/"+h),$("#"+displaymode+"_pregamebet_"+g).find(".nextbet").attr("onClick","showoption("+g+","+d+");return false;"),$("#"+displaymode+"_pregamebet_"+g).find(".prevbet").attr("onClick","showoption("+g+","+b+");return false;"))}var numofpregamebets=8;
function shownextbet(a){var c=a+1,g;c==1?g=1:c==2&&(g=2);$("#"+displaymode+"_pregamebet_"+a).hide(10);$("#"+displaymode+"_pregamebet_"+c).show(10,function(){displaymode=="m"?setupcarousel_mobile(c,g):setupcarousel_web(c,g)});c==numofpregamebets?$(".next").hide():($(".next").removeAttr("style"),$(".next").attr("onClick","shownextbet("+c+");return false;"));$(".prev").show();$(".prev").attr("onClick","showprevbet("+a+");return false;")}
function showprevbet(a){var c=a+1,g=a-1,d;a==1?d=1:a==2&&(d=2);$("#"+displaymode+"_pregamebet_"+c).hide(10);$("#"+displaymode+"_pregamebet_"+a).show(10,function(){displaymode=="m"?setupcarousel_mobile(c,d):setupcarousel_web(c,d)});$(".next").show();$(".next").attr("onClick","shownextbet("+a+");return false;");g==0?$(".prev").hide():$(".prev").attr("onClick","showprevbet("+g+");return false;")}
$(document).ready(function(){$("#"+displaymode+"_league_menu a").click(function(){$("#"+displaymode+"_league_menu a").removeClass("activebtn");$(this).attr("class","activebtn")});bouncenotification();setTimeout(function(){window.scrollTo(0,1)},100);$(".panel").hide();$(".loading").hide();$("#panel1").show();$(".tab1 a").attr("class","current");$("[id^=tab_]").click(function(){var a=$(this).attr("id").split("_")[1];$(".panel").hide();$(".coda-nav a").removeAttr("class");$("#panel"+a).fadeIn("fast");
$(".tab"+a+" a").attr("class","current");a==3&&userLeague.GetFriendsLeaderBoard();a==4?userLeague&&$("#"+displaymode+"_leaguestandings_1").css("display")=="block"&&userLeague.GetLeagueTable(userLeague.id,userLeague.name,null,userLeague.creater_Id,userLeague.num_MembersInLeague,"DontDisplayLoadingGif",null,null):a==5&&(bootroomused=1);return!1})});function showslide(a){$(".howtoslide").hide();$("#"+displaymode+"_howtoslide"+a).fadeIn("slow");$("body").scrollTop(0)}
function showpenos(){$(".pitch-container").fadeOut("fast",function(){$(".peno-container").fadeIn("slow");$(".penalty-score").fadeIn("slow")})}function openCoachmarks(){$(".definitionlabel").html("<strong>Help</strong><br />Tap ? for more info");$("#"+displaymode+"_coachmarks").show()}function showdefinition(a){$(".definitionlabel").html(a)}function closeCoachmarks(){$("#"+displaymode+"_coachmarks").hide()}
function friend_notification(a,c){try{var g=$("#"+displaymode+"_friend_notification"),d;d=a.indexOf("http")==0?a:facebookprofilepicurl+a;g.append('<div clas="notification_wrapper"><img src="'+d+'" border="0" alt="Profile Pic" /><span class="tick"></span><span>'+c+"</span></div>");g.show();g.animate({top:"0px"},1E3).delay(2E3).animate({top:"-50px"},500,function(){g.hide();g.html("")})}catch(b){}}
function show_registration(){$("#"+displaymode+"_registration_form").show();$("#"+displaymode+"_confirm").hide();show_login()}function cancel_registration(){$("#"+displaymode+"_registration_form").hide();$("#"+displaymode+"_register").show();$("#"+displaymode+"_confirm").hide();$("#"+displaymode+"_login").hide();$("#"+displaymode+"_forgotpass").hide();$("#"+displaymode+"_login_tab").css({background:"#999"});$("#"+displaymode+"_register_tab").css({background:"#222"})}
function confirm_registration(){$("#"+displaymode+"_register").hide();$("#"+displaymode+"_confirm").fadeIn();$("#"+displaymode+"_registerdetails").html("");$("#"+displaymode+"_logindetails").html("");$("#"+displaymode+"_resenddetails").html("")}
function show_login(){$("#"+displaymode+"_passResent").hide();$("#"+displaymode+"_forgotpass").hide();$("#"+displaymode+"_register").hide();$("#"+displaymode+"_confirm").hide();$("#"+displaymode+"_login").fadeIn();$("#"+displaymode+"_login_tab").css({background:"#222"});$("#"+displaymode+"_register_tab").css({background:"#999"})}
function show_registerform(){$("#"+displaymode+"_login").hide();$("#"+displaymode+"_forgotpass").hide();$("#"+displaymode+"_register").fadeIn();$("#"+displaymode+"_login_tab").css({background:"#999"});$("#"+displaymode+"_register_tab").css({background:"#222"})}function forgot_pass(){$("#"+displaymode+"_login").hide();$("#"+displaymode+"_forgotpass").fadeIn()};var value1=-1,value2=-1;
function Bet(a,c,g,d){this.betid=0;this.eventid=a;this.eventdesc=null;this.fixtureid=c;this.amount=g;this.odds=0;this.newodds=null;this.userid=d;this.creditsremaining=this.betresult=this.betdescription=this.user=null;this.status=0;this.betcomplete=!1;this.creditsearned=0;this.newcredits=!1;this.eventtime=null;this.addamount=this.numattempts=0;this.incorrectOdds=this.incorrectEventID=null;this.numbetstounlockhigherlevel=this.numbetsplaced=this.unlockcredits=this.leagueid=0}
function pregamecalculate(a){var c,g=GetCurrentfixtureID();switch(a){case 3:value1=$("#betoption3").val();value2=$("#betoption4").val();if(isNaN(value1)||isNaN(value2)||!(value1>=0&&value2>=0)||!value1||!value2)c="You must enter a valid half time score!!";break;case 4:value1=$("#betoption5").val();value2=$("#betoption6").val();if(isNaN(value1)||isNaN(value2)||!(value1>=0&&value2>=0)||!value1||!value2)c="You must enter a valid full time score!!";break;case 5:value1=$("#betoption7").val();if(isNaN(value1)||
!(value1>=0)||!value1)c="You must enter a valid number!!";break;case 6:value1=$("#betoption8").val();if(isNaN(value1)||!(value1>=0)||!value1)c="You must enter a valid number!!";break;case 7:value1=$("#betoption9").val();if(isNaN(value1)||!(value1>=0)||!value1)c="You must enter a valid number!!";break;case 8:if(value1=$("#betoption10").val(),isNaN(value1)||!(value1>=0)||!value1)c="You must enter a valid number!!"}c?$("#calc"+a).html(c):(c=JSON.parse(window.sessionStorage.getItem("facebookuser")),$.ajax({url:WS_URL_ROOT+
"/Game/CalculatePreGame",type:"POST",data:"fbid="+a+"&userid="+c.id+"&fixtureid="+g+"&v1="+value1+"&v2="+value2,dataType:"html",error:function(a,b,c){AjaxFail("pregamecalculate",a,b,c)},success:function(c){c>0?$("#calc"+a).html("If correct you will win <strong>"+c+"</strong> Credits!!"):$("#calc"+a).html("Error calculating potential winnings.")}}))}
function placePreGameBets(){try{var a;try{a=JSON.parse(window.sessionStorage.getItem("pregamebets"))}catch(c){}GetRequestParam("f");var g=0;numPreGamesBetsJustPlaced=PreGamesBetsToPlace=0;if(a)for(var d=0;d<a.length;d++){var b=a[d];if(b.bm==0)if(b.fbid==1||b.fbid==9){var f=parseInt($("input:radio[name=bet"+b.fbid+"]:checked").val());if(f>0)for(var h=0;h<b.o.length;h++){var j=b.o[h];if(j.oid==f){j.soid=f;PreGamesBetsToPlace+=1;b.pb=1;placePreGameBet(b.fbid,j.soid,-1,-1);break}}}else switch(b.fbid){case 3:value1=
$("#betoption3").val();value2=$("#betoption4").val();if(!isNaN(value1)&&!isNaN(value2)&&value1>=0&&value2>=0&&value1&&value2)b.pb=1,b.v1=value1,b.v2=value2,PreGamesBetsToPlace+=1,placePreGameBet(b.fbid,-1,value1,value2);break;case 4:value1=$("#betoption5").val();value2=$("#betoption6").val();if(!isNaN(value1)&&!isNaN(value2)&&value1>=0&&value2>=0&&value1&&value2)b.pb=1,b.v1=value1,b.v2=value2,PreGamesBetsToPlace+=1,placePreGameBet(b.fbid,-1,value1,value2);break;case 5:value1=$("#betoption7").val();
if(!isNaN(value1)&&value1>=0&&value1)b.pb=1,b.v1=value1,PreGamesBetsToPlace+=1,placePreGameBet(b.fbid,-1,value1,value2);break;case 6:value1=$("#betoption8").val();if(!isNaN(value1)&&value1>=0&&value1)b.pb=1,b.v1=value1,PreGamesBetsToPlace+=1,placePreGameBet(b.fbid,-1,value1,value2);break;case 7:value1=$("#betoption9").val();if(!isNaN(value1)&&value1>=0&&value1)b.pb=1,b.v1=value1,PreGamesBetsToPlace+=1,placePreGameBet(b.fbid,-1,value1,value2);break;case 8:if(value1=$("#betoption10").val(),!isNaN(value1)&&
value1>=0&&value1)b.pb=1,b.v1=value1,PreGamesBetsToPlace+=1,placePreGameBet(b.fbid,-1,value1,value2)}else g+=1}}catch(k){logError("placePreGameBets",k)}$(".pregame-betpanel").hide()}
function placePreGameBet(a,c,g,d){var b=JSON.parse(window.sessionStorage.getItem("facebookuser"));$(".pregameclick").hide();$.ajax({url:WS_URL_ROOT+"/Game/PlacePreGameBet",type:"POST",data:"u="+b.id+"&fbid="+a+"&fboid="+c+"&value1="+g+"&value2="+d+"&f="+GetCurrentfixtureID()+"&fu="+b.fbuserid,error:function(a,b,c){AjaxFail("GetSteveItems",a,b,c)},success:function(a){a&&a>0&&(numPreGamesBetsJustPlaced+=1,numPreGamesBetsJustPlaced==PreGamesBetsToPlace&&($(".pregameclick").show(),numPreGamesBetsJustPlaced==
1?$(".GameFeedInfo").prepend("<b class='bettext'>1 Pre-Game Prediction was placed!!</b><br />"):$(".GameFeedInfo").prepend("<b class='bettext'>"+numPreGamesBetsJustPlaced+" Pre-Game Predictions were placed!!</b><br />"),a=parseInt($(".numPregame").html())+numPreGamesBetsJustPlaced,$(".numPregame").html(a),GetPreGameBetDetails(!0,!0)))}})}
function PreGameBetsPlaced(a,c){try{var g=0;if(a&&a.length>0){window.sessionStorage.setItem("pregamebets",$.toJSON(a));for(var d=GetRequestParam("f"),b=0;b<a.length;b++){var f=a[b];if(f.bm==!0){g+=1;for(var h="",j=0;j<f.o.length;j++){var k=f.o[j];if(k.soid>0){h=k.d;break}}f.fbid==5?localStorage.setItem("predictedFirstHalfFrees",d+"_"+h):f.fbid==6&&localStorage.setItem("predicted2ndHalfFrees",d+"_"+h);f.fbid==7?localStorage.setItem("predictedFirstHalfThrows",d+"_"+h):f.fbid==8&&localStorage.setItem("predicted2ndHalfThrows",
d+"_"+h)}}var m=parseInt(g)-parseInt(c);if(m>0){if(m==1)$(".GameFeedInfo").prepend("<b class='bettext'>"+m+" Pre-Game Prediction was placed!!</b><br />"),_gaq.push(["_trackEvent","PreGameBets","PreGameBetPlaced"]);else{$(".GameFeedInfo").prepend("<b class='bettext'>"+m+" Pre-Game Predictions were placed!!</b><br />");for(b=0;b<m;b++)_gaq.push(["_trackEvent","PreGameBets","PreGameBetPlaced"])}$(".numPregame").html(g);refreshScroller(GameFeedScroller,"GameFeedInfo")}}$(".pregameclick").show()}catch(q){logError("PreGameBetsPlaced",
q)}}
function ShowPreGameBets_mobile(a){try{for(var c=1;c<10;c++)$("#calc"+c).html("");c="<div class='pregameslides'>";c+="<div id='shownext_1' onClick='shownextbet(1);return false;' class='next button-alt'>Next Prediction <strong>&#8250;</strong></div>";c+="<div id='showprev_1' class='prev button-alt' style='display:none;'><strong>&#8249;</strong> Prev Prediction</div>";for(var g=0;g<a.length;g++){var d=a[g],b=g+1,c=b==1?c+"<div class='content' id='"+displaymode+"_pregamebet_"+b+"' style='display:block;'>":c+
"<div class='content' id='"+displaymode+"_pregamebet_"+b+"' style='display:none;'>",c=c+"<span class='betindicator'>"+b+" of "+a.length+"</span><div>";c+="<div class='pregame-bets'>";c=d.fbid==9&&d.bm==0&&d.open==!0?c+"<div class='bet-title'>"+d.d+"<br /><small><i>Click player image to make your selection!</i></small></div>":d.fbid==1&&d.bm==0&&d.open==!0?c+"<div class='bet-title'>"+d.d+"<br /><small><i>Click team image to make your selection!</i></small></div>":c+"<div class='bet-title'>"+d.d+"</div>";
if(d.bm==0)if(d.open==!0){c=c+"<div class='option3' id='b"+b+"'>";switch(d.fbid){case 1:for(var f=1,h=0;h<d.o.length;h++){var j=d.o[h],c=c+"<div class='betselection club' id='selection_"+f+"'><input type='radio' name='bet"+d.fbid+"' id='betoptionselect_c"+j.oid+"' value='"+j.oid+"' name='betoptionselect"+j.oid+"' class='betdesc'>";if(j.oid==1&&thisFixture.homecrest){var k;k=thisFixture.homecrest.indexOf("http://")>-1?thisFixture.homecrest:"/images/crests/"+thisFixture.homecrest;c=c+"<label for='betoptionselect_c"+
j.oid+"' onClick=\"$('#betoptionselect_c"+j.oid+"').attr('checked', 'checked');\"><img src='"+k+"' alt='"+j.d+"' /></label>"}else j.oid==2&&thisFixture.awaycrest?(k=thisFixture.awaycrest.indexOf("http://")>-1?thisFixture.awaycrest:"/images/crests/"+thisFixture.awaycrest,c=c+"<label for='betoptionselect_c"+j.oid+"' onClick=\"$('#betoptionselect_c"+j.oid+"').attr('checked', 'checked');\"><img src='"+k+"' alt='"+j.d+"' /></label>"):c=c+"<label for='betoptionselect_c"+j.oid+"' onClick=\"$('#betoptionselect_c"+
j.oid+"').attr('checked', 'checked');\">"+j.d+"</label>";c=c+"<span class='betwinnings'>WIN "+j.pw+"</span></div>";f+=1}break;case 9:f=1;for(h=0;h<d.o.length;h++)j=d.o[h],c=c+"<div class='betselection scorer' id='selection_"+f+"'><input type='radio' name='bet"+d.fbid+"' id='betoptionselect"+j.oid+"' value='"+j.oid+"' name='betoptionselect"+j.oid+"' class='betdesc'>",c=j.i?c+"<label for='betoptionselect"+j.oid+"' onClick=\"$('#betoptionselect"+j.oid+"').attr('checked', 'checked');\"><img src='"+j.i+
"' alt='"+j.d+"' /></label><span class='playerselection'>"+j.d+"</span>":c+"<label for='betoptionselect"+j.oid+"' onClick=\"$('#betoptionselect"+j.oid+"').attr('checked', 'checked');\">"+j.d+"</label>",c=c+"<span class='betwinnings'>WIN "+j.pw+"</span></div>",f+=1;break;case 3:c=c+thisFixture.hometeam+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+thisFixture.awayteam+"<br/><input type='number' min='0' name='homescrore2' id='betoption3' size='10' class='pregameinput' />  -  <input type='number' min='0' name='awayscrore2' id='betoption4' size='10' class='pregameinput' />";
c=c+"<span class='calc-button' onclick='pregamecalculate("+d.fbid+"); return false;'>Calculate winnings</span>";c=c+"<span class='calc-winnings' id='calc"+d.fbid+"'></span>";break;case 4:c=c+thisFixture.hometeam+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+thisFixture.awayteam+"<br/><input type='number' min='0' name='homescrore3' id='betoption5' size='10' class='pregameinput' />  -  <input type='number' min='0' name='awayscrore3' id='betoption6' size='10' class='pregameinput' />";c=c+"<span class='calc-button' onclick='pregamecalculate("+
d.fbid+"); return false;'>Calculate winnings</span>";c=c+"<span class='calc-winnings' id='calc"+d.fbid+"'></span>";break;case 5:c+="<input type='number' min='0' name='free' id='betoption7' size='10' class='pregameinput' />";c=c+"<span class='calc-button' onclick='pregamecalculate("+d.fbid+"); return false;'>Calculate winnings</span>";c=c+"<span class='calc-winnings' id='calc"+d.fbid+"'></span>";break;case 6:c+="<input type='number' min='0' name='free' id='betoption8' size='10' class='pregameinput' />";
c=c+"<span class='calc-button' onclick='pregamecalculate("+d.fbid+"); return false;'>Calculate winnings</span>";c=c+"<span class='calc-winnings' id='calc"+d.fbid+"'></span>";break;case 7:c+="<input type='number' min='0' name='throw' id='betoption9' size='10' class='pregameinput' />";c=c+"<span class='calc-button' onclick='pregamecalculate("+d.fbid+"); return false;'>Calculate winnings</span>";c=c+"<span class='calc-winnings' id='calc"+d.fbid+"'></span>";break;case 8:c+="<input type='number' name='throw' id='betoption10' size='10' class='pregameinput' />",
c=c+"<span class='calc-button' onclick='pregamecalculate("+d.fbid+"); return false;'>Calculate winnings</span>",c=c+"<span class='calc-winnings' id='calc"+d.fbid+"'></span>"}c+="</div>";c+="<div class='spacer'></div><br clear='all' />"}else c+="<div class='pregame-betmade'>Sorry, the game has kicked off, you can no longer make a pre-game prediction.</div>";else{(d.fbid==9||d.fbid==1)&&$("#click"+d.fbid).hide();for(h=0;h<d.o.length;h++)if(j=d.o[h],j.soid==j.oid){var m=parseInt(j.pw),c=c+"<div class='pregame-betmade'>You Predicted that the result would be <br /> <span class='pregame-betmade-desc'>"+
j.sd+"</span>";j.s==0?c=c+"<br /><strong>You stand to win "+m+" credits, Good Luck!</strong>":j.s==1?c=c+"<br /><strong>Congratulations, You won "+j.pw+" credits!</strong>":j.s==-1&&(c+="<br /><strong>Hard luck, Your Prediction was incorrect!</strong>");c+="</div>";break}}c+="<div id='next'>&#9654;</div><div id='prev'>&#9664;</div><div id='betnum'></div></div>";c+="</div>";c+="</div>"}c+="</div>";$("#"+displaymode+"_BetHTML").html(c);$(".pregame-betpanel").show();setupcarousel_mobile(1)}catch(q){logError("ShowPreGameBets",
q)}}
function ShowPreGameBets_web(a){try{for(var c=1;c<10;c++)$("#calc"+c).html("");for(var c="<div class='pregameslides'>",g=0;g<a.length;g++){var d=a[g],b=g+1,c=c+"<div class='content' id='"+displaymode+"_pregamebet_"+b+"' style='display:block;'>";c+="<div>";c+="<div class='pregame-bets'>";c=d.fbid==9&&d.bm==0&&d.open==!0?c+"<div class='bet-title'>"+d.d+"<br /><small><i>Click player image to make your selection!</i></small></div>":d.fbid==1&&d.bm==0&&d.open==!0?c+"<div class='bet-title'>"+d.d+"<br /><small><i>Click team image to make your selection!</i></small></div>":c+
"<div class='bet-title'>"+d.d+"</div>";if(d.bm==0)if(d.open==!0){c=c+"<div class='option3' id='b"+b+"'>";switch(d.fbid){case 1:for(var f=1,h=0;h<d.o.length;h++){var j=d.o[h],c=c+"<div class='betselection club' id='selection_"+f+"'><input type='radio' name='bet"+d.fbid+"' id='betoptionselect_c"+j.oid+"' value='"+j.oid+"' class='betdesc'>";if(j.oid==1&&thisFixture.homecrest){var k;k=thisFixture.homecrest.indexOf("http://")>-1?thisFixture.homecrest:"/images/crests/"+thisFixture.homecrest;c=c+"<label for='betoptionselect_c"+
j.oid+"' onClick=\"$('#betoptionselect_c"+j.oid+"').attr('checked', 'checked');\"><img src='"+k+"' alt='"+j.d+"' /></label>"}else j.oid==2&&thisFixture.awaycrest?(k=thisFixture.awaycrest.indexOf("http://")>-1?thisFixture.awaycrest:"/images/crests/"+thisFixture.awaycrest,c=c+"<label for='betoptionselect_c"+j.oid+"' onClick=\"$('#betoptionselect_c"+j.oid+"').attr('checked', 'checked');\"><img src='"+k+"' alt='"+j.d+"' /></label>"):c=c+"<label for='betoptionselect_c"+j.oid+"' onClick=\"$('#betoptionselect_c"+
j.oid+"').attr('checked', 'checked');\">"+j.d+"</label>";c=c+"<span class='betwinnings'>WIN "+j.pw+"</span></div>";f+=1}break;case 9:f=1;for(h=0;h<d.o.length;h++)j=d.o[h],c=c+"<div class='betselection scorer' id='selection_"+f+"'><input type='radio' name='bet"+d.fbid+"' id='betoptionselect"+j.oid+"' value='"+j.oid+"' name='betoptionselect"+j.oid+"' class='betdesc'>",c=j.i?c+"<label for='betoptionselect"+j.oid+"' onClick=\"$('#betoptionselect"+j.oid+"').attr('checked', 'checked');\"><img src='"+j.i+
"' alt='"+j.d+"' /></label><span class='playerselection'>"+j.d+"</span>":c+"<label for='betoptionselect"+j.oid+"' onClick=\"$('#betoptionselect"+j.oid+"').attr('checked', 'checked');\">"+j.d+"</label>",c=c+"<span class='betwinnings'>WIN "+j.pw+"</span></div>",f+=1;break;case 3:c=c+thisFixture.hometeam+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+thisFixture.awayteam+"<br/><input type='number' min='0' name='homescrore2' id='betoption3' size='10' class='pregameinput' />  -  <input type='number' min='0' name='awayscrore2' id='betoption4' size='10' class='pregameinput' />";
c=c+"<span class='calc-button' onclick='pregamecalculate("+d.fbid+"); return false;'>Calculate winnings</span>";c=c+"<span class='calc-winnings' id='calc"+d.fbid+"'></span>";break;case 4:c=c+thisFixture.hometeam+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+thisFixture.awayteam+"<br/><input type='number' min='0' name='homescrore3' id='betoption5' size='10' class='pregameinput' />  -  <input type='number' min='0' name='awayscrore3' id='betoption6' size='10' class='pregameinput' />";c=c+"<span class='calc-button' onclick='pregamecalculate("+
d.fbid+"); return false;'>Calculate winnings</span>";c=c+"<span class='calc-winnings' id='calc"+d.fbid+"'></span>";break;case 5:c+="<input type='number' min='0' name='free' id='betoption7' size='10' class='pregameinput' />";c=c+"<span class='calc-button' onclick='pregamecalculate("+d.fbid+"); return false;'>Calculate winnings</span>";c=c+"<span class='calc-winnings' id='calc"+d.fbid+"'></span>";break;case 6:c+="<input type='number' min='0' name='free' id='betoption8' size='10' class='pregameinput' />";
c=c+"<span class='calc-button' onclick='pregamecalculate("+d.fbid+"); return false;'>Calculate winnings</span>";c=c+"<span class='calc-winnings' id='calc"+d.fbid+"'></span>";break;case 7:c+="<input type='number' min='0' name='throw' id='betoption9' size='10' class='pregameinput' />";c=c+"<span class='calc-button' onclick='pregamecalculate("+d.fbid+"); return false;'>Calculate winnings</span>";c=c+"<span class='calc-winnings' id='calc"+d.fbid+"'></span>";break;case 8:c+="<input type='number' name='throw' id='betoption10' size='10' class='pregameinput' />",
c=c+"<span class='calc-button' onclick='pregamecalculate("+d.fbid+"); return false;'>Calculate winnings</span>",c=c+"<span class='calc-winnings' id='calc"+d.fbid+"'></span>"}c+="</div>";c+="<div class='spacer'></div><br clear='all' />"}else c+="<div class='pregame-betmade'>Sorry, the game has kicked off, you can no longer make a pre-game prediction.</div>";else for(h=0;h<d.o.length;h++)if(j=d.o[h],j.soid==j.oid){var m=parseInt(j.pw),c=c+"<div class='pregame-betmade'>You Predicted that the result would be <br /> <span class='pregame-betmade-desc'>"+
j.sd+"</span>";j.s==0?c=c+"<br /><strong>You stand to win "+m+" credits, Good Luck!</strong>":j.s==1?c=c+"<br /><strong>Congratulations, You won "+j.pw+" credits!</strong>":j.s==-1&&(c+="<br /><strong>Hard luck, Your Prediction was incorrect!</strong>");c+="</div>";break}c+="<div class='nextbet'>&#9654;</div><div class='prevbet'>&#9664;</div><div class='betnum'></div>";c+="</div></div>";c+="</div>"}c+="</div>";$("#"+displaymode+"_BetHTML").html(c);$(".pregame-betpanel").show();setupcarousel_web(1)}catch(q){logError("ShowPreGameBets",
q),console.log(q)}}function updatePreGamebets(a,c,g){try{CreditsWon=0,checkAndUpdateFirstScoreBets(a,c,g),DoHalfTimebets(a,c,g),DoFullTimebets(a,c,g),CreditsWon>0&&GetUsersNewBalanceAndNotifyFriends(CreditsWon)}catch(d){logError("updatePreGamebets",d)}}
function GetUsersNewBalanceAndNotifyFriends(a){var c=JSON.parse(window.sessionStorage.getItem("facebookuser")),g=GetRequestParam("f"),d;try{d=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"))}catch(b){}if(d)for(var f=0;f<=d.length-1;f++)if(d[f].F==c.fbuserid){d[f].S=parseInt(d[f].S)+parseInt(a);window.sessionStorage.setItem("listOfFriendsScores",$.toJSON(d));ReOrderFriendsScoresBasedOnCurrentScore();NotifyFriendsOfNewBalanceForThisGame(g,c.fbuserid,d[f].S);break}}
function DoFullTimebets(a,c,g){a==14&&(checkAndUpdateFulltimeScore(a,c,g),checkAndUpdateSecondHalfFreeKicks(),checkAndUpdateSecondHalfThrows())}
function checkAndUpdateSecondHalfFreeKicks(){try{var a;try{a=JSON.parse(window.sessionStorage.getItem("pregamebets"))}catch(c){}for(var g=0;g<a.length;g++){var d=a[g];if(d.bm==!0&&d.bs==0&&d.fbid==6)for(var b=0;b<d.o.length;b++){var f=d.o[b];if(f.soid==f.oid){if(thisFixture.numfreessecondhalf<0)thisFixture.numfreessecondhalf=0;if(f.sd==thisFixture.numfreessecondhalf){d.bs=1;f.s=1;f.w=parseInt(f.pw);$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Prediction : "+thisFixture.numfreessecondhalf+
" free-kicks in the second half. You win "+f.w+" credits!!</b><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");var h=JSON.parse(window.sessionStorage.getItem("facebookuser"));h.credits+=f.w;window.sessionStorage.setItem("facebookuser",$.toJSON(h));$(".credits").html(h.credits);CreditsWon+=f.w;_gaq.push(["_trackEvent","PreGameBets","PreGameWin","",parseInt(f.w)])}else d.bs=-1,f.s=-1,f.w=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Prediction : "+thisFixture.numfreessecondhalf+
" free-kicks in the second half. You lose!!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"),_gaq.push(["_trackEvent","PreGameBets","PreGameLoss","",parseInt(f.a)]);window.sessionStorage.setItem("pregamebets",$.toJSON(a));break}}}}catch(j){logError("checkAndUpdateHalfTimeFreeKicks",j)}}
function checkAndUpdateSecondHalfThrows(){try{var a;try{a=JSON.parse(window.sessionStorage.getItem("pregamebets"))}catch(c){}for(var g=0;g<a.length;g++){var d=a[g];if(d.bm==!0&&d.bs==0&&d.fbid==8)for(var b=0;b<d.o.length;b++){var f=d.o[b];if(f.soid==f.oid){if(thisFixture.numthrowssecondhalf<0)thisFixture.numthrowssecondhalf=0;if(f.sd==thisFixture.numthrowssecondhalf){d.bs=1;f.s=1;f.w=parseInt(f.pw);$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Prediction : "+thisFixture.numthrowssecondhalf+
" throws in the second half. You win "+f.w+" credits!!</b><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");var h=JSON.parse(window.sessionStorage.getItem("facebookuser"));h.credits+=f.w;window.sessionStorage.setItem("facebookuser",$.toJSON(h));$(".credits").html(h.credits);CreditsWon+=f.w;_gaq.push(["_trackEvent","PreGameBets","PreGameWin","",parseInt(f.w)])}else d.bs=-1,f.s=-1,f.w=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Prediction : "+thisFixture.numthrowssecondhalf+" throws in the second half. You lose!!!</b><br />"),
refreshScroller(GameFeedScroller,"GameFeedInfo"),_gaq.push(["_trackEvent","PreGameBets","PreGameLoss","",parseInt(f.a)]);window.sessionStorage.setItem("pregamebets",$.toJSON(a));break}}}}catch(j){logError("checkAndUpdateHalfTimeThrows",j)}}
function checkAndUpdateFulltimeScore(a,c,g){try{var a=c+"-"+g,d;try{d=JSON.parse(window.sessionStorage.getItem("pregamebets"))}catch(b){}for(c=0;c<d.length;c++){var f=d[c];if(f.bm==!0&&f.bs==0&&f.fbid==4)for(g=0;g<f.o.length;g++){var h=f.o[g];if(h.soid==h.oid){if(h.sd==a){f.bs=1;h.s=1;h.w=parseInt(h.pw);$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Prediction : Full Time Score is "+a+". You win "+h.w+" credits!!</b><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");var j=JSON.parse(window.sessionStorage.getItem("facebookuser"));
j.credits+=h.w;window.sessionStorage.setItem("facebookuser",$.toJSON(j));$(".credits").html(j.credits);CreditsWon+=h.w;_gaq.push(["_trackEvent","PreGameBets","PreGameWin","",parseInt(h.w)])}else f.bs=-1,h.s=-1,h.w=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Prediction : Full Time Score is "+a+". You lose!!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"),_gaq.push(["_trackEvent","PreGameBets","PreGameLoss","",parseInt(h.a)]);window.sessionStorage.setItem("pregamebets",
$.toJSON(d));break}}}}catch(k){logError("checkAndUpdateFulltimeScore",k)}}function DoHalfTimebets(a,c,g){a==12&&(checkAndUpdateHalftimeScore(a,c,g),checkAndUpdateHalfTimeFreeKicks(),checkAndUpdateHalfTimeThrows())}
function checkAndUpdateHalfTimeFreeKicks(){try{var a;try{a=JSON.parse(window.sessionStorage.getItem("pregamebets"))}catch(c){}for(var g=0;g<a.length;g++){var d=a[g];if(d.bm==!0&&d.bs==0&&d.fbid==5)for(var b=0;b<d.o.length;b++){var f=d.o[b];if(f.soid==f.oid){if(thisFixture.numfreesfirsthalf<0)thisFixture.numfreesfirsthalf=0;if(f.sd==thisFixture.numfreesfirsthalf){d.bs=1;f.s=1;f.w=f.pw;$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Prediction : "+thisFixture.numfreesfirsthalf+" free-kicks in the first half. You win "+
f.w+" credits!!</b><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");var h=JSON.parse(window.sessionStorage.getItem("facebookuser"));h.credits+=f.w;window.sessionStorage.setItem("facebookuser",$.toJSON(h));$(".credits").html(h.credits);CreditsWon+=f.w;_gaq.push(["_trackEvent","PreGameBets","PreGameWin","",parseInt(f.w)])}else d.bs=-1,f.s=-1,f.w=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Prediction : "+thisFixture.numfreesfirsthalf+" free-kicks in the first half. You lose!!!</b><br />"),
refreshScroller(GameFeedScroller,"GameFeedInfo"),_gaq.push(["_trackEvent","PreGameBets","PreGameLoss","",parseInt(f.a)]);window.sessionStorage.setItem("pregamebets",$.toJSON(a));break}}}}catch(j){logError("checkAndUpdateHalfTimeFreeKicks",j)}}
function checkAndUpdateHalfTimeThrows(){try{var a;try{a=JSON.parse(window.sessionStorage.getItem("pregamebets"))}catch(c){}for(var g=0;g<a.length;g++){var d=a[g];if(d.bm==!0&&d.bs==0&&d.fbid==7)for(var b=0;b<d.o.length;b++){var f=d.o[b];if(f.soid==f.oid){if(thisFixture.numthrowsfirsthalf<0)thisFixture.numthrowsfirsthalf=0;if(f.sd==thisFixture.numthrowsfirsthalf){d.bs=1;f.s=1;f.w=f.pw;$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Prediction : "+thisFixture.numthrowsfirsthalf+" throws in the first half. You win "+
f.w+" credits!!</b><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");var h=JSON.parse(window.sessionStorage.getItem("facebookuser"));h.credits+=f.w;window.sessionStorage.setItem("facebookuser",$.toJSON(h));$(".credits").html(h.credits);CreditsWon+=f.w;_gaq.push(["_trackEvent","PreGameBets","PreGameWin","",parseInt(f.w)])}else d.bs=-1,f.s=-1,f.w=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Prediction : "+thisFixture.numthrowsfirsthalf+" throws in the first half. You lose!!!</b><br />"),
refreshScroller(GameFeedScroller,"GameFeedInfo"),_gaq.push(["_trackEvent","PreGameBets","PreGameLoss","",parseInt(f.a)]);window.sessionStorage.setItem("pregamebets",$.toJSON(a));break}}}}catch(j){logError("checkAndUpdateHalfTimethrows",j)}}
function checkAndUpdateHalftimeScore(a,c,g){try{var a=c+"-"+g,d;try{d=JSON.parse(window.sessionStorage.getItem("pregamebets"))}catch(b){}for(c=0;c<d.length;c++){var f=d[c];if(f.bm==!0&&f.bs==0&&f.fbid==3)for(g=0;g<f.o.length;g++){var h=f.o[g];if(h.soid==h.oid){if(h.sd==a){f.bs=1;h.s=1;h.w=h.pw;$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Prediction : Half Time Score is "+a+". You win "+h.w+" credits!!!</b><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");var j=JSON.parse(window.sessionStorage.getItem("facebookuser"));
j.credits+=h.w;window.sessionStorage.setItem("facebookuser",$.toJSON(j));$(".credits").html(j.credits);CreditsWon+=h.w;_gaq.push(["_trackEvent","PreGameBets","PreGameWin","",parseInt(h.w)])}else f.bs=-1,h.s=-1,h.w=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Prediction : Half Time Score is "+a+". You lose!!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"),_gaq.push(["_trackEvent","PreGameBets","PreGameLoss","",parseInt(h.a)]);window.sessionStorage.setItem("pregamebets",
$.toJSON(d));break}}}}catch(k){logError("checkAndUpdateHalftimeScore",k)}}
function checkAndUpdateFirstScoreBets(a,c,g){try{if((a==6||a==4)&&(c==1&&g==0||c==0&&g==1)){var d;try{d=JSON.parse(window.sessionStorage.getItem("pregamebets"))}catch(b){}for(c=0;c<d.length;c++){var f=d[c];if(f.bm==!0&&f.bs==0&&f.fbid==1){for(var h=0;h<f.o.length;h++){var j=f.o[h];if(j.oid==1){if(a==6){if(j.soid==1){f.bs=1;j.s=1;j.w=parseInt(j.pw);$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Prediction : "+j.d+" score first. You win "+j.w+" credits!!!</b><br />");refreshScroller(GameFeedScroller,
"GameFeedInfo");var k=JSON.parse(window.sessionStorage.getItem("facebookuser"));k.credits+=j.w;window.sessionStorage.setItem("facebookuser",$.toJSON(k));$(".credits").html(k.credits);CreditsWon+=j.w;_gaq.push(["_trackEvent","PreGameBets","PreGameWin","",parseInt(j.w)])}else f.bs=-1,j.s=-1,j.w=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Prediction : "+j.d+" score first. You lose!!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"),_gaq.push(["_trackEvent","PreGameBets","PreGameLoss",
"",parseInt(j.a)]);break}}else if(j.oid==2&&a==4){j.soid==2?(f.bs=1,j.s=1,j.w=parseInt(j.pw),$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Prediction : "+j.d+" score first. You win "+j.w+" credits!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"),k=JSON.parse(window.sessionStorage.getItem("facebookuser")),k.credits+=j.w,window.sessionStorage.setItem("facebookuser",$.toJSON(k)),$(".credits").html(k.credits),CreditsWon+=j.w,_gaq.push(["_trackEvent","PreGameBets","PreGameWin",
"",parseInt(j.w)])):(f.bs=-1,j.s=-1,j.w=0,$(".GameFeedInfo").prepend("<b class='losetext'>Pre-Game Prediction : "+j.d+" score first. You lose!!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"),_gaq.push(["_trackEvent","PreGameBets","PreGameLoss","",parseInt(j.a)]));break}}window.sessionStorage.setItem("pregamebets",$.toJSON(d))}if(f.bm==!0&&f.bs==0&&f.fbid==9){for(var g=0,m,h=0;h<f.o.length;h++){j=f.o[h];if(!m)m=j.sd;if(j.d==LastGoalScorer){if(j.sd==LastGoalScorer)f.bs=1,j.s=1,j.w=parseInt(j.pw),
$(".GameFeedInfo").prepend("<b class='wintext'>Pre-Game Prediction : "+LastGoalScorer+" is the first goalscorer. You win "+j.w+" credits!!!</b><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"),k=JSON.parse(window.sessionStorage.getItem("facebookuser")),k.credits+=j.w,window.sessionStorage.setItem("facebookuser",$.toJSON(k)),$(".credits").html(k.credits),CreditsWon+=j.w,_gaq.push(["_trackEvent","PreGameBets","PreGameWin","",parseInt(j.w)]);else{f.bs=-1;j.s=-1;j.w=0;var q="",q=LastGoalScorer?
"<b class='losetext'>Pre-Game Prediction : "+LastGoalScorer+"  is the first goalscorer. You lose!!!</b><br />":"<b class='losetext'>Pre-Game Prediction : You got first goalscorer wrong. You lose!!!</b><br />";$(".GameFeedInfo").prepend(q);refreshScroller(GameFeedScroller,"GameFeedInfo");_gaq.push(["_trackEvent","PreGameBets","PreGameLoss","",parseInt(j.a)])}g=1;break}}if(!LastGoalScorer&&g==0)for(h=0;h<f.o.length;h++)if(j=f.o[h],j.sd==j.d){f.bs=-1;j.s=-1;j.w=0;q="";q=LastGoalScorer?"<b class='losetext'>Pre-Game Prediction : "+
LastGoalScorer+"  is the first goalscorer. You lose!!!</b><br />":"<b class='losetext'>Pre-Game Prediction : You got first goalscorer wrong. You lose!!!</b><br />";$(".GameFeedInfo").prepend(q);refreshScroller(GameFeedScroller,"GameFeedInfo");_gaq.push(["_trackEvent","PreGameBets","PreGameLoss","",parseInt(j.a)]);break}window.sessionStorage.setItem("pregamebets",$.toJSON(d))}}}}catch(n){logError("UpdateFirstTeamToScore",n)}}function closePreGamepanel(){$(".pregame-betpanel").hide()}
function RefreshBetScrollers(){try{if(listOfPreGameBetScrollers&&listOfPreGameBetScrollers.length>0)for(var a=0;a<listOfPreGameBetScrollers.length;a++)listOfPreGameBetScrollers[a].refresh();else for(a=0;a<listOfPreGameBetScrollerNames.length;a++){var c=new iScroll(listOfPreGameBetScrollerNames[a],{hScrollbar:!1,vScrollbar:!1});listOfPreGameBetScrollers.push(c);c.refresh()}}catch(g){logError("RefreshBetScrollers",g)}}
function GetPreGameBetDetails(a,c){listOfPreGameBetScrollers=[];listOfPreGameBetScrollerNames=[];LastTeamDisplayed=LastPlayerDisplayed=1;c||(WeAreCurrentlyShowingLeagueTable()==!0&&userLeague.UpdateCurrentLeaderboard(1),WeAreCurrentlyShowingFriendsLeagueTable==!0&&userLeague.GetFriendsLeaderBoard());try{var g=GetRequestParam("f");if(g>0){var d=JSON.parse(window.sessionStorage.getItem("facebookuser"));d&&$.ajax({url:WS_URL_ROOT+"/Game/GetFixtureBetDetails",type:"POST",data:"f="+g+"&u="+d.id+"&fu="+
d.fbuserid,error:function(a,b,c){AjaxFail("GetGameBetDetails",a,b,c)},success:function(b){if(b&&b.length>0){numofpregamebets=b.length;window.sessionStorage.setItem("pregamebets",$.toJSON(b));a||(displaymode=="m"?ShowPreGameBets_mobile(b):ShowPreGameBets_web(b));for(var c=0,d=0;d<b.length;d++)b[d].bm==!0&&(c+=1);$(".numPregame").html(c)}}})}}catch(b){logError("GetGameBetDetails",b)}};function User(a){this.userid=0;this.fbuserid=a.id;this.name=a.name;this.first_name=a.first_name;this.last_name=a.last_name;this.link=a.link;this.username=a.username;this.locale=a.locale;this.gender=a.gender;this.loggedIn=!1;this.credits=0;this.birthday=a.birthday;this.email=a.email;this.timezone=a.timezone;this.updated_time=a.updated_time;this.verified=a.verified;this.profilepic="https://graph.facebook.com/"+a.id+"/picture";this.currentfixtureid=0;this.extradata=null;this.level=0}
function FriendUser(a,c){this.userid=0;this.fbuserid=a;this.name=c;this.gender=this.locale=this.username=this.link=this.last_name=this.first_name=null;this.loggedIn=!1;this.credits=0;this.profilepic=this.verified=this.updated_time=this.timezone=this.email=this.birthday=null};var accessToken=null,LoginDetailsLoaded=0,GameID=0;function DisplayAdminDivs(){$("#gamestatus").show()}
function getCurrencyDetails(){var a;try{a=JSON.parse(window.sessionStorage.getItem("facebookuser"))}catch(c){}if(!a.CurrencyData)try{var g="https://graph.facebook.com/"+a.fbuserid+"?fields=currency,payment_test_group&access_token="+encodeURIComponent(accessToken);$.ajax({url:g,type:"GET",error:function(a,c,d){AjaxFail("getCurrencyDetails",a,c,d)},success:function(b){a.CurrencyData=b.currency;a.payment_test_group=b.payment_test_group;window.sessionStorage.setItem("facebookuser",$.toJSON(a))}})}catch(d){logError("getCurrencyDetails.API",
d)}}function checkIfUserInPrivateBrowsing(){var a=0,c=window.sessionStorage;try{c.setItem("qeTest","1"),c.removeItem("qeTest")}catch(g){g.code===DOMException.QUOTA_EXCEEDED_ERR&&c.length===0&&(a=1)}if(a==1)window.location=location.protocol+"//"+location.host+"/Support?ei=pb"}
function CheckForFacebookRequests(a){var c=GetRequestParam("request_ids");if(c){window.sessionStorage.setItem("fbs",1);var g;try{g=JSON.parse(window.sessionStorage.getItem("facebookuser"))}catch(d){}var b=decodeURIComponent(c).split(",");if(b&&b.length>0)for(var f=0;f<b.length;f++){var h;g&&g.id?(h=b[f]+"_"+g.fbuserid,deleteRequest(h)):getUserIDAndDeleteRequest(b[f])}a==1&&GetFixtureIdFromFbRequest(c)}}function getMultipleRequests(a){FB.api("",{ids:a},function(a){console.log(a)})}
function getUserIDAndDeleteRequest(a){FB.api(a,function(c){try{c&&c.to&&c.to.id&&deleteRequest(a+"_"+c.to.id)}catch(g){logError("getUserIDAndDeleteRequest",g)}})}function deleteRequest(a){FB.api(a,"delete",function(){})}
function GetFixtureIdFromFbRequest(a){try{var c=window.sessionStorage.getItem("facebookuser");$.ajax({url:WS_URL_ROOT+"/Game/GetFixtureIdFromFbRequest",type:"POST",data:"fbRequest="+a+"&u="+c.id+"&fu="+c.fbuserid,error:function(a,b,c){AjaxFail("GetFixtureIdFromFbRequest",a,b,c)},success:function(a){DropUserOnFixture(a)}})}catch(g){logError("GetFixtureIdFromFbRequest",g)}}
function DropUserOnFixture(a){try{if(typeof a!="undefined"&&a!=null&&a>0)window.location.href=location.protocol+"//"+location.host+"/Game/?fb_source=1&f="+a}catch(c){logError("DropUserOnFixture",c)}}
function UserHasFriendsPlayingThisGame(){var a=0;try{var c;try{c=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"))}catch(g){return 1}var d=JSON.parse(window.sessionStorage.getItem("facebookuser"));if(c)for(var b=0;b<=c.length-1;b++)if(c[b].F!=d.fbuserid){a=1;break}}catch(f){logError("UserHasFriends",f)}return a}
function GetFriends(){try{var a;try{a=JSON.parse(window.sessionStorage.getItem("facebookfriendlist"))}catch(c){}var g=-1;if(thisFixture)g=thisFixture.fixtureid;else{var d=GetRequestParam("f");d>0&&(g=d)}var b=JSON.parse(window.sessionStorage.getItem("facebookuser"));typeof a=="undefined"||a==null||a==""?$.ajax({url:WS_URL_ROOT+"/FacebookLogin/Handshake",type:"POST",data:{authCode:accessToken,u:b.id,fu:b.fbuserid,f:GetCurrentfixtureID()},error:function(a,b,c){AjaxFail("GetFriends",a,b,c)},success:function(a){try{window.sessionStorage.setItem("facebookfriendlist",
$.toJSON(a)),g>0&&(GetFriendsDetails(),ListenForFriendUpdates())}catch(b){logError("GetFriends_success",b)}}}):g>0&&$.ajax({url:WS_URL_ROOT+"/Game/GetUpdatedFriends",type:"POST",data:{u:b.id,fu:b.fbuserid,f:GetCurrentfixtureID()},error:function(a,b,c){AjaxFail("GetUpdatedFriends",a,b,c)},success:function(a){try{window.sessionStorage.setItem("facebookfriendlist",$.toJSON(a)),GetFriendsDetails(),ListenForFriendUpdates()}catch(b){logError("GetUpdatedFriends_success",b)}}})}catch(f){logError("GetFriends",
f)}}function GetFriendsDetails(){try{GetFriendsBetHistoryForThisGame(),userLeague.GetFriendsLeaderBoard()}catch(a){logError("GetFriendsDetails",a)}}
function GetFriendsBetHistoryForThisGame(){try{var a;try{a=JSON.parse(window.sessionStorage.getItem("facebookfriendlist"))}catch(c){}var g="";if(a)for(var d=0;d<a.length;d++)g=d==0?a[d].id:g+","+a[d].id;var b=JSON.parse(window.sessionStorage.getItem("facebookuser"));$.ajax({url:WS_URL_ROOT+"/Game/GetFriendsBetHistory",type:"POST",data:"FriendList="+g+"&f="+fixture+"&u="+b.id+"&fu="+b.fbuserid,dataType:"html",error:function(a,b,c){AjaxFail("GetFriendsBetHistoryForThisGame",a,b,c)},success:function(a){ProcessFriendsDetails(a)}})}catch(f){logError("GetFriendsBetHistoryForThisGame",
f)}}function ProcessFriendsDetails(a){try{var c=typeof a!="object"?JSON.parse(a):a,g=[],d="";if(typeof c!="undefined"&&c!=null){for(var b=0;b<c.length;b++){var f=c[b];d+=f.eventdesc;f.betid>0&&g.push(f)}displayFriendsDetals=="1"&&$(".FriendFeedInfo").html(d)}window.sessionStorage.setItem("listOfFriendsBets",$.toJSON(g))}catch(h){logError("ProcessFriendsDetails",h+"response is "+a)}}
function SetUpMainMenuLink(){var a=0;try{try{a=window.sessionStorage.getItem("fbs")}catch(c){}window.location.href.indexOf("fb_source")<=0&&a!=1?($("#nonfblink").show(),$("#fblink").hide()):(window.sessionStorage.setItem("fbs",1),$("#nonfblink").hide(),$("#fblink").show())}catch(g){}}
function InviteFriendsToPlayAGame(){var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));FB.ui({method:"apprequests",message:thisFixture?"You've been invited to play "+thisFixture.fixturename+" against "+a.name+" and others!":"You've been invited to play a LiveGames game against "+a.name+" and others!"},InviteFriendsToPlayAGame_response)}
function InviteFriendsToPlayAGame_response(a){try{if(a){var c=a.request,g="";if(a.to){$(".FriendFeedInfo").prepend("<b class='friendtext'>Your Friends have been invited and will join the league once they accept the invitation!</b><br />");$("#FriendInviteButton").hide();for(var d=0;d<a.to.length;d++)g=d==0?a.to[d]:g+","+a.to[d]}var b=window.sessionStorage.getItem("facebookuser");$.ajax({url:WS_URL_ROOT+"/Game/SetUpOneTimeFriendGame",type:"POST",data:"fbRequestId="+c+"&friends="+g+"&user="+b+"&fixtureID="+
fixture,dataType:"html",error:function(a,b,c){AjaxFail("InviteFriendsToPlayAGame_response",a,b,c)},success:function(a){OneTimeGameSetUpComplete(a)}})}}catch(f){logError("InviteFriendsToPlayAGame_response",f)}}
function OneTimeGameSetUpComplete(a){try{var c=typeof a!="object"?JSON.parse(a):a;if(c){var g=c[0].currentfixtureid,d=c[0].last_name;if(g>0){var b=JSON.parse(window.sessionStorage.getItem("facebookuser"));GetLeagueTable_WithLeagueHeader(g,d+" <i>(Waiting For Friends to Accept)</i>",null,b.id);AddLeagueToLightStreamer(g)}for(a=0;a<c.length;a++)try{FB.api("/"+c[a].id+"/feed","post",{name:c[a].last_name,message:c[a].extradata},function(){})}catch(f){logError("OneTimeGameSetUpComplete_FB.API",f)}}}catch(h){logError("OneTimeGameSetUpComplete",
h)}}function inviteUpdate(a,c,g,d,b){$.ajax({url:WS_URL_ROOT+"/League/inviteUpdate",type:"POST",data:"lmid="+c+"&accept="+g,dataType:"html",error:function(a,b,c){AjaxFail("inviteUpdate",a,b,c)},success:function(f){inviteUpdateReturn(f,a,g,d,b,c)}})}function inviteUpdateReturn(a,c,g,d,b,f){a==1&&($("#inviteUpdateSpan_"+f).hide(),$("#FriendInviteButton").hide(),g==1&&(AddLeagueToLightStreamer(c),GetLeagueTable_WithLeagueHeader(c,d,b,-111)))}
function InviteFriends(){var a='<h4 class=\'PPStart\'>Invite Friends</h4><br clear="all"/><br clear="all"/>';a+='<h4>Invite more than 10 new friends and earn an extra powerplay!! <br clear="all"/><br clear="all"/>';$("#"+displaymode+"_invitefriendspopup").animate({top:"5%"},300);$("#"+displaymode+"_invitefriendspopup").attr("style","display:block;z-index:900;");$("#"+displaymode+"_invitefriendspopup .text").html(a);$("#"+displaymode+"_invitefriendsconfirmbutton").attr("onClick","InviteFriends_DoInvite()")}
function InviteFriends_DoInvite(){closeinvitefriendpopup();var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));FB.ui({method:"apprequests",message:"You've been invited to play King Of The Kop by "+a.name+"!!"},function(c){if(c&&c.request&&c.to)try{var g="",d=c.to.length;if(d<=0)alert("No invites were sent");else{for(var b=0;b<c.to.length;b++)b==0?g=c.to[b]:g+=","+c.to[b];$.ajax({url:WS_URL_ROOT+"/Game/LogInviteFriends",type:"POST",data:"userid="+a.id+"&fbREquest="+c.request+"&FBUserID_List="+
g+"&fixtureID="+GetCurrentfixtureID(),dataType:"html",error:function(a,b,c){AjaxFail("LogInviteFriends",a,b,c)},success:function(a){if(a>=10){thisFixture.remainingpowerplays+=1;var b="<span>"+thisFixture.remainingpowerplays+"</span>Power Play";thisFixture.remainingpowerplays>1&&(b+="s");$("#"+displaymode+"_powerplayclickbtn").html(b);$("#powerplayclickbtn2 span").html(thisFixture.remainingpowerplays);$(".popup-notify-invites > h1").text(a+" new invites sent - You have earned an extra power play");
$(".popup-notify-invites").fadeIn(200).delay(3E3).fadeOut(200);$(".GameFeedInfo").prepend("<b>"+d+" new invites sent - you have earned an extra power play!</b> <br />")}else a==1?($(".popup-notify-invites > h1").text(a+" new invite sent!"),$(".popup-notify-invites").fadeIn(200).delay(1E3).fadeOut(200),$(".GameFeedInfo").prepend("<b>"+a+" new friend request sent!</b> <br />")):a>0?($(".popup-notify-invites > h1").text(a+" new invites sent!"),$(".popup-notify-invites").fadeIn(200).delay(1E3).fadeOut(200),
$(".GameFeedInfo").prepend("<b>"+a+" new friend requests sent!</b> <br />")):($(".popup-notify-invites > h1").text("Invites sent!"),$(".popup-notify-invites").fadeIn(200).delay(1E3).fadeOut(200),$(".GameFeedInfo").prepend("<b>Friends invited!!</b> <br />"));refreshScroller(GameFeedScroller,"GameFeedInfo")}})}}catch(f){}})};var powerplayused=0,forfeitsUsed=0,bootroomused=0,lastOverallScoresList,lastCountOfUsersInLeague,previousLeaderboardDetails="",previousFriendDetails="",previousTickerDetails="",previouscreditLimitTickerDetails="",creditLimit_ticker="",storeDetails_ticker="",friendDetails_ticker="",Hints_ticker="",LeagueStandings_ticker="",PreGameDetails_ticker="";function resetTickerInfo(){previousFriendDetails=previousLeaderboardDetails=""}
function SetTickerContent(a,c,g){var d=1,b="";a=="creditLimit_ticker"?previouscreditLimitTickerDetails!=c||previouscreditLimitTickerDetails==""&&c!=""?(previouscreditLimitTickerDetails=c,b+=c,b=b+GetStoreDetailsTickerText()+GetFriendsScoresForTicker()+GetHintsTickerText()+GetLeagueStandingsTickerDetailsBasedOnTheOverallScoresForThisGame()+GetPreGameTickerText()):d=0:a=="connectionWarningDetails_ticker"?(b+=c,b=b+GetLeagueStandingsTickerDetailsBasedOnTheOverallScoresForThisGame()+GetFriendsScoresForTicker()+
GetStoreDetailsTickerText()+GetCreditLimitTickerText()+GetHintsTickerText()+GetPreGameTickerText()):a=="storeDetails_ticker"?(b+=c,b=b+GetLeagueStandingsTickerDetailsBasedOnTheOverallScoresForThisGame()+GetFriendsScoresForTicker()+GetCreditLimitTickerText()+GetHintsTickerText()+GetPreGameTickerText()):a=="friendDetails_ticker"?(a=GetFriendsScoresForTicker(),previousFriendDetails!=a||previousTickerDetails==""?(previousFriendDetails=a,b=g?b+a+GetLeagueStandingsTickerDetailsBasedOnTheOverallScoresForThisGame()+
GetCreditLimitTickerText()+GetStoreDetailsTickerText()+GetHintsTickerText()+GetPreGameTickerText():b+GetLeagueStandingsTickerDetailsBasedOnTheOverallScoresForThisGame()+GetCreditLimitTickerText()+a+GetStoreDetailsTickerText()+GetHintsTickerText()+GetPreGameTickerText()):d=0):a=="Hints_ticker"?(b+=c,b=b+GetLeagueStandingsTickerDetailsBasedOnTheOverallScoresForThisGame()+GetCreditLimitTickerText()+GetStoreDetailsTickerText()+GetFriendsScoresForTicker()+GetPreGameTickerText()):a=="LeagueStandings_ticker"?
previousLeaderboardDetails!=c||previousTickerDetails==""?(previousLeaderboardDetails=c,b+=c,b=b+GetStoreDetailsTickerText()+GetFriendsScoresForTicker()+GetCreditLimitTickerText()+GetHintsTickerText()+GetPreGameTickerText()):d=0:a=="PreGameDetails_ticker"?(PreGameDetails_ticker!=c&&(PreGameDetails_ticker=c),b+=c,b=b+GetLeagueStandingsTickerDetailsBasedOnTheOverallScoresForThisGame()+GetCreditLimitTickerText()+GetStoreDetailsTickerText()+GetFriendsScoresForTicker()+GetHintsTickerText()):a||(b=+GetLeagueStandingsTickerDetailsBasedOnTheOverallScoresForThisGame()+
GetCreditLimitTickerText()+GetStoreDetailsTickerText()+GetFriendsScoresForTicker()+GetHintsTickerText()+GetPreGameTickerText());d==1&&previousTickerDetails!=b&&(previousTickerDetails=b,$("#tickerDiv").html('<ul id="js-news" class="js-hidden">'+b+"</ul>"),ResetTicker())}function GetPreGameTickerText(){return thisFixture&&thisFixture.currenthalf!=-101?"":PreGameDetails_ticker}
function UpdatePreGameTickerTickerText(){var a=JSON.parse(window.sessionStorage.getItem("facebookuser"));thisFixture&&thisFixture.currenthalf==-101?PreGameDetails_ticker||$.ajax({url:WS_URL_ROOT+"/Game/GetTickerText",type:"POST",data:"f="+GetCurrentfixtureID()+"&u="+a.id+"&fu="+a.fbuserid,dataType:"html",error:function(a,g,d){AjaxFail("UpdateMiscellaneousTickerText",a,g,d)},success:function(a){if(a&&PreGameDetails_ticker!=a){for(var a=a.split("^"),g="",d=0;d<a.length;d++)g=g+"<li class='news-item'>"+
a[d]+"</li>";SetTickerContent("PreGameDetails_ticker",g)}}}):thisFixture&&thisFixture.currenthalf!=-101&&PreGameDetails_ticker&&SetTickerContent("PreGameDetails_ticker","")}
function GetLeagueStandingsTickerDetailsBasedOnTheOverallScoresForThisGame(a,c){var g="",d="";a&&(lastOverallScoresList=a);c&&(lastCountOfUsersInLeague=c);if(lastOverallScoresList&&thisFixture&&thisFixture.currenthalf!=-101){AddMyScoreToOverAllLeaderBoard(c,"AddingToTickersLEagueInfo");c>1&&(g="<li class='news-item'>There are "+lastCountOfUsersInLeague+" people playing this game!!</li>");var b=typeof a!="object"?JSON.parse(lastOverallScoresList):lastOverallScoresList,f=JSON.parse(window.sessionStorage.getItem("facebookuser")),
h="",j="",k="",m=0,q=1,n=0;try{for(var s=0;s<b.length;s++)if(s>0&&b[s].S!=n&&(q=0),n=b[s].S,s==0)h=b[s].U,j=b[s].S,k=b[s].F,f.fbuserid==k?(d=d+"<li class='news-item'>You are currently in the lead with "+j+" points!!</li>",m=1):g=g+"<li class='news-item'>"+h+" is currently leading this game with "+j+" points!!</li>";else if(b[s].F==f.fbuserid){if(m!=1){var p=j-b[s].S,l=b[s].P+"";if(l&&l>0){var z=l.charAt(l.length-1),C;l.length>=2&&(C=l.substr(l.length-2,2));if(C==11)l+="th";else if(z==1)l+="st";else if(z==
2)try{l+=C?C.substring(0,1)=="1"?"th":"nd":"nd"}catch(x){l+="nd"}else if(z==3)try{l+=C?C.substring(0,1)=="1"?"th":"rd":"rd"}catch(T){l+="rd"}else l+="th"}p>0?(d=d+"<li class='news-item'>You have "+b[s].S+" points!!</li><li class='news-item'>You are "+p+" points behind the leader!!</li>",l&&(d="<li class='news-item'>You are in "+l+" position in the overall scores!!</li>"+d)):d=d+"<li class='news-item'>You are joint top of the leader board with "+h+"!!</li><li class='news-item'>You have "+j+" points!!</li>"}}else if(s==
1&&m==1){var u=j-b[s].S;u>0?g=g+"<li class='news-item'>"+b[s].U+" is in second place!!</li><li class='news-item'>You lead "+b[s].U+" by "+u+" points!!</li>":d=d+"<li class='news-item'>You are joint top of the leader board with "+h+"!!</li><li class='news-item'>You have "+j+" points!!</li>"}q==1&&(d=g="")}catch(O){logError("GetLeagueStandingsTickerDetailsBasedOnTheOverallScoresForThisGame",O)}}return d+g}
function GetFriendsScoresForTicker(){var a="",c;try{c=JSON.parse(window.sessionStorage.getItem("listOfFriendsScores"))}catch(g){}if(c&&c.length>1&&thisFixture&&thisFixture.currenthalf!=-101){var d=JSON.parse(window.sessionStorage.getItem("facebookuser")),b="",f="",h=1,j=0;try{if(c.length-1==1)for(var k,m,q,n=0;n<c.length;n++)if(d.fbuserid!=c[n].F){m=c[n].S;q=c[n].U;try{var s=q.indexOf("<span");s>0&&(q=q.substring(0,s-1))}catch(p){}a=a+"<li class='news-item'>Your friend "+q+"  is also playing this game and has "+
m+" points!</li>";k&&(k>m?a=a+"<li class='news-item'>You lead your friend "+q+" by "+(k-m)+" points!</li>":k==m&&(a=a+"<li class='news-item'>You and your friend "+q+" currently have the same score!!!</li>"))}else k=c[n].S,m&&(k<m?a=a+"<li class='news-item'>You trail your friend "+q+" by "+(m-k)+" points!</li>":k==m&&(a=a+"<li class='news-item'>You and your friend "+q+" currently have the same score!!!</li>"));else{a=a+"<li class='news-item'>You have "+c.length+" friends playing this game!!</li>";
for(n=0;n<c.length;n++)if(n>0&&c[n].S!=j&&(h=0),j=c[n].S,n==0){f=c[n].S;b=c[n].U;try{s=b.indexOf("<span"),s>0&&(b=b.substring(0,s-1))}catch(l){}d.fbuserid==c[n].F?a+="<li class='news-item'>You have the best score of your friends!!</li>":a=a+"<li class='news-item'>"+b+" has the best score of your friends with "+c[n].S+" points!!</li>"}else if(n!=c.length-1&&d.fbuserid==c[n].F&&c[n].S!=f)a=a+"<li class='news-item'>You trail your friend "+b+" by "+(f-c[n].S)+" points!</li>";else if(n==c.length-1)if(d.fbuserid==
c[n].F)a+="<li class='news-item'>You have the worst score of your friends!!!</li>",a=a+"<li class='news-item'>You trail your friend  "+b+" by "+(f-c[n].S)+" points!</li>";else{q=c[n].U;try{s=q.indexOf("<span"),s>0&&(q=q.substring(0,s-1))}catch(z){}a=a+"<li class='news-item'>"+q+" has the worst score of your friends with "+c[n].S+" points!!</li>"}h==1&&j==0&&(a="<li class='news-item'>You have "+c.length+" friends playing this game!!</li>")}}catch(C){logError("GetFriendsScoresForTicker",C)}}return a}
function GetHintsTickerText(){Hints_ticker="";bootroomused==0&&displaymode=="m"&&(Hints_ticker+='<li class="news-item">Use the boot room to start PowerPlays, buy from the store and much more!</li>');powerplayused==0&&(Hints_ticker+="<li class='news-item'>Don't forget to use your PowerPlay to double your odds for 10 minutes!!</li>");forfeitsUsed==0&&(Hints_ticker+=' <li class="news-item">Use a forfeit to cancel your Predictions, it could be worth it!!</li>');Hints_ticker+='<li class="news-item">Use a forfeit to cancel your Predictions, it could be worth it!!</li>';
return Hints_ticker}
function GetStoreDetailsTickerText(){storeDetails_ticker="";try{$(".credits").html()<500&&(storeDetails_ticker+=displaymode=="m"?'<li class="news-item">You are running out of credits - go to the boot room to buy more via the store!</li>':'<li class="news-item">You are running out of credits - go to the store to top up!</li>'),remainingforfeits<=0&&(storeDetails_ticker+=displaymode=="m"?'<li class="news-item">You have used all your forfeits -  go to the boot room to buy more via the store!</li>':'<li class="news-item">You have used all your forfeits - go to the store to buy more!</li>'),
thisFixture.remainingpowerplays<=0&&(storeDetails_ticker+='<li class="news-item">You have used all your power plays - buy more in the store and jump up the leaderboard!</li>')}catch(a){logError("GetStoreDetailsTickerText",a)}return storeDetails_ticker}
function GetCreditLimitTickerText(a){creditLimit_ticker="";try{var c="";displaymode=="m"&&(c="go to the boot room and ");var g="";thisFixture.numbetsplaced>0&&(g=" more");a&&(a==1?creditLimit_ticker='<li class="news-item">You need to place 1 more prediction to unlock the <strong>200</strong> Credit Limit</li><li class="news-item">Or '+c+"unlock it now via the store!!</li>":a>1?creditLimit_ticker='<li class="news-item">You need to place '+a+g+' bets to unlock the <strong>200</strong> Credit Limit</li><li class="news-item">Or '+
c+"unlock it now via the store!!</li>":a==0&&getUsersOneClickCreditValue()!=200&&(creditLimit_ticker=displaymode=="m"?"<li class='news-item'>You have unlocked the <strong>200</strong> Credit Limit!!</li><li class='news-item'>Don't forget to "+c+"set it as your one click value!!</li>":"<li class='news-item'>You have unlocked the <strong>200</strong> Credit Limit!!</li><li class='news-item'>Don't forget to set it as your one click value!!</li>"))}catch(d){logError("GetCreditLimitTickerText",d)}return creditLimit_ticker}
function ResetTicker(){$("#js-news").ticker({speed:0.1,htmlFeed:!0,fadeInSpeed:600,debug:!0,titleText:">"})};(function(a){a.fn.ticker=function(c){var g=a.extend({},a.fn.ticker.defaults,c);if(a(this).length==0)return window.console&&window.console.log?window.console.log("Element does not exist in DOM!"):alert("Element does not exist in DOM!"),!1;var d="#"+a(this).attr("id"),b=a(this).get(0).tagName;return this.each(function(){function c(a){var b=0,f;for(f in a)a.hasOwnProperty(f)&&b++;return b}function h(a){g.debugMode&&(window.console&&window.console.log?window.console.log(a):alert(a))}function j(){if(l.contentLoaded==
!1)if(g.ajaxFeed)g.feedType=="xml"?a.ajax({url:g.feedUrl,cache:!1,dataType:g.feedType,async:!0,success:function(a){for(var b=count=0;b<a.childNodes.length;b++)a.childNodes[b].nodeName=="rss"&&(xmlContent=a.childNodes[b]);for(a=0;a<xmlContent.childNodes.length;a++)xmlContent.childNodes[a].nodeName=="channel"&&(xmlChannel=xmlContent.childNodes[a]);for(a=0;a<xmlChannel.childNodes.length;a++)if(xmlChannel.childNodes[a].nodeName=="item"){xmlItems=xmlChannel.childNodes[a];for(var d,b=!1,j=0;j<xmlItems.childNodes.length;j++){if(xmlItems.childNodes[j].nodeName==
"title")d=xmlItems.childNodes[j].lastChild.nodeValue;else if(xmlItems.childNodes[j].nodeName=="link")b=xmlItems.childNodes[j].lastChild.nodeValue;d!==!1&&d!=""&&b!==!1&&(l.newsArr["item-"+count]={type:g.titleText,content:'<a href="'+b+'">'+d+"</a>"},count++,b=d=!1)}}if(c(l.newsArr<1))return h("Couldn't find any content from the XML feed for the ticker to use!"),!1;l.contentLoaded=!0;k()}}):h("Code Me!");else if(g.htmlFeed)if(a(d+" LI").length>0)a(d+" LI").each(function(b){l.newsArr["item-"+b]={type:g.titleText,
content:a(this).html()}});else return h("Couldn't find HTML any content for the ticker to use!"),!1;else return h("The ticker is set to not use any types of content! Check the settings for the ticker."),!1}function k(){l.contentLoaded=!0;a(l.dom.titleElem).html(l.newsArr["item-"+l.position].type);a(l.dom.contentID).html(l.newsArr["item-"+l.position].content);l.position==c(l.newsArr)-1?l.position=0:l.position++;distance=a(l.dom.contentID).width();time=distance/g.speed;m()}function m(){a(l.dom.contentID).css("opacity",
"1");if(l.play){var b=a(l.dom.titleID).width()+20;a(l.dom.revealID).css(g.direction,b+"px");g.displayType=="fade"?a(l.dom.revealID).hide(0,function(){a(l.dom.contentID).css(g.direction,b+"px").fadeIn(g.fadeInSpeed,q)}):g.displayType!="scroll"&&a(l.dom.revealElem).show(0,function(){a(l.dom.contentID).css(g.direction,b+"px").show();animationAction=g.direction=="right"?{marginRight:distance+"px"}:{marginLeft:distance+"px"};a(l.dom.revealID).css("margin-"+g.direction,"0px").delay(20).animate(animationAction,
time,"linear",q)})}else return!1}function q(){l.play?(a(l.dom.contentID).delay(g.pauseOnItems).fadeOut(g.fadeOutSpeed),g.displayType=="fade"?a(l.dom.contentID).fadeOut(g.fadeOutSpeed,function(){a(l.dom.wrapperID).find(l.dom.revealElem+","+l.dom.contentID).hide().end().find(l.dom.tickerID+","+l.dom.revealID).show().end().find(l.dom.tickerID+","+l.dom.revealID).removeAttr("style");k()}):a(l.dom.revealID).hide(0,function(){a(l.dom.contentID).fadeOut(g.fadeOutSpeed,function(){a(l.dom.wrapperID).find(l.dom.revealElem+
","+l.dom.contentID).hide().end().find(l.dom.tickerID+","+l.dom.revealID).show().end().find(l.dom.tickerID+","+l.dom.revealID).removeAttr("style");k()})})):a(l.dom.revealElem).hide()}function n(){l.play=!1;a(l.dom.tickerID+","+l.dom.revealID+","+l.dom.titleID+","+l.dom.titleElem+","+l.dom.revealElem+","+l.dom.contentID).stop(!0,!0);a(l.dom.revealID+","+l.dom.revealElem).hide();a(l.dom.wrapperID).find(l.dom.titleID+","+l.dom.titleElem).show().end().find(l.dom.contentID).show()}function s(b){n();switch(b){case "prev":l.position==
0?l.position=c(l.newsArr)-2:l.position==1?l.position=c(l.newsArr)-1:l.position-=2;a(l.dom.titleElem).html(l.newsArr["item-"+l.position].type);a(l.dom.contentID).html(l.newsArr["item-"+l.position].content);break;case "next":a(l.dom.titleElem).html(l.newsArr["item-"+l.position].type),a(l.dom.contentID).html(l.newsArr["item-"+l.position].content)}l.position==c(l.newsArr)-1?l.position=0:l.position++}var p=(new Date).getTime(),l={position:0,time:0,distance:0,newsArr:{},play:!0,paused:!1,contentLoaded:!1,
dom:{contentID:"#ticker-content-"+p,titleID:"#ticker-title-"+p,titleElem:"#ticker-title-"+p+" SPAN",tickerID:"#ticker-"+p,wrapperID:"#ticker-wrapper-"+p,revealID:"#ticker-swipe-"+p,revealElem:"#ticker-swipe-"+p+" SPAN",controlsID:"#ticker-controls-"+p,prevID:"#prev-"+p,nextID:"#next-"+p,playPauseID:"#play-pause-"+p}};if(b!="UL"&&b!="OL"&&g.htmlFeed===!0)return h("Cannot use <"+b.toLowerCase()+"> type of element for this plugin - must of type <ul> or <ol>"),!1;g.direction=="rtl"?g.direction="right":
g.direction="left";(function(){j();a(d).wrap('<div id="'+l.dom.wrapperID.replace("#","")+'"></div>');a(l.dom.wrapperID).children().remove();a(l.dom.wrapperID).append('<div id="'+l.dom.tickerID.replace("#","")+'" class="ticker"><div id="'+l.dom.titleID.replace("#","")+'" class="ticker-title"><span><\!-- --\></span></div><p id="'+l.dom.contentID.replace("#","")+'" class="ticker-content"></p><div id="'+l.dom.revealID.replace("#","")+'" class="ticker-swipe"><span><\!-- --\></span></div></div>');a(l.dom.wrapperID).removeClass("no-js").addClass("ticker-wrapper has-js "+
g.direction);a(l.dom.tickerElem+","+l.dom.contentID).hide();g.controls&&(a(l.dom.controlsID).live("click mouseover mousedown mouseout mouseup",function(b){var c=b.target.id;if(b.type=="click")switch(c){case l.dom.prevID.replace("#",""):l.paused=!0;a(l.dom.playPauseID).addClass("paused");s("prev");break;case l.dom.nextID.replace("#",""):l.paused=!0;a(l.dom.playPauseID).addClass("paused");s("next");break;case l.dom.playPauseID.replace("#",""):l.play==!0?(l.paused=!0,a(l.dom.playPauseID).addClass("paused"),
n()):(l.paused=!1,a(l.dom.playPauseID).removeClass("paused"),l.play=!0,l.paused=!1,q())}else b.type=="mouseover"&&a("#"+c).hasClass("controls")?a("#"+c).addClass("over"):b.type=="mousedown"&&a("#"+c).hasClass("controls")?a("#"+c).addClass("down"):b.type=="mouseup"&&a("#"+c).hasClass("controls")?a("#"+c).removeClass("down"):b.type=="mouseout"&&a("#"+c).hasClass("controls")&&a("#"+c).removeClass("over")}),a(l.dom.wrapperID).append('<ul id="'+l.dom.controlsID.replace("#","")+'" class="ticker-controls"><li id="'+
l.dom.playPauseID.replace("#","")+'" class="jnt-play-pause controls"><a href=""><\!-- --\></a></li><li id="'+l.dom.prevID.replace("#","")+'" class="jnt-prev controls"><a href=""><\!-- --\></a></li><li id="'+l.dom.nextID.replace("#","")+'" class="jnt-next controls"><a href=""><\!-- --\></a></li></ul>'));g.displayType!="fade"&&a(l.dom.contentID).mouseover(function(){l.paused==!1&&n()}).mouseout(function(){if(l.paused==!1)l.play=!0,l.paused=!1,q()});g.ajaxFeed||k()})()})};a.fn.ticker.defaults={speed:0.1,
ajaxFeed:!1,feedUrl:"",feedType:"xml",displayType:"reveal",htmlFeed:!0,debugMode:!0,controls:!0,titleText:"Latest",direction:"ltr",pauseOnItems:3E3,fadeInSpeed:600,fadeOutSpeed:300}})(jQuery);(function(a){function c(){function b(a){var k=a<1E12?k=performance.now?performance.now()+performance.timing.navigationStart:Date.now():a||(new Date).getTime();k-g>=1E3&&(d._updateTargets(),g=k);c(b)}this.regional=[];this.regional[""]={labels:["Yrs","Mths","Wks","Days","Hrs","Mins","Secs"],labels1:["Yr","Mth","Wk","Day","Hr","Min","Sec"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:!1};this._defaults={until:null,since:null,
timezone:null,serverSync:null,format:"dHMS",layout:"",compact:!1,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:!1,onExpiry:null,onTick:null,tickInterval:1};a.extend(this._defaults,this.regional[""]);this._serverSyncs=[];var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null,g=0;!c||a.noRequestAnimationFrame?(a.noRequestAnimationFrame=null,setInterval(function(){d._updateTargets()},
980)):(g=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||(new Date).getTime(),c(b))}a.extend(c.prototype,{markerClassName:"hasCountdown",propertyName:"countdown",_rtlClass:"countdown_rtl",_sectionClass:"countdown_section",_amountClass:"countdown_amount",_rowClass:"countdown_row",_holdingClass:"countdown_holding",_showClass:"countdown_show",_descrClass:"countdown_descr",_timerTargets:[],setDefaults:function(b){this._resetExtraLabels(this._defaults,
b);a.extend(this._defaults,b||{})},UTCDate:function(a,c,d,g,k,m,q,n){typeof c=="object"&&c.constructor==Date&&(n=c.getMilliseconds(),q=c.getSeconds(),m=c.getMinutes(),k=c.getHours(),g=c.getDate(),d=c.getMonth(),c=c.getFullYear());var s=new Date;s.setUTCFullYear(c);s.setUTCDate(1);s.setUTCMonth(d||0);s.setUTCDate(g||1);s.setUTCHours(k||0);s.setUTCMinutes((m||0)-(Math.abs(a)<30?a*60:a));s.setUTCSeconds(q||0);s.setUTCMilliseconds(n||0);return s},periodsToSeconds:function(a){return a[0]*31557600+a[1]*
2629800+a[2]*604800+a[3]*86400+a[4]*3600+a[5]*60+a[6]},_attachPlugin:function(b,c){b=a(b);if(!b.hasClass(this.markerClassName)){var d={options:a.extend({},this._defaults),_periods:[0,0,0,0,0,0,0]};b.addClass(this.markerClassName).data(this.propertyName,d);this._optionPlugin(b,c)}},_addTarget:function(a){this._hasTarget(a)||this._timerTargets.push(a)},_hasTarget:function(b){return a.inArray(b,this._timerTargets)>-1},_removeTarget:function(b){this._timerTargets=a.map(this._timerTargets,function(a){return a==
b?null:a})},_updateTargets:function(){for(var a=this._timerTargets.length-1;a>=0;a--)this._updateCountdown(this._timerTargets[a])},_optionPlugin:function(b,c,d){var b=a(b),g=b.data(this.propertyName);if(!c||typeof c=="string"&&d==null){var k=c;return(c=(g||{}).options)&&k?c[k]:c}b.hasClass(this.markerClassName)&&(c=c||{},typeof c=="string"&&(k=c,c={},c[k]=d),this._resetExtraLabels(g.options,c),a.extend(g.options,c),this._adjustSettings(b,g),c=new Date,(g._since&&g._since<c||g._until&&g._until>c)&&
this._addTarget(b[0]),this._updateCountdown(b,g))},_updateCountdown:function(b,c){var d=a(b);if(c=c||d.data(this.propertyName)){d.html(this._generateHTML(c)).toggleClass(this._rtlClass,c.options.isRTL);if(a.isFunction(c.options.onTick)){var g=c._hold!="lap"?c._periods:this._calculatePeriods(c,c._show,c.options.significant,new Date);(c.options.tickInterval==1||this.periodsToSeconds(g)%c.options.tickInterval==0)&&c.options.onTick.apply(b,[g])}if(c._hold!="pause"&&(c._since?c._now.getTime()<c._since.getTime():
c._now.getTime()>=c._until.getTime())&&!c._expiring){c._expiring=!0;if(this._hasTarget(b)||c.options.alwaysExpire){this._removeTarget(b);a.isFunction(c.options.onExpiry)&&c.options.onExpiry.apply(b,[]);if(c.options.expiryText)g=c.options.layout,c.options.layout=c.options.expiryText,this._updateCountdown(b,c),c.options.layout=g;if(c.options.expiryUrl)window.location=c.options.expiryUrl}c._expiring=!1}else c._hold=="pause"&&this._removeTarget(b);d.data(this.propertyName,c)}},_resetExtraLabels:function(a,
c){var d=!1,g;for(g in c)if(g!="whichLabels"&&g.match(/[Ll]abels/)){d=!0;break}if(d)for(g in a)g.match(/[Ll]abels[02-9]/)&&(a[g]=null)},_adjustSettings:function(b,c){var d,g=0;d=null;for(g=0;g<this._serverSyncs.length;g++)if(this._serverSyncs[g][0]==c.options.serverSync){d=this._serverSyncs[g][1];break}d!=null?(g=c.options.serverSync?d:0,d=new Date):(g=a.isFunction(c.options.serverSync)?c.options.serverSync.apply(b,[]):null,d=new Date,g=g?d.getTime()-g.getTime():0,this._serverSyncs.push([c.options.serverSync,
g]));var k=c.options.timezone,k=k==null?-d.getTimezoneOffset():k;c._since=c.options.since;if(c._since!=null)c._since=this.UTCDate(k,this._determineTime(c._since,null)),c._since&&g&&c._since.setMilliseconds(c._since.getMilliseconds()+g);c._until=this.UTCDate(k,this._determineTime(c.options.until,d));g&&c._until.setMilliseconds(c._until.getMilliseconds()+g);c._show=this._determineShow(c)},_destroyPlugin:function(b){b=a(b);b.hasClass(this.markerClassName)&&(this._removeTarget(b[0]),b.removeClass(this.markerClassName).empty().removeData(this.propertyName))},
_pausePlugin:function(a){this._hold(a,"pause")},_lapPlugin:function(a){this._hold(a,"lap")},_resumePlugin:function(a){this._hold(a,null)},_hold:function(b,c){var d=a.data(b,this.propertyName);if(d){if(d._hold=="pause"&&!c){d._periods=d._savePeriods;var g=d._since?"-":"+";d[d._since?"_since":"_until"]=this._determineTime(g+d._periods[0]+"y"+g+d._periods[1]+"o"+g+d._periods[2]+"w"+g+d._periods[3]+"d"+g+d._periods[4]+"h"+g+d._periods[5]+"m"+g+d._periods[6]+"s");this._addTarget(b)}d._hold=c;d._savePeriods=
c=="pause"?d._periods:null;a.data(b,this.propertyName,d);this._updateCountdown(b,d)}},_getTimesPlugin:function(b){b=a.data(b,this.propertyName);return!b?null:!b._hold?b._periods:this._calculatePeriods(b,b._show,b.options.significant,new Date)},_determineTime:function(a,c){var g=function(a){var b=new Date;b.setTime(b.getTime()+a*1E3);return b};(g=a==null?c:typeof a=="string"?function(a){for(var a=a.toLowerCase(),b=new Date,c=b.getFullYear(),f=b.getMonth(),g=b.getDate(),h=b.getHours(),p=b.getMinutes(),
b=b.getSeconds(),l=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g,z=l.exec(a);z;){switch(z[2]||"s"){case "s":b+=parseInt(z[1],10);break;case "m":p+=parseInt(z[1],10);break;case "h":h+=parseInt(z[1],10);break;case "d":g+=parseInt(z[1],10);break;case "w":g+=parseInt(z[1],10)*7;break;case "o":f+=parseInt(z[1],10);g=Math.min(g,d._getDaysInMonth(c,f));break;case "y":c+=parseInt(z[1],10),g=Math.min(g,d._getDaysInMonth(c,f))}z=l.exec(a)}return new Date(c,f,g,h,p,b,0)}(a):typeof a=="number"?g(a):a)&&g.setMilliseconds(0);
return g},_getDaysInMonth:function(a,c){return 32-(new Date(a,c,32)).getDate()},_normalLabels:function(a){return a},_generateHTML:function(b){var c=this;b._periods=b._hold?b._periods:this._calculatePeriods(b,b._show,b.options.significant,new Date);for(var g=!1,j=0,k=b.options.significant,m=a.extend({},b._show),q=0;q<=6;q++)g|=b._show[q]=="?"&&b._periods[q]>0,m[q]=b._show[q]=="?"&&!g?null:b._show[q],j+=m[q]?1:0,k-=b._periods[q]>0?1:0;for(var n=[!1,!1,!1,!1,!1,!1,!1],q=6;q>=0;q--)b._show[q]&&(b._periods[q]?
n[q]=!0:(n[q]=k>0,k--));var s=b.options.compact?b.options.compactLabels:b.options.labels,p=b.options.whichLabels||this._normalLabels,g=function(a){var d=b.options["compactLabels"+p(b._periods[a])];return m[a]?c._translateDigits(b,b._periods[a])+(d?d[a]:s[a])+" ":""},k=function(a){var g=b.options["labels"+p(b._periods[a])];return!b.options.significant&&m[a]||b.options.significant&&n[a]?'<span class="'+d._sectionClass+'"><span class="'+d._amountClass+'">'+c._translateDigits(b,b._periods[a])+"</span><br/>"+
(g?g[a]:s[a])+"</span>":""};return b.options.layout?this._buildLayout(b,m,b.options.layout,b.options.compact,b.options.significant,n):(b.options.compact?'<span class="'+this._rowClass+" "+this._amountClass+(b._hold?" "+this._holdingClass:"")+'">'+g(0)+g(1)+g(2)+g(3)+(m[4]?this._minDigits(b,b._periods[4],2):"")+(m[5]?(m[4]?b.options.timeSeparator:"")+this._minDigits(b,b._periods[5],2):"")+(m[6]?(m[4]||m[5]?b.options.timeSeparator:"")+this._minDigits(b,b._periods[6],2):""):'<span class="'+this._rowClass+
" "+this._showClass+(b.options.significant||j)+(b._hold?" "+this._holdingClass:"")+'">'+k(0)+k(1)+k(2)+k(3)+k(4)+k(5)+k(6))+"</span>"+(b.options.description?'<span class="'+this._rowClass+" "+this._descrClass+'">'+b.options.description+"</span>":"")},_buildLayout:function(b,c,d,g,k,m){for(var q=b.options[g?"compactLabels":"labels"],n=b.options.whichLabels||this._normalLabels,s=function(a){return(b.options[(g?"compactLabels":"labels")+n(b._periods[a])]||q)[a]},p=function(a,c){return b.options.digits[Math.floor(a/
c)%10]},s={desc:b.options.description,sep:b.options.timeSeparator,yl:s(0),yn:this._minDigits(b,b._periods[0],1),ynn:this._minDigits(b,b._periods[0],2),ynnn:this._minDigits(b,b._periods[0],3),y1:p(b._periods[0],1),y10:p(b._periods[0],10),y100:p(b._periods[0],100),y1000:p(b._periods[0],1E3),ol:s(1),on:this._minDigits(b,b._periods[1],1),onn:this._minDigits(b,b._periods[1],2),onnn:this._minDigits(b,b._periods[1],3),o1:p(b._periods[1],1),o10:p(b._periods[1],10),o100:p(b._periods[1],100),o1000:p(b._periods[1],
1E3),wl:s(2),wn:this._minDigits(b,b._periods[2],1),wnn:this._minDigits(b,b._periods[2],2),wnnn:this._minDigits(b,b._periods[2],3),w1:p(b._periods[2],1),w10:p(b._periods[2],10),w100:p(b._periods[2],100),w1000:p(b._periods[2],1E3),dl:s(3),dn:this._minDigits(b,b._periods[3],1),dnn:this._minDigits(b,b._periods[3],2),dnnn:this._minDigits(b,b._periods[3],3),d1:p(b._periods[3],1),d10:p(b._periods[3],10),d100:p(b._periods[3],100),d1000:p(b._periods[3],1E3),hl:s(4),hn:this._minDigits(b,b._periods[4],1),hnn:this._minDigits(b,
b._periods[4],2),hnnn:this._minDigits(b,b._periods[4],3),h1:p(b._periods[4],1),h10:p(b._periods[4],10),h100:p(b._periods[4],100),h1000:p(b._periods[4],1E3),ml:s(5),mn:this._minDigits(b,b._periods[5],1),mnn:this._minDigits(b,b._periods[5],2),mnnn:this._minDigits(b,b._periods[5],3),m1:p(b._periods[5],1),m10:p(b._periods[5],10),m100:p(b._periods[5],100),m1000:p(b._periods[5],1E3),sl:s(6),sn:this._minDigits(b,b._periods[6],1),snn:this._minDigits(b,b._periods[6],2),snnn:this._minDigits(b,b._periods[6],
3),s1:p(b._periods[6],1),s10:p(b._periods[6],10),s100:p(b._periods[6],100),s1000:p(b._periods[6],1E3)},l=d,d=0;d<=6;d++)p="yowdhms".charAt(d),l=l.replace(RegExp("\\{"+p+"<\\}(.*)\\{"+p+">\\}","g"),!k&&c[d]||k&&m[d]?"$1":"");a.each(s,function(a,b){l=l.replace(RegExp("\\{"+a+"\\}","g"),b)});return l},_minDigits:function(a,c,d){c=""+c;if(c.length>=d)return this._translateDigits(a,c);c="0000000000"+c;return this._translateDigits(a,c.substr(c.length-d))},_translateDigits:function(a,c){return(""+c).replace(/[0-9]/g,
function(c){return a.options.digits[c]})},_determineShow:function(a){var a=a.options.format,c=[];c[0]=a.match("y")?"?":a.match("Y")?"!":null;c[1]=a.match("o")?"?":a.match("O")?"!":null;c[2]=a.match("w")?"?":a.match("W")?"!":null;c[3]=a.match("d")?"?":a.match("D")?"!":null;c[4]=a.match("h")?"?":a.match("H")?"!":null;c[5]=a.match("m")?"?":a.match("M")?"!":null;c[6]=a.match("s")?"?":a.match("S")?"!":null;return c},_calculatePeriods:function(a,c,g,j){a._now=j;a._now.setMilliseconds(0);var k=new Date(a._now.getTime());
if(a._since)j.getTime()<a._since.getTime()?a._now=j=k:j=a._since;else if(k.setTime(a._until.getTime()),j.getTime()>a._until.getTime())a._now=j=k;var m=[0,0,0,0,0,0,0];if(c[0]||c[1]){var q=d._getDaysInMonth(j.getFullYear(),j.getMonth()),n=d._getDaysInMonth(k.getFullYear(),k.getMonth()),n=k.getDate()==j.getDate()||k.getDate()>=Math.min(q,n)&&j.getDate()>=Math.min(q,n),n=Math.max(0,(k.getFullYear()-j.getFullYear())*12+k.getMonth()-j.getMonth()+(k.getDate()<j.getDate()&&!n||n&&(k.getHours()*60+k.getMinutes())*
60+k.getSeconds()<(j.getHours()*60+j.getMinutes())*60+j.getSeconds()?-1:0));m[0]=c[0]?Math.floor(n/12):0;m[1]=c[1]?n-m[0]*12:0;j=new Date(j.getTime());q=j.getDate()==q;n=d._getDaysInMonth(j.getFullYear()+m[0],j.getMonth()+m[1]);j.getDate()>n&&j.setDate(n);j.setFullYear(j.getFullYear()+m[0]);j.setMonth(j.getMonth()+m[1]);q&&j.setDate(n)}var s=Math.floor((k.getTime()-j.getTime())/1E3),j=function(a,b){m[a]=c[a]?Math.floor(s/b):0;s-=m[a]*b};j(2,604800);j(3,86400);j(4,3600);j(5,60);j(6,1);if(s>0&&!a._since){a=
[1,12,4.3482,7,24,60,60];j=6;k=1;for(q=6;q>=0;q--)c[q]&&(m[j]>=k&&(m[j]=0,s=1),s>0&&(m[q]++,s=0,j=q,k=1)),k*=a[q]}if(g)for(q=0;q<=6;q++)g&&m[q]?g--:g||(m[q]=0);return m}});var g=["getTimes"];a.fn.countdown=function(b){var c=Array.prototype.slice.call(arguments,1);return b=="option"&&(c.length==0||c.length==1&&typeof c[0]=="string")||a.inArray(b,g)>-1?d["_"+b+"Plugin"].apply(d,[this[0]].concat(c)):this.each(function(){if(typeof b=="string"){if(!d["_"+b+"Plugin"])throw"Unknown command: "+b;d["_"+b+
"Plugin"].apply(d,[this].concat(c))}else d._attachPlugin(this,b||{})})};var d=a.countdown=new c})(jQuery);var PushConnectionStarted=0,thisConnectionIsAReconnect=0,timeout=null,interval=1E4,firstTimeConnected=1,AdminPusher=new T5Pusher,FriendPusher,currentlyConnected=0,numConnectionFailures=0;
function EstablishPushConnection(){try{JSON.parse(window.sessionStorage.getItem("facebookuser"))}catch(a){}var c=0;t5pusherAppKey&&(AdminPusher.SetPusherURL(ap),admin&&admin.isAdmin()&&(AdminPusher.setClientAuthorisationURL("/Push/AddSignature"),AdminPusher.setGroupAuthorisationURL("/Push/AddSecureGroupSignature"),c=1),AdminPusher.start(t5pusherAppKey),sp==1&&!homepagefixtureid&&c==0&&(FriendPusher=new T5Pusher,FriendPusher.connectionbind("connected",function(){console.log("FriendPusher says i am connected!!!");
PushConnectionStarted=1;ListenForFriendUpdates();initialiseFriendProxyFunctions()}),FriendPusher.SetPusherURL(fp),FriendPusher.setClientAuthorisationURL("/Push/AddSignature"),FriendPusher.start(t5pusherAppKey)))}
AdminPusher.connectionbind("connected",function(){if(admin&&admin.isAdmin()){var a;try{a=JSON.parse(window.sessionStorage.getItem("facebookuser"))}catch(c){}AdminPusher.joinGroup("PT"+a.fbuserid);PushConnectionStarted=1}else sp==0&&(PushConnectionStarted=1,ListenForFriendUpdates());initialiseProxyFunctions();console.log("AdminPusher says i am connected!!!")});
AdminPusher.bind("CreateBroadcastGroupReturn",function(a){a&&(a.created==1?(currentlyConnected=1,$(".GameFeedInfo").prepend("<span class='losetext'>Referees Broadcast Group Created. <br /> You can now send to players!</span><br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"),$("#GTracker").html("Connection Status: Connected")):alert("error creating broadcast group!!!"))});
AdminPusher.connectionbind("connectionattemptfailed",function(){setTimeout("AdminPusher.start(t5pusherAppKey);",5E3);numConnectionFailures==0&&ConnectionIsSlow();numConnectionFailures+=1});
AdminPusher.connectionbind("connectionlost",function(){$("#"+displaymode+"_reconnectstatus").fadeIn(50).delay(400).fadeOut(50);$(".GameFeedInfo").prepend("Connection lost. Reconnecting...<br />");logErrorExtra("SignalR","Failed to Re_establish Conn. Reloading page!!","","",GetCurrentTimeStamp());refreshScroller(GameFeedScroller,"GameFeedInfo");setTimeout("ReloadPage();",1E3)});AdminPusher.connectionbind("connectionslow",function(){ConnectionIsSlow()});
function ConnectionIsSlow(){$(".GameFeedInfo").prepend("<span class='losetext'>You are experiencing connection issues due to your network!!! <br />You may not be receiving all messages due to these connection issues!!</span><br />");refreshScroller(GameFeedScroller,"GameFeedInfo");admin&&admin.isAdmin()&&$("#GTracker").html("Connection Status: Connection Slow");displaymode=="m"&&SetTickerContent("connectionWarningDetails_ticker",'<li class="news-item">You are experiencing connection issues due to your network!!!</li><li class="news-item">You may not be receiving all messages due to these connection issues!!</li>');
homepagefixtureid||(GetGameDetails(0,GameDetailsComplete),WeAreCurrentlyShowingFriendsLeagueTable==!0&&userLeague.GetFriendsLeaderBoard())}
AdminPusher.connectionbind("statechanged",function(a){a=="reconnecting"?(currentlyConnected=0,thisConnectionIsAReconnect=1,admin&&admin.isAdmin()?$("#GTracker").html("Connection Status: reconnecting"):$(".connectionstatus").html("reconnecting"),timeout=setTimeout(function(){logErrorExtra("SR_Con","setTimeout - about to call RestartSignalRConnection!","","",GetCurrentTimeStamp());ReloadPage()},interval)):a=="connected"?(admin&&admin.isAdmin()?(currentlyConnected=1,$("#GTracker").html("Connection Status: Connected")):
$(".connectionstatus").html("Connected"),timeout&&(clearTimeout(timeout),timeout=null),$("#connmethod").html(AdminPusher.GetCurrentConnectionMethod()),firstTimeConnected==1&&(firstTimeConnected=0,Store.CheckForOpenStorePurchases())):a=="disconnected"?(currentlyConnected=0,admin&&admin.isAdmin()?$("#GTracker").html("Connection Status: disconnected"):$(".connectionstatus").html("disconnected")):a=="connecting"&&(currentlyConnected=0,admin&&admin.isAdmin()?$("#GTracker").html("Connection Status: Connecting"):
$(".connectionstatus").html("Connecting"))});
function initialiseFriendProxyFunctions(){var a;a=sp==0?AdminPusher:FriendPusher;a.bind("DisplayLeagueInvite",function(a){try{LogThisInteractionTime(),userLeague.DisplayLeagueInvite(a[0],a[1],a[2],a[3],a[4],a[5])}catch(g){logError("DisplayLeagueInvite",g)}});a.bind("processfriendupdates",function(a){try{LogThisInteractionTime();var g=a[0],d=a[1];a[2]==GetCurrentfixtureID()&&(JSON.parse(window.sessionStorage.getItem("facebookuser")),ProcessFriendUpdate(g,d))}catch(b){logError("ProcessFriendUpdate",
b)}})}
function initialiseProxyFunctions(){AdminPusher.bind("UpdateGameEvent",function(a){try{LogThisInteractionTime();var c=a[0],g=a[1],d=a[2],b=a[3],f=a[4],h=a[5],j=a[6],k=a[7],m=a[8],q=a[9];if(c==GetCurrentfixtureID())if(LastEventReceived=g,g==22&&!HaveWeReceviedThisFreezeOrThawEventBefore(d)){if($(".forfeitclick").hide(),BetValidCount>0){var n;try{n=JSON.parse(window.sessionStorage.getItem("Currentbet"))}catch(s){}if(n&&n.status==0){var p=new Date(k),l=new Date(n.eventtime),z=new Date;z.setTime(p.getTime()-voidOffset*
1E3);if(l>z){n.status=-102;window.sessionStorage.setItem("Currentbet",$.toJSON(n));BetValidCount=-1;$("#"+displaymode+"_predictionpending").html("<strong>Too Late!</strong>, An event occurred before you could make a prediction! Your Credits were returned!");$("#"+displaymode+"_predictionpending").show();$(".tooltip-shade").show();$("#"+displaymode+"_predictionpending").delay(3E3).fadeOut();$("#"+displaymode+"_count").hide();$(".tooltip-shade").delay(3E3).fadeOut();$("#"+displaymode+"_bubble"+n.eventid).removeClass("bubble_active");
$("#"+displaymode+"_bubble"+n.eventid).addClass("bubble");var C;C=n.newodds?Math.round(n.newodds):Math.round(n.odds);$("#"+displaymode+"_bubble"+n.eventid).html(""+C+"/1");BetNumberJustDisplayed>0&&(correctedBetsNeeded=BetNumberJustDisplayed+1,BetNumberJustDisplayed=0,$("#"+displaymode+"_UnlockNumBetsSpan").html("<strong>"+correctedBetsNeeded+"</strong> more predictions"),$(".betnum").html(correctedBetsNeeded),$(".betnum").show(),$(".betnum").animate({top:"100px",fontSize:"45px",opacity:"0.0"},2E3,
function(){$(".betnum").hide();$(".betnum").css({top:"",fontSize:"",opacity:""})}),SetTickerContent("creditLimit_ticker",GetCreditLimitTickerText(correctedBetsNeeded)))}}}}else if(g==23&&!HaveWeReceviedThisFreezeOrThawEventBefore(d)){var x;try{x=JSON.parse(window.sessionStorage.getItem("Currentbet"))}catch(T){}x!=null&&x.status==-102?(x.status=0,window.sessionStorage.setItem("Currentbet",$.toJSON(x)),$("#"+displaymode+"_bubble"+x.eventid).removeClass("bubble"),$("#"+displaymode+"_bubble"+x.eventid).addClass("bubble_active"),
$("#"+displaymode+"_bubble"+x.eventid).html(x.amount),correctedBetsNeeded-=1,$("#"+displaymode+"_UnlockNumBetsSpan").html("<strong>"+correctedBetsNeeded+"</strong> more predictions"),SetTickerContent("creditLimit_ticker",GetCreditLimitTickerText(correctedBetsNeeded)),$("#"+displaymode+"_predictionpending").html("<strong>Doh!</strong>, The Referee made a mistake - there was no event! <br /><br />Your prediction is Active again."),$(".tooltip-shade").show(),$("#"+displaymode+"_predictionpending").show(),
$("#"+displaymode+"_predictionpending").delay(3E3).fadeOut(),$(".tooltip-shade").delay(3E3).fadeOut(),remainingforfeits>0&&!$(".forfeitclick").is(":visible")&&($(".forfeitclick").show(),$("#"+displaymode+"_forfeitnum").html(remainingforfeits),$("#"+displaymode+"_popupplacebet").hide())):x!=null&&x.status==0&&remainingforfeits>0&&!$(".forfeitclick").is(":visible")&&($(".forfeitclick").show(),$("#"+displaymode+"_forfeitnum").html(remainingforfeits),$("#"+displaymode+"_popupplacebet").hide())}else{if(g!=
22&&g!=23){var u=new Date(j),p=new Date(k);UpdateGameEvent(c,g,d,b,f,h,u,p,m,q);if(g==15||g==16){try{x=JSON.parse(window.sessionStorage.getItem("Currentbet"))}catch(O){}x!=null&&x.status==0&&remainingforfeits>0&&!$(".forfeitclick").is(":visible")&&($(".forfeitclick").show(),$("#"+displaymode+"_forfeitnum").html(remainingforfeits),$("#"+displaymode+"_popupplacebet").hide())}}}else{var ba=$("#TestlayoutSpan").html();if((window.location.href.indexOf("/start")>0||window.location.href.indexOf("/now")>
0||window.location.href.indexOf("/home")>0||ba)&&g!=22&&g!=23&&c==homepagefixtureid)$(".GameFeedInfo").prepend(h+"<br />"),refreshScroller(GameFeedScroller,"GameFeedInfo")}}catch(M){logError("UpdateGameEvent",M)}});AdminPusher.bind("UpdateLeaderboard",function(a){try{LogThisInteractionTime();var c=a[0],g=a[1],d=a[3],b=a[4];if(a[2]==GetCurrentfixtureID()&&(LogThisInteractionTime(),a=1,!HaveWeReceviedThisLeagueTableBefore(d))){d=0;displaymode=="m"?$("#panel4").is(":visible")==!0&&$("#"+displaymode+
"_leaguestandings_1").css("display")=="block"?d=1:$("#panel4").is(":visible")==!1&&$("#"+displaymode+"_leaguestandings_1").css("display")=="block"&&userLeague.Set_mobile_APICallStatus(1):$("#"+displaymode+"_leaguestandings_1").css("display")=="block"&&(d=1);if(d==1)if(!userLeague.id||userLeague.id<=0||userLeague.id==g){for(var f=typeof objArray!="object"?JSON.parse(c):c,h=JSON.parse(window.sessionStorage.getItem("facebookuser")),j=d=0;j<f.length;j++)if(f[j].F==h.fbuserid){d=1;break}d==1?userLeague.DisplayTheLeagueTable(c,
g,userLeague.name,null,userLeague.creater_Id,b):(window.sessionStorage.setItem("leaderboard",c),AddMyScoreToOverAllLeaderBoard(b));a=0}else userLeague.GetLeagueTable(userLeague.id,userLeague.name,null,userLeague.creater_Id,userLeague.num_MembersInLeague);a==1&&SetTickerContent("LeagueStandings_ticker",GetLeagueStandingsTickerDetailsBasedOnTheOverallScoresForThisGame(c,b))}}catch(k){logError("UpdateLeaderboard",k)}});AdminPusher.bind("UpdateGameOdds",function(a){try{LogThisInteractionTime();var c=
a[0];a[1]==GetCurrentfixtureID()&&updateOdds(c)}catch(g){logError("UpdateGameOdds",g)}});AdminPusher.bind("updateGameDetails",function(a){try{LogThisInteractionTime(),updateFixtureDetails(a[0])}catch(c){logError("updateGameDetails",c)}});AdminPusher.bind("pusherTest",function(a){try{LogThisInteractionTime(),a[0]==1&&($(".GameFeedInfo").prepend("<span class='wintext'><b>Pusher Still Alive!!!!</b></span> <br />"),refreshScroller(GameFeedScroller,"GameFeedInfo"))}catch(c){logError("pusherTest",c)}});
sp==0&&initialiseFriendProxyFunctions();AdminPusher.bind("confirmEventSent",function(){LogThisInteractionTime();admin.confirmEventSent()})}
function ListenForFriendUpdates(){try{var a;a=sp==0?AdminPusher:FriendPusher;var c=0,g;try{g=JSON.parse(window.sessionStorage.getItem("facebookfriendlist"))}catch(d){}if(typeof g!="undefined"&&g!=null&&PushConnectionStarted==1&&FriendsAddedToLSSchema==0){uiUser=JSON.parse(window.sessionStorage.getItem("facebookuser"));console.log("doin ListenForFriendUpdates UD"+uiUser.fbuserid);a.joinGroup("UD"+uiUser.fbuserid);for(var b=0;b<=g.length-1;b++)a.joinGroup("UBD"+g[b].id),console.log("doin ListenForFriendUpdates UBD"+
g[b].id);c=FriendsAddedToLSSchema=1}}catch(f){c=-1,logErrorExtra("ListenForFriendUpdates",f,GetCurrentTimeStamp())}return c};(function(){function a(a,b){switch(b){case 0:return""+a;case 1:return 1*a;case 2:return!!a;case 3:return 1E3*a}return a}function c(a){return"function"==typeof a}function g(a){return a!=o&&-1<(a.constructor+"")[E]("String")}function d(a,b){return o==a||"-"==a&&!b||""==a}function b(a){if(!a||""==a)return"";for(;a&&-1<" \n\r\t"[E](a[W](0));)a=a[I](1);for(;a&&-1<" \n\r\t"[E](a[W](a[v]-1));)a=a[I](0,a[v]-1);return a}function f(){return N.round(2147483647*N[Ka]())}function h(){}function j(a,b){if(y instanceof
Function)return b?encodeURI(a):y(a);H(68);return escape(a)}function k(a){a=a[S]("+")[P](" ");if(ra instanceof Function)try{return ra(a)}catch(b){H(17)}else H(68);return unescape(a)}function m(a,b){if(a){var c=L[X]("script");c.type="text/javascript";c.async=r;c.src=a;c.id=b;var d=L.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d);return c}}function q(a){return a&&0<a[v]?a[0]:""}function n(a){var b=a?a[v]:0;return 0<b?a[b-1]:""}function s(){return"https:"==L[aa][ta]}function p(a){0==
a[E]("www.")&&(a=a[I](4));return a[J]()}function l(a,b){var c,d={url:a,protocol:"http",host:"",path:"",d:new Fa,anchor:""};if(!a)return d;c=a[E]("://");0<=c&&(d.protocol=a[I](0,c),a=a[I](c+3));c=a[za]("/|\\?|#");if(0<=c)d.host=a[I](0,c)[J](),a=a[I](c);else return d.host=a[J](),d;c=a[E]("#");0<=c&&(d.anchor=a[I](c+1),a=a[I](0,c));c=a[E]("?");0<=c&&(C(d.d,a[I](c+1)),a=a[I](0,c));d.anchor&&b&&C(d.d,d.anchor);a&&"/"==a[W](0)&&(a=a[I](1));d.path=a;return d}function z(a,b){function c(a){var b=(a.hostname||
"")[S](":")[0][J](),d=(a[ta]||"")[J](),d=1*a[i]||("http:"==d?80:"https:"==d?443:""),a=a.pathname||"";0==a[E]("/")||(a="/"+a);return[b,""+d,a]}var d=b||L[X]("a");d.href=L[aa][Ia];var f=(d[ta]||"")[J](),g=c(d),h=d[za]||"",j=f+"//"+g[0]+(g[1]?":"+g[1]:"");0==a[E]("//")?a=f+a:0==a[E]("/")?a=j+a:!a||0==a[E]("?")?a=j+g[2]+(a||h):0>a[S]("/")[0][E](":")&&(a=j+g[2][I](0,g[2].lastIndexOf("/"))+"/"+a);d.href=a;f=c(d);return{protocol:(d[ta]||"")[J](),host:f[0],port:f[1],path:f[2],Oa:d[za]||"",url:a||""}}function C(a,
c){function d(b,c){a.contains(b)||a.set(b,[]);a.get(b)[A](c)}for(var f=b(c)[S]("&"),g=0;g<f[v];g++)if(f[g]){var h=f[g][E]("=");0>h?d(f[g],"1"):d(f[g][I](0,h),f[g][I](h+1))}}function x(a,b){return d(a)||"["==a[W](0)&&"]"==a[W](a[v]-1)?"-":a[E](L.domain+(b&&"/"!=b?b:""))==(0==a[E]("http://")?7:0==a[E]("https://")?8:0)?"0":a}function T(a,b,c){!(1<=gc)&&!(1<=100*N[Ka]())&&(a=["utmt=error","utmerr="+a,"utmwv=5.4.1","utmn="+f(),"utmsp=1"],b&&a[A]("api="+b),c&&a[A]("msg="+j(c[I](0,100))),ga.w&&a[A]("aip=1"),
Sc(a[P]("&")),gc++)}function u(a){return O("x"+ma++,a)}function O(a,b){tb[a]=!!b;return a}function ba(a){var b=this.plugins_;if(b)return b.get(a)}function M(a,b){for(var b=b||[],c=0;c<b[v];c++){var d=b[c];if(""+a==d||0==d[E](a+"."))return d}return"-"}function ha(a){100!=a.get(yb)&&a.get(Ba)%1E4>=100*a.get(yb)&&a[ca]()}function U(a){Kc(a.get(Ja))&&a[ca]()}function V(a){"file:"==L[aa][ta]&&a[ca]()}function fa(a){a.get(Ga)||a.set(Ga,L.title,r);a.get(ua)||a.set(ua,L[aa].pathname+L[aa][za],r)}function H(a){Zc.set(a)}
function ja(a){return"string"==typeof a}function ea(a){return"number"!=typeof a&&(o==Number||!(a instanceof Number))||N.round(a)!=a||qa(a)||a==Pa?w:r}function G(){function a(d,f){var g="p="+d+"&id="+b,h=new Image(1,1);h.src=(s()||ga.G?"https://ssl.google-analytics.com":"http://www.google-analytics.com")+"/u/"+c[f]+".gif?"+g;h.onload=function(){h.onload=R;h.onerror=R};h.onerror=function(){h.onload=R;h.onerror=R}}if(!od){od=r;var b=[f(),f(),f()][P]("."),c=["a","b","c"],d=[[0,1],[1,0],[0,2],[2,0]],g=
N[va](N[Ka]()*d[v]);a(g,d[g][0]);a(g,d[g][1])}}function t(a){var b=1,c=0,d;if(a){b=0;for(d=a[v]-1;0<=d;d--)c=a.charCodeAt(d),b=(b<<6&268435455)+c+(c<<14),c=b&266338304,b=0!=c?b^c>>21:b}return b}var o=void 0,r=!0,R=null,w=!1,y=encodeURIComponent,Pa=Infinity,Q=setTimeout,qa=isNaN,N=Math,ra=decodeURIComponent,A="push",va="floor",W="charAt",E="indexOf",sa="match",i="port",X="createElement",ia="toString",v="length",B="prototype",S="split",ca="stopPropagation",aa="location",za="search",Ka="random",ta="protocol",
Ia="href",I="substring",P="join",J="toLowerCase",D,Ea=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,!!d):a.attachEvent&&a.attachEvent("on"+b,c)},Fa=function(){this.prefix="ga.";this.R={}};Fa[B].set=function(a,b){this.R[this.prefix+a]=b};Fa[B].get=function(a){return this.R[this.prefix+a]};Fa[B].contains=function(a){return this.get(a)!==o};var gc=0,ma=0,tb={},Ja=u(),jc=O("anonymizeIp"),sc=u(),tc=u(),Qa=u(),La=u(),ka=u(),na=u(),Ma=u(),ub=u(),Ob=u(),vb=u(),Pb=u(),wb=u(),bb=u(),Rb=u(),lc=
u(),Lb=u(),Sb=u(),mc=u(),Mb=u(),nc=u(),xb=u(),Tb=u(),Ub=u(),oc=u(),yb=u(),Vb=u(),Ua=u(),zb=u(),pb=u(),Ab=u(),Wb=u(),cb=u(),oa=u(),pc=u(),Aa=u(r),la=O("currencyCode"),ua=O("page"),Ga=O("title"),Va=u(),zc=u(),Ac=u(),Bc=u(),qc=u(),ic=u(),qb=u(),Cc=u(),rb=u(),Ba=u(r),db=u(r),ya=u(r),Nb=u(r),Bb=u(r),Cb=u(r),Oa=u(r),Wa=u(r),eb=u(r),Xb=u(r),xa=u(r),pa=u(r),fb=u(r),Yb=u(r),Db=u(r),Zb=u(r),$b=u(r),gb=u(r),hb=u(r),Ca=u(r),Xa=u(r),Ha=u(r),ib=u(r),Na=u(r),Eb=u(r),jb=u(r),Fb=u(r),ac=O("campaignParams"),Gb=u(),
kb=O("hitCallback"),bc=u();u();var Dc=u(),Za=u(),lb=u(),Ec=u(),Fc=u(),Gc=u(),sb=u(),$a=u(),mb=u(),F=u(),da=u(),Bd=u(),Ic=u(),hc=u();u();var ob=u(),rc=u(),Jc=u(),Cd=O("uaName"),Dd=O("uaDomain"),Ed=O("uaPath"),Fd=function(){function a(b,c,d){wa(Ya[B],b,c,d)}a("_createTracker",Ya[B].r,55);a("_getTracker",Ya[B].oa,0);a("_getTrackerByName",Ya[B].u,51);a("_getTrackers",Ya[B].pa,130);a("_anonymizeIp",Ya[B].aa,16);a("_forceSSL",Ya[B].la,125);a("_getPlugin",ba,120)},Gd=function(){function a(b,c,d){wa(K[B],
b,c,d)}ab("_getName",tc,58);ab("_getAccount",Ja,64);ab("_visitCode",Ba,54);ab("_getClientInfo",bb,53,1);ab("_getDetectTitle",Lb,56,1);ab("_getDetectFlash",Rb,65,1);ab("_getLocalGifPath",Vb,57);ab("_getServiceMode",Ua,59);Y("_setClientInfo",bb,66,2);Y("_setAccount",Ja,3);Y("_setNamespace",sc,48);Y("_setAllowLinker",vb,11,2);Y("_setDetectFlash",Rb,61,2);Y("_setDetectTitle",Lb,62,2);Y("_setLocalGifPath",Vb,46,0);Y("_setLocalServerMode",Ua,92,o,0);Y("_setRemoteServerMode",Ua,63,o,1);Y("_setLocalRemoteServerMode",
Ua,47,o,2);Y("_setSampleRate",yb,45,1);Y("_setCampaignTrack",lc,36,2);Y("_setAllowAnchor",Pb,7,2);Y("_setCampNameKey",mc,41);Y("_setCampContentKey",Ub,38);Y("_setCampIdKey",Sb,39);Y("_setCampMediumKey",xb,40);Y("_setCampNOKey",oc,42);Y("_setCampSourceKey",nc,43);Y("_setCampTermKey",Tb,44);Y("_setCampCIdKey",Mb,37);Y("_setCookiePath",na,9,0);Y("_setMaxCustomVariables",zb,0,1);Y("_setVisitorCookieTimeout",Ma,28,1);Y("_setSessionCookieTimeout",ub,26,1);Y("_setCampaignCookieTimeout",Ob,29,1);Y("_setReferrerOverride",
Va,49);Y("_setSiteSpeedSampleRate",mb,132);a("_trackPageview",K[B].Fa,1);a("_trackEvent",K[B].F,4);a("_trackPageLoadTime",K[B].Ea,100);a("_trackSocial",K[B].Ga,104);a("_trackTrans",K[B].Ia,18);a("_sendXEvent",K[B].t,78);a("_createEventTracker",K[B].ia,74);a("_getVersion",K[B].qa,60);a("_setDomainName",K[B].B,6);a("_setAllowHash",K[B].va,8);a("_getLinkerUrl",K[B].na,52);a("_link",K[B].link,101);a("_linkByPost",K[B].ua,102);a("_setTrans",K[B].za,20);a("_addTrans",K[B].$,21);a("_addItem",K[B].Y,19);
a("_clearTrans",K[B].ea,105);a("_setTransactionDelim",K[B].Aa,82);a("_setCustomVar",K[B].wa,10);a("_deleteCustomVar",K[B].ka,35);a("_getVisitorCustomVar",K[B].ra,50);a("_setXKey",K[B].Ca,83);a("_setXValue",K[B].Da,84);a("_getXKey",K[B].sa,76);a("_getXValue",K[B].ta,77);a("_clearXKey",K[B].fa,72);a("_clearXValue",K[B].ga,73);a("_createXObj",K[B].ja,75);a("_addIgnoredOrganic",K[B].W,15);a("_clearIgnoredOrganic",K[B].ba,97);a("_addIgnoredRef",K[B].X,31);a("_clearIgnoredRef",K[B].ca,32);a("_addOrganic",
K[B].Z,14);a("_clearOrganic",K[B].da,70);a("_cookiePathCopy",K[B].ha,30);a("_get",K[B].ma,106);a("_set",K[B].xa,107);a("_addEventListener",K[B].addEventListener,108);a("_removeEventListener",K[B].removeEventListener,109);a("_addDevId",K[B].V);a("_getPlugin",ba,122);a("_setPageGroup",K[B].ya,126);a("_trackTiming",K[B].Ha,124);a("_initData",K[B].v,2);a("_setVar",K[B].Ba,22);Y("_setSessionTimeout",ub,27,3);Y("_setCookieTimeout",Ob,25,3);Y("_setCookiePersistence",Ma,24,1);a("_setAutoTrackOutbound",h,
79);a("_setTrackOutboundSubdomains",h,81);a("_setHrefExamineLimit",h,80)},wa=function(a,b,c,d){a[b]=function(){try{return d!=o&&H(d),c.apply(this,arguments)}catch(a){throw T("exc",b,a&&a.name),a;}}},ab=function(b,c,d,f){K[B][b]=function(){try{return H(d),a(this.a.get(c),f)}catch(g){throw T("exc",b,g&&g.name),g;}}},Y=function(b,c,d,f,g){K[B][b]=function(h){try{H(d),g==o?this.a.set(c,a(h,f)):this.a.set(c,g)}catch(i){throw T("exc",b,i&&i.name),i;}}},Hd=function(a,b){return{type:b,target:a,stopPropagation:function(){throw"aborted";
}}},Id=RegExp(/(^|\.)doubleclick\.net$/i),Lc=function(a,b){return Id.test(L[aa].hostname)?r:"/"!==b?w:(0==a[E]("www.google.")||0==a[E](".google.")||0==a[E]("google."))&&!(-1<a[E]("google.org"))?r:w},ae=function(a){var b=a.get(La),c=a.c(na,"/");Lc(b,c)&&a[ca]()},Yc=function(){var a={},b={},c=new xc;this.g=function(a,b){c.add(a,b)};var d=new xc;this.e=function(a,b){d.add(a,b)};var f=w,g=w,h=r;this.T=function(){f=r};this.j=function(a){this.load();this.set(Gb,a,r);a=new Od(this);f=w;d.execute(this);f=
r;b={};this.n();a.Ja()};this.load=function(){f&&(f=w,this.Ka(),kd(this),g||(g=r,c.execute(this),jd(this),kd(this)),f=r)};this.n=function(){f&&(g?(f=w,jd(this),f=r):this.load())};this.get=function(c){tb[c]&&this.load();return b[c]!==o?b[c]:a[c]};this.set=function(c,d,f){tb[c]&&this.load();f?b[c]=d:a[c]=d;tb[c]&&this.n()};this.Za=function(b){a[b]=this.b(b,0)+1};this.b=function(a,b){var c=this.get(a);return c==o||""===c?b:1*c};this.c=function(a,b){var c=this.get(a);return c==o?b:c+""};this.Ka=function(){if(h){var b=
this.c(La,""),c=this.c(na,"/");Lc(b,c)||(a[ka]=a[wb]&&""!=b?t(b):1,h=w)}}};Yc[B].stopPropagation=function(){throw"aborted";};var Od=function(a){var b=this;this.q=0;var c=a.get(kb);this.Ua=function(){0<b.q&&c&&(b.q--,b.q||c())};this.Ja=function(){!b.q&&c&&Q(c,10)};a.set(bc,b,r)},fd=function(a,b,c){c=c?"":a.c(ka,"1");b=b[S](".");if(6!==b[v]||kc(b[0],c))return w;var c=1*b[1],d=1*b[2],f=1*b[3],g=1*b[4],b=1*b[5];if(!(0<=c&&0<d&&0<f&&0<g&&0<=b))return w;a.set(Ba,c);a.set(Bb,d);a.set(Cb,f);a.set(Oa,g);a.set(Wa,
b);return r},Oc=function(a){var b=a.get(Ba),c=a.get(Bb),d=a.get(Cb),f=a.get(Oa),g=a.b(Wa,1);return[a.b(ka,1),b!=o?b:"-",c||"-",d||"-",f||"-",g][P](".")},gd=function(a){return[a.b(ka,1),a.b(xa,0),a.b(pa,1),a.b(fb,0)][P](".")},ed=function(a,b,c){var c=c?"":a.c(ka,"1"),d=b[S](".");if(4!==d[v]||kc(d[0],c))d=R;a.set(xa,d?1*d[1]:0);a.set(pa,d?1*d[2]:10);a.set(fb,d?1*d[3]:a.get(Qa));return d!=R||!kc(b,c)},Pc=function(a,b){var c=j(a.c(ya,"")),d=[],f=a.get(Aa);if(!b&&f){for(var g=0;g<f[v];g++){var h=f[g];
h&&1==h.scope&&d[A](g+"="+j(h.name)+"="+j(h.value)+"=1")}0<d[v]&&(c+="|"+d[P]("^"))}return c?a.b(ka,1)+"."+c:R},ad=function(a,b,c){c=c?"":a.c(ka,"1");b=b[S](".");if(2>b[v]||kc(b[0],c))return w;b=b.slice(1)[P](".")[S]("|");0<b[v]&&a.set(ya,k(b[0]));if(1>=b[v])return r;b=b[1][S](-1==b[1][E](",")?"^":",");for(c=0;c<b[v];c++){var d=b[c][S]("=");if(4==d[v]){var f={},g=k(d[1]);f.name=g;f.value=k(d[2]);f.scope=1;a.get(Aa)[d[0]]=f}}return r},Mc=function(a,b){var c=Ld(a,b);return c?[a.b(ka,1),a.b(Yb,0),a.b(Db,
1),a.b(Zb,1),c][P]("."):""},Ld=function(a){function b(f,g){if(!d(a.get(f))){var h=a.c(f,""),h=h[S](" ")[P]("%20"),h=h[S]("+")[P]("%20");c[A](g+"="+h)}}var c=[];b(gb,"utmcid");b(Na,"utmcsr");b(Ca,"utmgclid");b(Xa,"utmgclsrc");b(Ha,"utmdclid");b(ib,"utmdsid");b(hb,"utmccn");b(Eb,"utmcmd");b(jb,"utmctr");b(Fb,"utmcct");return c[P]("|")},hd=function(a,b,c){c=c?"":a.c(ka,"1");b=b[S](".");if(5>b[v]||kc(b[0],c))return a.set(Yb,o),a.set(Db,o),a.set(Zb,o),a.set(gb,o),a.set(hb,o),a.set(Na,o),a.set(Eb,o),a.set(jb,
o),a.set(Fb,o),a.set(Ca,o),a.set(Xa,o),a.set(Ha,o),a.set(ib,o),w;a.set(Yb,1*b[1]);a.set(Db,1*b[2]);a.set(Zb,1*b[3]);Td(a,b.slice(4)[P]("."));return r},Td=function(a,b){function c(a){return(a=b[sa](a+"=(.*?)(?:\\|utm|$)"))&&2==a[v]?a[1]:o}function d(b,c){c?(c=f?k(c):c[S]("%20")[P](" "),a.set(b,c)):a.set(b,o)}-1==b[E]("=")&&(b=k(b));var f="2"==c("utmcvr");d(gb,c("utmcid"));d(hb,c("utmccn"));d(Na,c("utmcsr"));d(Eb,c("utmcmd"));d(jb,c("utmctr"));d(Fb,c("utmcct"));d(Ca,c("utmgclid"));d(Xa,c("utmgclsrc"));
d(Ha,c("utmdclid"));d(ib,c("utmdsid"))},kc=function(a,b){return b?a!=b:!/^\d+$/.test(a)},xc=function(){this.filters=[]};xc[B].add=function(a,b){this.filters[A]({name:a,s:b})};xc[B].execute=function(a){try{for(var b=0;b<this.filters[v];b++)this.filters[b].s.call(Z,a)}catch(c){}};var Zc=new function(){var a=[];this.set=function(b){a[b]=r};this.Xa=function(){for(var b=[],c=0;c<a[v];c++)a[c]&&(b[N[va](c/6)]=b[N[va](c/6)]^1<<c%6);for(c=0;c<b[v];c++)b[c]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[W](b[c]||
0);return b[P]("")+"~"}},Z=window,L=document,Kc=function(a){var b=Z._gaUserPrefs;return b&&b.ioo&&b.ioo()||!!a&&Z["ga-disable-"+a]===r},be=function(a,b){Q(a,b)},Ta=function(a){for(var b=[],c=L.cookie[S](";"),a=RegExp("^\\s*"+a+"=\\s*(.*?)\\s*$"),d=0;d<c[v];d++){var f=c[d][sa](a);f&&b[A](f[1])}return b},Sa=function(a,b,c,d,f,g){if(f=Kc(f)?w:Lc(d,c)?w:r){if(b&&0<=Z.navigator.userAgent[E]("Firefox"))for(var b=b.replace(/\n|\r/g," "),f=0,h=b[v];f<h;++f){var i=b.charCodeAt(f)&255;if(10==i||13==i)b=b[I](0,
f)+"?"+b[I](f+1)}b&&2E3<b[v]&&(b=b[I](0,2E3),H(69));a=a+"="+b+"; path="+c+"; ";g&&(a+="expires="+(new Date((new Date).getTime()+g)).toGMTString()+"; ");d&&(a+="domain="+d+";");L.cookie=a}},yc,Qc,$c=function(){if(!yc){var a={},b=Z.navigator,c=Z.screen;a.Q=c?c.width+"x"+c.height:"-";a.P=c?c.colorDepth+"-bit":"-";a.language=(b&&(b.language||b.browserLanguage)||"-")[J]();a.javaEnabled=b&&b.javaEnabled()?1:0;a.characterSet=L.characterSet||L.charset||"-";try{var d,f=L.documentElement,g=L.body,h=g&&g.clientWidth&&
g.clientHeight,b=[];f&&f.clientWidth&&f.clientHeight&&("CSS1Compat"===L.compatMode||!h)?b=[f.clientWidth,f.clientHeight]:h&&(b=[g.clientWidth,g.clientHeight]);d=0>=b[0]||0>=b[1]?"":b[P]("x");a.Wa=d}catch(i){H(135)}yc=a}},Qd=function(){$c();for(var a=yc,b=Z.navigator,a=b.appName+b.version+a.language+b.platform+b.userAgent+a.javaEnabled+a.Q+a.P+(L.cookie?L.cookie:"")+(L.referrer?L.referrer:""),b=a[v],c=Z.history[v];0<c;)a+=c--^b++;return t(a)},Rd=function(a){$c();var b=yc;a.set(Ac,b.Q);a.set(Bc,b.P);
a.set(qb,b.language);a.set(Cc,b.characterSet);a.set(qc,b.javaEnabled);a.set(rb,b.Wa);if(a.get(bb)&&a.get(Rb)){if(!(b=Qc)){var c,d,f;d="ShockwaveFlash";if((b=(b=Z.navigator)?b.plugins:o)&&0<b[v])for(c=0;c<b[v]&&!f;c++)d=b[c],-1<d.name[E]("Shockwave Flash")&&(f=d.description[S]("Shockwave Flash ")[1]);else{d=d+"."+d;try{c=new ActiveXObject(d+".7"),f=c.GetVariable("$version")}catch(g){}if(!f)try{c=new ActiveXObject(d+".6"),f="WIN 6,0,21,0",c.AllowScriptAccess="always",f=c.GetVariable("$version")}catch(h){}if(!f)try{c=
new ActiveXObject(d),f=c.GetVariable("$version")}catch(i){}f&&(f=f[S](" ")[1][S](","),f=f[0]+"."+f[1]+" r"+f[2])}b=f?f:"-"}Qc=b;a.set(ic,Qc)}else a.set(ic,"-")},ce=function(a){if(c(a))this.s=a;else{var b=a[0],d=b.lastIndexOf(":"),f=b.lastIndexOf(".");this.h=this.i=this.l="";-1==d&&-1==f?this.h=b:-1==d&&-1!=f?(this.i=b[I](0,f),this.h=b[I](f+1)):-1!=d&&-1==f?(this.l=b[I](0,d),this.h=b[I](d+1)):d>f?(this.i=b[I](0,f),this.l=b[I](f+1,d),this.h=b[I](d+1)):(this.i=b[I](0,f),this.h=b[I](f+1));this.k=a.slice(1);
this.Ma=!this.l&&"_require"==this.h;this.J=!this.i&&!this.l&&"_provide"==this.h}},Ra=function(){wa(Ra[B],"push",Ra[B][A],5);wa(Ra[B],"_getPlugin",ba,121);wa(Ra[B],"_createAsyncTracker",Ra[B].Sa,33);wa(Ra[B],"_getAsyncTracker",Ra[B].Ta,34);this.I=new Fa;this.p=[]};D=Ra[B];D.Na=function(a,b,d){var f=this.I.get(a);if(!c(f))return w;b.plugins_=b.plugins_||new Fa;b.plugins_.set(a,new f(b,d||{}));return r};D.push=function(a){var b=Da.Va.apply(this,arguments),b=Da.p.concat(b);for(Da.p=[];0<b[v]&&!Da.O(b[0])&&
!(b.shift(),0<Da.p[v]););Da.p=Da.p.concat(b);return 0};D.Va=function(a){for(var b=[],c=0;c<arguments[v];c++)try{var d=new ce(arguments[c]);d.J?this.O(d):b[A](d)}catch(f){}return b};D.O=function(a){try{if(a.s)a.s.apply(Z);else if(a.J)this.I.set(a.k[0],a.k[1]);else{var b="_gat"==a.i?ga:"_gaq"==a.i?Da:ga.u(a.i);if(a.Ma){if(!this.Na(a.k[0],b,a.k[2])){if(!a.Pa){var c=z(""+a.k[1]),d=c[ta],f=L[aa][ta],g;if(g="https:"==d||d==f?r:"http:"!=d?w:"http:"==f){var h;a:{var j=z(L[aa][Ia]);if(!c.Oa&&!(0<=c.url[E]("?")||
0<=c.path[E]("://")||c.host==j.host&&c[i]==j[i]))for(var k="http:"==c[ta]?80:443,l=ga.S,b=0;b<l[v];b++)if(c.host==l[b][0]&&(c[i]||k)==(l[b][1]||k)&&0==c.path[E](l[b][2])){h=r;break a}h=w}g=h&&!Kc()}g&&(a.Pa=m(c.url))}return r}}else a.l&&(b=b.plugins_.get(a.l)),b[a.h].apply(b,a.k)}}catch(n){}};D.Sa=function(a,b){return ga.r(a,b||"")};D.Ta=function(a){return ga.u(a)};var Qb=function(){function a(b,c,d,f){o==g[b]&&(g[b]={});o==g[b][c]&&(g[b][c]=[]);g[b][c][d]=f}function b(a,c,d){if(o!=g[a]&&o!=g[a][c])return g[a][c][d]}
function c(a,b){if(o!=g[a]&&o!=g[a][b]){g[a][b]=o;var d=r,f;for(f=0;f<h[v];f++)if(o!=g[a][h[f]]){d=w;break}d&&(g[a]=o)}}function d(a){var b="",c=w,f,g;for(f=0;f<h[v];f++)if(g=a[h[f]],o!=g){c&&(b+=h[f]);for(var c=[],Hc=o,nb=o,nb=0;nb<g[v];nb++)if(o!=g[nb]){Hc="";nb!=n&&o==g[nb-1]&&(Hc+=nb[ia]()+l);for(var md=g[nb],nd="",p=o,q=o,s=o,p=0;p<md[v];p++)q=md[W](p),s=m[q],nd+=o!=s?s:q;Hc+=nd;c[A](Hc)}b+=i+c[P](k)+j;c=w}else c=r;return b}var f=this,g=[],h=["k","v"],i="(",j=")",k="*",l="!",m={"'":"'0"};m[j]=
"'1";m[k]="'2";m[l]="'3";var n=1;f.Ra=function(a){return o!=g[a]};f.A=function(){for(var a="",b=0;b<g[v];b++)o!=g[b]&&(a+=b[ia]()+d(g[b]));return a};f.Qa=function(a){if(a==o)return f.A();for(var b=a.A(),c=0;c<g[v];c++)o!=g[c]&&!a.Ra(c)&&(b+=c[ia]()+d(g[c]));return b};f.f=function(b,c,d){if(!ja(d))return w;a(b,"k",c,d);return r};f.o=function(b,c,d){if(!ea(d))return w;a(b,"v",c,d[ia]());return r};f.getKey=function(a,c){return b(a,"k",c)};f.N=function(a,c){return b(a,"v",c)};f.L=function(a){c(a,"k")};
f.M=function(a){c(a,"v")};wa(f,"_setKey",f.f,89);wa(f,"_setValue",f.o,90);wa(f,"_getKey",f.getKey,87);wa(f,"_getValue",f.N,88);wa(f,"_clearKey",f.L,85);wa(f,"_clearValue",f.M,86)},Rc=function(a){var b=Z.gaGlobal;a&&!b&&(Z.gaGlobal=b={});return b},de=function(){var a=Rc(r).hid;a==R&&(a=f(),Rc(r).hid=a);return a},$d=function(a){a.set(zc,de());var b=Rc();if(b&&b.dh==a.get(ka)){var c=b.sid;c&&("0"==c&&H(112),a.set(Oa,c),a.get(db)&&a.set(Cb,c));b=b.vid;a.get(db)&&b&&(b=b[S]("."),1*b[1]||H(112),a.set(Ba,
1*b[0]),a.set(Bb,1*b[1]))}},bd,id=function(a,b,c,d){var f=a.c(La,""),g=a.c(na,"/"),d=d!=o?d:a.b(Ma,0),a=a.c(Ja,"");Sa(b,c,g,f,a,d)},jd=function(a){var b=a.c(La,"");a.b(ka,1);var c=a.c(na,"/"),d=a.c(Ja,"");Sa("__utma",Oc(a),c,b,d,a.get(Ma));Sa("__utmb",gd(a),c,b,d,a.get(ub));Sa("__utmc",""+a.b(ka,1),c,b,d);var f=Mc(a,r);f?Sa("__utmz",f,c,b,d,a.get(Ob)):Sa("__utmz","",c,b,"",-1);(f=Pc(a,w))?Sa("__utmv",f,c,b,d,a.get(Ma)):Sa("__utmv","",c,b,"",-1)},kd=function(a){var b=a.b(ka,1);if(!fd(a,M(b,Ta("__utma"))))return a.set(Nb,
r),w;var c=!ed(a,M(b,Ta("__utmb")));a.set(Xb,c);hd(a,M(b,Ta("__utmz")));ad(a,M(b,Ta("__utmv")));bd=!c;return r},Pd=function(a){!bd&&!(0<Ta("__utmb")[v])&&(Sa("__utmd","1",a.c(na,"/"),a.c(La,""),a.c(Ja,""),1E4),0==Ta("__utmd")[v]&&a[ca]())},ld=function(a){a.get(Ba)==o?Vc(a):a.get(Nb)&&!a.get(ob)?Vc(a):a.get(Xb)&&Wc(a)},ee=function(a){a.get($b)&&!a.get(eb)&&(Wc(a),a.set(Db,a.get(Wa)))},Vc=function(a){var b=a.get(Qa);a.set(db,r);a.set(Ba,f()^Qd(a)&2147483647);a.set(ya,"");a.set(Bb,b);a.set(Cb,b);a.set(Oa,
b);a.set(Wa,1);a.set(eb,r);a.set(xa,0);a.set(pa,10);a.set(fb,b);a.set(Aa,[]);a.set(Nb,w);a.set(Xb,w)},Wc=function(a){a.set(Cb,a.get(Oa));a.set(Oa,a.get(Qa));a.Za(Wa);a.set(eb,r);a.set(xa,0);a.set(pa,10);a.set(fb,a.get(Qa));a.set(Xb,w)},Jd="daum:q eniro:search_word naver:query pchome:q images.google:q google:q yahoo:p yahoo:q msn:q bing:q aol:query aol:q lycos:q lycos:query ask:q netscape:query cnn:query about:terms mamma:q voila:rdata virgilio:qs live:q baidu:wd alice:qs yandex:text najdi:q seznam:q rakuten:qt biglobe:q goo.ne:MT wp:szukaj onet:qt yam:k kvasir:q ozu:q terra:query rambler:query conduit:q babylon:q search-results:q avg:q comcast:q incredimail:q startsiden:q go.mail.ru:q search.centrum.cz:q 360.cn:q".split(" "),
Kd=function(a){if(a.get(lc)&&!a.get(ob)){for(var b=!d(a.get(gb))||!d(a.get(Na))||!d(a.get(Ca))||!d(a.get(Ha)),c={},f=0;f<vc[v];f++){var g=vc[f];c[g]=a.get(g)}(f=a.get(ac))?(H(149),g=new Fa,C(g,f),f=g):f=l(L[aa][Ia],a.get(Pb)).d;if(!("1"==n(f.get(a.get(oc)))&&b)&&(f=Md(a,f)||Nd(a),!f&&!b&&a.get(eb)&&(uc(a,o,"(direct)",o,o,o,"(direct)","(none)",o,o),f=r),f&&(a.set($b,Sd(a,c)),b="(direct)"==a.get(Na)&&"(direct)"==a.get(hb)&&"(none)"==a.get(Eb),a.get($b)||a.get(eb)&&!b)))a.set(Yb,a.get(Qa)),a.set(Db,
a.get(Wa)),a.Za(Zb)}},Md=function(a,b){function c(d,f){var f=f||"-",g=n(b.get(a.get(d)));return g&&"-"!=g?k(g):f}var f=n(b.get(a.get(Sb)))||"-",g=n(b.get(a.get(nc)))||"-",h=n(b.get(a.get(Mb)))||"-",i=n(b.get("gclsrc"))||"-",j=n(b.get("dclid"))||"-",m=c(mc,"(not set)"),o=c(xb,"(not set)"),p=c(Tb),q=c(Ub);if(d(f)&&d(h)&&d(j)&&d(g))return w;var s=!d(h)&&!d(i),s=d(g)&&(!d(j)||s),u=d(p);if(s||u){var z=cd(a),z=l(z,r);if((z=Xc(a,z))&&!d(z[1]&&!z[2]))s&&(g=z[0]),u&&(p=z[1])}uc(a,f,g,h,i,j,m,o,p,q);return r},
Nd=function(a){var b=cd(a),c=l(b,r);if(!(b!=o&&b!=R&&""!=b&&"0"!=b&&"-"!=b&&0<=b[E]("://"))||c&&-1<c.host[E]("google")&&c.d.contains("q")&&"cse"==c.path)return w;if((b=Xc(a,c))&&!b[2])return uc(a,o,b[0],o,o,o,"(organic)","organic",b[1],o),r;if(b||!a.get(eb))return w;a:{for(var b=a.get(Wb),d=p(c.host),f=0;f<b[v];++f)if(-1<d[E](b[f])){a=w;break a}uc(a,o,d,o,o,o,"(referral)","referral",o,"/"+c.path);a=r}return a},Xc=function(a,b){for(var c=a.get(pb),d=0;d<c[v];++d){var f=c[d][S](":");if(-1<b.host[E](f[0][J]())){var g=
b.d.get(f[1]);if(g&&(g=q(g),!g&&-1<b.host[E]("google.")&&(g="(not provided)"),!f[3]||-1<b.url[E](f[3]))){a:{for(var c=g,d=a.get(Ab),c=k(c)[J](),h=0;h<d[v];++h)if(c==d[h]){c=r;break a}c=w}return[f[2]||f[0],g,c]}}}return R},uc=function(a,b,c,d,f,g,h,i,j,k){a.set(gb,b);a.set(Na,c);a.set(Ca,d);a.set(Xa,f);a.set(Ha,g);a.set(hb,h);a.set(Eb,i);a.set(jb,j);a.set(Fb,k)},vc=[hb,gb,Ca,Ha,Na,Eb,jb,Fb],Sd=function(a,b){function c(a){a=(""+a)[S]("+")[P]("%20");return a[S](" ")[P]("%20")}function d(c){var f=""+
(a.get(c)||""),c=""+(b[c]||"");return 0<f[v]&&f==c}if(d(Ca)||d(Ha))return H(131),w;for(var f=0;f<vc[v];f++){var g=vc[f],h=b[g]||"-",g=a.get(g)||"-";if(c(h)!=c(g))return r}return w},Ud=RegExp(/^https:\/\/(www\.)?google(\.com?)?(\.[a-z]{2}t?)?\/?$/i),cd=function(a){a=x(a.get(Va),a.get(na));try{if(Ud.test(a))return H(136),a+"?q="}catch(b){H(145)}return a},wc,dd,Vd=function(a){wc=a.c(Ca,"");dd=a.c(Xa,"")},Wd=function(a){var b=a.c(Ca,""),c=a.c(Xa,"");b!=wc&&(-1<c[E]("ds")?a.set(ib,o):!d(wc)&&-1<dd[E]("ds")&&
a.set(ib,wc))},Xd=function(a){Yd(a,L[aa][Ia])?(a.set(ob,r),H(12)):a.set(ob,w)},Yd=function(a,b){if(!a.get(vb))return w;var c=l(b,a.get(Pb)),d=q(c.d.get("__utma")),f=q(c.d.get("__utmb")),g=q(c.d.get("__utmc")),h=q(c.d.get("__utmx")),i=q(c.d.get("__utmz")),j=q(c.d.get("__utmv")),c=q(c.d.get("__utmk"));if(t(""+d+f+g+h+i+j)!=c){d=k(d);f=k(f);g=k(g);h=k(h);g=Zd(d+f+g+h,i,j,c);if(!g)return w;i=g[0];j=g[1]}if(!fd(a,d,r))return w;ed(a,f,r);hd(a,i,r);ad(a,j,r);pd(a,h,r);return r},Nc=function(a,b,c){var d;
d=Oc(a)||"-";var f=gd(a)||"-",g=""+a.b(ka,1)||"-",h=Tc(a)||"-",i=Mc(a,w)||"-",a=Pc(a,w)||"-",j=t(""+d+f+g+h+i+a),k=[];k[A]("__utma="+d);k[A]("__utmb="+f);k[A]("__utmc="+g);k[A]("__utmx="+h);k[A]("__utmz="+i);k[A]("__utmv="+a);k[A]("__utmk="+j);d=k[P]("&");if(!d)return b;f=b[E]("#");if(c)return 0>f?b+"#"+d:b+"&"+d;c="";g=b[E]("?");0<f&&(c=b[I](f),b=b[I](0,f));return 0>g?b+"?"+d+c:b+"&"+d+c},Zd=function(a,b,c,d){for(var f=0;3>f;f++){for(var g=0;3>g;g++){if(d==t(a+b+c))return H(127),[b,c];var h=b.replace(/ /g,
"%20"),i=c.replace(/ /g,"%20");if(d==t(a+h+i))return H(128),[h,i];h=h.replace(/\+/g,"%20");i=i.replace(/\+/g,"%20");if(d==t(a+h+i))return H(129),[h,i];try{var l=b[sa]("utmctr=(.*?)(?:\\|utm|$)");if(l&&2==l[v]&&(h=b.replace(l[1],j(k(l[1]))),d==t(a+h+c)))return H(139),[h,c]}catch(m){}b=k(b)}c=k(c)}},qd="|",Uc=function(a,b,c,d,f,g,h,i,j){var k=rd(a,b);k||(k={},a.get(cb)[A](k));k.id_=b;k.affiliation_=c;k.total_=d;k.tax_=f;k.shipping_=g;k.city_=h;k.state_=i;k.country_=j;k.items_=k.items_||[];return k},
sd=function(a,b,c,d,f,g,h){var a=rd(a,b)||Uc(a,b,"",0,0,0,"","",""),i;a:{if(a&&a.items_){i=a.items_;for(var j=0;j<i[v];j++)if(i[j].sku_==c){i=i[j];break a}}i=R}j=i||{};j.transId_=b;j.sku_=c;j.name_=d;j.category_=f;j.price_=g;j.quantity_=h;i||a.items_[A](j);return j},rd=function(a,b){for(var c=a.get(cb),d=0;d<c[v];d++)if(c[d].id_==b)return c[d];return R},td,fe=function(a){var Hc;var nb;if(!td){var b;b=L[aa].hash;var c=Z.name,d=/^#?gaso=([^&]*)/;if(Hc=(nb=(b=b&&b[sa](d)||c&&c[sa](d))?b[1]:q(Ta("GASO")),
b=nb)&&b[sa](/^(?:!([-0-9a-z.]{1,40})!)?([-.\w]{10,1200})$/i),c=Hc)id(a,"GASO",""+b,0),ga._gasoDomain=a.get(La),ga._gasoCPath=a.get(na),a=c[1],m("https://www.google.com/analytics/web/inpage/pub/inpage.js?"+(a?"prefix="+a+"&":"")+f(),"_gasojs");td=r}},pd=function(a,b,c){c&&(b=k(b));c=a.b(ka,1);b=b[S](".");!(2>b[v])&&/^\d+$/.test(b[0])&&(b[0]=""+c,id(a,"__utmx",b[P]("."),o))},Tc=function(a,b){var c=M(a.get(ka),Ta("__utmx"));"-"==c&&(c="");return b?j(c):c},ge=function(a){try{var b=l(L[aa][Ia],w),c=ra(n(b.d.get("utm_referrer")))||
"";c&&a.set(Va,c);var d=Z.gaData&&Z.gaData.expId;d||(d=ra(q(b.d.get("utm_expid")))||"");d&&a.set(Jc,""+d)}catch(f){H(146)}},vd=function(a,b){var c=N.min(a.b(mb,0),100);if(a.b(Ba,0)%100>=c)return w;c=he()||ie();if(c==o)return w;var d=c[0];if(d==o||d==Pa||qa(d))return w;0<d?je(c)?b(ud(c)):b(ud(c.slice(0,1))):Ea(Z,"load",function(){vd(a,b)},w);return r},ke=function(a,b,c,d){var f=new Qb;f.f(14,90,b[I](0,500));f.f(14,91,a[I](0,150));f.f(14,92,""+wd(c));d!=o&&f.f(14,93,d[I](0,500));f.o(14,90,c);return f},
je=function(a){for(var b=1;b<a[v];b++)if(qa(a[b])||a[b]==Pa||0>a[b])return w;return r},wd=function(a){return qa(a)||0>a?0:5E3>a?10*N[va](a/10):5E4>a?100*N[va](a/100):41E5>a?1E3*N[va](a/1E3):41E5},ud=function(a){for(var b=new Qb,c=0;c<a[v];c++)b.f(14,c+1,""+wd(a[c])),b.o(14,c+1,a[c]);return b},he=function(){var a=Z.performance||Z.webkitPerformance;if(a=a&&a.timing){var b=a.navigationStart;if(0==b)H(133);else return[a.loadEventStart-b,a.domainLookupEnd-a.domainLookupStart,a.connectEnd-a.connectStart,
a.responseStart-a.requestStart,a.responseEnd-a.responseStart,a.fetchStart-b,a.domInteractive-b,a.domContentLoadedEventStart-b]}},ie=function(){if(Z.top==Z){var a=Z.external,b=a&&a.onloadT;a&&!a.isValidLoadTime&&(b=o);2147483648<b&&(b=o);0<b&&a.setPageReadyTime();return b==o?o:[b]}},le=function(a){if(a.get(db))try{var b;a:{var c=Ta(a.get(Cd)||"_ga");if(c&&!(1>c[v])){for(var d=[],f=0;f<c[v];f++){var g,h=c[f][S]("."),i=h.shift();if(("GA1"==i||"1"==i)&&1<h[v]){var j=h.shift()[S]("-");1==j[v]&&(j[1]="1");
j[0]*=1;j[1]*=1;g={Ya:j,$a:h[P](".")}}else g=o;g&&d[A](g)}if(1==d[v]){b=d[0].$a;break a}if(0!=d[v]){var k=a.get(Dd)||a.get(La),d=xd(d,(0==k[E](".")?k.substr(1):k)[S](".")[v],0);if(1==d[v]){b=d[0].$a;break a}var l=a.get(Ed)||a.get(na);(c=l)?(1<c[v]&&"/"==c[W](c[v]-1)&&(c=c.substr(0,c[v]-1)),0!=c[E]("/")&&(c="/"+c),l=c):l="/";d=xd(d,"/"==l?1:l[S]("/")[v],1);b=d[0].$a;break a}}b=o}if(b){var m=(""+b)[S](".");2==m[v]&&/[0-9.]/.test(m)&&(H(114),a.set(Ba,m[0]),a.set(Bb,m[1]),a.set(db,w))}}catch(n){H(115)}},
xd=function(a,b,c){for(var d=[],f=[],g=128,h=0;h<a[v];h++){var i=a[h];if(i.Ya[c]==b)d[A](i);else if(i.Ya[c]==g)f[A](i);else i.Ya[c]<g&&(f=[i],g=i.Ya[c])}return 0<d[v]?d:f},K=function(a,b,c){function d(a){return function(b){if((b=b.get(rc)[a])&&b[v])for(var c=Hd(f,a),d=0;d<b[v];d++)b[d].call(f,c)}}var f=this;this.a=new Yc;this.get=function(a){return this.a.get(a)};this.set=function(a,b,c){this.a.set(a,b,c)};this.set(Ja,b||"UA-XXXXX-X");this.set(tc,a||"");this.set(sc,c||"");this.set(Qa,N.round((new Date).getTime()/
1E3));this.set(na,"/");this.set(Ma,63072E6);this.set(Ob,15768E6);this.set(ub,18E5);this.set(vb,w);this.set(zb,50);this.set(Pb,w);this.set(wb,r);this.set(bb,r);this.set(Rb,r);this.set(lc,r);this.set(Lb,r);this.set(mc,"utm_campaign");this.set(Sb,"utm_id");this.set(Mb,"gclid");this.set(nc,"utm_source");this.set(xb,"utm_medium");this.set(Tb,"utm_term");this.set(Ub,"utm_content");this.set(oc,"utm_nooverride");this.set(yb,100);this.set(mb,1);this.set(F,w);this.set(Vb,"/__utm.gif");this.set(Ua,1);this.set(cb,
[]);this.set(Aa,[]);this.set(pb,Jd.slice(0));this.set(Ab,[]);this.set(Wb,[]);this.B("auto");this.set(Va,L.referrer);ge(this.a);this.set(rc,{hit:[],load:[]});this.a.g("0",Xd);this.a.g("1",Vd);this.a.g("2",ld);this.a.g("3",le);this.a.g("4",Kd);this.a.g("5",Wd);this.a.g("6",ee);this.a.g("7",d("load"));this.a.g("8",fe);this.a.e("A",U);this.a.e("B",V);this.a.e("C",ld);this.a.e("D",ha);this.a.e("E",ae);this.a.e("F",me);this.a.e("G",Pd);this.a.e("H",fa);this.a.e("I",Rd);this.a.e("J",$d);this.a.e("K",d("hit"));
this.a.e("L",ne);this.a.e("M",oe);0===this.get(Qa)&&H(111);this.a.T();this.H=o};D=K[B];D.m=function(){var a=this.get(oa);a||(a=new Qb,this.set(oa,a));return a};D.La=function(a){for(var b in a){var c=a[b];a.hasOwnProperty(b)&&this.set(b,c,r)}};D.K=function(a){if(this.get(F))return w;var b=this,c=vd(this.a,function(c){b.set(ua,a,r);b.t(c)});this.set(F,c);return c};D.Fa=function(a){a&&g(a)?(H(13),this.set(ua,a,r)):"object"===typeof a&&a!==R&&this.La(a);this.H=a=this.get(ua);this.a.j("page");this.K(a);
42==N[va](1E4*N[Ka]())&&G()};D.F=function(a,b,c,d,f){if(""==a||!ja(a)||""==b||!ja(b)||c!=o&&!ja(c)||d!=o&&!ea(d))return w;this.set(Za,a,r);this.set(lb,b,r);this.set(Ec,c,r);this.set(Fc,d,r);this.set(Dc,!!f,r);this.a.j("event");return r};D.Ha=function(a,b,c,d,f){var g=this.a.b(mb,0);1*f===f&&(g=f);if(this.a.b(Ba,0)%100>=g)return w;c=1*(""+c);if(""==a||!ja(a)||""==b||!ja(b)||!ea(c)||qa(c)||0>c||0>g||100<g||d!=o&&(""==d||!ja(d)))return w;this.t(ke(a,b,c,d));return r};D.Ga=function(a,b,c,d){if(!a||!b)return w;
this.set(Gc,a,r);this.set(sb,b,r);this.set($a,c||L[aa][Ia],r);d&&this.set(ua,d,r);this.a.j("social");return r};D.Ea=function(){this.set(mb,10);this.K(this.H)};D.Ia=function(){this.a.j("trans")};D.t=function(a){this.set(pc,a,r);this.a.j("event")};D.ia=function(a){this.v();var b=this;return{_trackEvent:function(c,d,f){H(91);b.F(a,c,d,f)}}};D.ma=function(a){return this.get(a)};D.xa=function(a,b){if(a)if(g(a))this.set(a,b);else if("object"==typeof a)for(var c in a)a.hasOwnProperty(c)&&this.set(c,a[c])};
D.addEventListener=function(a,b){var c=this.get(rc)[a];c&&c[A](b)};D.removeEventListener=function(a,b){for(var c=this.get(rc)[a],d=0;c&&d<c[v];d++)if(c[d]==b){c.splice(d,1);break}};D.qa=function(){return"5.4.1"};D.B=function(a){this.get(wb);a="auto"==a?p(L.domain):!a||"-"==a||"none"==a?"":a[J]();this.set(La,a)};D.va=function(a){this.set(wb,!!a)};D.na=function(a,b){return Nc(this.a,a,b)};D.link=function(a,b){if(this.a.get(vb)&&a){var c=Nc(this.a,a,b);L[aa].href=c}};D.ua=function(a,b){this.a.get(vb)&&
a&&a.action&&(a.action=Nc(this.a,a.action,b))};D.za=function(){this.v();var a=this.a,c=L.getElementById?L.getElementById("utmtrans"):L.utmform&&L.utmform.utmtrans?L.utmform.utmtrans:R;if(c&&c.value){a.set(cb,[]);for(var c=c.value[S]("UTM:"),d=0;d<c[v];d++){c[d]=b(c[d]);for(var f=c[d][S](qd),g=0;g<f[v];g++)f[g]=b(f[g]);"T"==f[0]?Uc(a,f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8]):"I"==f[0]&&sd(a,f[1],f[2],f[3],f[4],f[5],f[6])}}};D.$=function(a,b,c,d,f,g,h,i){return Uc(this.a,a,b,c,d,f,g,h,i)};D.Y=function(a,
b,c,d,f,g){return sd(this.a,a,b,c,d,f,g)};D.Aa=function(a){qd=a||"|"};D.ea=function(){this.set(cb,[])};D.wa=function(a,b,c,d){var f=this.a;if(0>=a||a>f.get(zb))a=w;else if(!b||!c||128<b[v]+c[v])a=w;else{1!=d&&2!=d&&(d=3);var g={};g.name=b;g.value=c;g.scope=d;f.get(Aa)[a]=g;a=r}a&&this.a.n();return a};D.ka=function(a){this.a.get(Aa)[a]=o;this.a.n()};D.ra=function(a){return(a=this.a.get(Aa)[a])&&1==a.scope?a.value:o};D.Ca=function(a,b,c){this.m().f(a,b,c)};D.Da=function(a,b,c){this.m().o(a,b,c)};D.sa=
function(a,b){return this.m().getKey(a,b)};D.ta=function(a,b){return this.m().N(a,b)};D.fa=function(a){this.m().L(a)};D.ga=function(a){this.m().M(a)};D.ja=function(){return new Qb};D.W=function(a){a&&this.get(Ab)[A](a[J]())};D.ba=function(){this.set(Ab,[])};D.X=function(a){a&&this.get(Wb)[A](a[J]())};D.ca=function(){this.set(Wb,[])};D.Z=function(a,b,c,d,f){if(a&&b){a=[a,b[J]()][P](":");if(d||f)a=[a,d,f][P](":");d=this.get(pb);d.splice(c?0:d[v],0,a)}};D.da=function(){this.set(pb,[])};D.ha=function(a){this.a.load();
var b=this.get(na),c=Tc(this.a);this.set(na,a);this.a.n();pd(this.a,c);this.set(na,b)};D.ya=function(a,b){if(0<a&&5>=a&&g(b)&&""!=b){var c=this.get(da)||[];c[a]=b;this.set(da,c)}};D.V=function(a){a=""+a;if(a[sa](/^[A-Za-z0-9]{1,5}$/)){var b=this.get(hc)||[];b[A](a);this.set(hc,b)}};D.v=function(){this.a.load()};D.Ba=function(a){a&&""!=a&&(this.set(ya,a),this.a.j("var"))};var od=w,me=function(a){"trans"!==a.get(Gb)&&500<=a.b(xa,0)&&a[ca]();if("event"===a.get(Gb)){var b=(new Date).getTime(),c=a.b(fb,
0),d=a.b(Oa,0),c=N[va](1*((b-(c!=d?c:1E3*c))/1E3));0<c&&(a.set(fb,b),a.set(pa,N.min(10,a.b(pa,0)+c)));0>=a.b(pa,0)&&a[ca]()}},oe=function(a){"event"===a.get(Gb)&&a.set(pa,N.max(0,a.b(pa,10)-1))},Hb=function(){var a=[];this.add=function(b,c,d){d&&(c=j(""+c));a[A](b+"="+c)};this.toString=function(){return a[P]("&")}},Ib=function(a,b){(b||2!=a.get(Ua))&&a.Za(xa)},Jb=function(a,b){b.add("utmwv","5.4.1");b.add("utms",a.get(xa));b.add("utmn",f());var c=L[aa].hostname;d(c)||b.add("utmhn",c,r);c=a.get(yb);
100!=c&&b.add("utmsp",c,r)},Kb=function(a,c){c.add("utmht",(new Date).getTime());c.add("utmac",b(a.get(Ja)));a.get(Jc)&&c.add("utmxkey",a.get(Jc),r);a.get(Dc)&&c.add("utmni",1);var d=a.get(hc);d&&0<d[v]&&c.add("utmdid",d[P]("."));pe(a,c);a.get(jc)!==w&&(a.get(jc)||ga.w)&&c.add("aip",1);c.add("utmu",Zc.Xa())},cc=function(a,b){for(var c=a.get(da)||[],d=[],f=1;f<c[v];f++)c[f]&&d[A](f+":"+j(c[f].replace(/%/g,"%25").replace(/:/g,"%3A").replace(/,/g,"%2C")));d[v]&&b.add("utmpg",d[P](","))},pe=function(a,
b){function c(a,b){b&&d[A](a+"="+b+";")}var d=[];c("__utma",Oc(a));c("__utmz",Mc(a,w));c("__utmv",Pc(a,r));c("__utmx",Tc(a));b.add("utmcc",d[P]("+"),r)},dc=function(a,b){a.get(bb)&&(b.add("utmcs",a.get(Cc),r),b.add("utmsr",a.get(Ac)),a.get(rb)&&b.add("utmvp",a.get(rb)),b.add("utmsc",a.get(Bc)),b.add("utmul",a.get(qb)),b.add("utmje",a.get(qc)),b.add("utmfl",a.get(ic),r))},ec=function(a,b){a.get(Lb)&&a.get(Ga)&&b.add("utmdt",a.get(Ga),r);b.add("utmhid",a.get(zc));b.add("utmr",x(a.get(Va),a.get(na)),
r);b.add("utmp",j(a.get(ua),r),r)},fc=function(a,b){for(var c=a.get(oa),f=a.get(pc),g=a.get(Aa)||[],h=0;h<g[v];h++){var i=g[h];i&&(c||(c=new Qb),c.f(8,h,i.name),c.f(9,h,i.value),3!=i.scope&&c.f(11,h,""+i.scope))}!d(a.get(Za))&&!d(a.get(lb),r)&&(c||(c=new Qb),c.f(5,1,a.get(Za)),c.f(5,2,a.get(lb)),g=a.get(Ec),g!=o&&c.f(5,3,g),g=a.get(Fc),g!=o&&c.o(5,1,g));c?b.add("utme",c.Qa(f),r):f&&b.add("utme",f.A(),r)},qe=function(a,b,c){var d=new Hb;Ib(a,c);Jb(a,d);d.add("utmt","tran");d.add("utmtid",b.id_,r);
d.add("utmtst",b.affiliation_,r);d.add("utmtto",b.total_,r);d.add("utmttx",b.tax_,r);d.add("utmtsp",b.shipping_,r);d.add("utmtci",b.city_,r);d.add("utmtrg",b.state_,r);d.add("utmtco",b.country_,r);fc(a,d);dc(a,d);ec(a,d);(b=a.get(la))&&d.add("utmcu",b,r);c||(cc(a,d),Kb(a,d));return d[ia]()},re=function(a,b,c){var d=new Hb;Ib(a,c);Jb(a,d);d.add("utmt","item");d.add("utmtid",b.transId_,r);d.add("utmipc",b.sku_,r);d.add("utmipn",b.name_,r);d.add("utmiva",b.category_,r);d.add("utmipr",b.price_,r);d.add("utmiqt",
b.quantity_,r);fc(a,d);dc(a,d);ec(a,d);(b=a.get(la))&&d.add("utmcu",b,r);c||(cc(a,d),Kb(a,d));return d[ia]()},yd=function(a,b){var c=a.get(Gb);if("page"==c)c=new Hb,Ib(a,b),Jb(a,c),fc(a,c),dc(a,c),ec(a,c),b||(cc(a,c),Kb(a,c)),c=[c[ia]()];else if("event"==c)c=new Hb,Ib(a,b),Jb(a,c),c.add("utmt","event"),fc(a,c),dc(a,c),ec(a,c),b||(cc(a,c),Kb(a,c)),c=[c[ia]()];else if("var"==c)c=new Hb,Ib(a,b),Jb(a,c),c.add("utmt","var"),!b&&Kb(a,c),c=[c[ia]()];else if("trans"==c)for(var c=[],d=a.get(cb),f=0;f<d[v];++f){c[A](qe(a,
d[f],b));for(var g=d[f].items_,h=0;h<g[v];++h)c[A](re(a,g[h],b))}else"social"==c?b?c=[]:(c=new Hb,Ib(a,b),Jb(a,c),c.add("utmt","social"),c.add("utmsn",a.get(Gc),r),c.add("utmsa",a.get(sb),r),c.add("utmsid",a.get($a),r),fc(a,c),dc(a,c),ec(a,c),cc(a,c),Kb(a,c),c=[c[ia]()]):"feedback"==c?b?c=[]:(c=new Hb,Ib(a,b),Jb(a,c),c.add("utmt","feedback"),c.add("utmfbid",a.get(Bd),r),c.add("utmfbpr",a.get(Ic),r),fc(a,c),dc(a,c),ec(a,c),cc(a,c),Kb(a,c),c=[c[ia]()]):c=[];return c},ne=function(a){var b,c=a.get(Ua),
d=a.get(bc),f=d&&d.Ua,g=0;if(0==c||2==c){var h=a.get(Vb)+"?";b=yd(a,r);for(var i=0,j=b[v];i<j;i++)Sc(b[i],f,h,r),g++}if(1==c||2==c){b=yd(a);i=0;for(j=b[v];i<j;i++)try{Sc(b[i],f),g++}catch(k){k&&T(k.name,o,k.message)}}d&&(d.q=g)},se=function(a){this.name="len";this.message=a+"-8192"},te=function(a){this.name="ff2post";this.message=a+"-2036"},Sc=function(a,b,c,d){b=b||h;if(d||2036>=a[v])ue(a,b,c);else if(8192>=a[v]){if(0<=Z.navigator.userAgent[E]("Firefox")&&![].reduce)throw new te(a[v]);ve(a,b)||zd(a,
b)}else throw new se(a[v]);},ue=function(a,b,c){var c=c||(s()||ga.G?"https://ssl.google-analytics.com":"http://www.google-analytics.com")+"/__utm.gif?",d=new Image(1,1);d.src=c+a;d.onload=function(){d.onload=R;d.onerror=R;b()};d.onerror=function(){d.onload=R;d.onerror=R;b()}},ve=function(a,b){var c,d=(s()||ga.G?"https://ssl.google-analytics.com":"http://www.google-analytics.com")+"/p/__utm.gif",f=Z.XDomainRequest;if(f)c=new f,c.open("POST",d);else if(f=Z.XMLHttpRequest)f=new f,"withCredentials"in
f&&(c=f,c.open("POST",d,r),c.setRequestHeader("Content-Type","text/plain"));if(c)return c.onreadystatechange=function(){4==c.readyState&&(b(),c=R)},c.send(a),r},zd=function(a,b){if(L.body){a=y(a);try{var c=L[X]('<iframe name="'+a+'"></iframe>')}catch(d){c=L[X]("iframe"),c.name=a}c.height="0";c.width="0";c.style.display="none";c.style.visibility="hidden";var f=L[aa],f=(s()||ga.G?"https://ssl.google-analytics.com":"http://www.google-analytics.com")+"/u/post_iframe.html#"+y(f[ta]+"//"+f.host+"/favicon.ico"),
g=function(){c.src="";c.parentNode&&c.parentNode.removeChild(c)};Ea(Z,"beforeunload",g);var h=w,i=0,j=function(){if(!h){try{if(9<i||c.contentWindow[aa].host==L[aa].host){h=r;g();var a=Z;a.removeEventListener?a.removeEventListener("beforeunload",g,!1):a.detachEvent&&a.detachEvent("onbeforeunload",g);b();return}}catch(d){}i++;Q(j,200)}};Ea(c,"load",j);L.body.appendChild(c);c.src=f}else be(function(){zd(a,b)},100)},Ya=function(){this.G=this.w=w;this.C={};this.D=[];this.U=0;this.S=[["www.google-analytics.com",
"","/plugins/"]];this._gasoCPath=this._gasoDomain=o;Fd();Gd()};D=Ya[B];D.oa=function(a,b){return this.r(a,o,b)};D.r=function(a,b,c){b&&H(23);c&&H(67);b==o&&(b="~"+ga.U++);a=new K(b,a,c);ga.C[b]=a;ga.D[A](a);return a};D.u=function(a){a=a||"";return ga.C[a]||ga.r(o,a)};D.pa=function(){return ga.D.slice(0)};D.aa=function(){this.w=r};D.la=function(){this.G=r};var Ad=function(a){if("prerender"==L.webkitVisibilityState)return w;a();return r},ga=new Ya;(D=Z._gat)&&c(D._getTracker)?ga=D:Z._gat=ga;var Da=
new Ra;(function(a){if(!Ad(a)){H(123);var b=w,c=function(){if(!b&&Ad(a)){b=r;var d=L,f=c;d.removeEventListener?d.removeEventListener("webkitvisibilitychange",f,!1):d.detachEvent&&d.detachEvent("onwebkitvisibilitychange",f)}};Ea(L,"webkitvisibilitychange",c)}})(function(){var a=Z._gaq,b=w;a&&c(a[A])&&(b="[object Array]"==Object[B][ia].call(Object(a)),!b)?Da=a:(Z._gaq=Da,b&&Da[A].apply(Da,a))})})();var Login=function(){function a(a){admin=new Administrator(a);if(admin.isAdmin())admin.DisplayAdminDivs(),keepAliveStarted==0&&admin.SendKeepAlive(),admin.configureStartButtons(),thisFixture?(populatePitch(thisFixture),populatePitchOdds(thisFixture)):document.URL.toLowerCase().indexOf("fixtures")>0&&GetGameAdminDetails();else if(document.URL.toLowerCase().indexOf("fixtures")>0)alert("You are NOT authorised to view this page - redirecting to homepage!"),window.location.href=location.protocol+"//"+
location.host}function c(a){if(LoginDetailsLoaded==1){var b=$("#TestlayoutSpan").html(),c;try{c=window.sessionStorage.getItem("lim")}catch(d){}if(b){if(b=document.getElementById("PlayLink"))b=document.getElementById("logout"),b.innerHTML="Logout",getPlatform()!=4?$("#logout").show():$("#logout").hide(),c==2?(b.onclick=function(){k()},DoHomePageLoadLogic(),$("#"+displaymode+"_registration_btn").show(),al!=-1&&$(".playnow").show()):b.onclick=function(){FB.logout(function(){k()})},$("#"+displaymode+
"_registration_btn").hide()}else b=document.getElementById("fb-auth"),b.innerHTML="Logout",getPlatform()!=4?$(".fb-auth").show():$(".fb-auth").hide(),c==2?(b.onclick=function(){k()},alreadycalledGameDetails==0&&DoGamePageLoadLogic()):b.onclick=function(){FB.logout(function(){k()})};if(b=document.getElementById("fb-auth2"))b.innerHTML="Logout",getPlatform()!=4?$(".fb-auth").show():$(".fb-auth").hide(),c==2?(b.onclick=function(){g();k()},$("#"+displaymode+"_registration_btn").hide()):b.onclick=function(){FB.logout(function(){g();
k()})};var f;if(a)f=a;else try{f=JSON.parse(window.sessionStorage.getItem("facebookuser"))}catch(h){}if(f&&($(".username").html(f.name),document.getElementById("fbLogin"))){if(a=document.getElementById("image"))a.src="https://graph.facebook.com/"+f.id+"/picture";$("#fbLogin").show();$("#signUp").hide()}}p=1}function g(){getPlatform()!=4?$("#"+displaymode+"_registration_btn").show():$("#"+displaymode+"_registration_btn").hide();if(LoginDetailsLoaded==1&&$("#TestlayoutSpan").html()){var a=document.getElementById("logout");
if(a)a.innerHTML="",$(".logout").hide()}p=0}function d(a,c){a.authResponse?s==0&&(s=1,b(a,c)):($("#signUp").show(),$("#fbLogin").hide(),h(1),g(),CheckForFacebookRequests(0))}function b(b,d){var g=navigator.userAgent.toLowerCase();logError("UserAgent",g);accessToken=b.authResponse.accessToken;var h;try{h=JSON.parse(window.sessionStorage.getItem("facebookuser"))}catch(j){h=null}c(d);g=0;h&&h.id>0&&(g=1);g==0?typeof loginFixtureID!="undefined"&&loginFixtureID!=null&&loginFixtureID>0&&LoginClick==1?window.location.href=
location.protocol+"//"+location.host+"/Game/?f="+loginFixtureID:(h=new User(d),f(h)):($(".flipwarning").show(),homepagefixtureid&&DoHomePageLoadLogic(),g=GetRequestParam("f"),SetUpMainMenuLink(),g>0?(alreadycalledGameDetails==0&&DoGamePageLoadLogic(),GetFriends()):al!=-1&&$(".playnow").show(),a(h),getCurrencyDetails(),CheckForFacebookRequests(1))}function f(b){try{var c=GetCurrentfixtureID();if(c==null||!c)c=loginFixtureID;$.ajax({headers:{"Content-Type":"application/json",Accept:"application/json"},
url:WS_URL_ROOT+"/Login/Login",type:"GET",data:{fbuserid:b.fbuserid,name:b.name,first_name:b.first_name,last_name:b.last_name,link:b.link,locale:b.locale,gender:b.gender,birthday:b.birthday,email:b.email,timezone:b.timezone,verified:b.verified,profilepic:b.profilepic,fixtureid:c},dataType:"json",error:function(a,b,c){AjaxFail("LogUserDetailsV1",a,b,c)},success:function(c){try{if(window.sessionStorage.setItem("facebookuser",$.toJSON(c)),window.sessionStorage.setItem("lim",1),b.userid=c.id,b.credits=
c.credits,b.userid>0){var d=window.location.href,f=GetRequestParam("f");d.indexOf("signup/")>0?window.location.href=location.protocol+"//"+location.host+"/":typeof loginFixtureID!="undefined"&&loginFixtureID!=null&&loginFixtureID>0&&LoginClick==1?window.location.href=location.protocol+"//"+location.host+"/Game/?f="+loginFixtureID:typeof f!="undefined"&&f!=null&&f>0?(alreadycalledGameDetails==0&&DoGamePageLoadLogic(),getCurrencyDetails(),SetUpMainMenuLink(),GetFriends(),a(c)):(a(c),homepagefixtureid&&
DoHomePageLoadLogic(),getCurrencyDetails(),SetUpMainMenuLink(),CheckForFacebookRequests(1),al!=-1&&$(".playnow").show())}}catch(g){logError("LogUserDetailsV1_return",g)}}})}catch(d){logError("LogUserDetailsV1",d)}}function h(a){alreadycalledGameDetails=s=0;try{window.sessionStorage.removeItem("facebookuser")}catch(b){}try{window.sessionStorage.removeItem("facebookuser")}catch(c){}if(a==1){a=-1;if(thisFixture)a=thisFixture.fixtureid;else{var d=GetRequestParam("f");d>0&&(a=d)}if(a>0)$(".flipwarning").hide(),
window.location.href=location.protocol+"//"+location.host+"/"}}function j(){LoginClick=1;s=0;if(IOSversion>0){var a="",a=typeof loginFixtureID!="undefined"&&loginFixtureID!=null&&loginFixtureID>0&&LoginClick==1?location.protocol+"//"+location.host+"/Game/?f="+loginFixtureID:location.protocol+"//"+location.host,a="https://m.facebook.com/dialog/oauth?client_id="+fbid+"&response_type=code&redirect_uri="+encodeURIComponent(a)+"&scope=email";window.location=a}else FB.login(function(a){a.authResponse&&
FB.api("/me",function(b){d(a,b)})},{scope:"email"})}function k(){try{localStorage.removeItem("rm")}catch(a){}try{$.ajax({url:WS_URL_ROOT+"/Login/Logout",type:"POST",error:function(a,b,c){AjaxFail("Logout",a,b,c)},success:function(){}})}catch(b){}g();h(1)}function m(b,d,f,g,h){$.ajax({url:WS_URL_ROOT+"/Login/EmailLogin",type:"POST",data:{e:b,p:d,r:f,rmg:g},error:function(a,b,c){AjaxFail("EmailLogin",a,b,c)},success:function(b){b.id>0?(window.sessionStorage.setItem("facebookuser",$.toJSON(b)),window.sessionStorage.setItem("lim",
2),g?(p=1,c(),SetUpMainMenuLink(),a(user)):(f==1&&b.rm&&localStorage.setItem("rm",b.rm),window.location.href=location.protocol+"//"+location.host+"/Game/?f="+h)):g?(q(),homepagefixtureid&&DoHomePageLoadLogic()):b.id==-102?$("#"+displaymode+"_logindetails").html("Error during login : "+b):$("#"+displaymode+"_logindetails").html("Invalid details!")}})}function q(){$("#signUp").show();$("#fbLogin").hide();al!=-1&&$(".playnow").show();$("#"+displaymode+"_registration_btn").show();h(1);g();CheckForFacebookRequests(0)}
function n(a){$.ajax({url:WS_URL_ROOT+"/Login/CEmail",type:"POST",data:{ch:a},error:function(a,b,c){AjaxFail("CEmail",a,b,c)},success:function(a){if(a&&a.id>0)window.sessionStorage.setItem("facebookuser",$.toJSON(a)),window.sessionStorage.setItem("lim",2),homepagefixtureid?window.location.href=location.protocol+"//"+location.host+"/Game/?f="+homepagefixtureid:GetCurrentfixtureID()>0&&alreadycalledGameDetails==0&&DoGamePageLoadLogic()}})}var s=0,p=-1;return{Register:function(){try{var a=$("#"+displaymode+
"_username").val(),b=$("#"+displaymode+"_pass1").val(),c=$("#"+displaymode+"_pass2").val(),d=$("#"+displaymode+"_email").val();!c||!b||!a|!d?$("#"+displaymode+"_registerdetails").html("You must enter all details!"):d.indexOf("@")<1?$("#"+displaymode+"_registerdetails").html("Invalid email!"):c!=b?$("#"+displaymode+"_registerdetails").html("Passwords do not match!"):$.ajax({url:WS_URL_ROOT+"/Login/REmail",type:"POST",data:{e:d,p:b,u:a},error:function(a,b,c){AjaxFail("REmail",a,b,c)},success:function(a){a==
1||a==-103?($("#"+displaymode+"_register").hide(),$("#"+displaymode+"_confirm").fadeIn()):a==-106?$("#"+displaymode+"_registerdetails").html("You already have a livegames account linked to this email address - login instead!!!!"):a==-102?$("#"+displaymode+"_registerdetails").html("Try another username!"):a==-101?$("#"+displaymode+"_registerdetails").html("This email is already in the system!!!"):a==-104?$("#"+displaymode+"_registerdetails").html("Error generating the confirmation email URL!!!"):a==
-105?$("#"+displaymode+"_registerdetails").html("Error sending the confirmation email URL!!!"):$("#"+displaymode+"_registerdetails").html("Error during registration : "+a)}})}catch(f){}},DoEmailLoginChecks:function(){var a;try{a=JSON.parse(window.sessionStorage.getItem("facebookuser"))}catch(b){}var c=GetRequestParam("ec");try{localStorage.getItem("rm")}catch(d){}a&&a.id>0||c&&n(c)},Login:function(a){try{var b=$("#"+displaymode+"_email_login").val(),c=$("#"+displaymode+"_pass_login").val(),d=0;$("#"+
displaymode+"_rm").attr("checked")&&(d=1);!c||!b?$("#"+displaymode+"_logindetails").html("You must enter all details!"):b.indexOf("@")<1?$("#"+displaymode+"_logindetails").html("Invalid email!"):m(b,c,d,"",a)}catch(f){}},SetUpSiteForLoggedOutUser:h,CallLoginAPI:m,DoLoginFlow:function(b){if(b.authResponse)FB.api("/me",function(a){d(b,a)});else{var f,g=0,h;try{h=localStorage.getItem("rm")}catch(j){}try{if(f=JSON.parse(window.sessionStorage.getItem("facebookuser")))if(f.link){k();return}else g=f.id}catch(n){}if(g>
0)p=1,c(),SetUpMainMenuLink(),a(f);else if(h)m("","",0,h);else if(q(),homepagefixtureid&&DoHomePageLoadLogic(),document.URL.toLowerCase().indexOf("fixtures")>0)alert("You are NOT logged in - we are redirecting to homepage where you can login!"),window.location.href=location.protocol+"//"+location.host}},ClearSessionDetails:k,FaceBookCheckLoginResponse:d,DoFlowForFacebookLoggedInUser:b,CheckIfLoggedIn:function(a){var b;try{b=JSON.parse(window.sessionStorage.getItem("facebookuser"))}catch(c){b=null,
logError("CheckIfLoggedIn",c)}return typeof b!="undefined"&&b!=null&&b.id>0?!0:(loginFixtureID=a,j(),!1)},FaceBookElementsLoaded:function(){LoginDetailsLoaded=1;p==1?c():p==0&&g()},ResendPassword:function(){try{var a=$("#"+displaymode+"_rsemail").val();a?a.indexOf("@")<1?$("#"+displaymode+"_resenddetails").html("Invalid email!"):$.ajax({url:WS_URL_ROOT+"/Login/ResendPassword",type:"POST",data:{e:a},error:function(a,b,c){AjaxFail("ResendPassword",a,b,c)},success:function(a){a>0?($("#"+displaymode+
"_forgotpass").hide(),$("#"+displaymode+"_passResent").fadeIn(),$("#"+displaymode+"_registerdetails").html("Password sent - check your inbox!!")):a==-102?$("#"+displaymode+"_resenddetails").html("Email does not have a login!"):a==-105?$("#"+displaymode+"_resenddetails").html("Error sending email."):$("#"+displaymode+"_resenddetails").html("Password not sent! "+a)}}):$("#"+displaymode+"_resenddetails").html("You must enter your email address!")}catch(b){}},ChangePassword:function(){try{var a=$("#"+
displaymode+"_oldpass").val(),b=$("#"+displaymode+"_newpass").val(),c=JSON.parse(window.sessionStorage.getItem("facebookuser"));!a||!b?$("#"+displaymode+"_cpresult").html("<strong>You must enter both old password and new password</strong>"):$.ajax({url:WS_URL_ROOT+"/Login/ChangePassword",type:"POST",data:{op:a,np:b,u:c.id,fu:c.fbuserid},error:function(a,b,c){AjaxFail("ChangePassword",a,b,c)},success:function(a){a==1?$("#"+displaymode+"_cpresult").html("<strong>Password updated!!!!</strong>"):a==-3?
$("#"+displaymode+"_cpresult").html("Old password not correct!"):$("#"+displaymode+"_cpresult").html("Error during registration : "+a)}})}catch(d){}},goHome:function(){window.location.href=location.protocol+"//"+location.host+"/"}}}();(function(a){var c=function(c,d){this.options=d;this.$element=a(c);this.$container=a("<div/>",{"class":"ms-container"});this.$selectableContainer=a("<div/>",{"class":"ms-selectable"});this.$selectionContainer=a("<div/>",{"class":"ms-selection"});this.$selectableUl=a("<ul/>",{"class":"ms-list",tabindex:"-1"});this.$selectionUl=a("<ul/>",{"class":"ms-list",tabindex:"-1"});this.scrollTo=0;this.sanitizeRegexp=RegExp("\\W+","gi");this.elemsSelector="li:visible:not(.ms-optgroup-label,.ms-optgroup-container,."+
d.disabledClass+")"};c.prototype={constructor:c,init:function(){var c=this,d=this.$element;if(d.next(".ms-container").length===0){d.css({position:"absolute",left:"-9999px"});d.attr("id",d.attr("id")?d.attr("id"):Math.ceil(Math.random()*1E3)+"multiselect");this.$container.attr("id","ms-"+d.attr("id"));d.find("option").each(function(){c.generateLisFromOption(this)});this.$selectionUl.find(".ms-optgroup-label").hide();c.options.selectableHeader&&c.$selectableContainer.append(c.options.selectableHeader);
c.$selectableContainer.append(c.$selectableUl);c.options.selectableFooter&&c.$selectableContainer.append(c.options.selectableFooter);c.options.selectionHeader&&c.$selectionContainer.append(c.options.selectionHeader);c.$selectionContainer.append(c.$selectionUl);c.options.selectionFooter&&c.$selectionContainer.append(c.options.selectionFooter);c.$container.append(c.$selectableContainer);c.$container.append(c.$selectionContainer);d.after(c.$container);c.activeMouse(c.$selectableUl);c.activeKeyboard(c.$selectableUl);
var b=c.options.dblClick?"dblclick":"click";c.$selectableUl.on(b,".ms-elem-selectable",function(){c.select(a(this).data("ms-value"))});c.$selectionUl.on(b,".ms-elem-selection",function(){c.deselect(a(this).data("ms-value"))});c.activeMouse(c.$selectionUl);c.activeKeyboard(c.$selectionUl);d.on("focus",function(){c.$selectableUl.focus()})}d=d.find("option:selected").map(function(){return a(this).val()}).get();c.select(d,"init");typeof c.options.afterInit==="function"&&c.options.afterInit.call(this,
this.$container)},generateLisFromOption:function(c){for(var d=this,b=d.$element,f="",h=a(c),j=0;j<c.attributes.length;j++){var k=c.attributes[j];k.name!=="value"&&(f+=k.name+'="'+k.value+'" ')}c=a("<li "+f+"><span>"+h.text()+"</span></li>");f=c.clone();j=h.val();k=d.sanitize(j,d.sanitizeRegexp);c.data("ms-value",j).addClass("ms-elem-selectable").attr("id",k+"-selectable");f.data("ms-value",j).addClass("ms-elem-selection").attr("id",k+"-selection").hide();if(h.prop("disabled")||b.prop("disabled"))f.addClass(d.options.disabledClass),
c.addClass(d.options.disabledClass);var m=h.parent("optgroup");m.length>0?(k=m.attr("label"),b=d.sanitize(k,d.sanitizeRegexp),h=d.$selectableUl.find("#optgroup-selectable-"+b),j=d.$selectionUl.find("#optgroup-selection-"+b),h.length===0&&(k='<ul class="ms-optgroup"><li class="ms-optgroup-label"><span>'+k+"</span></li></ul>",h=a('<li class="ms-optgroup-container"></li>'),j=a('<li class="ms-optgroup-container"></li>'),h.attr("id","optgroup-selectable-"+b),j.attr("id","optgroup-selection-"+b),h.append(a(k)),
j.append(a(k)),d.options.selectableOptgroup&&(h.find(".ms-optgroup-label").on("click",function(){var b=m.children(":not(:selected)").map(function(){return a(this).val()}).get();d.select(b)}),j.find(".ms-optgroup-label").on("click",function(){var b=m.children(":selected").map(function(){return a(this).val()}).get();d.deselect(b)})),d.$selectableUl.append(h),d.$selectionUl.append(j)),h.children().append(c),j.children().append(f)):(d.$selectableUl.append(c),d.$selectionUl.append(f))},activeKeyboard:function(c){var d=
this;c.on("focus",function(){a(this).addClass("ms-focus")}).on("blur",function(){a(this).removeClass("ms-focus")}).on("keydown",function(b){switch(b.which){case 40:case 38:b.preventDefault();b.stopPropagation();d.moveHighlight(a(this),b.which===38?-1:1);break;case 32:b.preventDefault();b.stopPropagation();d.selectHighlighted(c);break;case 37:case 39:b.preventDefault(),b.stopPropagation(),d.switchList(c)}})},moveHighlight:function(a,c){var b=a.find(this.elemsSelector),f=b.filter(".ms-hover"),h=null,
j=b.first().outerHeight(),k=a.height();this.$container.prop("id");b.off("mouseenter");b.removeClass("ms-hover");c===1?(h=f.nextAll(this.elemsSelector).first(),h.length===0&&(f=f.parent(),f.hasClass("ms-optgroup")?(f=f.parent(),f=f.next(":visible"),h=f.length>0?f.find(this.elemsSelector).first():b.first()):h=b.first())):c===-1&&(h=f.prevAll(this.elemsSelector).first(),h.length===0&&(f=f.parent(),f.hasClass("ms-optgroup")?(f=f.parent(),f=f.prev(":visible"),h=f.length>0?f.find(this.elemsSelector).last():
b.last()):h=b.last()));h.length>0&&(h.addClass("ms-hover"),b=a.scrollTop()+h.position().top-k/2+j/2,a.scrollTop(b))},selectHighlighted:function(a){var c=a.find(this.elemsSelector),b=c.filter(".ms-hover").first();b.length>0&&(a.parent().hasClass("ms-selectable")?this.select(b.data("ms-value")):this.deselect(b.data("ms-value")),c.removeClass("ms-hover"))},switchList:function(a){a.blur();a.parent().hasClass("ms-selectable")?this.$selectionUl.focus():this.$selectableUl.focus()},activeMouse:function(c){var d=
this;c.on("mousemove",function(){var b=c.find(d.elemsSelector);b.on("mouseenter",function(){b.removeClass("ms-hover");a(this).addClass("ms-hover")})})},refresh:function(){this.destroy();this.$element.multiSelect(this.options)},destroy:function(){a("#ms-"+this.$element.attr("id")).remove();this.$element.removeData("multiselect")},select:function(c,d){typeof c==="string"&&(c=[c]);var b=this,f=this.$element,h=a.map(c,function(a){return b.sanitize(a,b.sanitizeRegexp)}),j=this.$selectableUl.find("#"+h.join("-selectable, #")+
"-selectable").filter(":not(."+b.options.disabledClass+")"),h=this.$selectionUl.find("#"+h.join("-selection, #")+"-selection").filter(":not(."+b.options.disabledClass+")"),k=f.find("option:not(:disabled)").filter(function(){return a.inArray(this.value,c)>-1});j.length>0&&(j.addClass("ms-selected").hide(),h.addClass("ms-selected").show(),k.prop("selected",!0),j=b.$selectableUl.children(".ms-optgroup-container"),j.length>0?(j.each(function(){var b=a(this).find(".ms-elem-selectable");b.length===b.filter(".ms-selected").length&&
a(this).find(".ms-optgroup-label").hide()}),b.$selectionUl.children(".ms-optgroup-container").each(function(){a(this).find(".ms-elem-selection").filter(".ms-selected").length>0&&a(this).find(".ms-optgroup-label").show()})):b.options.keepOrder&&(j=b.$selectionUl.find(".ms-selected"),j.length>1&&j.last().get(0)!=h.get(0)&&h.insertAfter(j.last())),d!=="init"&&(f.trigger("change"),typeof b.options.afterSelect==="function"&&b.options.afterSelect.call(this,c)))},deselect:function(c){typeof c==="string"&&
(c=[c]);var d=this,b=this.$element,f=a.map(c,function(a){return d.sanitize(a,d.sanitizeRegexp)}),h=this.$selectableUl.find("#"+f.join("-selectable, #")+"-selectable"),f=this.$selectionUl.find("#"+f.join("-selection, #")+"-selection").filter(".ms-selected"),j=b.find("option").filter(function(){return a.inArray(this.value,c)>-1});f.length>0&&(h.removeClass("ms-selected").show(),f.removeClass("ms-selected").hide(),j.prop("selected",!1),h=d.$selectableUl.children(".ms-optgroup-container"),h.length>0&&
(h.each(function(){a(this).find(".ms-elem-selectable").filter(":not(.ms-selected)").length>0&&a(this).find(".ms-optgroup-label").show()}),d.$selectionUl.children(".ms-optgroup-container").each(function(){a(this).find(".ms-elem-selection").filter(".ms-selected").length===0&&a(this).find(".ms-optgroup-label").hide()})),b.trigger("change"),typeof d.options.afterDeselect==="function"&&d.options.afterDeselect.call(this,c))},select_all:function(){var c=this.$element,d=c.val();c.find('option:not(":disabled")').prop("selected",
!0);this.$selectableUl.find(".ms-elem-selectable").filter(":not(."+this.options.disabledClass+")").addClass("ms-selected").hide();this.$selectionUl.find(".ms-optgroup-label").show();this.$selectableUl.find(".ms-optgroup-label").hide();this.$selectionUl.find(".ms-elem-selection").filter(":not(."+this.options.disabledClass+")").addClass("ms-selected").show();this.$selectionUl.focus();c.trigger("change");typeof this.options.afterSelect==="function"&&this.options.afterSelect.call(this,a.grep(c.val(),
function(b){return a.inArray(b,d)<0}))},deselect_all:function(){var a=this.$element,c=a.val();a.find("option").prop("selected",!1);this.$selectableUl.find(".ms-elem-selectable").removeClass("ms-selected").show();this.$selectionUl.find(".ms-optgroup-label").hide();this.$selectableUl.find(".ms-optgroup-label").show();this.$selectionUl.find(".ms-elem-selection").removeClass("ms-selected").hide();this.$selectableUl.focus();a.trigger("change");typeof this.options.afterDeselect==="function"&&this.options.afterDeselect.call(this,
c)},sanitize:function(a,c){return a.replace(c,"_")}};a.fn.multiSelect=function(){var g=arguments[0],d=arguments;return this.each(function(){var b=a(this),f=b.data("multiselect"),h=a.extend({},a.fn.multiSelect.defaults,b.data(),typeof g==="object"&&g);f||b.data("multiselect",f=new c(this,h));if(typeof g==="string")f[g](d[1]);else f.init()})};a.fn.multiSelect.defaults={selectableOptgroup:!1,disabledClass:"disabled",dblClick:!1,keepOrder:!1};a.fn.multiSelect.Constructor=c})(window.jQuery);
